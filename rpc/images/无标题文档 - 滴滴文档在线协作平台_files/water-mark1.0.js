!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.waterMark=t():e.waterMark=t()}(window,(function(){return t=[function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o="file:"===location.protocol;function r(e,t){return o?(1<arguments.length&&void 0!==t?t:"https")+":"+e:e}var i=r("//shuiyin.sec.xiaojukeji.com/"),a=r("//127.0.0.1:8080/dist/save-hash-iframe.html");t.IFRAME_SRC=a=r("//sec-aegisfe.didistatic.com/static/aegisfe/save-hash-iframe.html"),t.COLLECTION_URL=i+"data_upload",t.GET_UID_URL=i+"get_uid",t.RULES_UPLOAD_URL=i+"rules_upload";var d=t.BRAZIL_URLS=[/99taxis\.mobi/],u=(t.IS_BRAZIL=function(){var e=window.location.href,t=!0,n=!1,o=void 0;try{for(var r,i=d[Symbol.iterator]();!(t=(r=i.next()).done);t=!0)if(r.value.test(e))return!0}catch(e){n=!0,o=e}finally{try{!t&&i.return&&i.return()}finally{if(n)throw o}}return!1}(),t.CUT_LEN=300,t.LCA_PORTS=[18988,18788,18888],t.textConfig={textFont:"24px Menlo, Monaco, 'Microsoft Sans Serif', monospace",textshadowColor:"rgba(0, 0, 0, 0)",textshadowBlur:0,textRotate:30},t.actionMap={removePrintLayer:"remove-print-layer",modifyPrintLayer:"modify-print-layer",removeBodyUserSelect:"remove-body-userSelect",openConsole:"open-console",onbeforeprint:"onbeforeprint",onafterprint:"onafterprint",getEventListeners:"getEventListeners",removeWaterMark:"remove-water-mark",modifyWaterMark:"modify-water-mark",disableWaterMark:"disable-water-mark",replaceBody:"replace-body",copy:"copy",heart:"heart-beat",paste:"paste"},{systemId:"",userId:"",timestamp:"",containerEl:document.body,data:{},imgWidth:0,imgHeight:0,imgWidthDis:50,imgHeightDis:50,textStyle:"rgba(0, 0, 0, 0.15)",fontSize:"24px",zIndex:1e4,time:2500,disableContextMenu:!1,disableSelect:!1,disableCopy:!1,listernerCopy:!0,disableGetEventListeners:!0,disablePrint:!1,elCount:50,printColor:"rgba(0, 0, 0, 0.15)",printCssText:"font-size: 24px;line-height: 100px; width:200px;color:{printColor}",printConCssText:"pointer-events: none; transform: rotate(30deg); display: flex; flex-wrap: wrap; flex-direction: row; width: 100%; height: 100%; top: 0; left: 0; position: fixed; z-index: 1000; opacity:0;",projectName:""});t.ANIMATE_CSS="\n    @keyframes water-fadeIn {\n        from {\n            opacity: 0;\n        }\n\n        to {\n            opacity: 1;\n        }\n    }\n",t.DISABLE_WATER_MSG="检测到你的水印显示异常，请谨慎操作！请联系xiongjian@didichuxing.com",t.WATER_VERSION="3.5.14",t.FP_CANVAS_NAME="user-fingerprint-water-mark",t.IFRAME_SRC=a,t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.md5=t.uuidv4=t.isIPhone=t.getTextWidth=t.debounce=t.extend=t.renderUrl=t.isOpenConsole=t.getSelectionHtml=t.createCookie=t.readCookie=t.isMobile=t.myLocalStorage=t.stopEvent=t.isCanvasSupported=t.sendData=t.SAVE_END_HASH_KEY=t.SAVE_KEY=void 0;var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.disableCopy=function(e){e.addEventListener("copy",(function(e){return e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),!1})),e.addEventListener("keydown",(function(e){var t=e.keyCode,n=e.ctrlKey||e.metaKey;return!(!n||!e.altKey)||!((n&&67===t||n&&88===t)&&(x(e),1))}))},t.disableContextMenu=function(){document.addEventListener("contextmenu",(function(e){return x(e),!1}))},t.addStyleToHead=_,t.disableSelectElFn=function(e){_("\n        .noselect {\n            -webkit-touch-callout: none;\n            -webkit-user-select: none;\n            -khtml-user-select: none;\n            -moz-user-select: none;\n            -ms-user-select: none;\n            user-select: none;\n        }"),e.style.userSelect="none",e.className+=e.className+" noselect"},t.getFormateDate=S,t.getNewUserHash=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:S(),n=arguments[2];try{var o=t+"-"+e+"-"+(n||(0,p.default)());return C.set(g,o),o}catch(o){return t+"-"+e+"-exception-"+(n||(0,p.default)())}},t.updateUserHash=function(e,t){C.set(g,e),C.set(b,t)},t.formatText=function(e){return e.replace(/[\n\r\t]/g," ").replace(/\s{2,}/g," ")};var r=y(n(4)),i=y(n(2)),a=y(n(3)),d=y(n(9)),u=y(n(10)),s=y(n(11)),c=y(n(12)),l=y(n(13)),f=y(n(14)),m=y(n(15)),p=y(n(16)),v=y(n(17));function y(e){return e&&e.__esModule?e:{default:e}}var h,g=t.SAVE_KEY="__hash__wa",b=t.SAVE_END_HASH_KEY="__hash__cache",x=(t.sendData=function(e,t,n,i){"object"===(void 0===t?"undefined":o(t))&&(t=(0,s.default)(t)),(0,r.default)(e+"?"+t,"callback",n,i)},t.isCanvasSupported=!(!(h=document.createElement("canvas")).getContext||!h.getContext("2d")),t.stopEvent=function(e){e.preventDefault&&e.preventDefault(),e.stopImmediatePropagation&&e.stopImmediatePropagation()});function _(e){var t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css","styleSheet"in n?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e)),t.appendChild(n)}function S(){var e=new Date,t=e.getUTCMonth()+1,n=e.getUTCDate();return""+e.getUTCFullYear()+(t=t<10?"0"+t:t)+(n<10?"0"+n:n)}var E,C=t.myLocalStorage={get:function(e){try{var t=localStorage.getItem(e);if(t)return t;var n=(0,i.default)(e);return n&&localStorage.setItem(e,n),n}catch(e){return""}},set:function(e,t){try{localStorage.setItem(e,t),(0,a.default)(e,t,360)}catch(n){try{(0,a.default)(e,t,360)}catch(e){}}}};t.isMobile=!!((E=navigator.userAgent).match(/Android/i)||E.match(/webOS/i)||E.match(/iPhone/i)||E.match(/iPad/i)||E.match(/iPod/i)||E.match(/BlackBerry|PlayBook/i)||E.match(/Mobile/i)||E.match(/Windows Phone/i)),t.readCookie=i.default,t.createCookie=a.default,t.getSelectionHtml=d.default,t.isOpenConsole=u.default,t.renderUrl=s.default,t.extend=c.default,t.debounce=l.default,t.getTextWidth=f.default,t.isIPhone=m.default,t.uuidv4=p.default,t.md5=v.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){for(var t=e+"=",n=document.cookie.split(";"),o=0;o<n.length;o++){for(var r=n[o];" "===r.charAt(0);)r=r.substring(1,r.length);if(0===r.indexOf(t))return r.substring(t.length,r.length)}return null}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var o,r="";n&&((o=new Date).setTime(o.getTime()+24*n*60*60*1e3),r="; expires="+o.toUTCString()),document.cookie=e+"="+t+r+"; path=/"}},function(e,t,n){"use strict";function o(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"callback",n=arguments[2],r=arguments[3],i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:30,a=void 0,d="__getjsonpdata"+o.timer++;e=e+(/\?/.test(e)?"&":"?")+t+"="+d;var u=window;u[d]=function(e){try{n(e)}finally{l()}};var s=document.createElement("script");function c(){l(),r()}s.type="text/javascript",s.charset="utf-8",s.src=e,s.async=!0;var l=function(){window.clearTimeout(a),s.parentNode.removeChild(s),delete u[d]};s.onerror=c,a=window.setTimeout(c,1e3*i),(document.head||document.getElementsByTagName("head")[0]).appendChild(s)}Object.defineProperty(t,"__esModule",{value:!0}),o.timer=1,t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n,a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:function(){},u=void 0;a=Object.assign({action:r.actionMap[t]||""},a);e.url&&(i&&new Date-i<3e5||(n=Object.assign({currentUrl:location.href,systemId:e.systemId,userId:e.userId,version:r.WATER_VERSION,timestamp:e.timestamp||""},a),u=e.data&&0<Object.keys(e.data).length?(0,o.extend)(e.data||{},n):n,(0,o.sendData)(e.url,u,(function(){i=null,d()}),(function(){i=+new Date}))))};var o=n(1),r=n(0),i=void 0},function(e,t,n){"use strict";var o=n(0),r=m(o),i=m(n(7)),a=m(n(4)),d=m(n(8)),u=m(n(5)),s=m(n(18)),c=n(1),l=m(n(19)),f=m(n(21));function m(e){return e&&e.__esModule?e:{default:e}}function p(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var v=!1,y=void 0,h={AgentUuid:"",LocalUserAccount:""};!function(){var e=void 0;if(!c.isMobile){for(var t=0,n=o.LCA_PORTS.length;t<n;t++)e=function(e,t){return function(){(0,i.default)({url:"http://127.0.0.1:"+e+"/lcainfo",method:"GET",success:function(e){try{h=JSON.parse(e)}catch(e){h={AgentUuid:"",LocalUserAccount:""}}},error:function(){t&&t()}})}}(o.LCA_PORTS[t],e);e()}}();var g={childList:!0,attributes:!0,characterData:!0,subtree:!0,attributeOldValue:!0,characterDataOldValue:!0},b=window,x=function(e){var t=void 0,n=void 0,r=void 0,i=1;function a(){n.disconnect(),y.stop()}function d(){r(e),y.start()}e.__id=e.id;var s;r=function(e){e.id=e.__id+i,i++;var r=document.createElement("canvas"),s=(0,c.getTextWidth)(e.text,o.textConfig.textFont);r.width=e.imgWidth?parseInt(""+e.imgWidth,10):s+2-s/20+e.imgWidthDis,r.height=e.imgHeight?parseInt(""+e.imgHeight,10):(s+30)*Math.sin(Math.PI/6)+e.imgHeightDis;var l=r.getContext("2d");l.shadowOffsetX=0,l.shadowOffsetY=0,l.shadowBlur=o.textConfig.textshadowBlur,l.shadowColor=o.textConfig.textshadowColor,l.font=e.textFont,l.fillStyle=e.textStyle,l.rotate(o.textConfig.textRotate*Math.PI/180),l.textAlign="left",l.fillText(e.text,15,7);var m=document.createElement("div");m.setAttribute("id",e.id);var v="pointer-events: none;width:100%!important;height:100%!important;top:"+(e.top||0)+"!important;left:0!important;position:absolute!important;z-index:"+e.zIndex+"!important;opacity:1;display:block!important;visibility:visible!important;animation-duration:.5s;animation-fill-mode:both;animation-name:water-fadeIn;";"BODY"===e.containerEl.tagName&&(v=v.replace("absolute","fixed")),m.style.cssText=v;var y,h=r.toDataURL("image/png");"boolean"!=typeof h||!1!==h?(m.style.cssText+="background:url("+h+") top left repeat!important","BODY"!==e.containerEl.tagName&&"static"===b.getComputedStyle(e.containerEl).position&&(e.containerEl.style.position="relative"),e.containerEl.appendChild(m),r=null,y=document.getElementById(e.id),t=y.outerHTML,f.default&&(n&&(n.disconnect(),n=null),(n=new f.default((function(t){t.forEach((function(t){var n=t.oldValue,o=t.target,r=o;switch(t.type){case"attributes":if(n===r.style.cssText)return;a(),c.isIPhone||(0,u.default)(e,"modifyWaterMark",{"modify-style-props":function(e,t){var n=/;\s+/,o=e.replace(/;$/,"").split(n),r=t.style.cssText.replace(/;$/,"").split(n),i=r.filter((function(e){return-1===o.indexOf(e)})),a=o.filter((function(e){return-1===r.indexOf(e)})),d=[].concat(p(i),p(a)),u=d.map((function(e){return e.split(":")[0]})).join("-");return d.length?u:""}(n,r)}),o.parentNode.removeChild(o),d()}}))}))).observe(y,g))):(0,u.default)(e,"disableWaterMark",{},(function(){return alert(o.DISABLE_WATER_MSG)}))};d(),"js-wartermark"===e.__id&&(s=document.body,y.addMonitor((function(){var t;document.body!==s&&(e.containerEl=s=document.body,(0,u.default)(e,"replaceBody",{"body-replace":"body-replace to stop MutationObserver"}),a(),(t=document.getElementById(e.id)).parentNode.removeChild(t),d())})));var l=f.default?function(){document.getElementById(e.id)||(r(e),(0,u.default)(e,"removeWaterMark"))}:function(){var n=document.getElementById(e.id);n?n.outerHTML!==t&&(n.remove(),r(e),c.isIPhone||(0,u.default)(e,"modifyWaterMark")):(r(e),(0,u.default)(e,"removeWaterMark"))};y.addMonitor(l)};function _(e){v?console.warn("repeat init watermark"):(v=!0,e.url=o.COLLECTION_URL,y=new d.default(e.time),(0,c.addStyleToHead)(o.ANIMATE_CSS),(0,l.default)(e,(function(t){function n(t,n,o){(0,u.default)(e,t,n,o)}(e=(0,c.extend)(r.default,e)).data.fp_canvas=t,function(e,t,n){var r,i;(0,s.default)((function(){var e=h.AgentUuid,t=h.LocalUserAccount;n("heart",{AgentUuid:e,LocalUserAccount:t})})),(e.disableSelect||e.disableSelectEl)&&(e.disableSelectEl=e.disableSelectEl||document.body,(0,c.disableSelectElFn)(e.disableSelectEl)),e.disableContextMenu&&(0,c.disableContextMenu)(),(e.disableCopy||e.disableCopyEl)&&((0,c.disableCopy)(e.disableCopyEl||document.body),e.disableSelect||e.disableSelectEl||(e.disableSelectEl=e.disableSelectEl||document.body,(0,c.disableSelectElFn)(e.disableSelectEl))),e.disablePrint&&(r=void 0,e.printCssText=e.printCssText.replace("{printColor}",e.printColor),(i=function(){for(var t=document.createDocumentFragment(),n=e.elCount,o=void 0;n--;)(o=document.createElement("span")).style.cssText=e.printCssText,o.innerHTML=e.text,t.appendChild(o);var i=document.createElement("div");i.style.cssText=e.printConCssText,i.setAttribute("id","js-print-con"),i.appendChild(t),document.body.appendChild(i),r=i.outerHTML.replace(/\s*(opacity):\s*0;/,"")})(),t.addMonitor((function(){var e=document.getElementById("js-print-con");e?e.outerHTML.replace(/\s*(opacity):\s*0;/,"")!==r&&(n("modifyPrintLayer"),e.parentNode.removeChild(e),i()):(n("removePrintLayer"),i())}))),document.addEventListener("copy",(function(){var e=(0,c.formatText)(((0,c.getSelectionHtml)()||"").trim()),t=e.length;e&&n("copy",{copyText:t>o.CUT_LEN?e.slice(0,o.CUT_LEN-100)+"--前后拼接--"+e.slice(200-o.CUT_LEN):e,copyTextLen:t,copyHash:(0,c.md5)(e)})})),document.addEventListener("paste",(function(e){for(var t=0,r=e.clipboardData.items.length;t<r;t++){var i=e.clipboardData.items[t];"text/plain"===i.type&&i.getAsString((function(e){var t=(0,c.formatText)(e.trim()),r=t.length;n("paste",{pasteText:r>o.CUT_LEN?t.slice(0,o.CUT_LEN-100)+"--前后拼接--"+t.slice(200-o.CUT_LEN):t,pasteTextLen:r,pasteHash:(0,c.md5)(t)})}))}})),(e.disableSelect||e.disableSelectEl||e.disableCopy)&&t.addMonitor((function(){(e.disableSelect||e.disableSelectEl)&&"none"!==e.disableSelectEl.style.userSelect&&(e.disableSelectEl.style.userSelect="none",n("removeBodyUserSelect"))}));var a=b.matchMedia("print");function d(){(0,c.isOpenConsole)()&&n("openConsole")}a&&a.addListener((function(e){var t=document.getElementById("js-print-con");t&&(t.style.opacity=e.matches?"1":"0"),e.matches?n("onbeforeprint"):n("onafterprint")})),e.disableGetEventListeners&&(b.getEventListeners=function(){return n("getEventListeners"),{}}),b.addEventListener("resize",(0,c.debounce)(d,2e3),!1),d()}(e,y,n),c.isCanvasSupported?(function(e){/^\d+$/.test(e.text)&&(e.text=parseInt(e.uid,10).toString(32)+parseInt(""+e.timestamp,10).toString(32),e.projectName&&(e.text=e.projectName+"-"+e.text)),o.IS_BRAZIL&&(e.text+="z")}(e),e.fontSize&&(o.textConfig.textFont=e.fontSize+" Menlo, Monaco, 'Microsoft Sans Serif', monospace"),x((0,c.extend)(e,{id:"js-wartermark",textFont:o.textConfig.textFont})),x((0,c.extend)(e,{id:"js-wartermarkhd",textFont:o.textConfig.textFont,textStyle:"rgba(255, 0, 0, 0.01)",containerEl:document.body,top:"30px",imgWidthDis:10,imgHeightDis:10}))):n("disableWaterMark",{},(function(){return alert(o.DISABLE_WATER_MSG)}))})))}function S(e){e.timestamp=(0,c.getFormateDate)(),e.containerEl=e.containerEl||document.body;var t=o.GET_UID_URL+"?system_id="+e.systemId+"&user_id="+e.userId+"&fp_canvas="+c.myLocalStorage.get(c.SAVE_KEY);(0,a.default)(t,"callback",(function(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};0===n.errno&&n.data&&n.data.uid?(e.timestamp=n.data.timestamp||e.timestamp,e.text=n.data.uid+e.timestamp,e.uid=n.data.uid):(console.error(t+" error\n errmsg:"+n.errmsg),e.text=e.systemId+e.userId+e.timestamp),_(e)}),(function(){console.error(t+" error"),e.text=e.systemId+e.userId+e.timestamp,_(e)}),10)}function E(e){var t=0<arguments.length&&void 0!==e?e:{systemId:"",userId:""};if(t.systemId&&t.userId){if(v)return console.warn("repeat init"),"不要反复初始话";var n=function e(){document.removeEventListener("DOMContentLoaded",e,!1),b.removeEventListener("load",e,!1),S(t)};"complete"===document.readyState?setTimeout((function(){return S(t)})):(document.addEventListener("DOMContentLoaded",n,!1),b.addEventListener("load",n,!1))}else console.warn("必须指定： systemId userId ")}E.version=o.WATER_VERSION,e.exports=E},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={method:"GET",url:"",data:{},success:function(){},error:function(){}};t.default=function(e){var t=Object.assign(o,e),n=void 0,r=(n=XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),[]);for(var i in t.data)t.data.hasOwnProperty(i)&&r.push(i+"="+t.data[i]);var a=r.join("&");"GET"===t.method.toUpperCase()?(n.open(e.method,e.url+"?"+a,!0),n.send(null)):"POST"===e.method.toUpperCase()&&(n.open(e.method,e.url,!0),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),n.send(a)),n.onreadystatechange=function(){4==n.readyState&&(200<=n.status&&n.status<300||304==n.status?e.success(n.responseText):e.error(n.status,n.statusText,n.responseText))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.monitors=[],this.timmer=null,this.time=t||2e3,this.isStop=!1}return t=e,(n=[{key:"addMonitor",value:function(e){return this.monitors.push(e),this}},{key:"done",value:function(){return this.isStop?clearTimeout(this.timmer):(this.monitors.forEach((function(e){e()})),this.timmer=setTimeout(this.done.bind(this),this.time)),this}},{key:"start",value:function(){return this.timmer=setTimeout(this.done.bind(this),this.time),this.isStop=!1,this}},{key:"stop",value:function(){return this.isStop=!0,clearTimeout(this.timmer),this}}])&&o(t.prototype,n),r&&o(t,r),e;var t,n,r}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e,t="";return void 0!==window.getSelection?t=window.getSelection().toString():"selection"in document&&"Text"===(e=document).selection.type&&(t=e.selection.createRange().text),t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=!(t.default=function(){var e=200<window.outerWidth-window.innerWidth,t=200<window.outerHeight-window.innerHeight,n=window;if(t&&e||!(n.Firebug&&n.Firebug.chrome&&n.Firebug.chrome.isInitialized||e||t)){if(o)return o=!1}else if(!o)return o=!0;return!1})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=function(e){var t="";if("object"===(void 0===e?"undefined":o(e))){for(var n in e)t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n])+"&";t=t.replace(/&$/,"")}return t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){for(var e={},t=Object.prototype.toString,n=arguments.length,o=Array(n),r=0;r<n;r++)o[r]=arguments[r];var i=!0,a=!1,d=void 0;try{for(var u,s=o[Symbol.iterator]();!(i=(u=s.next()).done);i=!0)!function(n){null!==n&&"[object Object]"===t.call(n)&&Object.keys(n).forEach((function(t){e[t]=n[t]}))}(u.value)}catch(e){a=!0,d=e}finally{try{!i&&s.return&&s.return()}finally{if(a)throw d}}return e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){function n(){(u=new Date-a)<t&&0<=u?o=setTimeout(n,t-u):(o=null,d=e.apply(i,r),o||(i=r=null))}var o=void 0,r=void 0,i=void 0,a=void 0,d=void 0,u=void 0;return function(){return i=this,r=arguments,a=+new Date,o=o||setTimeout(n,t),d}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=document.createElement("canvas").getContext("2d");return n.font=t,n.measureText(e).width}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=!!navigator.userAgent.match(/iPhone/i);t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}},function(e,t,n){"use strict";function o(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function r(e,t,n,r,i,a){return o((d=o(o(t,e),o(r,a)))<<(u=i)|d>>>32-u,n);var d,u}function i(e,t,n,o,i,a,d){return r(t&n|~t&o,e,t,i,a,d)}function a(e,t,n,o,i,a,d){return r(t&o|n&~o,e,t,i,a,d)}function d(e,t,n,o,i,a,d){return r(t^n^o,e,t,i,a,d)}function u(e,t,n,o,i,a,d){return r(n^(t|~o),e,t,i,a,d)}function s(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;var n=void 0,r=void 0,s=void 0,c=void 0,l=void 0,f=1732584193,m=-271733879,p=-1732584194,v=271733878;for(n=0;n<e.length;n+=16)f=i(r=f,s=m,c=p,l=v,e[n],7,-680876936),v=i(v,f,m,p,e[n+1],12,-389564586),p=i(p,v,f,m,e[n+2],17,606105819),m=i(m,p,v,f,e[n+3],22,-1044525330),f=i(f,m,p,v,e[n+4],7,-176418897),v=i(v,f,m,p,e[n+5],12,1200080426),p=i(p,v,f,m,e[n+6],17,-1473231341),m=i(m,p,v,f,e[n+7],22,-45705983),f=i(f,m,p,v,e[n+8],7,1770035416),v=i(v,f,m,p,e[n+9],12,-1958414417),p=i(p,v,f,m,e[n+10],17,-42063),m=i(m,p,v,f,e[n+11],22,-1990404162),f=i(f,m,p,v,e[n+12],7,1804603682),v=i(v,f,m,p,e[n+13],12,-40341101),p=i(p,v,f,m,e[n+14],17,-1502002290),f=a(f,m=i(m,p,v,f,e[n+15],22,1236535329),p,v,e[n+1],5,-165796510),v=a(v,f,m,p,e[n+6],9,-1069501632),p=a(p,v,f,m,e[n+11],14,643717713),m=a(m,p,v,f,e[n],20,-373897302),f=a(f,m,p,v,e[n+5],5,-701558691),v=a(v,f,m,p,e[n+10],9,38016083),p=a(p,v,f,m,e[n+15],14,-660478335),m=a(m,p,v,f,e[n+4],20,-405537848),f=a(f,m,p,v,e[n+9],5,568446438),v=a(v,f,m,p,e[n+14],9,-1019803690),p=a(p,v,f,m,e[n+3],14,-187363961),m=a(m,p,v,f,e[n+8],20,1163531501),f=a(f,m,p,v,e[n+13],5,-1444681467),v=a(v,f,m,p,e[n+2],9,-51403784),p=a(p,v,f,m,e[n+7],14,1735328473),f=d(f,m=a(m,p,v,f,e[n+12],20,-1926607734),p,v,e[n+5],4,-378558),v=d(v,f,m,p,e[n+8],11,-2022574463),p=d(p,v,f,m,e[n+11],16,1839030562),m=d(m,p,v,f,e[n+14],23,-35309556),f=d(f,m,p,v,e[n+1],4,-1530992060),v=d(v,f,m,p,e[n+4],11,1272893353),p=d(p,v,f,m,e[n+7],16,-155497632),m=d(m,p,v,f,e[n+10],23,-1094730640),f=d(f,m,p,v,e[n+13],4,681279174),v=d(v,f,m,p,e[n],11,-358537222),p=d(p,v,f,m,e[n+3],16,-722521979),m=d(m,p,v,f,e[n+6],23,76029189),f=d(f,m,p,v,e[n+9],4,-640364487),v=d(v,f,m,p,e[n+12],11,-421815835),p=d(p,v,f,m,e[n+15],16,530742520),f=u(f,m=d(m,p,v,f,e[n+2],23,-995338651),p,v,e[n],6,-198630844),v=u(v,f,m,p,e[n+7],10,1126891415),p=u(p,v,f,m,e[n+14],15,-1416354905),m=u(m,p,v,f,e[n+5],21,-57434055),f=u(f,m,p,v,e[n+12],6,1700485571),v=u(v,f,m,p,e[n+3],10,-1894986606),p=u(p,v,f,m,e[n+10],15,-1051523),m=u(m,p,v,f,e[n+1],21,-2054922799),f=u(f,m,p,v,e[n+8],6,1873313359),v=u(v,f,m,p,e[n+15],10,-30611744),p=u(p,v,f,m,e[n+6],15,-1560198380),m=u(m,p,v,f,e[n+13],21,1309151649),f=u(f,m,p,v,e[n+4],6,-145523070),v=u(v,f,m,p,e[n+11],10,-1120210379),p=u(p,v,f,m,e[n+2],15,718787259),m=u(m,p,v,f,e[n+9],21,-343485551),f=o(f,r),m=o(m,s),p=o(p,c),v=o(v,l);return[f,m,p,v]}function c(e){var t=void 0,n="",o=32*e.length;for(t=0;t<o;t+=8)n+=String.fromCharCode(e[t>>5]>>>t%32&255);return n}function l(e){var t=void 0,n=[];for(n[(e.length>>2)-1]=void 0,t=0;t<n.length;t+=1)n[t]=0;var o=8*e.length;for(t=0;t<o;t+=8)n[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return n}function f(e){var t="",n=void 0,o=void 0;for(o=0;o<e.length;o+=1)n=e.charCodeAt(o),t+="0123456789abcdef".charAt(n>>>4&15)+"0123456789abcdef".charAt(15&n);return t}function m(e){return unescape(encodeURIComponent(e))}function p(e){return function(e){return c(s(l(e),8*e.length))}(m(e))}function v(e,t){return function(e,t){var n,o=void 0,r=l(e),i=[],a=[];for(i[15]=a[15]=void 0,16<r.length&&(r=s(r,8*e.length)),o=0;o<16;o+=1)i[o]=909522486^r[o],a[o]=1549556828^r[o];return n=s(i.concat(l(t)),512+8*t.length),c(s(a.concat(n),640))}(m(e),m(t))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){return t?(n?v:function(e,t){return f(v(e,t))})(t,e):(n?p:function(e){return f(p(e))})(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:18e5,n=!0,o=(new Date).getTime(),r=void 0,i=document;function a(i){i&&(o=(new Date).getTime(),e()),clearTimeout(r);var d=(new Date).getTime();n&&t<=d-o&&(o=(new Date).getTime(),e()),r=setTimeout(a,t)}function d(){a(n=!0)}function u(){n=!1,clearTimeout(r)}var s="hidden",c=void 0;s in document?c="visibilitychange":(s="mozHidden")in document?c="mozvisibilitychange":(s="webkitHidden")in document?c="webkitvisibilitychange":(s="msHidden")in document&&(c="msvisibilitychange"),void 0===i[s]?(window.onfocus=d,window.onblur=u):document.addEventListener(c,(function(){return(i[s]?u:d)()}),!1),a(!0)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),r=n(0),i=d(n(5)),a=d(n(20));function d(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t){var n=(0,o.extend)(e,{version:r.WATER_VERSION});function d(){var a;clearTimeout(u),s||(e.data&&e.data.fp_canvas&&(a=e.data.fp_canvas,(0,o.readCookie)(r.FP_CANVAS_NAME)!==a&&(0,o.createCookie)(r.FP_CANVAS_NAME,a,360),t(e.data.fp_canvas)),s=!0,(0,i.default)(Object.assign({},e,{url:r.RULES_UPLOAD_URL}),"",n))}n.containerEl&&(n.containerEl=String(e.containerEl));var u=void 0,s=!1;u=setTimeout(d,5e3);(0,a.default)(e,d)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){},n=document.createElement("iframe"),i=document.createElement("a");i.href=o.IFRAME_SRC,window.addEventListener("message",(function(o){var a,d,u,s=o.data,c=void 0===s?{}:s,l=o.origin;l!=="http://"+i.host&&l!=="https://"+i.host||(a=c.userHash,u={},(d=c.oldEndHash)&&"undefined"!==d||(d=u.oldEndHash=(0,r.uuidv4)()),a&&"undefined"!==a||(a=(0,r.getNewUserHash)(e.systemId+"-"+e.userId,e.timestamp,d),u.userHash=a),e.data=(0,r.extend)(e.data||{},{fp_canvas:a}),Object.keys(u).length&&n.contentWindow.postMessage(u,"*"),(0,r.updateUserHash)(a,d),t(),setTimeout((function(){try{n.parentNode.removeChild(n)}catch(e){}}),2e3))}),!1),n.setAttribute("id","js-watermark-iframe"),n.setAttribute("src",o.IFRAME_SRC),n.style.width="0",n.style.height="0",n.style.visibility="hidden",document.body.appendChild(n)};var o=n(0),r=n(1)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=window;t.default=o.MutationObserver||o.WebKitMutationObserver||o.MozMutationObserver}],n={},e.m=t,e.c=n,e.d=function(t,n,o){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:o})},e.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(e.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var r in t)e.d(o,r,function(e){return t[e]}.bind(null,r));return o},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},e.p="",e(e.s=6);function e(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var t,n}));