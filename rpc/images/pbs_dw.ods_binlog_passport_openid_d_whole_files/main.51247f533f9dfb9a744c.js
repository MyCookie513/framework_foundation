!function(e){function t(t){for(var l,r,u=t[0],s=t[1],o=t[2],c=0,m=[];c<u.length;c++)r=u[c],Object.prototype.hasOwnProperty.call(n,r)&&n[r]&&m.push(n[r][0]),n[r]=0;for(l in s)Object.prototype.hasOwnProperty.call(s,l)&&(e[l]=s[l]);for(d&&d(t);m.length;)m.shift()();return i.push.apply(i,o||[]),a()}function a(){for(var e,t=0;t<i.length;t++){for(var a=i[t],l=!0,u=1;u<a.length;u++){var s=a[u];0!==n[s]&&(l=!1)}l&&(i.splice(t--,1),e=r(r.s=a[0]))}return e}var l={},n={3:0},i=[];function r(t){if(l[t])return l[t].exports;var a=l[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.e=function(){return Promise.resolve()},r.m=e,r.c=l,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var l in e)r.d(a,l,function(t){return e[t]}.bind(null,l));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="//img-ys011.didistatic.com/static/bp_fe_prod/data_studio_fe_data_map/gn/",r.oe=function(e){throw console.error(e),e};var u=window.webpackJsonp=window.webpackJsonp||[],s=u.push.bind(u);u.push=t,u=u.slice();for(var o=0;o<u.length;o++)t(u[o]);var d=s;i.push([1291,4,2,1,0,5,6]),a()}(Array(26).concat([function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=l(a(1e3));a(1596),a(1600),a(325),a(1609),a(1004),a(1003),a(1231),a(1622),a(1625),a(1628),a(1005),a(517);const i=a(555);t.useForm=i.useForm,a(1633),a(1636),a(1639),a(1642),a(1647),a(1650),a(1006),a(1655),a(1007),a(1008),a(1009),a(1002),a(516),a(1664),a(1010),a(1669),a(1672),a(1001),a(1675),a(518),a(1678),a(1681),a(1011),t.IconFont=n.default({scriptUrl:"//at.alicdn.com/t/font_1750661_ilozf61ndh.js"});var r=a(264);t.Alert=r.default;var u=a(82);t.Button=u.default;var s=a(795);t.Card=s.default;var o=a(222);t.Checkbox=o.default;var d=a(229);t.Col=d.default;var c=a(421);t.DatePicker=c.default;var m=a(790);t.Descriptions=m.default;var f=a(641);t.Divider=f.default;var p=a(371);t.Drawer=p.default;var _=a(304);t.Dropdown=_.default;var h=a(191);t.Empty=h.default;var g=a(220);t.Form=g.default;var E=a(162);t.Input=E.default;var b=a(796);t.InputNumber=b.default;var v=a(164);t.Menu=v.default;var y=a(810);t.SubMenu=y.default;var T=a(476);t.message=T.default;var N=a(372);t.Modal=N.default;var S=a(305);t.Pagination=S.default;var C=a(361);t.Popconfirm=C.default;var x=a(414);t.Popover=x.default;var w=a(373);t.Progress=w.default;var I=a(334);t.Radio=I.default;var L=a(308);t.Row=L.default;var O=a(163);t.Select=O.default;var P=a(643);t.Space=P.default;var M=a(118);t.Spin=M.default;var k=a(789);t.Statistic=k.default;var D=a(799);t.Switch=D.default;var A=a(161);t.Table=A.default;var j=a(335);t.Tabs=j.default;var F=a(477);t.Tag=F.default;var R=a(644);t.TimePicker=R.default;var H=a(149);t.Tooltip=H.default;var U=a(791);t.Tree=U.default;var B=a(783);t.TreeSelect=B.default;var q=a(784);t.Upload=q.default},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";var l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=a(30),i=a(98),r=l(a(0)),u=a(19);t.useReadCountDown=(e,t=!1,a=3)=>{const[l,n]=r.useState(a),i=r.useCallback(()=>n(a),[a]);return r.useEffect(()=>{let a=!1,i=null;if(t)return l<=0?localStorage.setItem(e,String(Date.now())):(Date.now()-6048e5<=Number(localStorage.getItem(e)||null)?window.setTimeout(()=>!a&&n(0),0):i=window.setTimeout(()=>!a&&n(l-1),1e3),()=>{a=!0,i&&window.clearTimeout(i)})},[t,l,e]),[l,i]},t.useShowTotal=()=>e=>{const t=n.humanNum(e,{useGrouping:!0});return r.default.createElement(u.Trans,{i18nKey:"common:共条",values:{total:t}},"共",""+t,"条")},t.usePagination=e=>{const a=t.useShowTotal();return!!e&&{...i.PAGE_CONFIG,showTotal:a}},t.useRequest=function(e,t){const[a,l]=r.useState(!1),[n,i]=r.useState(""),[u,s]=r.useState(null);return r.useEffect(()=>{(async()=>{l(!0);try{const a=await e(t);s(a),i("")}catch(e){i(e.message)}l(!1)})()},[e,t]),{loading:a,errMsg:n,data:u}}},,,,,,,,function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=l(a(0));t.ExternalLink=e=>{const{wikiPageId:t,className:a,style:l={},children:i}=e;let{href:r}=e;return!r&&t&&(r="http://wiki.intra.xiaojukeji.com/pages/viewpage.action?pageId="+t),r?n.default.createElement("a",{className:a,onClick:e.onClick,"auto-track-click":e["auto-track-click"],style:l,target:"_blank",href:r,rel:e.withReferrer?null:"noopener noreferrer"},i):n.default.createElement("span",{className:a},i)}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const l=a(30);t.AdminList=["keyoumou"],t.CategoryAdminList=["meixi","keyoumou","liluyang","sophialixiaofei","cuijianchen","wangfengjin","jiangjinsheng","zhuxiaojian","clarkchenwei","qixin","zhongguolin","lixiaohuan","zhangmengqin"],t.isAdmin=t.AdminList.includes(l.getUsername()),t.isCategoryAdmin=t.CategoryAdminList.includes(l.getUsername()),t.PAGE_SIZE=10,t.PAGE_CONFIG={defaultPageSize:t.PAGE_SIZE,showTotal:e=>`共${l.humanNum(e,{useGrouping:!0})}条`,showSizeChanger:!0,pageSizeOptions:["10","20","40","100","200"]},function(e){e.PROD="PROD",e.DEV="DEV"}(t.ENV_TYPE||(t.ENV_TYPE={})),function(e){e.MANAGED_TABLE="MANAGED_TABLE",e.EXTERNAL_TABLE="EXTERNAL_TABLE",e.VIRTUAL_VIEW="VIRTUAL_VIEW",e.INDEX_TABLE="INDEX_TABLE"}(t.TABLE_TYPE||(t.TABLE_TYPE={})),t.WAIT=t.isAdmin,function(e){e.HIVE="HIVE",e.STREAM="STREAM",e.MYSQL="MYSQL"}(t.SEARCH_TABLE_TYPE||(t.SEARCH_TABLE_TYPE={})),t.ONLINE_TABLE=1,t.OFFLINE_TABLE=2},,,,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const l=a(26),n=a(199);function i(e,t){return`hive://mycluster-tj:${e}:${t}`}function r(e,t){return`stream://${e}:${t}`}t.getTableWidth=function(e,t=0,a=0){return e.reduce((e,t)=>e+(t.width||a),t)},t.generateUri=i,t.generateStreamUri=r,t.generateUriByType=function(e,t,a){return a==n.SearchType.STREAM?r(e,t):a==n.SearchType.HIVE?i(e,t):void 0},t.getDetailUrlByType=function(e){return e==n.SearchType.STREAM?"/detail/stream":e==n.SearchType.HIVE?"/detail":e==n.SearchType.MYSQL?"/detail/mysql":void 0},t.getDbTableFromUri=function(e){if(!e)return{};const t=e.split(":");return{dbName:t[2],tableName:t[3],columnName:t[4]}},t.develop=function(){l.message.info("正在开发中...")},t.uuid=function(){return`${Math.random().toString(36).substr(2)}_${Date.now()}`};const u=e=>Object.prototype.toString.call(e).slice(8,-1);t.deepCopy=e=>{let a=null;if("Array"===u(e))a=[];else{if("Object"!==u(e))return e;a={}}for(const l in e)"Object"===u(e[l])||"Array"===u(e[l])?a[l]=t.deepCopy(e[l]):a[l]=e[l];return a}},,,function(e,t,a){"use strict";var l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=a(30),i=a(181),r=a(760),u=a(148),s=l(a(0)),o=a(143),d=a(103),c=a(465);t.HiveDetailContext=s.default.createContext(null),t.HiveDetailDispatchContext=s.default.createContext(null),t.HiveDetailProvider=e=>{var a;const{prevLocation:l}=e,m=n.getQuery("id"),{dbName:f,tableName:p,columnName:_}=d.getDbTableFromUri(n.getQuery("uri")),[h,g]=s.useState(_),[E,b]=s.useState(d.generateUri(f,p)),[v,y]=s.useState(!1),[T,N]=s.useState(""),[S,C]=s.useReducer(c.HiveDetailReducer,null),[x,w]=s.useState(()=>{const e=n.getQuery("tab"),t=Object.values(r.IHiveDetailTab);return e&&t.includes(e)?e:r.IHiveDetailTab.INFO}),[I,L]=s.useState(!1),O=o.useLocation(),P=null===(a=O.state)||void 0===a?void 0:a.referer,M=s.useMemo(()=>{if(P)return P;try{const{host:e,pathname:t}=new URL(document.referrer);if(e.startsWith("datamap"))return"/search"===t?u.RefererType.SEARCH:u.RefererType.INNER}catch(e){}return u.RefererType.EXTERNAL},[P]);s.useEffect(()=>{if("/detail"===(null==l?void 0:l.pathname)){const e=new URLSearchParams(l.search),t=new URLSearchParams(O.search).get("uri"),{dbName:a,tableName:i,columnName:u}=d.getDbTableFromUri(t);if(u&&g(u),b(d.generateUri(a,i)),t!==e.get("uri")){let e=r.IHiveDetailTab.INFO;const t=n.getQuery("tab"),a=Object.values(r.IHiveDetailTab);t&&a.includes(t)&&(e=t),w(e)}}},[l,O]),s.useEffect(()=>{if(!E)return;if(m)return;let e=!1;return(async()=>{try{N(""),y(!0);const t=await i.v1TableDetailApi.tableInfo(E,M);if(e)return;C({type:c.HIVE_TABLE_ACTION_TYPES.INIT,init:t})}catch(t){if(e)return;N(t.message)}y(!1)})(),()=>e=!0},[E,C,M,m]);const k=s.useCallback(async()=>{N(""),y(!0);try{const e=await i.v1TableDetailApi.tableInfo(E,M);C({type:c.HIVE_TABLE_ACTION_TYPES.INIT,init:e})}catch(e){N(e.message)}y(!1)},[E,M]),D=s.useMemo(()=>({loading:v,errorMessage:T,fetchDetail:k,detail:S,sharedColumnName:h,uri:(null==S?void 0:S.uri)||n.getQuery("uri"),tableId:null==S?void 0:S.tableId,tab:x,changeNpsVisible:I,setChangeNpsVisible:L,setTab:(e,t)=>{w(e),n.updateQuery({tab:e===r.IHiveDetailTab.INFO?null:e,viewMode:null,subTab:t||null})}}),[v,T,k,S,h,x,I]);return s.default.createElement(t.HiveDetailContext.Provider,{value:D},s.default.createElement(t.HiveDetailDispatchContext.Provider,{value:C},e.children))}},,,,,,,,,,,,,,function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=l(a(4)),i=a(26),r=l(a(0)),u=a(19);t.DChat=e=>{var t;const{t:a}=u.useTranslation();return e.user&&(null===(t=e.user)||void 0===t?void 0:t.account)?"system"===e.user.account?r.default.createElement("span",null,a("detail:系统变更")):r.default.createElement("a",{className:n.default(e.className,"normal-d-chat"),href:"dchat://im/start_conversation?name="+e.user.account},r.default.createElement("span",null,e.user.name||e.user.account,r.default.createElement(i.IconFont,{type:"icon-d-chat"}))):r.default.createElement("span",null,"-")}},,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const l=a(30),n=a(166),i=a(206),r=a(103),u=a(160);function s(e){for(const t in e)null!==e[t]&&""!==e[t]||delete e[t]}t.delete_null=s,t.v1SearchApi={async searchHiveReminder(e=""){const t=await u.get("meta/hive/reminder"+(e?"?keyword="+e:""));for(const e of t.records)e.uri=e.historyKeywords?null:r.generateUri(e.dbName,e.tableName),e.label=e.historyKeywords||`${e.dbName}.${e.tableName}`;return t},async searchHive(e=null,t){const a="meta/hive/search?searchSessionId="+t,s=await u.request(i.POST,a,e);for(const e of s.records)e.lastUpdateTimeLabel=n.humanDate(e.lastUpdateTime),e.usedTimesLabel=l.humanNum(e.usedTimes,{useGrouping:!0}),e.uri=r.generateUri(e.dbName,e.tableName);return s.projectInfo?(s.projectInfo.lastUpdateTimeLabel=n.humanDate(s.projectInfo.lastUpdateTime),s):s},aggregationHive:(e=null)=>u.request(i.POST,"meta/hive/aggregation",e,{}),tableCountCommon:e=>u.get("common/count",{keyword:e}),smooth:e=>u.get("meta/hive/smooth",e),searchLog:e=>u.get("meta/hive/searchLog",e),aggregationStream:(e=null)=>u.request(i.POST,"meta/stream/aggregation",e),async searchStream(e=null,t){const a="meta/stream/search?searchSessionId="+t,l=await u.request(i.POST,a,e);for(const e of l.records)e.createTimeLabel=n.humanDate(e.createTime);return l},searchLogStream:e=>u.get("meta/stream/searchLog",e),async searchStreamReminder(e=""){const t=await u.get("meta/stream/reminder"+(e?"?keyword="+e:""));for(const e of t.records)e.label=e.historyKeywords||`${e.dbName}.${e.tableName}`;return t},aggregationMysql:(e=null)=>u.request(i.POST,"mysql/aggregation",e),async searchMysql(e=null,t){const a="mysql/search?searchSessionId="+t,l=await u.request(i.POST,a,e);for(const e of l.records)e.createTimeLabel=n.humanDate(e.createTime);return l},searchLogMysql:e=>u.get("meta/hive/searchLog",e),async searchMysqlReminder(e=""){const t=await u.get("mysql/reminder"+(e?"?keyword="+e:""));for(const e of t.records)e.label=e.historyKeywords||`${e.dbName}.${e.tableName}`;return t},aggregationMetric:async(e=null)=>u.request(i.POST,"metric/aggregation",e),searchMetric:async(e=null)=>u.request(i.POST,"metric/search",e),aggregationLog:async(e=null)=>u.request(i.POST,"publicLog/aggregation",e),async searchPublicLog(e=null){var t;if(!e)return;const{sessionId:a}=e,l=await u.request(i.POST,"publicLog/search?searchSessionId="+a,e);return null===(t=l.records)||void 0===t||t.forEach(e=>{e.createTimeLabel=n.humanDate(e.createTime)}),l},async searchMetricReminder(e=""){const t=await u.get("metric/reminder",{keyword:e});for(const e of t.records)e.label=e.historyKeywords||`${e.dbName}.${e.tableName}`;return t},async searchPublicLogReminder(e=""){const t=await u.get("publicLog/reminder",{keyword:e});for(const e of t.records)e.label=e.historyKeywords||`${e.dbName}.${e.tableName}`;return t},async searchTracking(e){delete e.md5;return await u.request(i.POST,"omega/search",e)},aggregationTracking:(e=null)=>u.request(i.POST,"omega/aggregation",e),OmegaCountTracking:(e=null)=>u.request(i.POST,"common/countOmega",{...e}),async reminderTracking(e=""){const t=await u.get("omega/reminder",{keyword:e});for(const e of t.records)e.label=e.historyKeywords||`${e.dbName}.${e.tableName}`;return t},async searchFeature(e){s(e.pageFilter);return await u.request(i.POST,"feature/search",e)},aggregationFeature:(e=null)=>(s(e.pageFilter),u.request(i.POST,"feature/aggregation",e)),FeatureCount:(e=null)=>u.request(i.POST,"/common/countFeature",{...e}),FeatureDistribute:e=>u.get("feature/distribute?id="+e),async searchFeatureReminder(e=""){const t=await u.get("feature/reminder"+(e?"?keyword="+e:""));for(const e of t.records)e.label=e.historyKeywords||`${e.dbName}.${e.tableName}`;return t},aggregationDatae:(e=null)=>(s(e),u.request(i.POST,"datae/aggregation",e)),async searchDatae(e){s(e.pageFilter);return await u.request(i.POST,"datae/search",e)},async searchDataeReminder(e=""){const t=await u.get("datae/reminder"+(e?"?keyword="+e:""));for(const e of t.records)e.label=e.historyKeywords||""+e.name;return t}}},,,,,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.SEARCH="SEARCH",e.INNER="INNER",e.EXTERNAL="EXTERNAL"}(t.RefererType||(t.RefererType={}))},,,,,,,,,,,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const l=a(30),n=a(206),i=a(840),r="/dataMap/api/web/v1/";class u extends Error{constructor(e,t){super(t),this.code=e,this.message=t}}function s(e,t=null,a={}){const i={method:e,cache:"no-cache",headers:{"Content-Type":"application/json","HEADER-CSRF":l.getCookie("datadream_ticket")},credentials:"same-origin",referrer:"no-referrer",...a};return e!==n.FETCH_METHOD.GET&&(i.body=t?JSON.stringify(t):""),i}async function o(e){var t;const a=Number(e.resultCode);if(0===a)return e.data;if(401===a){let t=e.data.toString();/^https?:\/\//.test(t)||(t="//"+t),window.location.href=t+"&jumpto="+encodeURIComponent(location.toString()),await l.sleep(2e3)}throw new u(a,(null==e?void 0:e.message)||(null==e?void 0:e.returnMsg)||(null===(t=e.data)||void 0===t?void 0:t.toString())||(null==e?void 0:e.toString()))}t.get=async function(e,t=null,a={}){const l=Date.now(),u=new URL(r+e,location.origin);if(t)for(const e of Object.keys(t)){const a=e.toString(),l=t[e];null!=l?u.searchParams.append(a,l.toString()):u.searchParams.has(a)&&u.searchParams.delete(a)}return o(await(async()=>{const t=await fetch(u.href,s(n.FETCH_METHOD.GET,{},a)),r=t.status;if(200===r){const a=await t.json();return e.includes("summary/async")||i.Analytics.trackFetchTimeEvent({desc:"请求时间统计",attr:{pathname:u.href,method:n.FETCH_METHOD.GET,time:Date.now()-l}}),a}return{data:null,resultCode:String(r),returnMsg:`HTTP ERROR CODE: ${String(r)}, 页面无法提供服务!`}})())},t.request=async function(e,t,a=null,l={}){const n=Date.now();return o(await(async()=>{const u=await fetch(r+t,s(e,a,l)),o=await u.json();return i.Analytics.trackFetchTimeEvent({desc:"请求时间统计",attr:{pathname:t,method:e,time:Date.now()-n}}),o})())}},,,,,,function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=a(30),i=l(a(320));t.generateCacheKey=e=>e&&Object.keys(e).reduce((t,a)=>`${t}${e[a]||"null"}`,"")||"null",t.humanDate=(e,t="YYYY-MM-DD HH:mm:ss")=>{if(!e)return"-";const a=i.default(e);return a.isValid()?a.format(t):"-"},t.thousandthsNum=e=>{var t;return null!==(t=n.humanNum(e,{useGrouping:!0}))&&void 0!==t?t:"-"},t.uuid=()=>Array.from(Array(32)).map(()=>Math.random().toString(32)[2]||0).join("")},,,,,,,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const l=a(30),n=a(206),i=a(160);t.AlbumApi={importTable:async e=>(e.albumId=Number(e.albumId),e.groupId=Number(e.groupId),i.request(n.POST,"album/importTo",e)),removeTabFromAlbum:async e=>i.request(n.DELETE,"album/removeFrom",e),updateDescription:async e=>i.request(n.PUT,"album/updateDescription",e),updateTableComment:async e=>i.request(n.PUT,"album/updateTableComment",e),albumAddTab:async e=>i.request(n.POST,"album/addTo",e),getTableToAddAlbum:async e=>i.request(n.POST,"album/filterTableWhenAddToAlbum",e),getAlbumTable:async e=>i.request(n.POST,"album/filterTableInAlbum",e),async getAlbumGroup(e){let t=await i.get("album/getAlbumGroup",e);return t=function e(t){return t.map(t=>(t.title=t.name,t.key=String(t.id),t.children=e(t.subGroupList),delete t.subGroupList,t))}(t),t},updateAlbumGroup:async e=>i.request(n.PUT,"album/updateAlbumGroup",e),addAlbumGroup:async e=>i.request(n.POST,"album/addAlbumGroup",e),deleteAlbumGroup:async e=>i.request(n.DELETE,"album/deleteAlbumGroup",e),moveToAlbumGroup:async e=>i.request(n.PUT,"album/moveToAlbumGroup",e),async getTagList(){try{return i.get("album/tagList")}catch(e){return[]}},createAlbum:async e=>i.request(n.POST,"album/create",e),updateAlbum:async e=>i.request(n.PUT,"album/update",e),updateManager:async e=>i.request(n.PUT,"album/updateManager",e),myFollowAlbum:async e=>i.request(n.POST,"mine/album/follow",e),mySelfAlbum:async e=>i.request(n.POST,"mine/album",e),searchAlbum:async e=>i.request(n.POST,"album/search",e),aggregationAlbum:async e=>i.request(n.POST,"album/aggregation",e),aggregationAlbumMySelf:async e=>i.request(n.POST,"mine/album/aggregation",e),aggregationAlbumMyFollow:async e=>i.request(n.POST,"mine/album/follow/aggregation",e),followAlbum:async e=>i.request(n.POST,"album/follow",e),cancelFollowAlbum:async e=>i.request(n.DELETE,"album/follow",{albumId:e}),likeAlbum:async e=>i.request(n.POST,"album/like",e),cancelLikeAlbum:async e=>i.request(n.DELETE,"album/like",{albumId:e}),async albumDetail(e){var t;const a=await i.get("album/common",{albumId:e});return a.isAlbumAdmin=Boolean(a.creator.account===l.getUsername())||Boolean(null===(t=a.managerList)||void 0===t?void 0:t.find(({account:e})=>e===l.getUsername())),a},deleteDetail:async e=>i.request(n.DELETE,"album/delete",{albumId:e}),addToAlbum:async e=>i.request(n.POST,"album/addToBatchV2",e),async mineAlbum(){try{return i.get("mine/album/option")}catch(e){return[]}},updatePublic:async(e,t)=>i.request(n.FETCH_METHOD.PUT,"album/updatePublic",{albumId:e,isPublic:t})}},function(e,t,a){"use strict";var l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=a(30),i=a(199),r=l(a(0)),u=a(103);t.SearchContext=r.default.createContext({keyword:n.getQuery("keyword"),searchType:i.SearchType.HIVE,isHive:!1,isMysql:!1,isStream:!1,isMetric:!1,isPublicLog:!1,isTracking:!1,isFeature:!1,isDatae:!1,setKeyword:null,setSearchType:null,md5:""}),t.SearchProvider=e=>{const[a,l]=r.useState(n.getQuery("keyword")),[s,o]=r.useState(n.getQuery("searchType")||i.SearchType.HIVE),d=r.useMemo(()=>({keyword:a,searchType:s,isHive:s===i.SearchType.HIVE,isMysql:s===i.SearchType.MYSQL,isStream:s===i.SearchType.STREAM,isMetric:s===i.SearchType.METRIC,isPublicLog:s===i.SearchType.PUBLIC_LOG,isTracking:s===i.SearchType.EVENT_TRACKING,isFeature:s===i.SearchType.FEATURE,isDatae:s===i.SearchType.DATAE,setKeyword:l,setSearchType:o,md5:u.uuid()}),[a,s,l,o]);return r.default.createElement(t.SearchContext.Provider,{value:d},e.children)}},,,,,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const l=a(30),n=a(206),i=a(160),r=a(166),u={};t.v1TableDetailApi={async tableInfo(e,t){var a,n,u,s,o,d,c,m,f;const p=await i.get("hive/meta/table/common",{uri:e,referer:t});return p.isAssetOwner=(null===(a=p.assetOwner)||void 0===a?void 0:a.account)===l.getUsername(),p.isDataOwner=(null===(n=p.dataOwner)||void 0===n?void 0:n.account)===l.getUsername(),p.scoreRankLabel=null!==(u=l.humanNum(p.scoreRank,{useGrouping:!0}))&&void 0!==u?u:"-",p.scoreRankTotalLabel=null!==(s=l.humanNum(p.scoreRankTotal,{useGrouping:!0}))&&void 0!==s?s:"-",p.likeCountLabel=null!==(o=l.humanNum(p.likeCount,{useGrouping:!0}))&&void 0!==o?o:"-",p.last30DayVisitCountLabel=null!==(d=l.humanNum(p.last30DayVisitCount,{useGrouping:!0}))&&void 0!==d?d:"-",p.directDownstreamCountLabel=null!==(c=l.humanNum(p.directDownstreamCount,{useGrouping:!0}))&&void 0!==c?c:"-",p.storageLabel=null!==(m=l.humanByte(Number(p.storage)))&&void 0!==m?m:"-",p.partitionNumLabel=null!==(f=l.humanNum(p.partitionNum,{useGrouping:!0}))&&void 0!==f?f:"-",p.tableCreateTimeLabel=r.humanDate(p.tableCreateTime),p.tableModifyTimeLabel=r.humanDate(p.tableModifyTime),p.lastDataUpdateTimeLabel=r.humanDate(p.lastDataUpdateTime),p.lastDataAccessTimeLabel=r.humanDate(p.lastDataAccessTime),p.metaOfflineTimeLabel=r.humanDate(p.metaOfflineTime,"YYYY-MM-DD"),p},tableNps:async e=>i.get("hive/meta/table/nps",{uri:e}),clearTableColumnsCache(e){delete u[e]},async tableColumns(e,t=!1){if(!u[e]||t){u[e]=await i.get("hive/meta/table/column",{uri:e});for(const t of u[e])t.columnEnum||(t.columnEnum={enumWiki:null,enumList:[]}),t.columnNameZhLabel=t.columnNameZh.length>20?t.columnNameZh.slice(0,20)+"...":t.columnNameZh}else u[e].length>50&&await l.sleep(50);return u[e]},updateNameZh:async e=>i.request(n.FETCH_METHOD.PUT,"hive/meta/table/updateName",e),updateAssetOwner:async e=>i.request(n.FETCH_METHOD.PUT,"hive/meta/table/updateAssetOwner",e),updateAssetStreamOwner:async e=>i.request(n.FETCH_METHOD.PUT,"meta/stream/table/edit",e),updateDataOwner:async e=>i.request(n.FETCH_METHOD.PUT,"hive/meta/table/updateDataOwner",e),updateComment:async e=>i.request(n.FETCH_METHOD.PUT,"hive/meta/table/updateComment",e),like:async e=>i.request(n.FETCH_METHOD.POST,"meta/like?uri="+e),likeWithComment:async e=>i.request(n.FETCH_METHOD.POST,"meta/likeWithComment",e),unLike:async e=>i.request(n.FETCH_METHOD.DELETE,"meta/like?uri="+e),tags:async()=>(await i.get("hive/meta/table/tag")).map(e=>e.tagName),updateTags:async e=>i.request(n.FETCH_METHOD.PUT,"hive/meta/table/tag",e),deleteTags:async e=>i.request(n.FETCH_METHOD.DELETE,"hive/meta/table/tag",e),async streamTableInfo(e,t){var a,n,u,s,o,d,c,m,f;const p=await i.get("meta/stream/detail",{uri:e,referer:t});return p.isAssetOwner=(null===(a=p.assetManager)||void 0===a?void 0:a.account)===l.getUsername(),p.isDataOwner=(null===(n=p.assetManager)||void 0===n?void 0:n.account)===l.getUsername(),p.scoreRankLabel=null!==(u=l.humanNum(p.scoreRank,{useGrouping:!0}))&&void 0!==u?u:"-",p.scoreRankTotalLabel=null!==(s=l.humanNum(p.scoreRankTotal,{useGrouping:!0}))&&void 0!==s?s:"-",p.likeCountLabel=null!==(o=l.humanNum(p.likeCount,{useGrouping:!0}))&&void 0!==o?o:"-",p.last30DayVisitCountLabel=null!==(d=l.humanNum(p.last30DayVisitCount,{useGrouping:!0}))&&void 0!==d?d:"-",p.directDownstreamCountLabel=null!==(c=l.humanNum(p.directDownstreamCount,{useGrouping:!0}))&&void 0!==c?c:"-",p.storageLabel=null!==(m=l.humanByte(Number(p.storage)))&&void 0!==m?m:"-",p.partitionNumLabel=null!==(f=l.humanNum(p.partitionNum,{useGrouping:!0}))&&void 0!==f?f:"-",p.createTimeLabel=r.humanDate(p.createTime),p.updateTimeLabel=r.humanDate(p.updateTime),p},async mysqlTableInfo(e,t,a=!1){var n,r;const u=await i.get("mysql/common",{uri:e,referer:t});return u.isAssetOwner=(null===(n=u.assetOwner)||void 0===n?void 0:n.account)===l.getUsername(),u.isDataOwner=(null===(r=u.dataOwner)||void 0===r?void 0:r.account)===l.getUsername(),u}}},function(e,t,a){e.exports={"table-detail-page":"index_table-detail-page_ejK9c",tableDetailPage:"index_table-detail-page_ejK9c",warning:"index_warning_6-07S",icon:"index_icon_2GPfM",top:"index_top_2tR2-",minTop:"index_minTop_3mZwn",content:"index_content_2akgZ","base-info-wrapper":"index_base-info-wrapper_2tOP-",baseInfoWrapper:"index_base-info-wrapper_2tOP-",unfold:"index_unfold_1og5b","action-wrapper":"index_action-wrapper_hWZb6",actionWrapper:"index_action-wrapper_hWZb6",action:"index_action_2dy57","base-info-container":"index_base-info-container_1ZVTr",baseInfoContainer:"index_base-info-container_1ZVTr","base-info":"index_base-info_1ALVW",baseInfo:"index_base-info_1ALVW","info-item":"index_info-item_1FEOG",infoItem:"index_info-item_1FEOG",title:"index_title_2LmXr",list:"index_list_34Fu7",item:"index_item_16PTh",label:"index_label_iQCgl",tip:"index_tip_15aPX","added-albums":"index_added-albums_2TWh6",addedAlbums:"index_added-albums_2TWh6",album:"index_album_2oUvj","album-more":"index_album-more_eMKfi",albumMore:"index_album-more_eMKfi","tag-add":"index_tag-add_w_Hzd",tagAdd:"index_tag-add_w_Hzd",value:"index_value_26hhb","action-more":"index_action-more_NOb17",actionMore:"index_action-more_NOb17","user-item":"index_user-item_cSE4h",userItem:"index_user-item_cSE4h",description:"index_description_1h7Cg","capri-info-list":"index_capri-info-list_ENdtl",capriInfoList:"index_capri-info-list_ENdtl",tag:"index_tag_2PsjM",text:"index_text_1xEwX",tags:"index_tags_1mhUI",actions:"index_actions_3RD5y","verify-auth":"index_verify-auth_mk-kK",verifyAuth:"index_verify-auth_mk-kK","communicate-icon":"index_communicate-icon_vI2Cx",communicateIcon:"index_communicate-icon_vI2Cx",base:"index_base_13z1-","value-label":"index_value-label_fiyik",valueLabel:"index_value-label_fiyik","current-score":"index_current-score_3gUhw",currentScore:"index_current-score_3gUhw","count-info":"index_count-info_1_bHU",countInfo:"index_count-info_1_bHU",border:"index_border_32Xk5",business:"index_business_12jEq",auth:"index_auth_3P4oa",storage:"index_storage_1H5tD","update-tags-modal":"index_update-tags-modal_12prG",updateTagsModal:"index_update-tags-modal_12prG","tag-input":"index_tag-input_3CnVP",tagInput:"index_tag-input_3CnVP","recommend-label":"index_recommend-label_12-uO",recommendLabel:"index_recommend-label_12-uO",recommend:"index_recommend_3d8T_","popover-update":"index_popover-update_1iKoN",popoverUpdate:"index_popover-update_1iKoN","concern-popover":"index_concern-popover_3lMre",concernPopover:"index_concern-popover_3lMre","btn-line":"index_btn-line_3xf9p",btnLine:"index_btn-line_3xf9p","update-comment":"index_update-comment_O7SJ_",updateComment:"index_update-comment_O7SJ_","tag-delete-confirm":"index_tag-delete-confirm_RwOk7",tagDeleteConfirm:"index_tag-delete-confirm_RwOk7","break-word":"index_break-word_3nVn6",breakWord:"index_break-word_3nVn6","same-weight-font":"index_same-weight-font_1GPbv",sameWeightFont:"index_same-weight-font_1GPbv"}},,,,,,,,,,,,,,,,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.COMPOSITE="COMPOSITE",e.UPDATE_TIME="UPDATE_TIME",e.VISITS="VISITS",e.VALUE_RANK="VALUE_RANK"}(t.SearchSort||(t.SearchSort={})),function(e){e.HIVE="HIVE",e.STREAM="STREAM",e.MYSQL="MYSQL",e.METRIC="METRIC",e.PUBLIC_LOG="PUBLIC_LOG",e.EVENT_TRACKING="EVENT_TRACKING",e.FEATURE="FEATURE",e.DATAE="DATAE"}(t.SearchType||(t.SearchType={})),function(e){e.KAFKA="kafka",e.PRUID="pruid",e.MQ="mq",e.MYSQL="mysql",e.FUSION2="fusion2",e.REPORT="reportTable"}(t.TableType||(t.TableType={})),function(e){e.HIVE="HIVE",e.STREAM="STREAM",e.RDS="RDS"}(t.HIVE_COUNT_TYPES||(t.HIVE_COUNT_TYPES={}))},,,,,,,function(e,t,a){"use strict";var l;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.GET="GET",e.POST="POST",e.PUT="PUT",e.DELETE="DELETE"}(l=t.FETCH_METHOD||(t.FETCH_METHOD={})),t.GET=l.GET,t.POST=l.POST,t.PUT=l.PUT,t.DELETE=l.DELETE},,,,,,,,,,,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const l=a(166),n=a(206),i=a(160);t.v1CategoriesApi={buOptions:async()=>i.get("category/buOption"),buManagers:async e=>i.get("category/buManager",{buId:e}),updateBuManager:async e=>i.request(n.FETCH_METHOD.PUT,"category/buManager",e),buProjects:async e=>i.get("category/buProject",{buId:e}),updateBuProject:async e=>i.request(n.FETCH_METHOD.PUT,"category/buProject",e),buProjectOption:async e=>i.get("category/buProjectOption",{buId:e}),async categoryTree(e){const t=await i.get("category/tree",{buId:e});for(const e of t.categoryList)e.fold=!1;return t},createCategory:async e=>i.request(n.FETCH_METHOD.POST,"category/createCategory",e),updateCategory:async e=>i.request(n.FETCH_METHOD.PUT,"category/updateCategory",e),deleteCategory:async e=>i.request(n.FETCH_METHOD.DELETE,"category/deleteCategory",{categoryId:e}),createCategoryItem:async e=>i.request(n.FETCH_METHOD.POST,"category/createCategoryItem",e),deleteCategoryItem:async e=>i.request(n.FETCH_METHOD.DELETE,"category/deleteCategoryItem",{categoryItemId:e}),updateCategoryItem:async e=>i.request(n.FETCH_METHOD.PUT,"category/updateCategoryItem",e),async filterTableWhenAddToCategory(e){var t,a;const r=await i.request(n.FETCH_METHOD.POST,"category/filterTableWhenAddToCategory",e);for(const e of r.records)e.ownerLabel=null!==(a=null===(t=e.owner)||void 0===t?void 0:t.name)&&void 0!==a?a:"-",e.createTimeLabel=l.humanDate(e.createTime);return r},addToCategory:async e=>i.request(n.FETCH_METHOD.POST,"category/addToCategory",e),getDbCategories:async e=>i.get("category/option",{dbName:e}),async filterTableInCategory(e){var t,a,r,u;const s=await i.request(n.FETCH_METHOD.POST,"category/filterTableInCategory",e);for(const e of s.records)e.ownerLabel=null!==(a=null===(t=e.owner)||void 0===t?void 0:t.name)&&void 0!==a?a:"-",e.categoryItemLabel=null!==(u=null===(r=e.categoryItemList)||void 0===r?void 0:r.join(","))&&void 0!==u?u:"-",e.createTimeLabel=l.humanDate(e.createTime);return s},removeFormCategory:async e=>i.request(n.FETCH_METHOD.DELETE,"category/removeFormCategory",e),async choicestTableList(e,t){var a,r,u,s;if(!e.pageFilter.buId&&!e.pageFilter.projectCode)return{total:0,records:[]};const o=await i.request(n.FETCH_METHOD.POST,t,e);for(const e of o.records)e.ownerLabel=null!==(r=null===(a=e.owner)||void 0===a?void 0:a.name)&&void 0!==r?r:"-",e.choicestUserLabel=null!==(s=null===(u=e.choicestUser)||void 0===u?void 0:u.name)&&void 0!==s?s:"-",e.lastUpdateTimeLabel=l.humanDate(e.lastUpdateTime),e.choicestTimeLabel=l.humanDate(e.choicestTime);return o},async choicestTableListForAdd(e){var t,a,r,u,s,o;if(!e.pageFilter.buId&&!e.pageFilter.projectCode)return{total:0,records:[]};const d=await i.request(n.FETCH_METHOD.POST,"hive/meta/table/filterTableWhenChoicest",e);for(const e of d.records)e.ownerLabel=null!==(a=null===(t=e.owner)||void 0===t?void 0:t.name)&&void 0!==a?a:"-",e.techManagerLabel=null!==(u=null===(r=e.owner)||void 0===r?void 0:r.name)&&void 0!==u?u:"-",e.choicestUserLabel=null!==(o=null===(s=e.choicestUser)||void 0===s?void 0:s.name)&&void 0!==o?o:"-",e.lastUpdateTimeLabel=l.humanDate(e.lastUpdateTime),e.createTimeLabel=l.humanDate(e.createTime),e.choicestTimeLabel=l.humanDate(e.choicestTime);return d},async choicestTableListForAddStream(e){var t,a,r,u,s,o;if(!e.pageFilter.buId&&!e.pageFilter.projectCode)return{total:0,records:[]};const d=await i.request(n.FETCH_METHOD.POST,"meta/stream/choicest/filter",e);for(const e of d.records)e.ownerLabel=null!==(a=null===(t=e.owner)||void 0===t?void 0:t.name)&&void 0!==a?a:"-",e.techManagerLabel=null!==(u=null===(r=e.owner)||void 0===r?void 0:r.name)&&void 0!==u?u:"-",e.choicestUserLabel=null!==(o=null===(s=e.choicestUser)||void 0===s?void 0:s.name)&&void 0!==o?o:"-",e.lastUpdateTimeLabel=l.humanDate(e.lastUpdateTime),e.createTimeLabel=l.humanDate(e.createTime),e.choicestTimeLabel=l.humanDate(e.choicestTime);return d},addChoicest:async e=>i.request(n.FETCH_METHOD.POST,"hive/meta/table/choicest/add",e),addStreamChoicest:async e=>i.request(n.FETCH_METHOD.POST,"meta/stream/choicest/add",e),removeChoicest:async e=>i.request(n.FETCH_METHOD.DELETE,"hive/meta/table/choicest/delete",e),removeStreamChoicest:async e=>i.request(n.FETCH_METHOD.DELETE,"meta/stream/choicest/delete",e),importTable:async e=>i.request(n.POST,"hive/meta/table/importChoicest",e),importTableStream:async e=>i.request(n.POST,"meta/stream/choicest/import",e)}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.DIRECT_UP="DIRECT_UP",e.DIRECT_DOWN="DIRECT_DOWN",e.INDIRECT_DOWN="INDIRECT_DOWN",e.ALL_UP="ALL_UP",e.ALL_DOWN="ALL_DOWN"}(t.LineageViewType||(t.LineageViewType={})),function(e){e.ALL="all",e.OLD_MYSQL="mslog.mysql",e.SELF_MYSQL="synccenter.selfmysql",e.RDS_MYSQL="synccenter.mysql",e.PUBLIC_LOG="synccenter.publiclog",e.HIVE_TABLE="dmap.htb",e.HIVE_TABLE_COLUMN="dmap.hcol",e.INDEX="dict.idxnew",e.REPORT="datae.rep",e.TEMPLATE="dmap.ft_tmpl"}(t.LineageEntityType||(t.LineageEntityType={})),function(e){e.LIST="list",e.GRAPH="graph"}(t.LineageViewMode||(t.LineageViewMode={}))},,,,,,,,,,,,,,,function(e,t,a){"use strict";var l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=a(30),i=a(181),r=a(148),u=a(1209),s=l(a(0)),o=a(143),d=a(103),c=a(771);t.StreamDetailContext=s.default.createContext(null),t.StreamDetailDispatchContext=s.default.createContext(null),t.StreamDetailProvider=e=>{var a;const{prevLocation:l}=e,{columnName:m}=d.getDbTableFromUri(n.getQuery("uri")),[f,p]=s.useState(m),[_,h]=s.useState(n.getQuery("uri")),[g,E]=s.useState(!1),[b,v]=s.useState(""),[y,T]=s.useReducer(c.StreamDetailReducer,null),[N,S]=s.useState(n.getQuery("tab")||u.IStreamDetailTab.FIELD_INFO),C=o.useLocation(),x=null===(a=C.state)||void 0===a?void 0:a.referer,w=s.useMemo(()=>{if(x)return x;try{const{host:e,pathname:t}=new URL(document.referrer);if(e.startsWith("datamap"))return"/search"===t?r.RefererType.SEARCH:r.RefererType.INNER}catch(e){}return r.RefererType.EXTERNAL},[x]);s.useEffect(()=>{if("/detail"===(null==l?void 0:l.pathname)){const e=new URLSearchParams(null==l?void 0:l.search),t=new URLSearchParams(C.search),a=t.get("uri"),{dbName:n,tableName:i,columnName:r}=d.getDbTableFromUri(a);r&&p(r),h(d.generateUri(n,i)),a!==e.get("uri")&&S(t.get("tab")||u.IStreamDetailTab.FIELD_INFO)}},[l,C]),s.useEffect(()=>{if(!_)return;let e=!1;return(async()=>{try{v(""),E(!0);const t=await i.v1TableDetailApi.streamTableInfo(_,w);if(e)return;T({type:c.STREAM_TABLE_ACTION_TYPES.INIT,init:t})}catch(t){if(e)return;v(t.message)}E(!1)})(),()=>e=!0},[_,T,w]);const I=s.useCallback(async()=>{v(""),E(!0);try{const e=await i.v1TableDetailApi.streamTableInfo(_,w);T({type:c.STREAM_TABLE_ACTION_TYPES.INIT,init:e})}catch(e){v(e.message)}E(!1)},[_,w]),L=s.useMemo(()=>({loading:g,errorMessage:b,fetchDetail:I,detail:y,sharedColumnName:f,uri:(null==y?void 0:y.uri)||n.getQuery("uri"),tableId:null==y?void 0:y.tableId,tab:N,setTab:e=>{S(e),n.updateQuery({tab:e===u.IStreamDetailTab.FIELD_INFO?null:e,viewMode:null,subTab:null})}}),[g,b,I,y,f,N,S]);return s.default.createElement(t.StreamDetailContext.Provider,{value:L},s.default.createElement(t.StreamDetailDispatchContext.Provider,{value:T},e.children))}},,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const l=a(160);let n="";const i={};let r=null,u=null,s=null,o=null,d=null;t.v1CommonApi={async avatar(){if(!n)try{const e=await l.get("common/avatar");n=e||""}catch(e){n=""}return n},async searchStaff(e){if(!e)return[];if(!i[e])try{const t=await l.get("common/searchStaff",{keyword:e});i[e]=t}catch(e){return[]}return i[e]},async projects(){if(!r)try{r=await l.get("common/projectOption")}catch(e){return[]}return r},async etlTypeOption(){if(!u)try{u=await l.get("common/etlTypeOption")}catch(e){return[]}return u},async levelOption(){if(!s)try{s=await l.get("common/levelOption")}catch(e){return[]}return s},async dbList(){if(!o)try{const e=await l.get("common/dbOption");o=e.map(({dbName:e})=>({name:e}))}catch(e){return[]}return o},async dbStreamList(){if(!d)try{const e=await l.get("meta/stream/dbOption");d=e.map(({dbName:e,dbId:t})=>({name:e,id:t}))}catch(e){return[]}return d},getRoleList:async()=>l.get("common/userRole")}},,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const l=a(30);var n;!function(e){e.PARAMS="PARAMS",e.RESET="RESET",e.UPDATE_SORT="UPDATE_SORT",e.UPDATE_KEYWORD="UPDATE_KEYWORD",e.UPDATE_TAG_LIST="UPDATE_TAG_LIST",e.UPDATE_TAG_ID_LIST="UPDATE_TAG_ID_LIST"}(n=t.ALBUM_ACTION_TYPES||(t.ALBUM_ACTION_TYPES={})),function(e){e.SEARCH="SEARCH",e.MY_SELF="MY_SELF",e.MY_FOLLOW="MY_FOLLOW"}(t.ALBUM_LIST_TYPE||(t.ALBUM_LIST_TYPE={})),function(e){e.NEWEST="NEWEST",e.HOTTEST="HOTTEST",e.COMPOSITE="COMPOSITE"}(t.ALBUM_SORT_TYPES||(t.ALBUM_SORT_TYPES={})),t.AlbumFilterReducer=(e,t)=>{var a;switch(t.type){case n.UPDATE_SORT:return{...e,sort:t.payload};case n.UPDATE_KEYWORD:return{...e,keyword:t.payload};case n.UPDATE_TAG_LIST:return{...e,tagList:t.payload};case n.UPDATE_TAG_ID_LIST:return l.updateQuery({tags:null===(a=t.payload)||void 0===a?void 0:a.join()}),{...e,tagIdList:t.payload};case n.RESET:return{keyword:"",sort:"COMPOSITE",tagList:[],tagIdList:[]};default:return e}},t.AlbumParamsRuducer=(e,t)=>{switch(t.type){case n.PARAMS:return{...e,...t.payload};case n.UPDATE_SORT:return{...e,sort:t.payload};case n.RESET:return{keyword:"",sort:"COMPOSITE",tagList:[],tagIdList:[]};default:return e}}},,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const l=a(30),n=a(160),i=a(166),r=a(206),u=a(103);t.v1HiveInfoApi={createSql:async e=>n.get("hive/meta/table/createSql",{uri:e}),createSqlWithCommet:async e=>n.get("hive/meta/table/selectSqlWithComment",{uri:e}),selectSql:async e=>n.get("hive/meta/table/selectSql",{uri:e}),async partition(e){const t=await n.request(r.POST,"hive/meta/partition/page",e);for(const e of t.records)e.createTimeLabel=i.humanDate(e.createTime),e.modifyTimeLabel=i.humanDate(e.modifyTime),e.dataSizeLabel=l.humanByte(Number(e.dataSize)),e.recordCountLabel=i.thousandthsNum(e.recordCount),e.fileNumLabel=i.thousandthsNum(e.fileNum);return t},async hottestPartition(e){const t=await n.get("hive/meta/partition/hottest",{uri:e});return t.updateTimeLabel=i.humanDate(t.updateTime),t.partitionTotalLabel=i.thousandthsNum(t.partitionTotal),t},async changeHistory(e){const t=await n.request(r.POST,"hive/meta/table/change/record",e);for(const e of t.records)e.operateTimeLabel=i.humanDate(e.operateTime),e.key=u.uuid();return t},async outputInfo(e){const t=await n.get("hive/meta/table/output/info",{uri:e});t.lastUpdateTimeLabel=i.humanDate(t.lastUpdateTime);for(const e of t.outputItemList)e.finishTimeLabel=i.humanDate(e.finishTime),e.startTimeLabel=i.humanDate(e.startTime);return t},updateColumnEnum:async e=>n.request(r.PUT,"hive/meta/table/column/enum",e),getHiveUriById:async e=>n.get("hive/meta/getHiveUriById",{id:e}),async getProdScript(e){const t=await n.get("hive/meta/table/prodScript",{uri:e});return{...t,lastUpdateTime:i.humanDate(Number(t.lastUpdateTime))}},recommendTable:async e=>n.request(r.PUT,"manageTool/recommend/submit",e),tableOnOrOff:async e=>n.request(r.PUT,"manageTool/tableONOFF/submit",e)}},,,,,,,,,,,,function(e,t,a){"use strict";var l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=a(218),i=l(a(0)),r=a(520);t.ProjectsContext=i.default.createContext(null),t.ProjectsProvider=e=>{const[a,l]=i.useState(null),[u,s]=i.useState([]),[o,d]=i.useState(!1),c=null==a?void 0:a.id;i.useEffect(()=>{let e=!1;return(async()=>{if(c)try{const t=await n.v1CategoriesApi.buProjects(c);if(e)return;s(t)}catch(e){}})(),()=>{e=!0}},[c]);const m=i.useCallback(async()=>{if(c){try{d(!0);const e=await n.v1CategoriesApi.buProjects(c);s(e)}catch(e){}d(!1)}},[c]),f=i.useMemo(()=>({loading:o,projectList:u,updateProjects:m,buOption:a,setBuOption:l,buId:null==a?void 0:a.id,isPublicBu:(null==a?void 0:a.id)===r.PUBLIC_SECTOR_ID}),[a,o,u,m]);return i.default.createElement(t.ProjectsContext.Provider,{value:f},e.children)}},function(e,t,a){"use strict";var l;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.VeryBad=100]="VeryBad",e[e.Bad=101]="Bad",e[e.NotBad=102]="NotBad",e[e.Recommend=103]="Recommend",e[e.VeryGood=104]="VeryGood"}(l=t.AppraisalStarId||(t.AppraisalStarId={})),t.AppraisalValue=[l.VeryBad,l.Bad,l.NotBad,l.Recommend,l.VeryGood],function(e){e.HTML="HTML",e.MARKDOWN="MARKDOWN"}(t.IntroContentType||(t.IntroContentType={}))},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const l=a(219),n=a(0),i=a(19);t.useEntityTypeOptions=(e="TABLE")=>{const{t:t}=i.useTranslation(),a=n.useMemo(()=>[{value:l.LineageEntityType.ALL,label:t("common:全部")},{value:l.LineageEntityType.OLD_MYSQL,label:t("common:MySQL")},{value:l.LineageEntityType.RDS_MYSQL,label:t("common:MySQL")},{value:l.LineageEntityType.SELF_MYSQL,label:t("common:MySQL")},{value:l.LineageEntityType.PUBLIC_LOG,label:t("common:Public日志")},{value:l.LineageEntityType.HIVE_TABLE,label:t("search:Hive表")},{value:l.LineageEntityType.INDEX,label:t("common:指标")},{value:l.LineageEntityType.REPORT,label:t("common:报表")},{value:l.LineageEntityType.TEMPLATE,label:t("common:模板")}],[t]),r=n.useMemo(()=>[{value:l.LineageEntityType.ALL,label:t("common:全部")},{value:l.LineageEntityType.HIVE_TABLE_COLUMN,label:t("common:Hive表字段")},{value:l.LineageEntityType.REPORT,label:t("common:报表")},{value:l.LineageEntityType.TEMPLATE,label:t("common:模板")},{value:l.LineageEntityType.INDEX,label:t("common:指标")}],[t]);return"TABLE"===e?a:r},t.useEntityTypeMap=()=>{const{t:e}=i.useTranslation();return n.useMemo(()=>({[l.LineageEntityType.ALL]:{label:e("common:全部"),color:""},[l.LineageEntityType.RDS_MYSQL]:{label:e("MySQL"),color:"#7082A6"},[l.LineageEntityType.SELF_MYSQL]:{label:e("MySQL"),color:"#7082A6"},[l.LineageEntityType.OLD_MYSQL]:{label:e("MySQL"),color:"#7082A6"},[l.LineageEntityType.PUBLIC_LOG]:{label:e("common:Public日志"),color:"#5AD2A2"},[l.LineageEntityType.HIVE_TABLE]:{label:e("search:Hive表"),color:"#F27E49"},[l.LineageEntityType.INDEX]:{label:e("common:指标"),color:"#8543e0"},[l.LineageEntityType.REPORT]:{label:e("common:报表"),color:"#BB9858"},[l.LineageEntityType.TEMPLATE]:{label:e("common:模板"),color:"#59AEE9"},[l.LineageEntityType.HIVE_TABLE_COLUMN]:{label:e("common:Hive表字段"),color:"#F27E49"}}),[e])},t.LineageGraphDefaultColor="#64A8C1"},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const l=a(160),n=a(166),i=a(206);t.appraisalApi={tags:async()=>l.get("appraisal/tags"),mine:async e=>l.get("appraisal/mine",{uri:e}),appraisal:async e=>l.request(i.POST,"appraisal",e),async appraisalList(e){const t=await l.request(i.POST,"appraisal/list",e);for(const e of t.records)e.createTimeLabel=n.humanDate(e.createTime),e.updateTimeLabel=n.humanDate(e.updateTime);return t},intro:async e=>l.get("meta/currentDescription",{uri:e}),updateIntro:async e=>l.request(i.PUT,"meta/updateDescription",e),updateIntroStream:async e=>l.request(i.PUT,"meta/stream/introduce/edit",e),async introHistoryList(e){const t=await l.get("meta/historyDescription",{uri:e});for(const e of t)e.createTimeLabel=n.humanDate(e.createTime);return t},async commentList(e){const t=await l.request(i.POST,"meta/commentList",e);for(const e of t.records)e.createTimeLabel=n.humanDate(e.createTime);return t},deleteComment:async e=>l.request(i.DELETE,"meta/deleteComment?msgId="+e),addComment:async e=>l.request(i.POST,"meta/addComment",e),updateComment:async e=>l.request(i.PUT,"meta/updateComment",e),streamIntroduceList2:async e=>l.get("meta/stream/introduce/list2",{uri:e}),async streamIntroduceList(e){const t=await l.get("meta/stream/introduce/list",{uri:e});for(const e of t)e.createTimeLabel=n.humanDate(e.createTime);return t}}},,function(e,t,a){e.exports={"tab-bloodline":"index_tab-bloodline_3uMUd",tabBloodline:"index_tab-bloodline_3uMUd","field-pane-graph":"index_field-pane-graph_1jP6r",fieldPaneGraph:"index_field-pane-graph_1jP6r","field-pane-list":"index_field-pane-list_3TlPI",fieldPaneList:"index_field-pane-list_3TlPI","table-pane-graph":"index_table-pane-graph_1dQwp",tablePaneGraph:"index_table-pane-graph_1dQwp","table-pane-list":"index_table-pane-list_3lb9l",tablePaneList:"index_table-pane-list_3lb9l","change-view-mode":"index_change-view-mode_6s7NB",changeViewMode:"index_change-view-mode_6s7NB",filter:"index_filter_vrMzK",actions:"index_actions_3Mk_k","action-export":"index_action-export_3T7xz",actionExport:"index_action-export_3T7xz",content:"index_content_2q63n","no-padding":"index_no-padding_1HH2_",noPadding:"index_no-padding_1HH2_","graph-container":"index_graph-container_wVC5t",graphContainer:"index_graph-container_wVC5t",bar:"index_bar_2OERb","type-intro":"index_type-intro_3TVWn",typeIntro:"index_type-intro_3TVWn",label:"index_label_WU8Xk",list:"index_list_25VI8",item:"index_item_2Kvum",circle:"index_circle_2hBUd",text:"index_text_3fSkQ",hive:"index_hive_2f2iB",report:"index_report_27b_h",template:"index_template_FbDwH",right:"index_right_2P35a",hd:"index_hd_1VEc7",num:"index_num_vvMgj",text4:"index_text4_3m45h",border:"index_border_2Hjnt"}},function(e,t,a){e.exports={"home-search":"index_home-search_2Ws2G",homeSearch:"index_home-search_2Ws2G","search-wrapper":"index_search-wrapper_wAVDp",searchWrapper:"index_search-wrapper_wAVDp","page-search":"index_page-search_1HOU8",pageSearch:"index_page-search_1HOU8","search-content":"index_search-content_5RqIt",searchContent:"index_search-content_5RqIt","accurate-result":"index_accurate-result_2SJsj",accurateResult:"index_accurate-result_2SJsj",content:"index_content_31WBD",details:"index_details_xuqKf",value:"index_value_4VWSJ","condition-wrapper":"index_condition-wrapper_2FKIR",conditionWrapper:"index_condition-wrapper_2FKIR",condition:"index_condition_13g-e",filter:"index_filter_1fLaR",title:"index_title_2jHeu",text:"index_text_298h6","action-reset":"index_action-reset_F4UNz",actionReset:"index_action-reset_F4UNz","filter-content":"index_filter-content_3a8wj",filterContent:"index_filter-content_3a8wj","filter-tag":"index_filter-tag_2d6xd",filterTag:"index_filter-tag_2d6xd","search-block":"index_search-block_1pHU0",searchBlock:"index_search-block_1pHU0",fold:"index_fold_2_kyo","block-title":"index_block-title_2xr5D",blockTitle:"index_block-title_2xr5D","block-content":"index_block-content_3aLQ-",blockContent:"index_block-content_3aLQ-",tag:"index_tag_1fJmw",selected:"index_selected_1N0dl","show-more":"index_show-more_2l38w",showMore:"index_show-more_2l38w",action:"index_action_7vIGD","content-tabs-wrapper":"index_content-tabs-wrapper_OlSY5",contentTabsWrapper:"index_content-tabs-wrapper_OlSY5","old-version":"index_old-version_1MF0u",oldVersion:"index_old-version_1MF0u","content-tabs":"index_content-tabs_1QsXm",contentTabs:"index_content-tabs_1QsXm","tab-nav-text":"index_tab-nav-text_d0SfD",tabNavText:"index_tab-nav-text_d0SfD"}},function(e,t,a){e.exports={"table-owner-page":"style_table-owner-page_3XFXh",tableOwnerPage:"style_table-owner-page_3XFXh",actions:"style_actions_1RgUY","column-actions":"style_column-actions_15Vks",columnActions:"style_column-actions_15Vks",filter:"style_filter_1TPyB","add-choicest-result-modal":"style_add-choicest-result-modal_3qbEs",addChoicestResultModal:"style_add-choicest-result-modal_3qbEs",intro:"style_intro_3d2gF",list:"style_list_3A5th"}},,,,,,,,,,,,,,,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const l=a(218),n=a(520),i=a(521),r=a(0);t.useBuOptions=()=>{const[e,t]=r.useState(!1),[a,n]=r.useState(""),[i,u]=r.useState([]);return r.useEffect(()=>{let e=!1;return(async()=>{try{n(""),t(!0);const a=await l.v1CategoriesApi.buOptions();if(e)return;u(a)}catch(t){if(e)return;n(t.message)}t(!1)})(),()=>{e=!0}},[]),{buOptions:i,buOptionsLoading:e,buOptionsErrorMessage:a}},t.useBuProjectOptions=e=>{const[t,a]=r.useState(!1),[n,i]=r.useState(""),[u,s]=r.useState([]);return r.useEffect(()=>{if(!e)return;let t=!1;return(async()=>{try{i(""),a(!0);const n=await l.v1CategoriesApi.buProjectOption(e);if(t)return;s(n)}catch(e){if(t)return;i(e.message)}a(!1)})(),()=>{t=!0}},[e]),{buProjectOptions:u,buProjectOptionsLoading:t,buProjectOptionsErrorMessage:n}},t.useBuProjects=e=>{const[t,a]=r.useState(!1),[n,i]=r.useState(""),[u,s]=r.useState([]),o=r.useCallback(async()=>{try{const t=await l.v1CategoriesApi.buProjects(e);s(t)}catch(e){}},[e]);return r.useEffect(()=>{if(!e)return;let t=!1;return(async()=>{try{i(""),a(!0);const n=await l.v1CategoriesApi.buProjects(e);if(t)return;s(n)}catch(e){if(t)return;i(e.message)}a(!1)})(),()=>{t=!0}},[e]),{buProjects:u,setBuProjects:s,fetchData:o,buProjectsLoading:t,buProjectsErrorMessage:n}},t.useBuManagers=e=>{const[t,a]=r.useState(!1),[n,i]=r.useState(""),[u,s]=r.useState([]);return r.useEffect(()=>{if(!e)return;let t=!1;return(async()=>{try{i(""),a(!0);const n=await l.v1CategoriesApi.buManagers(e);if(t)return;s(n)}catch(e){if(t)return;i(e.message)}a(!1)})(),()=>{t=!0}},[e]),{buManagers:u,setBuManagers:s,buManagersLoading:t,buManagersErrorMessage:n}},t.useCategoryTree=e=>{const[t,a]=r.useState(!1),[u,s]=r.useState(""),[o,d]=r.useState(null),c=r.useContext(i.CategoryDispatchContext);return r.useEffect(()=>{if(!e)return;let t=!1;return(async()=>{try{s(""),a(!0);const i=await l.v1CategoriesApi.categoryTree(e);if(t)return;c({type:n.CATEGORY_ACTION_TYPES.INIT,categories:i.categoryList}),d(i)}catch(e){if(t)return;d(null),s(e.message)}a(!1)})(),()=>{t=!0}},[e,c]),{categoryTree:o,categoryTreeLoading:t,categoryTreeErrorMessage:u}},t.useFilterTableInCategory=e=>{const[t,a]=r.useState(!1),[n,i]=r.useState(""),[u,s]=r.useState([]),[o,d]=r.useState(0),c=r.useCallback(async()=>{try{i(""),a(!0);const{total:t,records:n}=await l.v1CategoriesApi.filterTableInCategory(e);d(t),s(n)}catch(e){i(e.message)}a(!1)},[e]);return r.useEffect(()=>{if(!e.pageFilter.categoryItemId)return;let t=!1;return(async()=>{try{i(""),a(!0);const{total:n,records:r}=await l.v1CategoriesApi.filterTableInCategory(e);if(t)return;d(n),s(r)}catch(e){if(t)return;i(e.message)}a(!1)})(),()=>{t=!0}},[e]),{tables:u,total:o,loading:t,errorMessage:n,fetchData:c}},t.useFilterTableWhenAddToCategory=e=>{const[t,a]=r.useState(!1),[n,i]=r.useState(""),[u,s]=r.useState([]),[o,d]=r.useState(0),c=r.useCallback(async()=>{if(e){try{i(""),a(!0);const{total:t,records:n}=await l.v1CategoriesApi.filterTableWhenAddToCategory(e);d(t),s(n)}catch(e){i(e.message)}a(!1)}},[e]);return r.useEffect(()=>{let t=!1;if(!e)return;return(async()=>{try{i(""),a(!0);const{total:n,records:r}=await l.v1CategoriesApi.filterTableWhenAddToCategory(e);if(t)return;d(n),s(r)}catch(e){if(t)return;i(e.message)}a(!1)})(),()=>{t=!0}},[e]),{tables:u,total:o,loading:t,errorMessage:n,fetchData:c}},t.useChoicestTableList=(e,t)=>{const[a,n]=r.useState(!1),[i,u]=r.useState(""),[s,o]=r.useState([]),[d,c]=r.useState(0),{projectCode:m,tableName:f}=e.pageFilter,p=r.useCallback(async()=>{try{u(""),n(!0);const{total:a,records:i}=await l.v1CategoriesApi.choicestTableList(e,t);c(a),o(i)}catch(e){u(e.message)}n(!1)},[e]),_=r.useMemo(()=>s.filter(e=>!m&&!f||(!(!m||e.projectCode!==m)||!(!f||!e.tableName.includes(f)&&!e.tableName.includes(f)))),[s,m,f]);return r.useEffect(()=>{let a=!1;return(async()=>{try{u(""),n(!0);const{total:i,records:r}=await l.v1CategoriesApi.choicestTableList(e,t);if(a)return;c(i),o(r)}catch(e){if(a)return;u(e.message)}n(!1)})(),()=>a=!0},[e]),{tables:_,total:d,loading:a,errorMessage:i,fetchData:p}},t.useChoicestTableListForAdd=e=>{const[t,a]=r.useState(!1),[n,i]=r.useState(""),[u,s]=r.useState([]),[o,d]=r.useState(0),c=r.useCallback(async()=>{try{i(""),a(!0);const{total:t,records:n}=await l.v1CategoriesApi.choicestTableListForAdd(e);d(t),s(n)}catch(e){i(e.message)}a(!1)},[e]);return r.useEffect(()=>{let t=!1;return(async()=>{try{i(""),a(!0);const{total:n,records:r}=await l.v1CategoriesApi.choicestTableListForAdd(e);if(t)return;d(n),s(r)}catch(e){if(t)return;i(e.message)}a(!1)})(),()=>{t=!0}},[e]),{tables:u,total:o,loading:t,errorMessage:n,fetchData:c}},t.useChoicestTableListForAddStream=e=>{const[t,a]=r.useState(!1),[n,i]=r.useState(""),[u,s]=r.useState([]),[o,d]=r.useState(0),c=r.useCallback(async()=>{try{i(""),a(!0);const{total:t,records:n}=await l.v1CategoriesApi.choicestTableListForAddStream(e);d(t),s(n)}catch(e){i(e.message)}a(!1)},[e]);return r.useEffect(()=>{let t=!1;return(async()=>{try{i(""),a(!0);const{total:n,records:r}=await l.v1CategoriesApi.choicestTableListForAddStream(e);if(t)return;d(n),s(r)}catch(e){if(t)return;i(e.message)}a(!1)})(),()=>{t=!0}},[e]),{tables:u,total:o,loading:t,errorMessage:n,fetchData:c}}},function(e,t,a){"use strict";var l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=a(30),i=l(a(0)),r=a(261),u=()=>{const e=n.getQuery("tags");return e?e.split(",").map(e=>Number(e)):[]},s={keyword:"",sort:"",tagList:[],tagIdList:u()};t.AlbumDispatchContext=i.default.createContext(null),t.AlbumStateContext=i.default.createContext({pageFilter:s,pageSize:12,pageCurrent:1}),t.AlbumListProvider=e=>{const[a,l]=i.useState(n.getQuery("pageCurrent","number")||1),[s,o]=i.useState(n.getQuery("pageSize","number")||9),[d,c]=i.useReducer(r.AlbumFilterReducer,{keyword:n.getQuery("keyword"),sort:n.getQuery("sort")||r.ALBUM_SORT_TYPES.COMPOSITE,tagList:[],tagIdList:u()}),m=i.useMemo(()=>({setPageCurrent:l,setPageSize:o,dispatchFilter:c}),[c]),f=i.useMemo(()=>({pageCurrent:a,pageSize:s,pageFilter:d}),[d,a,s]);return i.default.createElement(t.AlbumStateContext.Provider,{value:f},i.default.createElement(t.AlbumDispatchContext.Provider,{value:m},e.children))}},,function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=a(26),i=a(97),r=l(a(0)),u=a(19),s=l(a(2024));t.Footer=()=>{const{t:e}=u.useTranslation();return r.default.createElement("header",{className:s.default.homeFooter},r.default.createElement("div",{className:s.default.links},r.default.createElement(i.ExternalLink,{wikiPageId:356179122},e("common:常见问题")),r.default.createElement(i.ExternalLink,{wikiPageId:120053750},e("common:元数据专区")),r.default.createElement(i.ExternalLink,{wikiPageId:163873201},e("common:开放API")),r.default.createElement(i.ExternalLink,{wikiPageId:356179098},e("common:帮助手册"))),r.default.createElement("div",{className:s.default.copyright},r.default.createElement("span",null,e("home:2020滴滴数据平台 数据地图D-chat群"),": "),r.default.createElement(i.ExternalLink,{href:"https://im.xiaojukeji.com/channel?uid=4176&token=0938b2256f9db8cc5726333fb3fb3a23&id=233514078071707136"},"233514078071707136",r.default.createElement(n.IconFont,{type:"icon-d-chat"}))))}},,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=l(a(47)),r=l(a(1331)),u=l(a(2393)),s=a(259),o=a(500),d=n(a(0));t.FormItemLayout={labelCol:{span:4},wrapperCol:{span:20}},t.LngStateContext=d.default.createContext(null),t.LngDispatchContext=d.default.createContext(null),t.UserStateContext=d.default.createContext(null),t.ContextProvider=e=>{const[a,l]=d.useState(o.defaultLanguage),n=d.useMemo(()=>a===o.Language.EN?r.default:u.default,[a]),s=d.useCallback(e=>{l(e),o.changeLanguage(e)},[]);return d.default.createElement(t.LngStateContext.Provider,{value:a},d.default.createElement(t.LngDispatchContext.Provider,{value:s},d.default.createElement(i.default,{autoInsertSpaceInButton:!1,locale:n},e.children)))},t.UserContextProvider=e=>{const[a,l]=d.useState({roleList:[],isBUManager:!1,isSuperAdmin:!1,fetchLoading:!0});return d.useEffect(()=>{(async()=>{try{const e=await s.v1CommonApi.getRoleList();l({roleList:e||[],isBUManager:null==e?void 0:e.includes("BU_MANAGER"),isSuperAdmin:null==e?void 0:e.includes("SUPER_ADMIN"),fetchLoading:!1})}catch(e){l({roleList:[],isBUManager:!1,isSuperAdmin:!1,fetchLoading:!1})}})()},[]),d.default.createElement(t.UserStateContext.Provider,{value:a},e.children)}},,,,,,,function(e,t,a){"use strict";var l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=a(233),i=a(30),r=a(174),u=a(363),s=l(a(0));var o;!function(e){e.Edit="edit",e.Read="read"}(o=t.GroupMode||(t.GroupMode={})),t.AlbumTableListStateContext=s.default.createContext(null),t.AlbumTableListDispatchContext=s.default.createContext(null),t.AlbumGroupStateContext=s.default.createContext(null),t.AlbumGroupDispatchContext=s.default.createContext(null),t.AlbumTableListProvider=e=>{const a=i.getQuery("albumId"),[l,d]=s.useState(),[c,m]=s.useState(!1),[f,p]=s.useState(1),[_,h]=s.useState(10),[g,E]=s.useState(""),[b,v]=s.useState(""),[y,T]=s.useState(null),[N,S]=s.useState(u.ALBUM_TABLE_TYPE.OFFLINE),[C,x]=s.useState(0),[w,I]=s.useState(o.Read),L=s.useMemo(()=>({albumId:a,withTableCount:!0}),[a]),[O,P,M,k]=n.useRequest(r.AlbumApi.getAlbumGroup,L),D=s.useCallback(async()=>{if(!a)return;const e=Number(a);m(!0),r.AlbumApi.getAlbumTable({pageCurrent:f,pageSize:_,pageFilter:{tableType:N,albumId:e,projectCode:g,tableName:b,groupId:y}}).then(e=>{x(e.total),m(!1),d(e.records)})},[a,f,_,g,b,N,y]),A=s.useMemo(()=>({loading:c,tableList:l,tableType:N,groupId:y,total:C,pageSize:_,pageCurrent:f,fetchTableList:D}),[c,f,_,l,C,N,y,D]),j=s.useMemo(()=>({setPageCurrent:p,setPageSize:h,setProjectCode:E,setTableName:v,setTableType:S,setGroupId:T}),[]),F=s.useCallback(()=>{k(L)},[k,L]),R=s.useMemo(()=>({currentMode:w,dataSource:null!=O?O:[],groupLoading:P,errorMessage:M}),[w,O,M,P]),H=s.useMemo(()=>({setCurrentMode:I,updateList:F}),[F]);return s.useEffect(()=>{if(!a)return;const e=Number(a);m(!0),r.AlbumApi.getAlbumTable({pageCurrent:f,pageSize:_,pageFilter:{tableType:N,albumId:e,projectCode:g,tableName:b,groupId:y}}).then(e=>{x(e.total),m(!1),d(e.records)})},[a,f,_,g,b,N,y]),s.default.createElement(t.AlbumTableListStateContext.Provider,{value:A},s.default.createElement(t.AlbumTableListDispatchContext.Provider,{value:j},s.default.createElement(t.AlbumGroupStateContext.Provider,{value:R},s.default.createElement(t.AlbumGroupDispatchContext.Provider,{value:H},e.children))))}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const l=a(30),n=a(0);t.useExportList=(e,t)=>n.useCallback((a,n=t)=>{const i=[],r=[];for(const{title:t,key:a,dataIndex:l}of e)["action","sql"].includes(l)||(i.push(`"${t}"`),r.push(a||l));const u="\ufeff"+[i,...a.map(e=>r.map(t=>{var a;return`"${(null===(a=e[t])||void 0===a?void 0:a.toString())||""}"`}))].map(e=>e.join(",")).join("\n");l.downloadCsv(n,u)},[t,e])},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const l=a(30),n=a(160),i=a(166),r=a(206),u=a(103);new Map;t.hiveLineageApi={entityType:async(e="TABLE")=>n.get("lineage/entityType",{scope:e}),viewType:async(e="TABLE")=>n.get("lineage/viewType",{scope:e}),async tableLineagePage(e){var t;const a=await n.request(r.POST,"lineage/tableLineagePage",e);for(const e of a.records)e.uuid=u.uuid(),e.ownerLabel=`${null===(t=e.owner)||void 0===t?void 0:t.name}(${e.owner.account})`,e.createTimeLabel=l.formatTime(e.createTime);return a},async tableLineageGraph(e){const t=await n.request(r.POST,"lineage/tableLineageGraph",e);t.refEntity&&(t.refEntity.uuid=u.uuid());for(const e of t.upEntities)e.uuid=u.uuid(),e.createTimeLabel=l.formatTime(e.createTime);for(const e of t.downEntities)e.uuid=u.uuid(),e.createTimeLabel=l.formatTime(e.createTime);return t},async tableLineageStatistic(e){const t=await n.get("lineage/tableLineageStatistic",{uri:e});return t.allUpLabel=i.thousandthsNum(t.allUp),t.allDownLabel=i.thousandthsNum(t.allDown),t.directDownLabel=i.thousandthsNum(t.directDown),t.directUpLabel=i.thousandthsNum(t.directUp),t},async columnLineagePage(e){var t;const a=await n.request(r.POST,"lineage/columnLineagePage",e);for(const e of a.records)e.ownerLabel=`${null===(t=e.owner)||void 0===t?void 0:t.name}(${e.owner.account})`;return a},async columnLineageGraph(e){const t=await n.request(r.POST,"lineage/columnLineageGraph",e);t.refEntity.uuid=u.uuid();for(const e of t.upEntities)e.uuid=u.uuid(),e.createTimeLabel=l.formatTime(e.createTime);for(const e of t.downEntities)e.uuid=u.uuid(),e.createTimeLabel=l.formatTime(e.createTime);return t},async columnLineageStatistic(e){const t=await n.get("lineage/columnLineageStatistic",{uri:e});return t.allUpLabel=i.thousandthsNum(t.allUp),t.allDownLabel=i.thousandthsNum(t.allDown),t.directDownLabel=i.thousandthsNum(t.directDown),t.directUpLabel=i.thousandthsNum(t.directUp),t},async searchLineageRelation(e){if(!e.sourceEntityName||!e.targetEntityName)return;const t=await n.request(r.FETCH_METHOD.POST,"lineage/tableLineagePath",e);for(const e of t)e.uuid=u.uuid(),e.createTimeLabel=l.formatTime(e.createTime);return t},async filterMysqlEntity(e){if(!e)return[];let t=[];return t=await n.get("lineage/filterMysqlEntity",{mysqlDbAndTableName:e}),t.map(e=>({...e,key:u.uuid(),value:`${e.dbName}.${e.tableName}.${e.userName}.${e.offlineUserName}`}))}}},function(e,t,a){"use strict";var l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=a(233),i=a(142),r=l(a(0)),u=a(175);t.CountsDispatchContext=r.default.createContext(null),t.CountsStateContext=r.default.createContext(null),t.CountsConditionProvider=e=>{const[a,l]=r.useState(null),[s,o]=r.useState(null),[d,c]=r.useState(null),[m,f]=r.useState(null),[p,_]=r.useState(null),[h,g]=r.useState(null),[E,b]=r.useState(null),[v,y]=r.useState(null),{keyword:T}=r.useContext(u.SearchContext),[N,S]=n.useRequest(i.v1SearchApi.tableCountCommon,T);r.useEffect(()=>{N&&(l(N.rdsCount),o(N.streamCount),c(N.hiveCount),f(N.metricCount),_(N.publicLogCount),y(N.dataeRepCount))},[N]);const C=async()=>{try{const e=await i.v1SearchApi.OmegaCountTracking({pageFilter:{keyword:T}});g(e)}catch(e){}},x=async()=>{try{const e=await i.v1SearchApi.FeatureCount({pageFilter:{keyword:T}});b(e)}catch(e){}};r.useEffect(()=>{x(),C()},[]),r.useEffect(()=>{(h||0==h)&&(C(),x())},[N]);const w=r.useMemo(()=>({rdsCount:a,streamCount:s,hiveCount:d,countLoading:S,metricCount:m,publicLogCount:p,eventTrackingCount:h,featureCount:E,dataeCount:v}),[a,s,d,S,m,p,h,E,v]),I=r.useMemo(()=>({countLoading:S,setRdsCount:l,setStreamCount:o,setHiveCount:c,setMetricCount:f,setPublicLogCount:_,setEventTrackingCount:g,setFeatureCount:b,setDataeCount:y}),[l,o,c,S,g]);return r.default.createElement(t.CountsStateContext.Provider,{value:w},r.default.createElement(t.CountsDispatchContext.Provider,{value:I},e.children))}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const l=a(206),n=a(160);t.tableMetaApi={async getMeta(e){const t=await n.get("hive/meta/table/getInfoWhenEdit",{uri:e});t.categoryMap={};for(const e of t.categoryList)t.categoryMap[e.id]=e.itemList.map(({id:e})=>e);return t},updateMeta:async e=>n.request(l.PUT,"hive/meta/table/edit",e),addChoicest:async e=>n.request(l.POST,"hive/meta/table/addChoicest",e),addStreamChoicest:async e=>n.request(l.POST,"meta/stream/choicest/add",e),removeChoicest:async e=>n.request(l.DELETE,"hive/meta/table/deleteChoicest",e),removeStreamChoicest:async e=>n.request(l.DELETE,"meta/stream/choicest/delete",e),hidden:async e=>n.request(l.POST,"hive/meta/table/hidden",e),show:async e=>n.request(l.DELETE,"hive/meta/table/hidden",e),cancelCare:async e=>n.request(l.DELETE,"meta/likeBatch",e)}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const l=a(166),n=a(206),i=a(103),r=a(160);t.userApi={async tableListByTechOwner(e){const t=await r.request(n.FETCH_METHOD.POST,"mine/table/techOwner",e);for(const e of t.records)e.tableUri=i.generateUri(e.dbName,e.tableName),e.url="/detail",e.dbTableLabel=`${e.dbName}.${e.tableName}`,e.accessDays93dLabel=String(e.accessDays93d||"-"),e.createTimeLabel=l.humanDate(e.createTime),e.modifyTimeLabel=l.humanDate(e.modifyTime),e.directDownstreamCountLabel=l.thousandthsNum(e.directDownstreamCount);return t},async tableListByTechOwnerStream(e){const t=await r.request(n.FETCH_METHOD.POST,"meta/stream/dataOwner",e);for(const e of t.records)e.tableUri=i.generateStreamUri(e.dbName,e.tableName),e.url="/detail/stream",e.dbTableLabel=`${e.dbName}.${e.tableName}`,e.last30DayVisitCount=String(e.last30DayVisitCount||"-"),e.createTimeLabel=l.humanDate(e.createTime),e.modifyTimeLabel=l.humanDate(e.modifyTime);return t},async tableListByDataOwner(e){const t=await r.request(n.FETCH_METHOD.POST,"mine/table/dataOwner",e);for(const e of t.records)e.tableUri=i.generateUri(e.dbName,e.tableName),e.dbTableLabel=`${e.dbName}.${e.tableName}`,e.createTimeLabel=l.humanDate(e.createTime),e.likeCountLabel=l.thousandthsNum(e.likeCount),e.modifyTimeLabel=l.humanDate(e.modifyTime),e.last30DayVisitCountLabel=l.thousandthsNum(e.last30DayVisitCount),e.url="/detail";return t},async tableListByRecentVisit(e){const t=await r.request(n.FETCH_METHOD.POST,"mine/table/recent",e);for(const e of t.records)e.tableUri=i.generateUri(e.dbName,e.tableName),e.dbTableLabel=`${e.dbName}.${e.tableName}`,e.createTimeLabel=l.humanDate(e.createTime),e.recentViewTimeLabel=l.humanDate(e.recentViewTime),e.modifyTimeLabel=l.humanDate(e.modifyTime),e.url="/detail";return t},async tableListByRecentStreamVisit(e){const t=await r.get("meta/stream/recent",e);for(const e of t.records)e.tableUri=i.generateStreamUri(e.dbName,e.tableName),e.dbTableLabel=`${e.dbName}.${e.tableName}`,e.createTimeLabel=l.humanDate(e.createTime),e.recentViewTimeLabel=l.humanDate(e.recentViewTime),e.modifyTimeLabel=l.humanDate(e.modifyTime),e.url="/detail/stream";return{total:t.total,records:t.records.splice(e.pageSize*(e.pageCurrent-1),e.pageSize*e.pageCurrent)}},async tableListByCare(e){const t=await r.request(n.FETCH_METHOD.POST,"mine/table/like",e);for(const e of t.records)e.tableUri=i.generateUri(e.dbName,e.tableName),e.dbTableLabel=`${e.dbName}.${e.tableName}`,e.createTimeLabel=l.humanDate(e.createTime),e.likeTimeLabel=l.humanDate(e.likeTime),e.modifyTimeLabel=l.humanDate(e.modifyTime),e.url="/detail";return t},async tableListByCareStream(e){const t=await r.get("meta/stream/like",e);for(const e of t.records)e.tableUri=i.generateStreamUri(e.dbName,e.tableName),e.dbTableLabel=`${e.dbName}.${e.tableName}`,e.createTimeLabel=l.humanDate(e.createTime),e.likeTimeLabel=l.humanDate(e.likeTime),e.modifyTimeLabel=l.humanDate(e.modifyTime),e.url="/detail/stream";return t},transformDataOwner:async e=>r.request(n.FETCH_METHOD.POST,"mine/table/transferDataOwner",e)}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";var l;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.OFFLINE="OFFLINE",e.STREAM="STREAM"}(t.ALBUM_TABLE_TYPE||(t.ALBUM_TABLE_TYPE={})),function(e){e.CONTENT="album-content",e.GRAPH="album-table-graph",e.DESC="album-description"}(t.ALBUM_DETAIL_TABS||(t.ALBUM_DETAIL_TABS={})),function(e){e.INIT="INIT",e.DELETE="DELETE",e.UPDATE_PUBLIC="UPDATE_PUBLIC"}(l=t.ALBUM_ACTION_TYPES||(t.ALBUM_ACTION_TYPES={})),t.AlbumDetailReducer=(e,t)=>{switch(t.type){case l.INIT:return t.detail;case l.UPDATE_PUBLIC:return{...e,isPublic:null==t?void 0:t.updatedPublicValue};default:return e}}},function(e,t,a){"use strict";var l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=a(30),i=a(176),r=a(174),u=l(a(0)),s=a(363);t.AlbumDetailContext=u.default.createContext({loading:!1,errorMessage:"",detail:null,isAdmin:!1,fetchDetail:null,dispatchDetail:null}),t.AlbumDetailProvider=e=>{const[a,l]=u.useState(!1),[o,d]=u.useState(!1),[c,m]=u.useState(""),[f,p]=u.useReducer(s.AlbumDetailReducer,null),_=n.getQuery("albumId");u.useEffect(()=>{if(!_)return;(async()=>{l(!0);try{const e=Number(_),t=await r.AlbumApi.albumDetail(e);p({type:s.ALBUM_ACTION_TYPES.INIT,detail:t}),t.isAlbumAdmin&&d(!0)}catch(e){i.message.error(e.message),m(e.message)}l(!1)})()},[_]);const h=u.useCallback(async()=>{var e;l(!0);try{const t=Number(_),a=await r.AlbumApi.albumDetail(t);p({type:s.ALBUM_ACTION_TYPES.INIT,detail:a}),(a.creator.account===n.getUsername()||(null===(e=a.managerList)||void 0===e?void 0:e.length)>0&&a.managerList.filter(e=>e.account===n.getUsername()).length>0)&&d(!0)}catch(e){m(e.message)}l(!1)},[_]),g=u.useMemo(()=>({loading:a,detail:f,fetchDetail:h,errorMessage:c,isAdmin:o,dispatchDetail:p}),[a,f,h,c,o]);return u.default.createElement(t.AlbumDetailContext.Provider,{value:g},e.children)}},,,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const l=a(276),n=a(0),i=a(19);t.useNpsLabel=()=>{const{t:e}=i.useTranslation();return n.useMemo(()=>({[l.AppraisalStarId.VeryGood]:e("nps:力荐"),[l.AppraisalStarId.Recommend]:e("nps:推荐"),[l.AppraisalStarId.NotBad]:e("nps:还行"),[l.AppraisalStarId.Bad]:e("nps:较差"),[l.AppraisalStarId.VeryBad]:e("nps:很差")}),[e])}},,function(e,t,a){"use strict";var l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=a(148),i=l(a(0)),r=a(19),u=a(117);t.useTableName=function(){const{t:e}=r.useTranslation();return i.useMemo(()=>({title:e("category:表名"),width:210,dataIndex:"dbTableLabel",render:(e,t)=>i.default.createElement(u.Link,{to:{pathname:t.url,search:"?uri="+t.tableUri,state:{referer:n.RefererType.INNER}}},t.dbTableLabel)}),[e])}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";var l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=a(26),i=a(148),r=l(a(0)),u=a(19),s=a(117),o=a(103);t.useTableNameColumn=function(){const{t:e}=u.useTranslation();return r.useMemo(()=>({title:e("category:表名"),dataIndex:"tableName",ellipsis:!0,render:(e,t)=>r.default.createElement(n.Tooltip,{title:`${t.dbName}.${t.tableName}`,placement:"topLeft"},r.default.createElement(s.Link,{to:{pathname:"/detail",search:"?uri="+o.generateUri(t.dbName,t.tableName),state:{referer:i.RefererType.INNER}}},t.dbName,".",t.tableName))}),[e])}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=a(26),i=a(148),r=l(a(0)),u=a(19),s=a(143),o=a(103),d=l(a(1715));t.useAddChoicestResponse=function(){const e=s.useHistory(),{t:t}=u.useTranslation();return a=>{var l;if(null===(l=a.failResultList)||void 0===l?void 0:l.length){const l=n.Modal.info({width:500,title:r.default.createElement(u.Trans,{i18nKey:"message:成功加精",values:{total:a.successCount}},"已成功加精",""+a.successCount,"张表，但以下数据表不符合加精条件的未成功"),className:d.default.addChoicestResultModal,content:r.default.createElement("div",null,r.default.createElement("div",{className:d.default.intro},t("message:数据表需要满足：1.非分区字段需要80%以上有描述；2.表说明需要有不少于36个字符的内容")),r.default.createElement("div",{className:d.default.list},a.failResultList.map(({dbName:t,tableName:a},n)=>r.default.createElement("div",{key:n,onClick:()=>{e.push({pathname:"/detail",search:"?uri="+o.generateUri(t,a),state:{referer:i.RefererType.INNER}}),l.destroy()}},`${t}.${a}`))))})}}}},,,,function(e,t,a){e.exports={"tab-usage":"index_tab-usage_3EIGR",tabUsage:"index_tab-usage_3EIGR","usage-pane":"index_usage-pane_u1ZtX",usagePane:"index_usage-pane_u1ZtX","column-usage-pane":"index_column-usage-pane_1r9Ef",columnUsagePane:"index_column-usage-pane_1r9Ef","usage-times-pane":"index_usage-times-pane_3Mmrq",usageTimesPane:"index_usage-times-pane_3Mmrq","template-pane":"index_template-pane_2hXCg",templatePane:"index_template-pane_2hXCg","join-pane":"index_join-pane_1Tfat",joinPane:"index_join-pane_1Tfat",hd:"index_hd_27IVo",title:"index_title_BV5Sp",tip:"index_tip_oMZFf",text:"index_text_6kh8S",left:"index_left_1G5dG",right:"index_right_3Q3VC","input-search":"index_input-search_39sBf",inputSearch:"index_input-search_39sBf","action-export":"index_action-export_2u7kt",actionExport:"index_action-export_2u7kt","action-export-all":"index_action-export-all_1iepz",actionExportAll:"index_action-export-all_1iepz","sql-drawer":"index_sql-drawer_ATgIU",sqlDrawer:"index_sql-drawer_ATgIU","sql-view":"index_sql-view_rkbHD",sqlView:"index_sql-view_rkbHD"}},function(e,t,a){"use strict";var l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=a(30),i=a(2177),r=a(1207),u=a(148),s=l(a(0)),o=a(143),d=a(103),c=a(2178);t.PublicLogDetailContext=s.default.createContext(null),t.PublicLogDetailDispatchContext=s.default.createContext(null),t.PublicLogDetailProvider=e=>{var a;const{prevLocation:l}=e,{columnName:m}=d.getDbTableFromUri(n.getQuery("uri")),[f,p]=s.useState(m),[_,h]=s.useState(n.getQuery("uri")),[g,E]=s.useState(!1),[b,v]=s.useState(""),[y,T]=s.useReducer(c.PublicLogDetailReducer,null),[N,S]=s.useState(n.getQuery("tab")||r.IPublicLogDetailTab.DETAIL),C=o.useLocation(),x=null===(a=C.state)||void 0===a?void 0:a.referer,w=s.useMemo(()=>{if(x)return x;try{const{host:e,pathname:t}=new URL(document.referrer);if(e.startsWith("datamap"))return"/search"===t?u.RefererType.SEARCH:u.RefererType.INNER}catch(e){}return u.RefererType.EXTERNAL},[x]);s.useEffect(()=>{if("/detail"===(null==l?void 0:l.pathname)){const e=new URLSearchParams(l.search),t=new URLSearchParams(C.search),a=t.get("uri"),{dbName:n,tableName:i,columnName:u}=d.getDbTableFromUri(a);u&&p(u),h(d.generateUri(n,i)),a!==e.get("uri")&&S(t.get("tab")||r.IPublicLogDetailTab.DETAIL)}},[l,C]);const I=s.useCallback(async()=>{if(_){v(""),E(!0);try{const e=await i.v1PublicLogInfoApi.detailInfo(_,w);T({type:c.PUBLIC_LOG_DETAIL_ACTION_TYPES.INIT,init:e})}catch(e){v(e.message)}E(!1)}},[_,w]);s.useEffect(()=>{I()},[I]);const L=s.useMemo(()=>({loading:g,errorMessage:b,fetchDetail:I,detail:y,sharedColumnName:f,uri:n.getQuery("uri"),tab:N,setTab:e=>{S(e),n.updateQuery({tab:e===r.IPublicLogDetailTab.DETAIL?null:e,viewMode:null,subTab:null})}}),[g,b,I,y,f,N,S]);return s.default.createElement(t.PublicLogDetailContext.Provider,{value:L},s.default.createElement(t.PublicLogDetailDispatchContext.Provider,{value:T},e.children))}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=a(142),i=a(26),r=l(a(0)),u=a(19);t.ZanActive=e=>{const{owner:t,count:a,active:l}=e,{t:s}=u.useTranslation();return r.default.createElement(r.default.Fragment,null,r.default.createElement(i.IconFont,{style:{fontSize:"14px",padding:"0 4px",color:l?"#f27e49":"#D6D6D6"},type:l?"icon-zan-active":"icon-zan",onClick:async()=>{try{const{count:a,isAdd:l,account:i}=await n.v1SearchApi.smooth({dataOwner:t.account,isIncrease:!0});e.onClick({count:a||0,isAdd:l||!1,account:i})}catch(e){}}}),r.default.createElement("span",null,"(",s("detail:沟通顺畅"),":",a||0,")"))},t.default=t.ZanActive},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){e.exports={"choicest-table-list":"style_choicest-table-list_2rWP_",choicestTableList:"style_choicest-table-list_2rWP_","action-remove":"style_action-remove_2xoeh",actionRemove:"style_action-remove_2xoeh",actions:"style_actions_2YqKO","popover-delete":"style_popover-delete_3BMr4",popoverDelete:"style_popover-delete_3BMr4",content:"style_content_2E7y-",text:"style_text_8wE9s","filter-wrapper":"style_filter-wrapper_2-hiw",filterWrapper:"style_filter-wrapper_2-hiw",filter:"style_filter_1e8OV","table-name":"style_table-name_2ciwd",tableName:"style_table-name_2ciwd","quick-add":"style_quick-add_25qhL",quickAdd:"style_quick-add_25qhL","import-table":"style_import-table_22oRa",importTable:"style_import-table_22oRa"}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const l=a(160),n=a(206);t.notifyApi={async getNotifyList(e){const t=await l.request(n.POST,"/changeNotify/list",e);return t.records||(t.records=[]),t},getNotifyDetail:async e=>await l.request(n.GET,"/changeNotify/detail?notifyId="+e),getListTypes:async()=>await l.request(n.GET,"/changeNotify/listTypes"),getPublicLogDetail:async()=>await l.request(n.GET,"/publicLog/detail"),setChangeNotifySubmit:async e=>await l.request(n.POST,"changeNotify/submit",e),setHiveDetailAdd:async()=>await l.request(n.GET,"/v1/hive/meta/table/common"),getTableTips:async e=>await l.request(n.GET,"/changeNotify/tableTips?keyword="+e),getTableTipDetail:async e=>l.request(n.GET,"/changeNotify/tableTipDetail?uri="+e),async getAffectDetail(e){if("DIRECT"==e.pageFilter.dependencyType||"INDIRECT"===e.pageFilter.dependencyType){return await l.request(n.POST,"/changeNotify/affectDetail",e)}if("HASAUTH"==e.pageFilter.dependencyType||"FAV"===e.pageFilter.dependencyType){return await l.request(n.POST,"/changeNotify/affectDetail",e)}}}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=l(a(118)),r=a(26),u=a(106),s=n(a(0)),o=l(a(182));t.DetailUnfold=e=>{const t=s.useContext(u.HiveDetailContext),[a,l]=s.useState(()=>{if(!t)return!0;const e=localStorage.getItem(t.uri);if(e){const t=e.split(","),a="false"!==t[0],l=Number(t[1]);if(!a&&Date.now()-l<6048e5)return!1}return!0});return s.default.createElement(s.default.Fragment,null,s.default.createElement("div",{className:o.default.baseInfoWrapper},a&&s.default.createElement("div",{className:o.default.baseInfoContainer},s.default.createElement(i.default,{spinning:e.loading},e.children)),s.default.createElement("div",{className:o.default.unfold},s.default.createElement("div",{className:o.default.actionWrapper,onClick:()=>{l(!a);const e=[String(!a),String(Date.now())].join(",");localStorage.setItem(null==t?void 0:t.uri,e)}},s.default.createElement("div",{className:o.default.action},s.default.createElement(r.IconFont,{type:a?"icon-left":"icon-right"}))))))}},function(e,t,a){"use strict";var l;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.INIT="INIT",e.DETAIL="DETAIL"}(l=t.HIVE_TABLE_ACTION_TYPES||(t.HIVE_TABLE_ACTION_TYPES={})),t.HiveDetailReducer=(e,t)=>{switch(t.type){case l.INIT:return t.init;case l.DETAIL:return{...e,...t.detail};default:return e}}},function(e,t,a){"use strict";var l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=a(30),i=a(1166),r=a(1167),u=l(a(0)),s=a(143),o=a(103),d=a(2027);t.DataeDetailContext=u.default.createContext(null),t.MysqlDetailDispatchContext=u.default.createContext(null),t.DataeDetailProvider=e=>{const{prevLocation:a}=e,{columnName:l}=o.getDbTableFromUri(n.getQuery("uri")),[c,m]=u.useState(l),[f,p]=u.useState(n.getQuery("uri")),[_,h]=u.useState(!1),[g,E]=u.useState(""),[b,v]=u.useReducer(d.DataeDetailReducer,null),[y,T]=u.useState(n.getQuery("tab")||r.IDataeDetailTab.STATEMENT_DETAIL),N=s.useLocation();u.useEffect(()=>{if("/detail"===(null==a?void 0:a.pathname)){const e=new URLSearchParams(a.search),t=new URLSearchParams(N.search),l=t.get("uri"),{dbName:n,tableName:i,columnName:u}=o.getDbTableFromUri(l);u&&m(u),p(o.generateUri(n,i)),l!==e.get("uri")&&T(t.get("tab")||r.IDataeDetailTab.STATEMENT_DETAIL)}},[a,N]),u.useEffect(()=>{if(!f)return;let e=!1;return(async()=>{try{E(""),h(!0);const t=await i.v1DataeInfoApi.dataeTableInfo(f);if(e)return;v({type:d.DATAE_TABLE_ACTION_TYPES.INIT,init:t})}catch(t){if(e)return;E(t.message)}h(!1)})(),()=>e=!0},[f,v]);const S=u.useCallback(async()=>{E(""),h(!0);try{const e=await i.v1DataeInfoApi.dataeTableInfo(f);v({type:d.DATAE_TABLE_ACTION_TYPES.INIT,init:e})}catch(e){E(e.message)}h(!1)},[f]),C=u.useMemo(()=>({loading:_,errorMessage:g,fetchDetail:S,detail:b,tableId:null==b?void 0:b.id,sharedColumnName:c,uri:(null==b?void 0:b.uri)||n.getQuery("uri"),tab:y,setTab:e=>{T(e),n.updateQuery({tab:e===r.IDataeDetailTab.STATEMENT_DETAIL?null:e,viewMode:null,subTab:null})}}),[_,g,S,b,c,y,T]);return u.default.createElement(t.DataeDetailContext.Provider,{value:C},u.default.createElement(t.MysqlDetailDispatchContext.Provider,{value:v},e.children))}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const l=a(160),n=a(166),i=a(206),r=a(103);let u={};t.v1HiveUsageApi={async visibleUsageList(e){if(!u[e]){const t=await l.get("visit/puv",{uri:e});for(const e of t)e.dateLabel=n.humanDate(e.date,"MM-DD"),e.uvLabel=n.thousandthsNum(e.uv),e.pvLabel=n.thousandthsNum(e.pv);u={[e]:t}}return u[e]},async columnUsageList(e){const t=await l.request(i.POST,"visit/pageColumnUsage",e);for(const e of t.records)e.selectTimesLabel=n.thousandthsNum(e.selectTimes),e.whereTimesLabel=n.thousandthsNum(e.whereTimes),e.groupByTimesLabel=n.thousandthsNum(e.groupByTimes),e.joinTimesLabel=n.thousandthsNum(e.joinTimes);return t},async templateUsageList(e){var t;const a=await l.request(i.POST,"visit/pageTemplateUsage",e);for(const e of a.records)e.refTimesLabel=n.thousandthsNum(e.refTimes),e.ownerLabel=`${null===(t=e.owner)||void 0===t?void 0:t.name}(${e.owner.account})`;return a},async commonUsageList(e){var t;const a=await l.request(i.POST,"visit/pageUsage",e);for(const e of a.records)e.countLabel=n.thousandthsNum(e.count),e.ownerLabel=`${null===(t=e.owner)||void 0===t?void 0:t.name}(${e.owner.account})`;return a},async joinUsageList(e){const t=await l.request(i.POST,"visit/pageJoinUsage",e);for(const e of t.records)e.tableUri=r.generateUri(e.dbName,e.tableName),e.dbTableLabel=`${e.dbName}.${e.tableName}`,e.joinTimesLabel=n.thousandthsNum(e.joinTimes);return t}}},function(e,t,a){"use strict";var l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=a(30),i=a(181),r=a(1208),u=a(148),s=l(a(0)),o=a(143),d=a(103),c=a(2189);t.MysqlDetailContext=s.default.createContext(null),t.MysqlDetailDispatchContext=s.default.createContext(null),t.MysqlDetailProvider=e=>{var a;const{prevLocation:l}=e,{columnName:m}=d.getDbTableFromUri(n.getQuery("uri")),[f,p]=s.useState(m),[_,h]=s.useState(n.getQuery("uri")),[g,E]=s.useState(!1),[b,v]=s.useState(""),[y,T]=s.useReducer(c.MysqlDetailReducer,null),[N,S]=s.useState(n.getQuery("tab")||r.IMysqlDetailTab.FIELD_INFO),C=o.useLocation(),x=null===(a=C.state)||void 0===a?void 0:a.referer,w=s.useMemo(()=>{if(x)return x;try{const{host:e,pathname:t}=new URL(document.referrer);if(e.startsWith("datamap"))return"/search"===t?u.RefererType.SEARCH:u.RefererType.INNER}catch(e){}return u.RefererType.EXTERNAL},[x]);s.useEffect(()=>{if("/detail"===(null==l?void 0:l.pathname)){const e=new URLSearchParams(l.search),t=new URLSearchParams(C.search),a=t.get("uri"),{dbName:n,tableName:i,columnName:u}=d.getDbTableFromUri(a);u&&p(u),h(d.generateUri(n,i)),a!==e.get("uri")&&S(t.get("tab")||r.IMysqlDetailTab.FIELD_INFO)}},[l,C]),s.useEffect(()=>{if(!_)return;let e=!1;return(async()=>{try{v(""),E(!0);const t=await i.v1TableDetailApi.mysqlTableInfo(_,w);if(e)return;T({type:c.MYSQL_TABLE_ACTION_TYPES.INIT,init:t})}catch(t){if(e)return;v(t.message)}E(!1)})(),()=>e=!0},[_,T,w]);const I=s.useCallback(async()=>{v(""),E(!0);try{const e=await i.v1TableDetailApi.mysqlTableInfo(_,w,!0);T({type:c.MYSQL_TABLE_ACTION_TYPES.INIT,init:e})}catch(e){v(e.message)}E(!1)},[_,w]),L=s.useMemo(()=>({loading:g,errorMessage:b,fetchDetail:I,detail:y,sharedColumnName:f,uri:(null==y?void 0:y.uri)||n.getQuery("uri"),tableId:null==y?void 0:y.tableId,tab:N,setTab:e=>{S(e),n.updateQuery({tab:e===r.IMysqlDetailTab.FIELD_INFO?null:e,viewMode:null,subTab:null})}}),[g,b,I,y,f,N,S]);return s.default.createElement(t.MysqlDetailContext.Provider,{value:L},s.default.createElement(t.MysqlDetailDispatchContext.Provider,{value:T},e.children))}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=a(30),i=l(a(320)),r=a(160);let u=null;t.v1HomeApi={recommendList:async()=>r.get("board/recommend"),async metaDataStatistics(){const e=await r.get("board/metaDataStatistics");for(const t of e)t.numLabel=n.humanNum(t.num,{useGrouping:!0});return e},async hotKeywords(){try{return r.get("board/hotKeywords")}catch(e){return[]}},async categories(e=!1){if(u&&!e)return u;try{const e=await r.get("board/categories"),t={},a=[];for(const l of e)l.parentId?(t[l.parentId]||(t[l.parentId]=[]),t[l.parentId].push(l)):a.push(l);const l=e=>{if(null==e?void 0:e.length)for(const a of e)t[a.treeId]&&(a.children=t[a.treeId],l(a.children))};l(a),u=a}catch(e){u=[]}return u},async announcement(){try{const e=await r.get("board/announcement");for(const t of e)t.timestampLabel=i.default(t.timestamp).format("YYYY-MM-DD");return e}catch(e){return[]}}}},function(e,t,a){e.exports={"project-page":"style_project-page_14MvT",projectPage:"style_project-page_14MvT",hd:"style_hd_2ji0R",left:"style_left_3wtrM",title:"style_title_1bXWk",desc:"style_desc_1Csti",statistics:"style_statistics_GwErA",item:"style_item_3pCOj",label:"style_label_1ylf8",value:"style_value_1KE0c",border:"style_border_3vJ8K",content:"style_content_2r446",info:"style_info_Ro4qt",user:"style_user_sjUQC",filter:"style_filter_3mVcD",intro:"style_intro_rkepK",text:"style_text_29fN7","table-name":"style_table-name_3ixva",tableName:"style_table-name_3ixva",choicest:"style_choicest_170-l"}},function(e,t,a){"use strict";var l;Object.defineProperty(t,"__esModule",{value:!0}),t.OPTION_KEYS=["isRecent"],function(e){e.PARAMS="PARAMS",e.UPDATE_BU="UPDATE_BU",e.RESET="RESET",e.RESET_WITHOUT_KEYWORD="RESET_WITHOUT_KEYWORD"}(l=t.MYSQL_ACTION_TYPES||(t.MYSQL_ACTION_TYPES={})),t.COLLECT_STATUS=["未采集","已采集"],t.countryMap={cn:"国内",us:"美东",ru:"俄罗斯"},t.MysqlParamsReducer=(e,t)=>{switch(t.type){case l.PARAMS:return{...e,...t.params};case l.UPDATE_BU:return{...e,pageFilter:{bu:t.params.bu,collectStatus:void 0,ownerList:[],isRecent:!1},bu:t.params.bu,collectStatus:void 0,ownerList:[],isRecent:!1};case l.RESET:case l.RESET_WITHOUT_KEYWORD:return{pageFilter:{bu:void 0,collectStatus:void 0,ownerList:[],isRecent:!1},bu:void 0,collectStatus:void 0,ownerList:[],isRecent:!1};default:return e}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=a(30),r=l(a(320));a(1332),a(1333);const u=l(a(2392)),s=a(19),o=n(a(1344)),d=n(a(1345)),c=n(a(1346)),m=n(a(1347)),f=n(a(1348)),p=n(a(1349)),_=n(a(1350)),h=n(a(1351)),g=n(a(1352)),E=n(a(1353)),b=n(a(1354)),v=n(a(1355)),y=n(a(1356));var T;!function(e){e.ZH="zh",e.EN="en"}(T=t.Language||(t.Language={}));t.defaultLanguage=i.getCookie("lang")||(()=>{const e=navigator.language;return["zh","zh-CN","zh-TW","zh-HK"].includes(e)?T.ZH:T.EN})();const N={en:{common:c,category:d,detail:m,hiveTable:f,home:p,admin:o,message:_,search:b,nps:g,project:E,user:y,notify:h,toolHive:v},zh:{}};u.default.use(s.initReactI18next).init({defaultNS:"common",resources:N,lng:t.defaultLanguage,fallbackLng:T.ZH,interpolation:{escapeValue:!1}}),r.default.locale(t.defaultLanguage),t.changeLanguage=async e=>{e!==u.default.language&&(i.setCookie("lang",e),r.default.locale(e),await u.default.changeLanguage(e))}},,,,,,,,,,,,,,,,,,,function(e,t,a){e.exports={header:"index_header_38GMd",logo:"index_logo_3hkaV",lng:"index_lng_3UzsC","header-item":"index_header-item_Hei2A",headerItem:"index_header-item_Hei2A"}},function(e,t,a){"use strict";var l;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.INIT="INIT",e.EDIT="EDIT",e.EDIT_ITEM="EDIT_ITEM",e.ADD="ADD",e.ADD_ITEM="ADD_ITEM",e.ADD_FINISH="ADD_FINISH",e.ADD_ITEM_FINISH="ADD_ITEM_FINISH",e.DELETE="DELETE",e.DELETE_ITEM="DELETE_ITEM",e.SUBMIT="SUBMIT",e.SUBMIT_ITEM="SUBMIT_ITEM",e.FOLD="FOLD"}(l=t.CATEGORY_ACTION_TYPES||(t.CATEGORY_ACTION_TYPES={})),t.PUBLIC_SECTOR_ID=12,t.CategoriesReducer=(e,t)=>{switch(t.type){case l.INIT:return t.categories;case l.FOLD:{const a=JSON.parse(JSON.stringify(e));for(const e of a)e.categoryId===t.categoryId&&(e.fold=t.fold);return a}case l.EDIT:{const a=JSON.parse(JSON.stringify(e));for(const e of a)e.categoryId===t.categoryId&&(e.edit=t.edit);return a}case l.EDIT_ITEM:{const a=JSON.parse(JSON.stringify(e));for(const e of a)if(e.categoryId===t.categoryId)for(const a of e.itemList)a.itemId===t.itemId&&(a.edit=t.edit);return a}case l.ADD:{const t=JSON.parse(JSON.stringify(e));return[{edit:!0,fold:!1,isNew:!0,categoryId:Math.round(1e7*Math.random()),categoryName:void 0,canEdit:!0,itemList:[]}].concat(t)}case l.ADD_ITEM:{const a=JSON.parse(JSON.stringify(e));for(const e of a)if(e.categoryId===t.categoryId){const t={edit:!0,isNew:!0,itemId:Math.round(1e7*Math.random()),nameZh:void 0,nameEn:void 0,abbreviation:void 0};e.itemList=[t].concat(e.itemList)}return a}case l.ADD_FINISH:return JSON.parse(JSON.stringify(e)).map(e=>e.categoryId===t.categoryId?t.category:e);case l.ADD_ITEM_FINISH:{const a=JSON.parse(JSON.stringify(e));for(const e of a)e.categoryId===t.categoryId&&(e.itemList=e.itemList.map(e=>e.itemId===t.itemId?t.item:e));return a}case l.DELETE:return JSON.parse(JSON.stringify(e)).filter(e=>e.categoryId!==t.categoryId);case l.DELETE_ITEM:{const a=JSON.parse(JSON.stringify(e));for(const e of a)e.categoryId===t.categoryId&&(e.itemList=e.itemList.filter(e=>e.itemId!==t.itemId));return a}case l.SUBMIT:return JSON.parse(JSON.stringify(e)).map(e=>e.categoryId===t.categoryId?t.category:e);case l.SUBMIT_ITEM:{const a=JSON.parse(JSON.stringify(e));for(const e of a)e.categoryId===t.categoryId&&(e.itemList=e.itemList.map(e=>e.itemId===t.itemId?t.item:e));return a}default:return e}}},function(e,t,a){"use strict";var l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=l(a(0)),i=a(520);t.CategoryContext=n.default.createContext([]),t.CategoryDispatchContext=n.default.createContext(null),t.CategoryProvider=e=>{const[a,l]=n.useReducer(i.CategoriesReducer,null);return n.default.createElement(t.CategoryContext.Provider,{value:a},n.default.createElement(t.CategoryDispatchContext.Provider,{value:l},e.children))}},function(e,t,a){e.exports={"album-detail-content":"index_album-detail-content_3vHdF",albumDetailContent:"index_album-detail-content_3vHdF","detail-tabs":"index_detail-tabs_12-K9",detailTabs:"index_detail-tabs_12-K9","album-table-content-box":"index_album-table-content-box_1GwsR",albumTableContentBox:"index_album-table-content-box_1GwsR",err:"index_err_2wat0","album-content":"index_album-content_2U5WG",albumContent:"index_album-content_2U5WG","album-table-content":"index_album-table-content_3t7qp",albumTableContent:"index_album-table-content_3t7qp","content-filter":"index_content-filter_7BW-3",contentFilter:"index_content-filter_7BW-3",left:"index_left_3S7n_","btn-box":"index_btn-box_1pzwK",btnBox:"index_btn-box_1pzwK",search:"index_search_1BLo8","table-intro":"index_table-intro_3rKb4",tableIntro:"index_table-intro_3rKb4",actions:"index_actions_3Vaqw","markdown-editor":"index_markdown-editor_1VV1R",markdownEditor:"index_markdown-editor_1VV1R","edit-actions":"index_edit-actions_20ohc",editActions:"index_edit-actions_20ohc","edit-preview":"index_edit-preview_2wsSJ",editPreview:"index_edit-preview_2wsSJ","edit-footer-actions":"index_edit-footer-actions_2qzDA",editFooterActions:"index_edit-footer-actions_2qzDA","delete-wrapper":"index_delete-wrapper_1Emjf",deleteWrapper:"index_delete-wrapper_1Emjf",tips:"index_tips_1w1JO","button-wrapper":"index_button-wrapper_3Kl7b",buttonWrapper:"index_button-wrapper_3Kl7b"}},,,function(e,t,a){"use strict";var l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=a(26),r=l(a(0)),u=n(a(43)),s=n(a(2025));function o(){window.scrollTo({left:0,top:0,behavior:"smooth"})}t.GoTop=()=>(r.useEffect(()=>{const e=document.createElement("div");return e.id=s.default.goTop,document.body.insertBefore(e,document.body.lastChild),window.addEventListener("scroll",()=>{window.scrollY<1?e.classList.remove(s.default.show):(u.default.render(r.default.createElement(i.IconFont,{onClick:o,type:"icon-go-top"}),e),e.classList.add(s.default.show))}),()=>e.remove()},[]),r.default.createElement(r.default.Fragment,null))},function(e,t,a){"use strict";var l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=a(259),i=a(26),r=l(a(0)),u=a(19);t.UserSelect=e=>{var t;const{t:a}=u.useTranslation(),[l,s]=r.useState(!1),[o,d]=r.useState(e.user?[e.user]:[]);return r.default.createElement(i.Select,{style:{width:"100%"},placeholder:a("message:请输入名字添加"),notFoundContent:l?r.default.createElement(i.Spin,{size:"small"}):null,filterOption:!1,showSearch:!0,allowClear:!0,value:null===(t=e.user)||void 0===t?void 0:t.account,onSearch:async e=>{if(!e)return void d([]);s(!0);const t=await n.v1CommonApi.searchStaff(e);d(t),s(!1)},onChange:t=>{const a=o.find(e=>t===e.account);a?(e.setUser(a),d([a])):(e.setUser(null),d([]))}},o.map(({name:e,account:t})=>r.default.createElement(i.Select.Option,{key:t,value:t,label:e},e,"(",t,")")))}},,function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=l(a(761)),i=l(a(284)),r=l(a(4)),u=a(26),s=l(a(0)),o=l(a(262)),d=a(19),c=l(a(2098));t.SqlView=e=>{const{t:t}=d.useTranslation();return s.default.createElement("div",{className:r.default(c.default.sqlTemplate),style:{height:e.height}},s.default.createElement("div",{className:c.default.toolBar},s.default.createElement("div",{className:c.default.tip},s.default.createElement(i.default,null),t("message:鼠标点击定位到代码区域，command+f，搜索关键词")),s.default.createElement("div",{className:c.default.right},s.default.createElement(o.default,{text:e.sql,onCopy:()=>u.message.success(t("message:复制成功"))},s.default.createElement(u.IconFont,{type:"icon-copy",className:"hover-theme"})),e.fullscreen&&s.default.createElement(n.default,{className:"hover-theme",onClick:()=>{document.fullscreenElement?document.exitFullscreen():document.querySelector("."+c.default.sqlTemplate).requestFullscreen()}}))),s.default.createElement("div",{className:c.default.sqlContent,id:e.id}))}},,,,,,,function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.scrollToAnchor=(e,t)=>{if(!e)return;const a=document.getElementById(e);a&&window.scroll({top:a.offsetTop+(t||0),left:0,behavior:"smooth"})},t.getBrowserInfo=function(){const e=navigator.userAgent;let t,a=e.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(a[1])?(t=/\brv[ :]+(\d+)/g.exec(e)||[],{name:"IE ",version:t[1]||""}):"Chrome"===a[1]&&(t=e.match(/\bOPR\/(\d+)/),null!=t)?{name:"Opera",version:t[1]}:(a=a[2]?[a[1],a[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(t=e.match(/version\/(\d+)/i))&&a.splice(1,1,t[1]),{name:a[0].toLocaleLowerCase(),version:a[1]})},t.toThousands=function(e){if(""===e)return"NULL";let t=(null!=e?e:0).toString(),a="";for(;t.length>3;)a=","+t.slice(-3)+a,t=t.slice(0,t.length-3);return t&&(a=t+a),a},t.isNull=function(e){return e||0===e?e:"NULL"},t.debounce=function(t,a){let l=null;return function(){const n=this,i=arguments;l&&(clearTimeout(l),l=null),l=e.setTimeout((function(){t.apply(n,i)}),a)}}}).call(this,a(217))},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=l(a(537));t.GRAPH_HEIGHT=750,t.CONTAINER_ID="lineage-container",t.TABLE_ID="table-graph",t.COLUMN_ID="column-graph",t.COLLAPSE_ICON=(e,t,a)=>[["M",e+2,t],["L",e+2*a-2,t]],t.EXPAND_ICON=(e,t,a)=>[["M",e,t],["M",e+2,t],["L",e+2*a-2,t],["M",e+a,t-a+2],["L",e+a,t+a-2]],t.initGraphOptions=(e,a=0,l=0)=>({container:e,width:a,height:l,defaultNode:{shape:"tree-node",anchorPoints:[[0,.5],[1,.5]],size:12,style:{fill:"#40a9ff",stroke:"white"}},defaultEdge:{type:"cubic-horizontal",style:{stroke:"#ddd"}},modes:{default:[{type:"collapse-expand",onChange:(e,a)=>{var l;null===(l=e.get("group").findByClassName("collapse-icon"))||void 0===l||l.attr("symbol",a?t.EXPAND_ICON:t.COLLAPSE_ICON)}},{type:"drag-canvas"}]},layout:{type:"mindmap",direction:"H",getSide:e=>e.data.side,getHGap:()=>0,getWidth:()=>320,getVGap:()=>0},animate:!1});let i=!1;t.registerNode=()=>{i||(i=!0,n.default.registerNode("tree-node",{drawShape:(e,a)=>{const l=a.addShape("circle",{attrs:{x:0,y:0,r:16,fill:e.style.fill}}),n=e.hasUpEntities||e.hasDownEntities,i=e.size/2;return n&&(e.collapsed?a.addShape("marker",{attrs:{x:-i,y:0,r:i,symbol:t.EXPAND_ICON,stroke:"white",lineWidth:1},className:"collapse-icon"}):a.addShape("marker",{attrs:{x:-i,y:0,r:i,symbol:t.COLLAPSE_ICON,stroke:"white",lineWidth:1},className:"collapse-icon"})),l}},"single-shape"))},t.registerNode()},,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const l=a(160),n=a(166),i=a(206),r=a(103);t.projectApi={async detail(e){const t=await l.get("project/info",{projectCode:e});return{...t,createTime:n.humanDate(Number(t.createTime))}},async statistics(e){const t=await l.get("project/table/statistics",{projectCode:e});return t.choicestCountLabel=n.thousandthsNum(t.choicestCount),t.devCountLabel=n.thousandthsNum(t.devCount),t.prodCountLabel=n.thousandthsNum(t.prodCount),t.streamCountLabel=n.thousandthsNum(t.streamCount),t},async filterOfflineTable(e){const t=await l.request(i.POST,"project/filterOfflineTable",e);for(const e of t.records)e.createTimeLabel=n.humanDate(e.createTime),e.lastDataUpdateTimeLabel=n.humanDate(e.lastDataUpdateTime),e.dbTableLabel=`${e.dbName}.${e.tableName}`,e.uri=r.generateUri(e.dbName,e.tableName);return t},async filterStreamTable(e){const t=await l.request(i.POST,"project/filterStreamTable",e);for(const e of t.records)e.dbTableLabel=`${e.dbName}.${e.tableName}`,e.createTimeLabel=n.humanDate(e.createTime),e.uri=r.generateStreamUri(e.dbName,e.tableName);return t}}},function(e,t,a){"use strict";var l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=a(30),i=a(142),r=a(199),u=a(98),s=l(a(0)),o=a(175),d=a(540);t.DataeDispatchContext=s.default.createContext(null),t.DataeStateContext=s.default.createContext({params:{pageCurrent:1,pageSize:u.PAGE_SIZE,pageFilter:{keyword:"",isRecent:!1,isFav:!1,isAuth:!1,isOwner:!1,project:"",owner:"",labelList:[],labelIdList:[]}}});const c={projectList:[],labelList:[],ownerList:[]};t.DataeAggregationContext=s.default.createContext({aggregation:c,loading:!1}),t.DataeConditionProvider=e=>{const{keyword:a,isDatae:l}=s.useContext(o.SearchContext),[m,f]=s.useState(""),[p,_]=s.useState(n.getQuery("pageCurrent","number")||1),[h,g]=s.useState(n.getQuery("pageSize","number")||u.PAGE_SIZE),[E,b]=s.useState(!1),[v,y]=s.useReducer(d.DataeParamsReducer,{pageFilter:{isAuth:n.getQuery("isAuth_"+r.SearchType.DATAE,"boolean"),isFav:n.getQuery("isFav_"+r.SearchType.DATAE,"boolean"),isOwner:n.getQuery("isOwner_"+r.SearchType.DATAE,"boolean"),isRecent:n.getQuery("isRecent_"+r.SearchType.DATAE,"boolean"),labelIdList:[]}}),[T,N]=s.useState(c),S=s.useCallback(e=>{y({type:d.DATAE_ACTION_TYPES.UPDATE_BU,params:{...e}})},[y]),C=s.useMemo(()=>({setPageCurrent:_,setPageSize:g,dispatchParams:y,updateParams:S,setMd5:f}),[S]),x=s.useMemo(()=>({params:{pageCurrent:p,pageSize:h,...v,pageFilter:{labelIdList:[],labelList:[],...v.pageFilter},md5:m}}),[v,p,h]),w=s.useMemo(()=>({aggregation:T,loading:E}),[T,E]);return s.useEffect(()=>{if(!l)return;let e=!1;return(async()=>{b(!0);try{const t=await i.v1SearchApi.aggregationDatae({...v.pageFilter,keyword:a});if(e)return;N(t)}catch(e){}e||b(!1)})(),()=>e=!0},[v,a,l,m]),s.default.createElement(t.DataeStateContext.Provider,{value:x},s.default.createElement(t.DataeDispatchContext.Provider,{value:C},s.default.createElement(t.DataeAggregationContext.Provider,{value:w},e.children)))}},function(e,t,a){"use strict";var l;Object.defineProperty(t,"__esModule",{value:!0}),t.OPTION_KEYS=["isRecent","isFav","isAuth","isOwner"],function(e){e.PARAMS="PARAMS",e.UPDATE_BU="UPDATE_BU",e.RESET="RESET",e.RESET_WITHOUT_KEYWORD="RESET_WITHOUT_KEYWORD"}(l=t.DATAE_ACTION_TYPES||(t.DATAE_ACTION_TYPES={})),t.DataeParamsReducer=(e,t)=>{switch(t.type){case l.PARAMS:return{...e,pageFilter:{...e.pageFilter,...t.params.pageFilter}};case l.UPDATE_BU:return{pageFilter:{keyword:"",isRecent:!1,isFav:!1,isAuth:!1,isOwner:!1,project:"",owner:"",labelList:[],labelIdList:[],...t.params.pageFilter}};case l.RESET:case l.RESET_WITHOUT_KEYWORD:return{pageFilter:{keyword:"",isRecent:!1,isFav:!1,isAuth:!1,isOwner:!1,project:"",owner:"",labelList:[],labelIdList:[]}};default:return e}}},function(e,t,a){"use strict";var l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=a(30),i=a(142),r=a(98),u=l(a(0)),s=a(175),o=a(774);t.TrackingDispatchContext=u.default.createContext(null),t.TrackingStateContext=u.default.createContext({params:{}});const d={businessLineAggResult:[],appGroupAggResult:[],omegaStatusAggResult:[]};t.TrackingAggregationContext=u.default.createContext({aggregation:d,loading:!1}),t.TrackingConditionProvider=e=>{const{keyword:a,isTracking:l}=u.useContext(s.SearchContext),[c,m]=u.useState(n.getQuery("pageNum","number")||1),[f,p]=u.useState(n.getQuery("pageSize","number")||r.PAGE_SIZE),[_,h]=u.useState(!1),[g,E]=u.useState(""),[b,v]=u.useReducer(o.TrackingParamsReducer,{pageFilter:{appGroupId:null,businessLine:null,omegaStatus:null,keyword:a},pageSize:f,pageCurrent:c}),[y,T]=u.useState(d),N=u.useCallback(e=>{v({type:o.TRACKING_ACTION_TYPES.UPDATE,params:{...e}})},[v]),S=u.useMemo(()=>({setPageNum:m,setPageSize:p,dispatchParams:v,updateParams:N,setMd5:E}),[N]),C=u.useMemo(()=>({pageFilter:{appGroupId:null,businessLine:null,omegaStatus:null,keyword:a},...b,pageSize:f,pageNum:c,keyword:a,pageCurrent:c,md5:g}),[b,c,f,a,l,g]),x=u.useMemo(()=>({aggregation:y,loading:_}),[y,_]);return u.useEffect(()=>{if(!l)return;let e=!1;return(async()=>{h(!0);try{const t=await i.v1SearchApi.aggregationTracking({...b,pageFilter:{...C.pageFilter,keyword:a}});if(e)return;T(t)}catch(e){}e||h(!1)})(),()=>e=!0},[b,a,l,g]),u.default.createElement(t.TrackingStateContext.Provider,{value:C},u.default.createElement(t.TrackingDispatchContext.Provider,{value:S},u.default.createElement(t.TrackingAggregationContext.Provider,{value:x},e.children)))}},function(e,t,a){"use strict";var l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=a(30),i=a(142),r=a(98),u=l(a(0)),s=a(175),o=a(775);t.FeatureDispatchContext=u.default.createContext(null),t.FeatureStateContext=u.default.createContext({params:{}});const d={entityAggResult:[],businessLineAggResult:[],dataTypeAggResult:[],sourceAggResult:[]};t.FeatureAggregationContext=u.default.createContext({aggregation:d,loading:!1}),t.FeatureConditionProvider=e=>{const{keyword:a,isFeature:l}=u.useContext(s.SearchContext),[c,m]=u.useState(n.getQuery("pageCurrent","number")||1),[f,p]=u.useState(n.getQuery("pageSize","number")||r.PAGE_SIZE),[_,h]=u.useState(!1),[g,E]=u.useState(""),[b,v]=u.useReducer(o.FeatureParamsReducer,{pageSize:f,pageCurrent:c,pageFilter:{businessLine:null,keyword:a}}),[y,T]=u.useState(d),N=u.useCallback(e=>{v({type:o.FEATURE_ACTION_TYPES.UPDATE,params:{...e}})},[v]),S=u.useMemo(()=>({setPageCurrent:m,setPageSize:p,dispatchParams:v,updateParams:N,setMd5:E}),[N]),C=u.useMemo(()=>({pageFilter:{businessLine:null,keyword:a},...b,pageSize:f,pageCurrent:c,md5:g}),[b,c,f,a,l,g]),x=u.useMemo(()=>({aggregation:y,loading:_}),[y,_]);return u.useEffect(()=>{if(!l)return;let e=!1;return(async()=>{h(!0);try{const t=await i.v1SearchApi.aggregationFeature({...b,pageFilter:{...C.pageFilter,keyword:a}});if(e)return;T(t)}catch(e){}e||h(!1)})(),()=>e=!0},[b,a,l,C.pageFilter,g]),u.default.createElement(t.FeatureStateContext.Provider,{value:C},u.default.createElement(t.FeatureDispatchContext.Provider,{value:S},u.default.createElement(t.FeatureAggregationContext.Provider,{value:x},e.children)))}},function(e,t,a){e.exports={error:"index_error_2jxE0","filter-options":"index_filter-options_2f2RW",filterOptions:"index_filter-options_2f2RW",sort:"index_sort_33iuC",list:"index_list_3ShaD",active:"index_active_35QXt","page-wrapper":"index_page-wrapper_lua_N",pageWrapper:"index_page-wrapper_lua_N",disabled:"index_disabled_2WmEM",page:"index_page_2A0tp",current:"index_current_2mj8Y","table-list":"index_table-list_2bAhj",tableList:"index_table-list_2bAhj",highlighter:"index_highlighter_2myfc",item:"index_item_3H96P","main-content":"index_main-content_2qKhL",mainContent:"index_main-content_2qKhL",name:"index_name_Zqb8i",icon:"index_icon_3r584",on:"index_on_3ULlN",off:"index_off_1UEi8",choicest:"index_choicest_2D7xt",text:"index_text_jquJA","title-sub":"index_title-sub_2b3q-",titleSub:"index_title-sub_2b3q-",label:"index_label_3ih6r",value:"index_value_3VsNa",title:"index_title_2zXvX","meta-content":"index_meta-content_pNt77",metaContent:"index_meta-content_pNt77",line:"index_line_2ENPd",qualityLevel:"index_qualityLevel_3a0MG","feature-comment":"index_feature-comment_2QelT",featureComment:"index_feature-comment_2QelT","business-line":"index_business-line_3CXEh",businessLine:"index_business-line_3CXEh","latest-partition":"index_latest-partition_1tAom",latestPartition:"index_latest-partition_1tAom","data-owner":"index_data-owner_nMfrk",dataOwner:"index_data-owner_nMfrk","data-owner-item":"index_data-owner-item_3LLtg",dataOwnerItem:"index_data-owner-item_3LLtg","communicate-icon":"index_communicate-icon_1-pAf",communicateIcon:"index_communicate-icon_1-pAf","data-type":"index_data-type_2EoWB",dataType:"index_data-type_2EoWB","default-value":"index_default-value_1JKSH",defaultValue:"index_default-value_1JKSH","partition-update-cycle":"index_partition-update-cycle_3myee",partitionUpdateCycle:"index_partition-update-cycle_3myee","omega-desc":"index_omega-desc_apRaP",omegaDesc:"index_omega-desc_apRaP","last-updated":"index_last-updated_2UJsL",lastUpdated:"index_last-updated_2UJsL","last-partition":"index_last-partition_LxlIK",lastPartition:"index_last-partition_LxlIK","column-info":"index_column-info_1geUQ",columnInfo:"index_column-info_1geUQ",description:"index_description_2D_vn",extra:"index_extra_3wf1U",statistics:"index_statistics_1kBnw","last-of-type":"index_last-of-type_2brcF",lastOfType:"index_last-of-type_2brcF",nps:"index_nps_3BSPV",column:"index_column_3OImc","show-column-detail":"index_show-column-detail_ui7mV",showColumnDetail:"index_show-column-detail_ui7mV",pagination:"index_pagination_Wojea","popover-text":"index_popover-text_3G0u5",popoverText:"index_popover-text_3G0u5",left:"index_left_2BaeQ",right:"index_right_3O12Z",distribution:"index_distribution_19WAQ","chart-feature":"index_chart-feature_fvdtz",chartFeature:"index_chart-feature_fvdtz"}},function(e,t,a){"use strict";var l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=a(30),i=a(142),r=a(199),u=a(98),s=l(a(0)),o=a(103),d=a(175),c=a(545);t.HiveDispatchContext=s.default.createContext(null),t.HiveStateContext=s.default.createContext({sessionId:null,params:{}});const m={buList:[],categoryList:[],userTagList:[],dataOwnerList:[],withProjectList:[]};t.HiveAggregationContext=s.default.createContext({aggregation:m,loading:!1});const f=()=>{const e=n.getQuery("categoryMap");return e?e.split(";").map(e=>({categoryId:Number(e.split(",")[0]),itemIdList:[Number(e.split(",")[1])]})):[]};t.HiveConditionProvider=e=>{const{keyword:a,isHive:l}=s.useContext(d.SearchContext),[p,_]=s.useState(r.SearchSort.COMPOSITE),[h,g]=s.useState(n.getQuery("pageNum","number")||1),[E,b]=s.useState(n.getQuery("pageSize","number")||u.PAGE_SIZE),[v,y]=s.useState(!1),T=s.useRef(o.uuid()),[N,S]=s.useReducer(c.HiveParamsReducer,{buId:n.getQuery("buId","number"),categoryList:f(),dataOwnerList:[],withProjectList:[],userTagList:[],isChoicest:n.getQuery("isChoicest","boolean"),isAuth:n.getQuery("isAuth","boolean"),isIncludeDevTable:n.getQuery("isIncludeDevTable","boolean"),isIncludeDqcConfig:n.getQuery("isIncludeDqcConfig","boolean"),isLastMonthUpdated:n.getQuery("isLastMonthUpdated","boolean"),isMetaCompletion:n.getQuery("isMetaCompletion","boolean"),isNormal:n.getQuery("isNormal","boolean"),isRecent:n.getQuery("isRecent","boolean")}),[C,x]=s.useState(m),w=s.useCallback(e=>{e.keyword&&(T.current=o.uuid()),S({type:c.HIVE_ACTION_TYPES.PARAMS,params:e})},[S]),I=s.useMemo(()=>({setPageNum:g,setPageSize:b,setSort:_,dispatchParams:S,updateParams:w}),[w]),L=s.useMemo(()=>({sessionId:T.current,params:{...N,keyword:a,sort:p,pageNum:h,pageSize:E}}),[N,p,h,E,a]),O=s.useMemo(()=>({aggregation:C,loading:v}),[C,v]);return s.useEffect(()=>{if(!l)return;let e=!1;return(async()=>{y(!0);try{const t=await i.v1SearchApi.aggregationHive({...N,keyword:a});if(e)return;x(t)}catch(e){}e||y(!1)})(),()=>e=!0},[N,a,l]),s.default.createElement(t.HiveStateContext.Provider,{value:L},s.default.createElement(t.HiveDispatchContext.Provider,{value:I},s.default.createElement(t.HiveAggregationContext.Provider,{value:O},e.children)))}},function(e,t,a){"use strict";var l;Object.defineProperty(t,"__esModule",{value:!0}),t.OPTION_KEYS=["isChoicest","isRecent","isAuth","isNormal","isMetaCompletion","isLastMonthUpdated","isIncludeDevTable","isIncludeDqcConfig"],function(e){e.PARAMS="PARAMS",e.UPDATE_BU="UPDATE_BU",e.RESET="RESET",e.RESET_WITHOUT_KEYWORD="RESET_WITHOUT_KEYWORD"}(l=t.HIVE_ACTION_TYPES||(t.HIVE_ACTION_TYPES={})),t.HiveParamsReducer=(e,t)=>{switch(t.type){case l.PARAMS:return{...e,...t.params};case l.UPDATE_BU:return{...e,buId:t.params.buId,categoryList:[],dataOwnerList:[],withProjectList:[],userTagList:[]};case l.RESET:case l.RESET_WITHOUT_KEYWORD:return{buId:void 0,categoryList:[],dataOwnerList:[],withProjectList:[],userTagList:[],isChoicest:!1,isAuth:!1,isIncludeDevTable:!1,isIncludeDqcConfig:!1,isLastMonthUpdated:!1,isMetaCompletion:!1,isNormal:!1,isRecent:!1};default:return e}}},function(e,t,a){"use strict";var l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=a(30),i=a(142),r=a(199),u=a(98),s=l(a(0)),o=a(103),d=a(175),c=a(471);t.MysqlDispatchContext=s.default.createContext(null),t.MysqlStateContext=s.default.createContext({sessionId:null,params:{}});const m={buList:[],collectStatusList:[],ownerList:[],buTotalCount:0,collectStatusTotalCount:0,ownerTotalCount:0};t.MysqlAggregationContext=s.default.createContext({aggregation:m,loading:!1}),t.MysqlConditionProvider=e=>{const{keyword:a,isMysql:l}=s.useContext(d.SearchContext),[f,p]=s.useState(r.SearchSort.COMPOSITE),[_,h]=s.useState(n.getQuery("pageCurrent","number")||1),[g,E]=s.useState(n.getQuery("pageSize","number")||u.PAGE_SIZE),[b,v]=s.useState(!1),y=s.useRef(o.uuid()),[T,N]=s.useReducer(c.MysqlParamsReducer,{bu:n.getQuery("bu"),collectStatus:n.getQuery("collectStatus","number"),ownerList:[],isRecent:n.getQuery("isRecent_"+r.SearchType.HIVE,"boolean")}),[S,C]=s.useState(m),x=s.useCallback(e=>{e.keyword&&(y.current=o.uuid()),N({type:c.MYSQL_ACTION_TYPES.PARAMS,params:e})},[N]),w=s.useMemo(()=>({setPageCurrent:h,setPageSize:E,setSort:p,dispatchParams:N,updateParams:x}),[x]),I=s.useMemo(()=>({sessionId:y.current,params:{...T,keyword:a,sort:f,pageCurrent:_,pageSize:g}}),[T,f,_,g,a]),L=s.useMemo(()=>({aggregation:S,loading:b}),[S,b]);return s.useEffect(()=>{if(!l)return;let e=!1;return(async()=>{v(!0);try{const t=await i.v1SearchApi.aggregationMysql({...T,keyword:a});if(e)return;C(t)}catch(e){}e||v(!1)})(),()=>e=!0},[T,a,l]),s.default.createElement(t.MysqlStateContext.Provider,{value:I},s.default.createElement(t.MysqlDispatchContext.Provider,{value:w},s.default.createElement(t.MysqlAggregationContext.Provider,{value:L},e.children)))}},function(e,t,a){"use strict";var l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=a(30),i=a(142),r=a(98),u=l(a(0)),s=a(103),o=a(175),d=a(779),c={businessLineAggResult:[],collectStatusAggResult:[],ownerAggResult:[]},m=n.getQuery("pageCurrent","number")||1,f=n.getQuery("pageSize","number")||r.PAGE_SIZE;t.PublicLogDispatchContext=u.default.createContext(null),t.PublicLogStateContext=u.default.createContext({pageCurrent:m,pageSize:f,pageFilter:null,sessionId:null}),t.PublicLogAggregationContext=u.default.createContext({aggregation:c,loading:!1}),t.PublicLogConditionProvider=e=>{var a,l;const{keyword:r,isPublicLog:p}=u.useContext(o.SearchContext),[_,h]=u.useState(m),[g,E]=u.useState(f),[b,v]=u.useState(!1),[y]=u.useState(s.uuid()),[T,N]=u.useReducer(d.PublicLogParamsReducer,{businessLines:n.getQuery("businessLines")?null===(a=n.getQuery("businessLines"))||void 0===a?void 0:a.split(","):void 0,collectStatus:n.getQuery("collectStatus","number"),owner:n.getQuery("owner")?null===(l=n.getQuery("owner"))||void 0===l?void 0:l.split(","):void 0,isRecent:n.getQuery("isRecent","boolean"),keyword:r}),[S,C]=u.useState(c),x=u.useMemo(()=>({setPageCurrent:h,setPageSize:E,dispatchPageFilter:N}),[]),w=u.useMemo(()=>({pageFilter:{...T,keyword:r},pageCurrent:_,pageSize:g,sessionId:y}),[T,r,_,g,y]),I=u.useMemo(()=>({aggregation:S,loading:b}),[S,b]);return u.useEffect(()=>{if(!p)return;let e=!1;return(async()=>{v(!0);try{const t=await i.v1SearchApi.aggregationLog({...T,keyword:r});if(e)return;C(t)}catch(e){}e||v(!1)})(),()=>e=!0},[r,p,T]),u.default.createElement(t.PublicLogStateContext.Provider,{value:w},u.default.createElement(t.PublicLogDispatchContext.Provider,{value:x},u.default.createElement(t.PublicLogAggregationContext.Provider,{value:I},e.children)))}},function(e,t,a){"use strict";var l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=a(30),i=a(142),r=a(199),u=a(98),s=l(a(0)),o=a(103),d=a(175),c=a(549);t.StreamDispatchContext=s.default.createContext(null),t.StreamStateContext=s.default.createContext({sessionId:null,params:{}});const m={aggResultList:[],totalCount:0},f={storageMediumList:m,dataFormatList:m,withProjectList:m,dataOwnerList:m};t.StreamAggregationContext=s.default.createContext({aggregation:f,loading:!1}),t.StreamConditionProvider=e=>{const{keyword:a,isStream:l}=s.useContext(d.SearchContext),[m,p]=s.useState(r.SearchSort.COMPOSITE),[_,h]=s.useState(n.getQuery("pageNum","number")||1),[g,E]=s.useState(n.getQuery("pageSize","number")||u.PAGE_SIZE),[b,v]=s.useState(!1),y=s.useRef(o.uuid()),[T,N]=s.useReducer(c.StreamParamsReducer,{storageMediumList:[],dataFormatList:[],withProjectList:[],dataOwnerList:[],isChoicest:n.getQuery("isChoicest_"+r.SearchType.STREAM,"boolean"),isAuth:n.getQuery("isAuth_"+r.SearchType.STREAM,"boolean"),isRecent:n.getQuery("isRecent_"+r.SearchType.STREAM,"boolean")}),[S,C]=s.useState(f),x=s.useCallback(e=>{e.keyword&&(y.current=o.uuid()),N({type:c.STREAM_ACTION_TYPES.PARAMS,params:e})},[N]),w=s.useMemo(()=>({setPageNum:h,setPageSize:E,setSort:p,dispatchParams:N,updateParams:x}),[x]),I=s.useMemo(()=>({sessionId:y.current,params:{...T,keyword:a,sort:m,pageNum:_,pageSize:g}}),[T,m,_,g,a]),L=s.useMemo(()=>({aggregation:S,loading:b}),[S,b]);return s.useEffect(()=>{if(!l)return;let e=!1;return(async()=>{v(!0);try{const t=await i.v1SearchApi.aggregationStream({...T,keyword:a});if(e)return;C(t)}catch(e){}e||v(!1)})(),()=>e=!0},[T,a,l]),s.default.createElement(t.StreamStateContext.Provider,{value:I},s.default.createElement(t.StreamDispatchContext.Provider,{value:w},s.default.createElement(t.StreamAggregationContext.Provider,{value:L},e.children)))}},function(e,t,a){"use strict";var l;Object.defineProperty(t,"__esModule",{value:!0}),t.OPTION_KEYS=["isChoicest","isRecent","isAuth"],function(e){e.PARAMS="PARAMS",e.UPDATE_BU="UPDATE_BU",e.RESET="RESET",e.RESET_WITHOUT_KEYWORD="RESET_WITHOUT_KEYWORD"}(l=t.STREAM_ACTION_TYPES||(t.STREAM_ACTION_TYPES={})),t.StreamParamsReducer=(e,t)=>{switch(t.type){case l.PARAMS:return{...e,...t.params};case l.UPDATE_BU:case l.RESET:case l.RESET_WITHOUT_KEYWORD:return{storageMediumList:[],dataFormatList:[],withProjectList:[],dataOwnerList:[],isChoicest:!1,isAuth:!1,isRecent:!1};default:return e}}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=a(206),i=l(a(33)),r=a(103),u=a(160);t.toolHiveApi={manageToolCheck:async()=>u.request(n.POST,"/manageTool/recommend/check"),manageToolSubmit:async e=>u.request(n.PUT,"/manageTool/recommend/submit",e),async getChangeHistoryList(e){const t=await u.get("manageTool/changeHistory",e);for(const e of t.records)e.key=r.uuid(),e.modifyTimeLabel=i.default(e.modifyTime).format("YYYY-MM-DD HH:ss:mm");return t},async getChangeDetail(e){if(e||0===e)return u.get("manageTool/changeHistoryDetail",{changeId:e})},tableOnOrOff:async e=>u.request(n.PUT,"manageTool/tableONOFF/submit",e)}},function(e,t,a){"use strict";var l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=a(120),i=l(a(0)),r=a(19);t.useDataOwner=function(){const{t:e}=r.useTranslation();return i.useMemo(()=>({title:e("detail:资产负责人"),width:150,dataIndex:"techOwner",render:(e,t)=>i.default.createElement(n.DChat,{user:t.techOwner})}),[e])}},function(e,t,a){e.exports={"care-page":"style_care-page_SBopM",carePage:"style_care-page_SBopM",content:"style_content_1xa4y",actions:"style_actions_3lEr3","column-actions":"style_column-actions_1S77P",columnActions:"style_column-actions_1S77P"}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";var l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=a(176),i=a(647),r=l(a(0)),u=a(19);t.SelectProject=e=>{let t=e.autoInitValue,a=e.autoInitValue;Object.keys(e).includes("autoInitValue")&&void 0===t&&(t=!0),Object.keys(e).includes("allowClear")&&void 0===a&&(a=!0);const{t:l}=u.useTranslation(),{updateProject:s}=e,[o,d]=r.useState(!1),[c,m]=r.useState(e.initValue),[f,p]=r.useState(e.initValue),{projects:_}=i.useProjectOptions(f,!o);return r.useEffect(()=>{!c&&t&&(null==_?void 0:_.length)&&(m(_[0].code),s(_[0].code))},[c,t,_,s]),r.default.createElement(n.Select,{placeholder:l("common:请选择"),className:e.className,allowClear:a,showSearch:!0,value:c,onSearch:p,onChange:e=>{d(!0),m(e),s(e)}},_.map(({name:e,code:t})=>r.default.createElement(n.Select.Option,{key:t,value:t,label:e},e,"(",t,")")))}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const l=a(259),n=a(0);t.useProjectOptions=(e,t=!1)=>{const[a,i]=n.useState(!1),[r,u]=n.useState([]),[s,o]=n.useState(""),d=n.useMemo(()=>{if(!e)return r.slice(0,20);const a=[];for(const t of r)if(t.name===e||t.code===e)a.splice(0,0,t);else{if(a.length>20)continue;(t.code.toLowerCase().includes(e)||t.name.toLowerCase().includes(e))&&a.push(t)}return t&&a.length<20?[...a,...r.filter(t=>t.name!==e&&t.code!==e).slice(0,19)]:a},[e,r,t]);return n.useEffect(()=>{let e=!1;return(async()=>{try{o(""),i(!0);const t=await l.v1CommonApi.projects();if(e)return;u(t)}catch(t){if(e)return;o(t.message)}i(!1)})(),()=>e=!0},[]),{projects:d,projectsLoading:a,projectsErrorMessage:s}},t.useDbOptions=e=>{const[t,a]=n.useState(!1),[i,r]=n.useState([]),[u,s]=n.useState(""),o=n.useMemo(()=>{if(!e)return i.slice(0,20);const t=[];for(const a of i)if(a.name===e)t.splice(0,0,a);else{if(t.length>20)continue;a.name.toLowerCase().includes(e)&&t.push(a)}return t},[e,i]);return n.useEffect(()=>{let e=!1;return(async()=>{try{s(""),a(!0);const t=await l.v1CommonApi.dbList();if(e)return;r(t)}catch(t){if(e)return;s(t.message)}a(!1)})(),()=>e=!0},[]),{dbList:o,dbLoading:t,dbErrorMessage:u}},t.useDbStreamOptions=e=>{const[t,a]=n.useState(!1),[i,r]=n.useState([]),[u,s]=n.useState(""),o=n.useMemo(()=>{if(!e)return i.slice(0,20);const t=[];for(const a of i)if(a.name===e)t.splice(0,0,a);else{if(t.length>20)continue;a.name.toLowerCase().includes(e)&&t.push(a)}return t},[e,i]);return n.useEffect(()=>{let e=!1;return(async()=>{try{s(""),a(!0);const t=await l.v1CommonApi.dbStreamList();if(e)return;r(t)}catch(t){if(e)return;s(t.message)}a(!1)})(),()=>e=!0},[]),{dbList:o,dbLoading:t,dbErrorMessage:u}}},function(e,t,a){"use strict";var l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=a(362),i=l(a(0)),r=a(19);t.useDataOwnerColumn=function(){const{t:e}=r.useTranslation();return i.useMemo(()=>({title:e("detail:资产负责人"),width:120,dataIndex:"owner",ellipsis:!0,render:e=>i.default.createElement(n.DChat,{user:e})}),[e])}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const l=a(0),n=a(19);t.useStatusColumn=function(){const{t:e}=n.useTranslation();return l.useMemo(()=>({title:e("状态"),width:82,dataIndex:"added",render:t=>e(t?"category:已添加":"category:未添加")}),[e])}},function(e,t,a){"use strict";var l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=a(26),i=l(a(0)),r=a(19);t.useTableNameZHColumn=function(){const{t:e}=r.useTranslation();return i.useMemo(()=>({title:e("common:中文名"),dataIndex:"tableNameZh",ellipsis:!0,render:e=>i.default.createElement(n.Tooltip,{title:e,placement:"topLeft"},i.default.createElement("span",null,e))}),[e])}},function(e,t,a){e.exports={"admin-page":"index_admin-page_2We8s",adminPage:"index_admin-page_2We8s",filter:"index_filter_1JePx",projects:"index_projects_2dwOU",managers:"index_managers_246cZ",text:"index_text_3V90I","tab-nav-text":"index_tab-nav-text_22fAm",tabNavText:"index_tab-nav-text_22fAm","edit-projects":"index_edit-projects_3qmqT",editProjects:"index_edit-projects_3qmqT","edit-managers":"index_edit-managers_3h7cf",editManagers:"index_edit-managers_3h7cf","select-small":"index_select-small_2BC3h",selectSmall:"index_select-small_2BC3h","user-list":"index_user-list_1TyIt",userList:"index_user-list_1TyIt",loading:"index_loading_3yA9a"}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=l(a(121)),r=a(176),u=l(a(4)),s=a(653),o=a(26),d=a(261),c=a(299),m=n(a(0)),f=a(19),p=a(1725),_=a(1729),h=l(a(654)),g=a(1730),E=a(1731),{CheckableTag:b}=r.Tag;t.AlbumListCard=e=>{const[t,a]=m.useState([]),[l,n]=m.useState([]),[v,y]=m.useState(!1),[T,N]=m.useState(null),{dispatchFilter:S,setPageCurrent:C}=m.useContext(c.AlbumDispatchContext),{pageCurrent:x,pageFilter:w}=m.useContext(c.AlbumStateContext),[I,L]=m.useState(!1),[O,P]=m.useState(!1),M=m.useRef(),k=m.useRef(),{total:D,albumCardsList:A,fetchAlbumLoading:j,albumListErrMsg:F,fetchAlbumList:R}=g.useFetchAlbumList(e.type),{tagList:H,tagListErrMsg:U,fetchTagsLoading:B}=E.useTagList(),{t:q}=f.useTranslation(),z=m.useMemo(()=>0!==D&&A.length!==D,[A,D]);m.useEffect(()=>{n(A)},[A]);const Q=m.useCallback(e=>{N(e),y(!0)},[]),V=m.useCallback((e,t)=>{n(l.map(a=>a.id===e?{...a,...t}:a))},[l]),G=()=>{const e=document.documentElement.offsetHeight;document.querySelector("."+h.default.sentinel).getBoundingClientRect().top-e>350?P(!1):P(!0)};return m.useEffect(()=>(window.addEventListener("scroll",G),()=>{window.removeEventListener("scroll",G)})),m.useEffect(()=>{if(!O)return;const e=x+1;z&&!j&&e>1&&(R(e),C(e)),P(!1)},[R,j,z,x,C,O]),0!==(null==l?void 0:l.length)||j||B?m.default.createElement("div",null,m.default.createElement(o.Spin,{spinning:!1},U?m.default.createElement("div",{className:"error"},U):m.default.createElement("div",{className:h.default.tagsWrapper},m.default.createElement("div",{className:u.default(h.default.tagsContent,{[h.default.tagsContentOpen]:I})},m.default.createElement("span",{style:{marginRight:8}},q("common:标签"),":"),null==H?void 0:H.map(e=>{const l=w.tagIdList.includes(e.id);return m.default.createElement(b,{key:e.id,checked:l,onChange:l=>((e,l)=>{const n=l?[...t,e]:t.filter(t=>t.id!==e.id);a(n);const i=[],r=[];n.length&&n.forEach(e=>{i.push(e.name),r.push(e.id)}),S({type:d.ALBUM_ACTION_TYPES.UPDATE_TAG_ID_LIST,payload:r}),S({type:d.ALBUM_ACTION_TYPES.UPDATE_TAG_LIST,payload:i})})(e,l)},e.name,"(",e.count,")",l&&m.default.createElement(i.default,{className:h.default.icon}))})),m.default.createElement("div",{className:h.default.tagsOperationBox},m.default.createElement(r.Button,{type:"link",onClick:()=>{a([]),S({type:d.ALBUM_ACTION_TYPES.UPDATE_TAG_ID_LIST,payload:[]}),S({type:d.ALBUM_ACTION_TYPES.UPDATE_TAG_LIST,payload:[]})}},q("common:重置")),m.default.createElement("div",{className:u.default(h.default.tagsOperation,{[h.default.tagsOperationOpen]:I}),onClick:()=>{L(!I)}},q(I?"common:收起":"common:展开")," ",m.default.createElement(o.IconFont,{className:h.default.openIcon,type:"icon-down"}))))),F?m.default.createElement("div",{className:"error"},F):m.default.createElement(o.Spin,{spinning:!1},m.default.createElement("div",{className:h.default.listWrapper,style:{minHeight:"200px"},ref:k},m.default.createElement("div",{className:h.default.listContent},l.map(t=>m.default.createElement(p.CardItem,{item:t,key:t.id,type:e.type,editAlbum:Q,updateList:V})),!z&&!j&&m.default.createElement("div",{className:h.default.noDataTips},q("message:没有更多数据了"))),m.default.createElement("div",{className:h.default.sentinel,ref:M}))),m.default.createElement(s.AlbumCreate,{visible:v,detailData:T,setVisible:y,afterSuccessExec:()=>S({type:d.ALBUM_ACTION_TYPES.RESET})}),m.default.createElement("div",{className:h.default.backTopBox},m.default.createElement(r.BackTop,null,m.default.createElement(o.IconFont,{type:"icon-huidaodingbu"})),m.default.createElement(o.IconFont,{type:"icon-new-circle",onClick:()=>{N(null),y(!0)}}))):m.default.createElement(m.default.Fragment,null,m.default.createElement(s.AlbumCreate,{visible:v,setVisible:y,afterSuccessExec:()=>S({type:d.ALBUM_ACTION_TYPES.RESET})}),m.default.createElement(_.AlbumListEmpty,{type:e.type,showEdit:()=>y(!0)}))},t.default=m.default.memo(t.AlbumListCard)},function(e,t,a){"use strict";var l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=a(174),i=a(26),r=a(319),u=l(a(0)),s=a(19),o=a(143),d=a(1723),{TextArea:c}=i.Input,{Option:m}=i.Select,f={albumId:null,isPublic:!0,avatar:"",comment:"",tagList:[],name:""};t.AlbumCreate=e=>{const{t:t}=s.useTranslation(),[a,l]=u.useState([]),[p,_]=u.useState(!1),[h]=i.Form.useForm(),g=o.useHistory(),{detailData:E,visible:b,setVisible:v}=e,y="https://s3-gzpu-inter.didistatic.com/fe-datamap-prod/dca0ac4b-6ee3-48f2-85c9-6bcc89f362d3.png",{setFieldsValue:T,resetFields:N}=h;u.useEffect(()=>{let e=!1;return n.AlbumApi.getTagList().then(t=>{e||l(t)}),()=>{e=!0}},[]);return u.useEffect(()=>{b&&(N(),!(null==E?void 0:E.avatar)&&T({avatar:y}))},[E,N,T,b]),u.default.createElement(u.default.Fragment,null,u.default.createElement(i.Modal,{title:(null==E?void 0:E.id)?t("common:编辑专辑"):t("common:新建专辑"),visible:e.visible,onOk:h.submit,confirmLoading:p,onCancel:()=>v(!1)},u.default.createElement(i.Form,Object.assign({name:"create-album",onFinish:()=>{(null==E?void 0:E.id)?(_(!0),h.validateFields().then(({name:a,avatar:l,tagList:r,comment:u,isPublic:s})=>{n.AlbumApi.updateAlbum({albumId:E.id,name:a,avatar:l,tagList:r,comment:u,isPublic:s}).then(()=>{i.message.success(t("category:修改成功")),e.afterSuccessExec(),v(!1)}).catch(e=>{i.message.error(e.message)}).finally(()=>_(!1))})):(_(!0),h.validateFields().then(({name:e,avatar:a,tagList:l,comment:r,isPublic:u})=>{n.AlbumApi.createAlbum({name:e,avatar:a,tagList:l,comment:r,isPublic:u}).then(e=>{v(!1),i.message.success(t("common:创建成功")),g.push({pathname:"/album/detail",search:"?albumId="+e})}).catch(e=>{i.message.error(e.message)}).finally(()=>_(!1))}))},form:h,initialValues:(null==E?void 0:E.id)?E:f},r.FormItemLayout),u.default.createElement(i.Form.Item,{name:"name",label:t("common:专辑名称"),rules:[{required:!0,message:t("不能为空")}]},u.default.createElement(i.Input,null)),u.default.createElement(i.Form.Item,{name:"comment",label:t("common:专辑描述")},u.default.createElement(c,{rows:3})),u.default.createElement(i.Form.Item,{name:"avatar",label:t("common:专辑封面")},u.default.createElement(d.UploadImage,{onChange:e=>{h.setFieldsValue({avatar:e})},initValue:(null==E?void 0:E.avatar)||y})),u.default.createElement(i.Form.Item,{name:"isPublic",label:t("common:是否开放"),required:!0,valuePropName:"checked"},u.default.createElement(i.Switch,{defaultChecked:!0})),u.default.createElement(i.Form.Item,{name:"tagList",label:t("common:业务标签")},u.default.createElement(i.Select,{mode:"tags"},null==a?void 0:a.map(e=>u.default.createElement(m,{value:e,key:e},e)))))))}},function(e,t,a){e.exports={"tags-wrapper":"index_tags-wrapper_1mVbc",tagsWrapper:"index_tags-wrapper_1mVbc","tags-content":"index_tags-content_3622e",tagsContent:"index_tags-content_3622e",icon:"index_icon_3h9N2","tags-content-open":"index_tags-content-open_2xJ8Q",tagsContentOpen:"index_tags-content-open_2xJ8Q","tags-operation-box":"index_tags-operation-box_1fx2u",tagsOperationBox:"index_tags-operation-box_1fx2u","tags-operation":"index_tags-operation_2rI74",tagsOperation:"index_tags-operation_2rI74","tags-operation-open":"index_tags-operation-open_1zK-_",tagsOperationOpen:"index_tags-operation-open_1zK-_","open-icon":"index_open-icon_XMOQG",openIcon:"index_open-icon_XMOQG","list-wrapper":"index_list-wrapper_AuJ0P",listWrapper:"index_list-wrapper_AuJ0P","list-content":"index_list-content_2Qx7U",listContent:"index_list-content_2Qx7U","no-data-tips":"index_no-data-tips_ddkeO",noDataTips:"index_no-data-tips_ddkeO",sentinel:"index_sentinel_zDf_g","open-sign":"index_open-sign_24qAA",openSign:"index_open-sign_24qAA","not-public":"index_not-public_2Kb4M",notPublic:"index_not-public_2Kb4M","exec-icon":"index_exec-icon_2FTRr",execIcon:"index_exec-icon_2FTRr","item-operation":"index_item-operation_28PtG",itemOperation:"index_item-operation_28PtG",active:"index_active_1FkK1","item-content":"index_item-content_8NYGI",itemContent:"index_item-content_8NYGI","item-img":"index_item-img_2_-nl",itemImg:"index_item-img_2_-nl","item-msg":"index_item-msg_2DH8i",itemMsg:"index_item-msg_2DH8i",title:"index_title_lt2-n",desc:"index_desc_gRgbG",tag:"index_tag_3Xbw-","user-msg":"index_user-msg_3nwak",userMsg:"index_user-msg_3nwak",name:"index_name_I5h33","update-timer":"index_update-timer_1x-7n",updateTimer:"index_update-timer_1x-7n","item-footer":"index_item-footer_3Y6Zu",itemFooter:"index_item-footer_3Y6Zu","footer-item":"index_footer-item_1OgfA",footerItem:"index_footer-item_1OgfA",anticon:"index_anticon_1UYdr",share:"index_share_2IhZ2","list-empty":"index_list-empty_3UIxr",listEmpty:"index_list-empty_3UIxr","empty-img":"index_empty-img_3CwP0",emptyImg:"index_empty-img_3CwP0","loader-more":"index_loader-more_3dmjm",loaderMore:"index_loader-more_3dmjm","cursor-p":"index_cursor-p_FK9q8",cursorP:"index_cursor-p_FK9q8","back-top-box":"index_back-top-box_3BzUD",backTopBox:"index_back-top-box_3BzUD","loading-box":"index_loading-box_21aWP",loadingBox:"index_loading-box_21aWP","is-gray":"index_is-gray_ISBsm",isGray:"index_is-gray_ISBsm"}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.INFO="info",e.LINEAGE="lineage",e.PREVIEW="preview",e.USAGE="usage",e.INTRO="intro",e.STATISTICS="statistics"}(t.IHiveDetailTab||(t.IHiveDetailTab={})),function(e){e.QUESTION="question",e.COMMENT="comment",e.USAGE_RECORD="usage-record",e.JOIN="join",e.PARTITION="partition",e.UPDATE_LOG="updateLog",e.OUTPUT="output",e.SCRIPT="script"}(t.IHiveDetailSubTab||(t.IHiveDetailSubTab={}))},,,,,,,,,,function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=l(a(154)),i=a(26),r=a(319),u=a(120),s=a(97),o=a(219),d=l(a(0)),c=l(a(262)),m=l(a(43)),f=a(19),p=a(277),_=l(a(2153));t.Tooltip=e=>{var t;const{t:a}=f.useTranslation(),{data:l,options:r}=e,m=p.useEntityTypeMap(),h="right"===l.side;return d.default.createElement("div",{className:_.default.tooltip,style:{top:r.clientY+window.pageYOffset+10,left:r.clientX+8}},d.default.createElement("div",{className:_.default.content},d.default.createElement("div",{className:_.default.item},d.default.createElement("div",{className:_.default.label},a("common:名称"),":"),d.default.createElement("div",{className:_.default.value},l.type===o.LineageEntityType.HIVE_TABLE?d.default.createElement(s.ExternalLink,{href:"/detail?uri="+l.uri,className:_.default.link,withReferrer:!0},l.name):l.type===o.LineageEntityType.SELF_MYSQL?l.name:l.type===o.LineageEntityType.HIVE_TABLE_COLUMN?d.default.createElement(s.ExternalLink,{className:_.default.link,href:"/detail?uri="+l.uri,withReferrer:!0},l.name):d.default.createElement(s.ExternalLink,{className:_.default.link,href:l.entityLink},l.name),d.default.createElement(c.default,{text:l.name,onCopy:()=>i.message.success(a("message:复制成功"))},d.default.createElement(i.IconFont,{type:"icon-copy",className:"hover-theme"})))),d.default.createElement("div",{className:_.default.item},d.default.createElement("div",{className:_.default.label},a("common:类型"),":"),d.default.createElement("div",{className:_.default.value},null===(t=m[l.type])||void 0===t?void 0:t.label)),l.type===o.LineageEntityType.INDEX&&d.default.createElement("div",{className:_.default.item},d.default.createElement("div",{className:_.default.label},a("common:指标英文字段"),":"),d.default.createElement("div",{className:_.default.value},l.nameEn)),h?l.downCount>=0&&d.default.createElement("div",{className:_.default.item},d.default.createElement("div",{className:_.default.label},a("common:下游数量"),":"),d.default.createElement("div",{className:_.default.value},l.downCount)):l.upCount>=0&&d.default.createElement("div",{className:_.default.item},d.default.createElement("div",{className:_.default.label},a("common:上游数量"),":"),d.default.createElement("div",{className:_.default.value},l.upCount)),d.default.createElement("div",{className:_.default.item},d.default.createElement("div",{className:_.default.label},(null==l?void 0:l.type)===o.LineageEntityType.HIVE_TABLE?a("资产负责人"):a("技术负责人"),":"),d.default.createElement("div",{className:_.default.value},d.default.createElement(u.DChat,{user:l.owner}))),l.projectCode&&d.default.createElement("div",{className:_.default.item},d.default.createElement("div",{className:_.default.label},a("detail:所属项目"),":"),d.default.createElement("div",{className:_.default.value},l.projectCode)),l.createTimeLabel&&d.default.createElement("div",{className:_.default.item},d.default.createElement("div",{className:_.default.label},a("common:创建时间"),":"),d.default.createElement("div",{className:_.default.value},l.createTimeLabel)),l.description&&d.default.createElement("div",{className:_.default.item},d.default.createElement("div",{className:_.default.label},a("common:描述"),":"),d.default.createElement("div",{className:_.default.value},l.description))),d.default.createElement("div",{className:_.default.bottom},[o.LineageEntityType.HIVE_TABLE,o.LineageEntityType.HIVE_TABLE_COLUMN].includes(l.type)?d.default.createElement(d.default.Fragment,null,d.default.createElement(s.ExternalLink,{href:`/detail?uri=${l.uri}&tab=lineage`,className:_.default.link,withReferrer:!0},a("common:查看血缘"),d.default.createElement(n.default,null))):null))},t.APP=(e,a)=>d.default.createElement("div",null,d.default.createElement(r.ContextProvider,null,d.default.createElement(t.Tooltip,{data:e,options:a}))),t.TooltipApp=(e,a)=>{if(!e)return null;const l=document.createElement("div");return m.default.render(t.APP(e,a),l),document.body.appendChild(l),l}},function(e,t,a){"use strict";var l;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.INIT="INIT",e.DETAIL="DETAIL"}(l=t.STREAM_TABLE_ACTION_TYPES||(t.STREAM_TABLE_ACTION_TYPES={})),t.StreamDetailReducer=(e,t)=>{switch(t.type){case l.INIT:return t.init;case l.DETAIL:return{...e,...t.detail};default:return e}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.RECT="rect",e.CIRCLE="circle",e.DIAMOND="diamond",e.ELLIPSE="ellipse",e.TEXT="text",e.LINK="link"}(t.ItemType||(t.ItemType={})),t.allTypes=["rect","circle","diamond","ellipse","text","link"],t.DEFAULT_NODE={size:[60,45],style:{fill:"#9EC9FF",lineWidth:3},label:"双击可以编辑文本",labelCfg:{style:{fill:"#878787",fontSize:12},position:"center"},nodeStateStyles:{size:10,lineWidth:1,fill:"#fff",stroke:"#1890FF"}},t.TEXT_NODE={style:{fill:"",stroke:""}},t.defaultEdge={type:"polyline",style:{radius:20,offset:45,endArrow:!0,lineWidth:2,stroke:"#C2C8D5"},label:"",edgeStateStyles:{selected:{fill:"green"}}}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=l(a(284)),i=a(30),r=l(a(220)),u=l(a(162)),s=l(a(0)),o=a(19),d=l(a(470));t.ProjectFilter=e=>{const{t:t}=o.useTranslation(),[a]=r.default.useForm();return s.default.createElement("div",{className:d.default.filter},s.default.createElement(r.default,{layout:"inline",initialValues:{tableName:i.getQuery("tableName")},form:a,onFinish:e.submit},s.default.createElement(r.default.Item,{label:t("category:表名"),name:"tableName"},s.default.createElement(u.default,{autoFocus:!0,allowClear:!0,onPressEnter:a.submit,placeholder:t("message:请输入"),onChange:t=>!t.target.value&&e.submit({tableName:""})}))),s.default.createElement("div",{className:d.default.intro},s.default.createElement(n.default,null),s.default.createElement("span",{className:d.default.text},e.tip||t("message:默认按最后更新时间排序"))))}},function(e,t,a){"use strict";var l;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.PARAMS="PARAMS",e.UPDATE="UPDATE",e.RESET="RESET",e.RESET_WITHOUT_KEYWORD="RESET_WITHOUT_KEYWORD"}(l=t.TRACKING_ACTION_TYPES||(t.TRACKING_ACTION_TYPES={})),t.TrackingParamsReducer=(e,t)=>{switch(t.type){case l.PARAMS:return{...e,...t.params};case l.UPDATE:return{pageFilter:{appGroupId:null,businessLine:null,omegaStatus:null,keyword:""},...null==t?void 0:t.params};case l.RESET:case l.RESET_WITHOUT_KEYWORD:return{pageFilter:{appGroupId:null,businessLine:null,omegaStatus:null,keyword:""}};default:return e}}},function(e,t,a){"use strict";var l;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.PARAMS="PARAMS",e.UPDATE="UPDATE",e.RESET="RESET",e.RESET_WITHOUT_KEYWORD="RESET_WITHOUT_KEYWORD"}(l=t.FEATURE_ACTION_TYPES||(t.FEATURE_ACTION_TYPES={})),t.FeatureParamsReducer=(e,t)=>{var a;switch(t.type){case l.PARAMS:return{...e,...t.params};case l.UPDATE:return{...t.params,pageFilter:{entity:null,businessLine:null,dataType:null,source:null,keyword:null,...null===(a=t.params)||void 0===a?void 0:a.pageFilter}};case l.RESET:return{pageFilter:{entity:null,businessLine:null,dataType:null,source:null,keyword:null}};default:return e}}},function(e,t,a){e.exports={error:"index_error_23MV0","open-tooltip":"index_open-tooltip_wh7Ev",openTooltip:"index_open-tooltip_wh7Ev","filter-options":"index_filter-options_2F1Xc",filterOptions:"index_filter-options_2F1Xc",sort:"index_sort_m8lIO",list:"index_list_1fanK",active:"index_active_3VqJV","page-wrapper":"index_page-wrapper_1reli",pageWrapper:"index_page-wrapper_1reli",disabled:"index_disabled_3rAKd",page:"index_page_2INQz",current:"index_current_3FsP-","table-list":"index_table-list_2lWC6",tableList:"index_table-list_2lWC6",highlighter:"index_highlighter_qgUAs",item:"index_item_1Ssf1","main-content":"index_main-content_1sbqu",mainContent:"index_main-content_1sbqu",name:"index_name_1ewMX",choicest:"index_choicest_ADF5U","open-tag":"index_open-tag_3Ftpn",openTag:"index_open-tag_3Ftpn",recommend:"index_recommend_3EkuS",text:"index_text_4_DIZ",title:"index_title_lSSQV","meta-content":"index_meta-content_12j9t",metaContent:"index_meta-content_12j9t",line:"index_line_Ophap",label:"index_label_1lzEE","project-code":"index_project-code_2MIp2",projectCode:"index_project-code_2MIp2","latest-partition":"index_latest-partition_2XO3z",latestPartition:"index_latest-partition_2XO3z",value:"index_value_1tw4l","data-owner":"index_data-owner_nS4fx",dataOwner:"index_data-owner_nS4fx","data-owner-item":"index_data-owner-item_2VajZ",dataOwnerItem:"index_data-owner-item_2VajZ","communicate-icon":"index_communicate-icon_6lalK",communicateIcon:"index_communicate-icon_6lalK","last-updated":"index_last-updated_3EGZg",lastUpdated:"index_last-updated_3EGZg","last-partition":"index_last-partition_1_jBf",lastPartition:"index_last-partition_1_jBf","column-info":"index_column-info_33IeB",columnInfo:"index_column-info_33IeB",description:"index_description_10o6G",extra:"index_extra_2ndwe",statistics:"index_statistics_37Aai","last-of-type":"index_last-of-type_156wC",lastOfType:"index_last-of-type_156wC",nps:"index_nps_KUho9",column:"index_column_2vRrC","show-column-detail":"index_show-column-detail_1xSJH",showColumnDetail:"index_show-column-detail_1xSJH",pagination:"index_pagination_utscx"}},function(e,t,a){"use strict";var l;Object.defineProperty(t,"__esModule",{value:!0}),t.METRIC_ON=1,t.METRIC_OFF=0,function(e){e.PARAMS="PARAMS",e.RESET="RESET"}(l=t.METRIC_ACTION_TYPES||(t.METRIC_ACTION_TYPES={})),t.MetricParamsReducer=(e,t)=>{switch(t.type){case l.PARAMS:return{...e,...t.params};case l.RESET:return null;default:return e}}},function(e,t,a){"use strict";var l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=a(30),i=a(142),r=a(98),u=l(a(0)),s=a(175),o=a(777),d={bizTypes:[],bizLines:[],bizScenes:[],levels:[],exeStatus:[],domains:[],bizProcesses:[]},c=n.getQuery("pageCurrent","number")||1,m=n.getQuery("pageSize","number")||r.PAGE_SIZE;t.MetricDispatchContext=u.default.createContext(null),t.MetricStateContext=u.default.createContext({pageCurrent:c,pageSize:m,pageFilter:null}),t.MetricAggregationContext=u.default.createContext({aggregation:d,loading:!1}),t.MetricConditionProvider=e=>{const{keyword:a,isMetric:l}=u.useContext(s.SearchContext),[r,f]=u.useState(c),[p,_]=u.useState(m),[h,g]=u.useState(!1),[E,b]=u.useReducer(o.MetricParamsReducer,{bizTypes:n.getQuery("bizTypes","number"),bizLines:n.getQuery("bizLines","number"),bizScenes:n.getQuery("bizLines","number"),levels:n.getQuery("bizLines","number"),exeStatus:n.getQuery("bizLines","number"),domains:n.getQuery("bizLines","number"),bizProcesses:n.getQuery("bizLines","number"),keyword:a}),[v,y]=u.useState(d),T=u.useMemo(()=>({setPageCurrent:f,setPageSize:_,dispatchPageFilter:b}),[]),N=u.useMemo(()=>({pageFilter:{...E,keyword:a},pageCurrent:r,pageSize:p}),[E,r,p,a]),S=u.useMemo(()=>({aggregation:v,loading:h}),[v,h]);return u.useEffect(()=>{if(!l)return;let e=!1;return(async()=>{g(!0);try{const t=await i.v1SearchApi.aggregationMetric({...E,keyword:a});if(e)return;y(t)}catch(e){}e||g(!1)})(),()=>e=!0},[a,l,E]),u.default.createElement(t.MetricStateContext.Provider,{value:N},u.default.createElement(t.MetricDispatchContext.Provider,{value:T},u.default.createElement(t.MetricAggregationContext.Provider,{value:S},e.children)))}},function(e,t,a){"use strict";var l;Object.defineProperty(t,"__esModule",{value:!0}),t.OPTION_KEYS=["isRecent"],function(e){e.PARAMS="PARAMS",e.RESET="RESET"}(l=t.PUBLIC_LOG_ACTION_TYPES||(t.PUBLIC_LOG_ACTION_TYPES={})),t.PublicLogParamsReducer=(e,t)=>{switch(t.type){case l.PARAMS:return{...e,...t.params};case l.RESET:return null;default:return e}}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=l(a(0)),i=l(a(2294));t.ToolHeader=e=>n.default.createElement("div",{className:i.default.toolHeader},e.title,e.right)},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=l(a(0)),i=l(a(2308));t.UserHeader=e=>n.default.createElement("div",{className:i.default.userHeader},e.title)},function(e,t,a){e.exports={"recent-page":"style_recent-page_1f9X-",recentPage:"style_recent-page_1f9X-",content:"style_content_1DDcU"}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),a(1296);const n=a(319),i=l(a(0)),r=a(1357);a(2329),t.APP=()=>i.default.createElement(n.UserContextProvider,null,i.default.createElement(n.ContextProvider,null,i.default.createElement(r.AppRouter,null)))},,,,,,,,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Analytics={trackDownloadEvent(e){(null===Omega||void 0===Omega?void 0:Omega.trackEvent)&&Omega.trackEvent("download",e.desc,e.attr||null)},trackFetchTimeEvent(e){"development"!==window.__ENV__&&(null===Omega||void 0===Omega?void 0:Omega.trackEvent)&&Omega.trackEvent("fetch",e.desc,e.attr||null)},sendPageView(){"development"!==window.__ENV__&&(null===Omega||void 0===Omega?void 0:Omega.sendPageView)&&Omega.sendPageView()}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=l(a(0)),i=a(19),r=a(143),u=a(117),s=l(a(1703)),o=l(a(1704));t.NotFound=e=>{const{t:t}=i.useTranslation(),a=r.useLocation();return n.default.createElement("div",{className:o.default.notFound},404===e.statusCode?n.default.createElement("div",{className:o.default.img}):n.default.createElement("img",{src:s.default}),n.default.createElement("div",{className:o.default.oops},"OOPS!…"),n.default.createElement("div",{className:o.default.tips},e.message||t("message:抱歉，您访问的页面找不到了。")),"/overview"!==a.pathname&&n.default.createElement(u.Link,{className:o.default.action,to:{pathname:"/"}},t("detail:返回首页")))},t.NotFound.defaultProps={statusCode:404}},function(e,t,a){e.exports={"admin-categories-page":"index_admin-categories-page_Ek_DD",adminCategoriesPage:"index_admin-categories-page_Ek_DD","categories-content":"index_categories-content_R8WzO",categoriesContent:"index_categories-content_R8WzO",categories:"index_categories_5Zg4k","bu-title":"index_bu-title_3DegH",buTitle:"index_bu-title_3DegH",title:"index_title_198OL",text:"index_text_qpCgo","sub-bu-title":"index_sub-bu-title_3xuXP",subBuTitle:"index_sub-bu-title_3xuXP","action-fold":"index_action-fold_1ftKQ",actionFold:"index_action-fold_1ftKQ","data-edit":"index_data-edit_16gCJ",dataEdit:"index_data-edit_16gCJ","item-name":"index_item-name_180u3",itemName:"index_item-name_180u3",actions:"index_actions_ZoCcQ",border:"index_border_341xF","bu-category":"index_bu-category_3r5H4",buCategory:"index_bu-category_3r5H4","sub-bu-item":"index_sub-bu-item_10UXr",subBuItem:"index_sub-bu-item_10UXr","icon-edit":"index_icon-edit_3k2Q_",iconEdit:"index_icon-edit_3k2Q_","icon-delete":"index_icon-delete_2kh8v",iconDelete:"index_icon-delete_2kh8v","column-header":"index_column-header_epay7",columnHeader:"index_column-header_epay7","column-item":"index_column-item_1QVTr",columnItem:"index_column-item_1QVTr",item:"index_item_2vAbb","item-action":"index_item-action_Nkk3w",itemAction:"index_item-action_Nkk3w",selected:"index_selected_BWpNu",normal:"index_normal_1skZF","item-china":"index_item-china_2I2eE",itemChina:"index_item-china_2I2eE","item-en":"index_item-en_3xIZt",itemEn:"index_item-en_3xIZt","item-abbreviation":"index_item-abbreviation_23LQh",itemAbbreviation:"index_item-abbreviation_23LQh","icon-warn":"index_icon-warn_21N3p",iconWarn:"index_icon-warn_21N3p","icon-success":"index_icon-success_39c9q",iconSuccess:"index_icon-success_39c9q"}},function(e,t,a){e.exports={"quick-add-table-list":"quick-add-choicest-table-list_quick-add-table-list_kql_V",quickAddTableList:"quick-add-choicest-table-list_quick-add-table-list_kql_V",filter:"quick-add-choicest-table-list_filter_qGiDN",project:"quick-add-choicest-table-list_project_X_Zed","table-name":"quick-add-choicest-table-list_table-name_2O3bF",tableName:"quick-add-choicest-table-list_table-name_2O3bF",added:"quick-add-choicest-table-list_added_2tyYK",actions:"quick-add-choicest-table-list_actions_3WPVL","selected-num":"quick-add-choicest-table-list_selected-num_2rWwb",selectedNum:"quick-add-choicest-table-list_selected-num_2rWwb"}},function(e,t,a){"use strict";var l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=a(176),i=a(174),r=a(26),u=a(261),s=l(a(0)),o=a(19);t.FollowIcon=e=>{const{t:t}=o.useTranslation(),[a,l]=s.useState(!1);return s.default.createElement(s.default.Fragment,null,e.followed?s.default.createElement("span",{style:{cursor:"pointer"},onClick:()=>{var s;!a&&(s=e.albumId,l(!0),e.type===u.ALBUM_LIST_TYPE.MY_FOLLOW?n.Modal.confirm({title:t("message:确定取消关注该专辑吗？"),content:t("message:取消关注后，专辑会从页面中移除。"),onOk:()=>{i.AlbumApi.cancelFollowAlbum(e.albumId).then(()=>{var a;r.message.success(t("message:取消成功")),null===(a=e.onSuccess)||void 0===a||a.call(e,"cancelFollow"),l(!1)}).catch(e=>{r.message.error(e.message),l(!1)})}}):i.AlbumApi.cancelFollowAlbum(s).then(()=>{var a;r.message.success(t("message:取消关注成功")),null===(a=e.onSuccess)||void 0===a||a.call(e,"cancelFollow"),l(!1)}).catch(e=>{r.message.error(e.message),l(!1)}))}},s.default.createElement(r.IconFont,{type:"icon-liked-active"}),e.children):s.default.createElement("span",{style:{cursor:"pointer"},onClick:()=>{var n;!a&&(n=e.albumId,l(!0),i.AlbumApi.followAlbum({albumId:n}).then(()=>{var a;r.message.success(t("message:关注成功")),null===(a=e.onSuccess)||void 0===a||a.call(e,"follow"),l(!1)}).catch(e=>{r.message.error(e.message),l(!1)}))}},s.default.createElement(r.IconFont,{type:"icon-like"}),e.children))}},function(e,t,a){"use strict";var l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=a(174),i=a(26),r=l(a(0)),u=a(19);t.LikeIcon=e=>{const{t:t}=u.useTranslation(),[a,l]=r.useState(!1);return r.default.createElement(r.default.Fragment,null,e.liked?r.default.createElement("span",{style:{cursor:"pointer"},onClick:()=>{var r;!a&&(r=e.albumId,l(!0),n.AlbumApi.cancelLikeAlbum(r).then(()=>{var a;i.message.success(t("message:取消点赞成功")),null===(a=e.onSuccess)||void 0===a||a.call(e,"cancelLike"),l(!1)}).catch(e=>{i.message.error(e.message),l(!1)}))}},r.default.createElement(i.IconFont,{type:"icon-zan-active"}),e.children):r.default.createElement("span",{style:{cursor:"pointer"},onClick:()=>{var r;!a&&(r=e.albumId,l(!0),n.AlbumApi.likeAlbum({albumId:r}).then(()=>{var a;i.message.success(t("message:点赞成功")),null===(a=e.onSuccess)||void 0===a||a.call(e,"like"),l(!1)}).catch(e=>{l(!1),i.message.error(e.message)}))}},r.default.createElement(i.IconFont,{type:"icon-star"}),e.children))}},function(e,t,a){"use strict";var l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=a(176),r=a(26),u=l(a(0)),s=n(a(262)),o=a(19);t.ShareIcon=e=>{const{t:t}=o.useTranslation(),[a,l]=u.useState(!1);return u.default.createElement(s.default,{text:`${location.origin}/album/detail?albumId=${e.albumId}`,onCopy:()=>i.message.success(t("message:分享链接复制成功"))},u.default.createElement("span",{style:{cursor:"pointer"},onMouseEnter:()=>{l(!0)},onMouseLeave:()=>{l(!1)}},a?u.default.createElement("span",{style:{color:"#f27e49"}},u.default.createElement(r.IconFont,{type:"icon-share-active"})," ",t("category:分享")):u.default.createElement("span",{style:{color:"#999"}},u.default.createElement(r.IconFont,{type:"icon-share-copy"})," ",t("category:分享"))))}},,function(e,t,a){e.exports={"slider-group-popover":"index_slider-group-popover_-l5sw",sliderGroupPopover:"index_slider-group-popover_-l5sw","tool-line":"index_tool-line_1ZRaf",toolLine:"index_tool-line_1ZRaf",disabled:"index_disabled_3Zl0x","album-slider-group":"index_album-slider-group_1TJqu",albumSliderGroup:"index_album-slider-group_1TJqu","add-btn":"index_add-btn_3ghga",addBtn:"index_add-btn_3ghga","title-tip":"index_title-tip_10kt8",titleTip:"index_title-tip_10kt8","whole-btn":"index_whole-btn_2xl2O",wholeBtn:"index_whole-btn_2xl2O","slider-tree":"index_slider-tree_1SZiF",sliderTree:"index_slider-tree_1SZiF","title-line":"index_title-line_1F4we",titleLine:"index_title-line_1F4we",selected:"index_selected_1ydxh",currentIsEdit:"index_currentIsEdit_105Qq","title-left":"index_title-left_3HyIv",titleLeft:"index_title-left_3HyIv","name-line":"index_name-line_1FEZs",nameLine:"index_name-line_1FEZs","menu-btn":"index_menu-btn_1r5qY",menuBtn:"index_menu-btn_1r5qY"}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=l(a(0)),i=l(a(2012));t.NotifyHeader=e=>n.default.createElement("div",{className:i.default.notifyHeader},e.title," ",e.subTitle?n.default.createElement("span",{className:i.default.subTitle},e.subTitle):"")},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=a(26),i=l(a(0)),r=a(19),u=a(2014),s=a(2015),{TabPane:o}=n.Tabs;t.NotifyDrawer=e=>{const{t:t}=r.useTranslation();return i.default.createElement("div",{className:""},i.default.createElement(n.Drawer,{destroyOnClose:!0,maskClosable:!0,width:1e3,title:e.title,placement:"right",closable:!0,visible:e.visible,onClose:()=>{e.changeVisible({visible:!1})}},i.default.createElement(n.Tabs,{defaultActiveKey:e.dependencyType},i.default.createElement(o,{tab:t("notify:直接下游节点负责人"),key:"directDownStreamOwners"},i.default.createElement(u.NotifyDIRECTNew,{dependencyType:"DIRECT",uri:e.uri,notifyId:e.notifyId})),i.default.createElement(o,{tab:t("notify:间接下游节点负责人"),key:"indirectDownStreamOwners"},i.default.createElement(u.NotifyDIRECTNew,{dependencyType:"INDIRECT",uri:e.uri,notifyId:e.notifyId})),i.default.createElement(o,{tab:t("notify:有权限使用当前节点的人"),key:"hasAuthUsers"},i.default.createElement(s.NotifyASAUTHNew,{dependencyType:"HASAUTH",uri:e.uri,notifyId:e.notifyId})),i.default.createElement(o,{tab:t("notify:当前节点关注的人"),key:"focusUsers"},i.default.createElement(s.NotifyASAUTHNew,{dependencyType:"FAV",uri:e.uri,notifyId:e.notifyId})))))}},function(e,t,a){e.exports={"change-notify":"style_change-notify_ZaXXS",changeNotify:"style_change-notify_ZaXXS",main:"style_main_19oCQ","change-notify-detail":"style_change-notify-detail_9-JyT",changeNotifyDetail:"style_change-notify-detail_9-JyT","change-type-span":"style_change-type-span_XpHPe",changeTypeSpan:"style_change-type-span_XpHPe","change-detail-text":"style_change-detail-text_3SCPO",changeDetailText:"style_change-detail-text_3SCPO","ant-descriptions-item-container":"style_ant-descriptions-item-container_9cDNx",antDescriptionsItemContainer:"style_ant-descriptions-item-container_9cDNx","ant-descriptions-item-label":"style_ant-descriptions-item-label_17-cl",antDescriptionsItemLabel:"style_ant-descriptions-item-label_17-cl","ant-descriptions-item-content":"style_ant-descriptions-item-content_2HflR",antDescriptionsItemContent:"style_ant-descriptions-item-content_2HflR","notify-header":"style_notify-header_3Iq3J",notifyHeader:"style_notify-header_3Iq3J"}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const l=a(160);t.v1DataeInfoApi={DataeRelation:async e=>l.get("datae/relation",{uri:e}),DataeSimilarRep:async e=>l.get("datae/similarRep",{uri:e}),dataeTableInfo:async e=>await l.get("datae/common",{uri:e})}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.STATEMENT_DETAIL="statementdetail"}(t.IDataeDetailTab||(t.IDataeDetailTab={}))},function(e,t,a){e.exports={"statement-detail":"index_statement-detail_UdPnb",statementDetail:"index_statement-detail_UdPnb",item:"index_item_3hk28",hd:"index_hd_3TpuR",spe:"index_spe_303S8",title:"index_title_1_fnr",tip:"index_tip_3cFMP","tip-icon":"index_tip-icon_2pKe0",tipIcon:"index_tip-icon_2pKe0",text:"index_text_3l5M-",content:"index_content_28Ofx",desc:"index_desc_15d4V","virtual-list-relation":"index_virtual-list-relation_3FyeJ",virtualListRelation:"index_virtual-list-relation_3FyeJ",icon:"index_icon_3jgIs"}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=l(a(332)),r=l(a(480)),u=l(a(372)),s=a(1170),o=a(174),d=a(26),c=n(a(0)),m=a(19),f=l(a(2067)),p={labelCol:{span:24},wrapperCol:{span:24}};t.AddAlbumModal=e=>{const{t:t}=m.useTranslation(),{visible:a,setVisible:l,onOk:n,addedAlbums:_,uri:h}=e,[g,E]=c.useState(!1),[b,v]=c.useState({}),[y,T]=c.useState(!1),[N,S]=c.useState([]),C=c.useMemo(()=>_.map(({albumId:e})=>e),[_]),[x]=s.useForm();c.useEffect(()=>{T(!0),o.AlbumApi.mineAlbum().then(e=>{S(e),T(!1)})},[]),c.useEffect(()=>{a||x.resetFields()},[x,a]);const w=e=>{b[e]||(async e=>{try{const t={albumId:e,withTableCount:!1},a=await o.AlbumApi.getAlbumGroup(t);v({...b,[e]:a})}catch(e){d.message.error(e)}})(e)};return c.default.createElement(u.default,{className:f.default.addAibumModal,visible:a,width:520,confirmLoading:g,title:e.title,okText:e.okText||null,onOk:x.submit,destroyOnClose:!0,onCancel:()=>l(!1)},c.default.createElement(d.Form,{name:"create-album",onFinish:async e=>{E(!0);const{comment:t,groupList:a}=e,i=a.map(e=>e.albumId);try{await o.AlbumApi.addToAlbum({groupList:a,uri:h,comment:t});const e=N.filter(({albumId:e})=>i.includes(e)&&!C.includes(e));n(e.concat(_)),l(!1)}catch(e){d.message.error(e.message)}E(!1)},form:x,labelAlign:"left",layout:"horizontal",initialValues:{groupList:[{albumId:void 0,groupId:void 0}]}},c.default.createElement(d.Form.Item,{label:t("category:表名")},c.default.createElement("span",null,e.tableName)),c.default.createElement(d.Form.List,{name:"groupList"},(e,{add:a,remove:l})=>c.default.createElement(c.default.Fragment,null,c.default.createElement("div",{className:f.default.albumGroupPart},e.map(a=>c.default.createElement("div",{key:"group"+a.key,className:f.default.albumGroup},c.default.createElement("div",{className:f.default.albumGroupLeft},c.default.createElement(d.Form.Item,{shouldUpdate:!0},()=>c.default.createElement(d.Form.Item,Object.assign({},a,{key:"album"+a.key,label:t("detail:加入专辑"),name:[a.name,"albumId"],fieldKey:[a.fieldKey,"albumId"],rules:[{required:!0,message:t("message:加入专辑不能为空")}]}),c.default.createElement(d.Select,{style:{width:"100%"},placeholder:t("message:请输入名字添加"),notFoundContent:y?c.default.createElement(d.Spin,{size:"small"}):null,filterOption:!1,showSearch:!0,allowClear:!0,onChange:w},N.map(({name:e,albumId:t})=>c.default.createElement(d.Select.Option,{key:t,value:t,disabled:C.includes(t)||x.getFieldValue("groupList").some(e=>t===(null==e?void 0:e.albumId)),label:e},e))))),c.default.createElement(d.Form.Item,{shouldUpdate:!0},()=>{var e;return c.default.createElement(d.Form.Item,Object.assign({},a,{key:"group"+a.key,label:t("message:选择分组"),name:[a.name,"groupId"],fieldKey:[a.fieldKey,"groupId"],rules:[{required:!0,message:t("message:选择分组不能为空")}],dependencies:[a.name,"albumId"]}),c.default.createElement(d.TreeSelect,{placeholder:t("common:请选择"),showSearch:!0,allowClear:!0,treeDefaultExpandAll:!0,treeData:null!==(e=b[x.getFieldValue(["groupList",a.name,"albumId"])])&&void 0!==e?e:[],treeNodeFilterProp:"title"}))})),!!(e&&e.length>1)&&c.default.createElement(d.IconFont,{className:f.default.deleteBtn,type:"icon-delete",onClick:()=>l(a.name)})))),c.default.createElement(d.Form.Item,{className:f.default.addLine},c.default.createElement(d.Button,{type:"link",onClick:()=>a()},c.default.createElement(i.default,null)," ",t("message:添加"))))),c.default.createElement(d.Form.Item,Object.assign({name:"comment",className:f.default.commentLine},p,{label:t("message:给表添加我的备注")+"："}),c.default.createElement(r.default,{rows:4}))))}},,,,,,,,,,function(e,t,a){e.exports={comment:"style_comment_2feDt",title:"style_title_2Xk2H",desc:"style_desc_2yT7N",star:"style_star_2TPx4",item:"style_item_3HueC",text:"style_text_2VI81",fill:"style_fill_ZXvQY",tags:"style_tags_1RC-E",tag:"style_tag_2Q_7c",active:"style_active_2t5YM",content:"style_content_1-TxR",actions:"style_actions_3jgxQ"}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=l(a(372)),r=l(a(118)),u=a(263),s=a(26),o=a(528),d=n(a(365)),c=a(106),m=n(a(0)),f=a(19),p=l(a(2099));t.SearchSqlModal=e=>{const{visible:t,setVisible:a}=e,[l,n]=m.useState(!1),[_,h]=m.useState(""),[g,E]=m.useState(""),[b,v]=m.useState(!1),[y,T]=m.useState(null),{uri:N}=m.useContext(c.HiveDetailContext),{t:S}=f.useTranslation(),C=m.useCallback(async()=>{if(!_&&N){n(!0);try{const e=await u.v1HiveInfoApi.createSql(N);h(e)}catch(e){s.message.error(e)}n(!1)}},[_,N]),x=m.useCallback(async()=>{if(g||!N)return g;n(!0);try{const e=await u.v1HiveInfoApi.createSqlWithCommet(N);return E(e),n(!1),e}catch(e){s.message.error(e),n(!1)}},[g,N]);m.useEffect(()=>{t&&C()},[C,t]),m.useEffect(()=>{if(!t||!_)return;const e=d.editor.create(document.getElementById("createSql"),{value:_,language:"sql",readOnly:!0,automaticLayout:!0,minimap:{enabled:!1}});T(e)},[_,t]);return m.default.createElement(i.default,{title:"detail:建表语句",visible:t,onCancel:()=>a(!1),afterClose:()=>v(!1)},m.default.createElement("div",{className:p.default.sqlCommentSwitch},m.default.createElement(s.Checkbox,{onChange:async e=>{if(v(e.target.checked),!e.target.checked)return y.setValue(_);const t=await x();y.setValue(t)}},S("detail:是否展示注释"))),m.default.createElement(r.default,{spinning:l},m.default.createElement(o.SqlView,{sql:b?g:_,id:"createSql",height:350})))},t.SqlModal=e=>{const{visible:t,setVisible:a,loading:l,sql:n}=e;return m.useEffect(()=>{t&&!l&&d.editor.create(document.getElementById(p.default.sqlView),{value:n,language:"sql",readOnly:!0,automaticLayout:!0,minimap:{enabled:!1}})},[n,t,l]),m.default.createElement(i.default,{className:p.default.sqlModal,visible:t,width:620,title:e.title,okText:e.okText||null,onOk:()=>{a(!1),e.onOk()},destroyOnClose:!0,onCancel:()=>a(!1)},m.default.createElement(r.default,{spinning:l},m.default.createElement(o.SqlView,{sql:n,id:p.default.sqlView,height:350})))}},function(e,t,a){e.exports={"tab-info":"index_tab-info_2njph",tabInfo:"index_tab-info_2njph","field-pane":"index_field-pane_1VMUc",fieldPane:"index_field-pane_1VMUc",table:"index_table_2c-9y","column-shared":"index_column-shared_3qAIJ",columnShared:"index_column-shared_3qAIJ","column-name":"index_column-name_1cfos",columnName:"index_column-name_1cfos","column-content":"index_column-content_1rxJS",columnContent:"index_column-content_1rxJS","column-hot":"index_column-hot_xi9rH",columnHot:"index_column-hot_xi9rH","icon-hot":"index_icon-hot_1Uc0V",iconHot:"index_icon-hot_1Uc0V","hot-current":"index_hot-current_3HHtj",hotCurrent:"index_hot-current_3HHtj","icon-hot-current":"index_icon-hot-current_3nDNk",iconHotCurrent:"index_icon-hot-current_3nDNk","column-action":"index_column-action_3RrZX",columnAction:"index_column-action_3RrZX","action-stat":"index_action-stat_3bXNj",actionStat:"index_action-stat_3bXNj","action-share":"index_action-share_v1h_T",actionShare:"index_action-share_v1h_T",actions:"index_actions_3KWOl",right:"index_right_xBI3X",highlighter:"index_highlighter_3y4dh","column-title":"index_column-title_mDwm7",columnTitle:"index_column-title_mDwm7"}},,,,,,,,,,,,function(e,t,a){e.exports={output:"output_output_1IpgF",intro:"output_intro_3DSoT",title:"output_title_21MEX",tip:"output_tip_1YyAj",time:"output_time_3LQg-",chart:"output_chart_2VKUU","chart-title":"output_chart-title_ebW9s",chartTitle:"output_chart-title_ebW9s",left:"output_left_2iXZd",right:"output_right_2KVoe"}},function(e,t,a){e.exports={partition:"partition_partition_xVhy0","table-name":"partition_table-name_3guYM",tableName:"partition_table-name_3guYM",intro:"partition_intro_3m0i2",title:"partition_title_3ZcVm",right:"partition_right_5HTPA",time:"partition_time_2TCtx",chart:"partition_chart_1feH-",filter:"partition_filter_2Egyt","partition-name":"partition_partition-name_YRuGe",partitionName:"partition_partition-name_YRuGe"}},,,function(e,t,a){e.exports={"table-intro":"table-intro_table-intro_2nsjA",tableIntro:"table-intro_table-intro_2nsjA",actions:"table-intro_actions_3Ed9w",content:"table-intro_content_3bqu9","html-editor":"table-intro_html-editor_2d02m",htmlEditor:"table-intro_html-editor_2d02m","markdown-editor":"table-intro_markdown-editor_1Osx6",markdownEditor:"table-intro_markdown-editor_1Osx6","edit-actions":"table-intro_edit-actions_2z8lA",editActions:"table-intro_edit-actions_2z8lA","edit-preview":"table-intro_edit-preview_3hDYM",editPreview:"table-intro_edit-preview_3hDYM","edit-footer-actions":"table-intro_edit-footer-actions_2S2Zv",editFooterActions:"table-intro_edit-footer-actions_2S2Zv","history-intro":"table-intro_history-intro_okUF8",historyIntro:"table-intro_history-intro_okUF8"}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=l(a(761)),i=l(a(1199)),r=l(a(1200)),u=l(a(554)),s=l(a(0)),o=a(536),d=l(a(280));t.GraphControl=e=>{const{graph:t,width:a,height:l}=e;return s.default.createElement("div",{className:d.default.actions},s.default.createElement(u.default,{onClick:()=>{t.zoomTo(1,{x:a/2,y:l/2})}}),s.default.createElement(r.default,{onClick:()=>{const e=t.getZoom();t.zoomTo(e+.3,{x:a/2,y:l/2})}}),s.default.createElement(i.default,{onClick:()=>{const e=t.getZoom();e<=.2||t.zoomTo(e-.3,{x:a/2,y:l/2})}}),s.default.createElement(n.default,{onClick:()=>{document.fullscreenElement?(document.exitFullscreen(),t.changeSize(a,l)):(document.querySelector("#"+o.CONTAINER_ID).requestFullscreen(),t.changeSize(document.body.offsetWidth,document.body.offsetHeight))}}))}},,,function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=l(a(625)),r=l(a(162)),u=n(a(0)),s=a(19),o=l(a(280));t.GraphFilter=e=>{const{updateUp:t,updateDown:a}=e,{upEntities:l,downEntities:n}=e.data||{},{t:d}=s.useTranslation(),c=u.useMemo(()=>(null==l?void 0:l.map(e=>({value:e.name,label:e.name})))||[],[l]),m=u.useMemo(()=>(null==n?void 0:n.map(e=>({value:e.name,label:e.name})))||[],[n]),[f,p]=u.useState([]),[_,h]=u.useState([]);return u.default.createElement("div",{className:o.default.filter},u.default.createElement(i.default,{allowClear:!0,options:f,onSearch:e=>p(e?c.filter(t=>t.value.includes(e)):[]),onChange:t},u.default.createElement(r.default.Search,{placeholder:d("message:请输入直接上游节点名称")})),u.default.createElement(i.default,{className:o.default.right,allowClear:!0,options:_,onSearch:e=>h(e?m.filter(t=>t.value.includes(e)):[]),onChange:a},u.default.createElement(r.default.Search,{placeholder:d("message:请输入直接上游节点名称")})))}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=a(219),i=l(a(0)),r=a(19),u=l(a(280)),s=a(277);t.GraphTypeIntro=e=>{const t=s.useEntityTypeOptions(e.type),a=s.useEntityTypeMap(),{t:l}=r.useTranslation();return i.default.createElement("div",{className:u.default.typeIntro},i.default.createElement("div",null,l("detail:图例"),": "),i.default.createElement("div",{className:u.default.list},t.map(e=>[n.LineageEntityType.ALL,n.LineageEntityType.RDS_MYSQL,n.LineageEntityType.SELF_MYSQL].includes(e.value)?null:i.default.createElement("div",{className:u.default.item,key:e.value},i.default.createElement("span",{className:u.default.circle,style:{background:a[e.value].color}}),i.default.createElement("span",{className:u.default.text},e.label)))))}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=l(a(537)),i=a(0),r=a(277);t.useConstructGraphData=()=>{const e=r.useEntityTypeMap();return i.useCallback((t,a="left",l="left")=>{var n;const{uuid:i,name:u}=t,s={id:i,label:u.length>25?`${u.slice(0,13)}...${u.slice(u.length-15,u.length)}`:u,labelCfg:{position:a},style:{lineWidth:0,fill:(null===(n=e[t.type])||void 0===n?void 0:n.color)||r.LineageGraphDefaultColor}};return l&&(s.side=l),(t.hasUpEntities||t.hasDownEntities)&&(s.collapsed=!0,s.children=[{id:u+"-temp"}]),Object.assign(s,t),s},[e])},t.useParseGraphData=()=>{const e=t.useConstructGraphData();return i.useCallback((t,a,l)=>{const n=e(t,"bottom");if(n.collapsed=!1,n.children=[],null==a?void 0:a.length)for(const t of a)n.children.push(e(t));if(null==l?void 0:l.length)for(const t of l)n.children.push(e(t,"right","right"));return n},[e])},t.useInitTreeGraph=()=>i.useCallback((e,t)=>{const a=new n.default.TreeGraph(t);return a.data(e),a.render(),a.focusItem(a.findById(e.id)),a},[])},function(e,t,a){"use strict";var l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=a(120),i=a(97),r=a(219),u=a(148),s=l(a(0)),o=a(19),d=a(117);t.useTableColumns=()=>{const{t:e}=o.useTranslation();return s.useMemo(()=>[{title:e("detail:节点名"),dataIndex:"name",render:(e,{uri:t,type:a,entityLink:l})=>a===r.LineageEntityType.HIVE_TABLE_COLUMN||a===r.LineageEntityType.HIVE_TABLE?s.default.createElement(d.Link,{to:{pathname:"/detail",search:"?uri="+t,state:{referer:u.RefererType.INNER}}},e):s.default.createElement(i.ExternalLink,{href:l,withReferrer:!0},e)},{title:e("detail:描述"),dataIndex:"description",ellipsis:!0},{title:e("detail:负责人"),width:110,dataIndex:"ownerLabel",render:(e,{owner:t})=>s.default.createElement(n.DChat,{user:t})},{title:e("detail:节点类型"),width:130,dataIndex:"typeLabel"},{title:e("common:血缘"),width:130,dataIndex:"viewTypeLabel"}],[e])}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const l=a(219),n=a(0),i=a(19);t.useViewTypeOptions=(e="TABLE")=>{const{t:t}=i.useTranslation();return n.useMemo(()=>[{label:t("detail:直接上游"),value:l.LineageViewType.DIRECT_UP},{label:t("detail:直接下游"),value:l.LineageViewType.DIRECT_DOWN},"TABLE"===e?{label:t("detail:间接下游"),value:l.LineageViewType.INDIRECT_DOWN}:null,{label:t("detail:全部上游"),value:l.LineageViewType.ALL_UP},{label:t("detail:全部下游"),value:l.LineageViewType.ALL_DOWN}].filter(Boolean),[t,e])}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const l=a(160),n=a(206);t.statisticsApi={statHistogram:async e=>await l.request(n.FETCH_METHOD.POST,"/hive/meta/column/statHistogram",e),statisticsList:async e=>(e.partitionName||delete e.partitionName,await l.get("/hive/meta/column/statList",e)),partitionList:async e=>await l.request(n.FETCH_METHOD.POST,"/hive/meta/column/stat/partitionList",e)}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.DETAIL="detail",e.EXAMPLE="example"}(t.IPublicLogDetailTab||(t.IPublicLogDetailTab={}))},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.FIELD_INFO="fieldinfo"}(t.IMysqlDetailTab||(t.IMysqlDetailTab={}))},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.FIELD_INFO="field_info",e.PREVIEW="preview",e.ADD_FIELD="add_field",e.INTRO="intro"}(t.IStreamDetailTab||(t.IStreamDetailTab={}))},function(e,t,a){e.exports={"table-intro":"table-intro_table-intro_3bk67",tableIntro:"table-intro_table-intro_3bk67",actions:"table-intro_actions_2FTqs",content:"table-intro_content_WFOoE","html-editor":"table-intro_html-editor_2ts5F",htmlEditor:"table-intro_html-editor_2ts5F","markdown-editor":"table-intro_markdown-editor_1ezv9",markdownEditor:"table-intro_markdown-editor_1ezv9","edit-actions":"table-intro_edit-actions_2GjNb",editActions:"table-intro_edit-actions_2GjNb","edit-preview":"table-intro_edit-preview_2w70m",editPreview:"table-intro_edit-preview_2w70m","edit-footer-actions":"table-intro_edit-footer-actions_1MK-H",editFooterActions:"table-intro_edit-footer-actions_1MK-H","history-intro":"table-intro_history-intro_2M5ma",historyIntro:"table-intro_history-intro_2M5ma"}},function(e,t,a){e.exports={editor:"style_editor_2tocC",container:"style_container_2wO-D","side-menu":"style_side-menu_1Bxga",sideMenu:"style_side-menu_1Bxga",item:"style_item_2-31v",rect:"style_rect_2wSjU",circle:"style_circle_36Tkj",ellipse:"style_ellipse_2qcCj",diamond:"style_diamond_lahpL",link:"style_link_3iLfM",text:"style_text_3UqC_"}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=a(233),r=a(30),u=l(a(149)),s=a(469),o=a(142),d=l(a(4)),c=a(26),m=a(1213),f=a(148),p=a(199),_=n(a(0)),h=l(a(260)),g=a(19),E=a(117),b=a(103),v=l(a(2225));t.Search=e=>{var t;const{t:a}=g.useTranslation(),l=null!==(t=e.searchType)&&void 0!==t?t:r.getQuery("searchType")||p.SearchType.HIVE,n=E.useHistory(),{pathname:y}=E.useLocation(),T="/search"===y,[N,S]=_.useState(!1),[C,x]=_.useState([]),[w,I]=_.useState(r.getQuery("keyword")||null),[L,O]=_.useState([]),[P,M]=_.useState(null),[k,D]=_.useState(!1),[A,j]=_.useState(!1),[F]=i.useRequest(s.v1HomeApi.hotKeywords),R=_.useCallback(async t=>{var a;T?(null===(a=e.updateKeyword)||void 0===a||a.call(e,t),r.updateQuery({keyword:t})):m.goToSearchPage(n,t),D(!1)},[n,T,e.updateKeyword]),H=_.useRef(0),{current:U}=_.useRef({timer:null}),B=_.useCallback(async(e,t)=>{H.current+=1;const a=H.current;M(null),I(e),t==p.SearchType.FEATURE||t==p.SearchType.EVENT_TRACKING?D(!1):D(!0);const l=async()=>{S(!0);try{const{inputTokens:l,records:n,total:i}=await((e,t)=>t===p.SearchType.MYSQL?o.v1SearchApi.searchMysqlReminder(e):t===p.SearchType.STREAM?o.v1SearchApi.searchStreamReminder(e):t===p.SearchType.METRIC?o.v1SearchApi.searchMetricReminder(e):t===p.SearchType.PUBLIC_LOG?o.v1SearchApi.searchPublicLogReminder(e):t===p.SearchType.EVENT_TRACKING?o.v1SearchApi.reminderTracking(e):t===p.SearchType.FEATURE?o.v1SearchApi.searchFeatureReminder(e):t===p.SearchType.DATAE?o.v1SearchApi.searchDataeReminder(e):o.v1SearchApi.searchHiveReminder(e))(e,t);if(a!==H.current)return;x(l),O(n),j(i>n.length)}catch(e){}a===H.current&&S(!1)};U.timer&&clearTimeout(U.timer),U.timer=setTimeout(()=>{l()},300)},[]);return _.default.createElement("div",{className:d.default(v.default.homeSearch,{[e.classNames]:e.classNames,[v.default.light]:"light"===e.theme})},_.default.createElement("div",{className:v.default.homeInput},_.default.createElement(c.Popover,{placement:"bottomLeft",content:N||k?l==p.SearchType.EVENT_TRACKING||l==p.SearchType.FEATURE?null:_.default.createElement("div",{className:v.default.listWrapper},_.default.createElement(c.Spin,{spinning:N},_.default.createElement("div",{className:v.default.list},L.length?L.map(({label:t,historyKeywords:a,uri:n,user:i},s)=>_.default.createElement("div",{key:t+n},T&&a?_.default.createElement("div",{className:d.default(v.default.item,{[v.default.selected]:P===s}),onClick:()=>{var t;null===(t=e.updateKeyword)||void 0===t||t.call(e,a),I(a),r.updateQuery({keyword:a})}},_.default.createElement(u.default,{title:a},_.default.createElement(h.default,{className:v.default.label,searchWords:C,highlightClassName:v.default.highlighter,autoEscape:!0,textToHighlight:a})),i?_.default.createElement("span",{className:v.default.value},null==i?void 0:i.name):null):-1!=(null==n?void 0:n.indexOf("feature://"))?_.default.createElement("a",{className:d.default(v.default.item,{[v.default.selected]:P===s}),href:"#",target:"_blank"},_.default.createElement(u.default,{title:t},_.default.createElement(h.default,{className:v.default.label,searchWords:C,highlightClassName:v.default.highlighter,autoEscape:!0,textToHighlight:t})),i?_.default.createElement("span",{className:v.default.value},null==i?void 0:i.name):null):_.default.createElement(E.Link,{className:d.default(v.default.item,{[v.default.selected]:P===s}),to:a?{pathname:"/search",search:`?keyword=${a}${l!==p.SearchType.HIVE?"&searchType="+l:""}`}:{pathname:l==p.SearchType.HIVE?"/detail":l==p.SearchType.STREAM?"/detail/stream":l==p.SearchType.MYSQL?"/detail/mysql":l==p.SearchType.DATAE?"/detail/datae":"/detail",search:"?uri="+n,state:{referer:f.RefererType.INNER}}},_.default.createElement(u.default,{title:t},_.default.createElement(h.default,{className:v.default.label,searchWords:C,highlightClassName:v.default.highlighter,autoEscape:!0,textToHighlight:t})),i?_.default.createElement("span",{className:v.default.value},null==i?void 0:i.name):null))):null),!T&&A?_.default.createElement("div",{className:v.default.searchAll},_.default.createElement(E.Link,{to:{pathname:"/search",search:`?searchType=${l}keyword=${w}`}},a("common:查看全部搜索结果"))):null)):null,overlayClassName:v.default.searchTip,visible:!0},_.default.createElement(c.Input.Search,{placeholder:a("common:搜数据、找指标，一站式搜索平台"),value:w,allowClear:!0,onSearch:R,onBlur:()=>{setTimeout(()=>{k&&D(!1)},200)},onPressEnter:()=>{const e=L[P];if(e){const t={[p.SearchType.HIVE]:"/detail",[p.SearchType.STREAM]:"/detail/stream",[p.SearchType.MYSQL]:"/detail/mysql",[p.SearchType.PUBLIC_LOG]:"/detail/log",[p.SearchType.DATAE]:"/detail/datae"};n.push({pathname:t[l],search:"?uri="+(e.uri?e.uri:b.generateUri(e.dbName,e.tableName)),state:{referer:f.RefererType.INNER}})}else R(w)},onKeyDown:e=>{var t;if("Escape"===e.key&&D(!1),["ArrowUp","ArrowDown"].includes(e.key)){e.stopPropagation(),e.preventDefault();const a=L.length;if(!k||!a)return;const n=null===P?0:(P+("ArrowUp"===e.key?a-1:1))%a,i=L[n],r=l==p.SearchType.DATAE?""+i.name:`${i.dbName}.${i.tableName}`;I(null!==(t=i.historyKeywords)&&void 0!==t?t:r),M(n)}},onChange:e=>{I(e.currentTarget.value),B(e.currentTarget.value,l)},onFocus:()=>{B(w,l),l==p.SearchType.FEATURE||l==p.SearchType.EVENT_TRACKING?D(!1):D(!0)},enterButton:a("common:搜索")}))),_.default.createElement("div",{className:v.default.homeKeywords},null==F?void 0:F.map((t,a)=>T?_.default.createElement("span",{key:t+a,className:v.default.keyword,onClick:()=>{I(t),e.updateKeyword(t)}},t):_.default.createElement(E.Link,{key:t+a,className:v.default.keyword,to:{pathname:"/search",search:`?keyword=${t}${l!==p.SearchType.HIVE?"&searchType="+l:""}`}},t))))}},function(e,t,a){"use strict";function l(e){return e.split(".").some(e=>e.endsWith("_dev"))}Object.defineProperty(t,"__esModule",{value:!0}),t.isIncludeDevTable=l,t.goToSearchPage=function(e,t){const a=l(t);let n="?keyword="+t;a&&(n+="&isIncludeDevTable="+a),e.push({pathname:"/search",search:n})}},function(e,t,a){e.exports={"blood-tool":"style_blood-tool_2FqB0",bloodTool:"style_blood-tool_2FqB0",header:"style_header_3SUo2","label-container":"style_label-container_1Mpu5",labelContainer:"style_label-container_1Mpu5","target-label":"style_target-label_V-79L",targetLabel:"style_target-label_V-79L","source-label":"style_source-label_1mEkq",sourceLabel:"style_source-label_1mEkq","header-form":"style_header-form_39dZP",headerForm:"style_header-form_39dZP",select:"style_select_wFtNM",separate:"style_separate_1yZjn","search-label":"style_search-label_1Jq03",searchLabel:"style_search-label_1Jq03",content:"style_content_MJL6x",container:"style_container_16oEm",bar:"style_bar_2VHwt",text:"style_text_2Nk7g","search-state":"style_search-state_26zgr",searchState:"style_search-state_26zgr",img:"style_img_3lgHo"}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.PROD="PROD",e.DEV="DEV"}(t.ProjectType||(t.ProjectType={}))},function(e,t,a){e.exports={error:"index_error_1HuLK","filter-options":"index_filter-options_fkhLD",filterOptions:"index_filter-options_fkhLD",sort:"index_sort_OtIuZ",list:"index_list_3JEwK",active:"index_active_2yQia","page-wrapper":"index_page-wrapper_m0ayN",pageWrapper:"index_page-wrapper_m0ayN",disabled:"index_disabled_38oLM",page:"index_page_10Hx-",current:"index_current_3rCss","table-list":"index_table-list_qH1pu",tableList:"index_table-list_qH1pu",highlighter:"index_highlighter_2O_vv",item:"index_item_2kA_B","main-content":"index_main-content_10Dz6",mainContent:"index_main-content_10Dz6",name:"index_name_2neK4",choicest:"index_choicest_3cbQV",text:"index_text_2VHz6",title:"index_title_3txc9","meta-content":"index_meta-content_2XhdC",metaContent:"index_meta-content_2XhdC",line:"index_line_336wU",label:"index_label_bJzA_",description:"index_description_16zzX",id:"index_id_Q4vzl",project:"index_project_1oczT",owner:"index_owner_2rzBa","data-owner-item":"index_data-owner-item_sLuNA",dataOwnerItem:"index_data-owner-item_sLuNA",value:"index_value_1pqUc","communicate-icon":"index_communicate-icon_3pZuY",communicateIcon:"index_communicate-icon_3pZuY","create-time":"index_create-time_205dO",createTime:"index_create-time_205dO","update-time":"index_update-time_65e2F",updateTime:"index_update-time_65e2F","sub-rep":"index_sub-rep_3cT9-",subRep:"index_sub-rep_3cT9-",hidden:"index_hidden_14R-f","topic-name":"index_topic-name_1ZaVH",topicName:"index_topic-name_1ZaVH","last-updated":"index_last-updated_lJV51",lastUpdated:"index_last-updated_lJV51","last-partition":"index_last-partition_156aJ",lastPartition:"index_last-partition_156aJ","column-info":"index_column-info_thD07",columnInfo:"index_column-info_thD07",extra:"index_extra_YDRGW",statistics:"index_statistics_1ouC4","last-of-type":"index_last-of-type_3BrSY",lastOfType:"index_last-of-type_3BrSY",nps:"index_nps_15xUa",column:"index_column_2EClr","show-column-detail":"index_show-column-detail_3ZWGJ",showColumnDetail:"index_show-column-detail_3ZWGJ",pagination:"index_pagination_2MDDe"}},function(e,t,a){e.exports={error:"index_error_1O-13","filter-options":"index_filter-options_DzBGX",filterOptions:"index_filter-options_DzBGX",sort:"index_sort_3U-0c",list:"index_list_vn0uB",active:"index_active_1KwJN","page-wrapper":"index_page-wrapper_1MubD",pageWrapper:"index_page-wrapper_1MubD",disabled:"index_disabled_2yIq9",page:"index_page_2Lt1G",current:"index_current_3-Lmw","table-list":"index_table-list_2G-7G",tableList:"index_table-list_2G-7G",highlighter:"index_highlighter_1M9eo",item:"index_item_3BgMZ","main-content":"index_main-content_1BCSn",mainContent:"index_main-content_1BCSn",name:"index_name_A209A",choicest:"index_choicest_QY9FV",text:"index_text_lsgtu",title:"index_title_2wirv","meta-content":"index_meta-content_1g6Da",metaContent:"index_meta-content_1g6Da",line:"index_line_agqSI",label:"index_label_2yKKh",apps:"index_apps_2lclF",value:"index_value_nyGEN","business-line":"index_business-line_nVr2g",businessLine:"index_business-line_nVr2g","latest-partition":"index_latest-partition_WgDZx",latestPartition:"index_latest-partition_WgDZx","data-owner":"index_data-owner_2Ww5A",dataOwner:"index_data-owner_2Ww5A","data-owner-item":"index_data-owner-item_15kZ6",dataOwnerItem:"index_data-owner-item_15kZ6","communicate-icon":"index_communicate-icon_hA74T",communicateIcon:"index_communicate-icon_hA74T","omega-status":"index_omega-status_-81ua",omegaStatus:"index_omega-status_-81ua","omega-level":"index_omega-level_3h12b",omegaLevel:"index_omega-level_3h12b","topic-name":"index_topic-name_cOUMn",topicName:"index_topic-name_cOUMn","omega-desc":"index_omega-desc_1qVlM",omegaDesc:"index_omega-desc_1qVlM","last-updated":"index_last-updated_4PaqI",lastUpdated:"index_last-updated_4PaqI","last-partition":"index_last-partition_2SPw_",lastPartition:"index_last-partition_2SPw_","column-info":"index_column-info_2iHu_",columnInfo:"index_column-info_2iHu_",description:"index_description_32P8p",extra:"index_extra_1_T7Q",statistics:"index_statistics_2_r72","last-of-type":"index_last-of-type_q5I5c",lastOfType:"index_last-of-type_q5I5c",nps:"index_nps_2tfmg",column:"index_column_2-Udz","show-column-detail":"index_show-column-detail___mG3",showColumnDetail:"index_show-column-detail___mG3",pagination:"index_pagination_3IyUq"}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=a(30),r=l(a(118)),u=a(142),s=l(a(4)),o=a(26),d=a(120),c=a(97),m=a(89),f=n(a(0)),p=l(a(260)),_=a(19),h=a(329),g=a(2280),E=a(471),b=a(546),v=a(2281),y=l(a(1219));t.MysqlTable=()=>{const{setRdsCount:e}=f.useContext(h.CountsDispatchContext),{sessionId:a,params:l}=f.useContext(b.MysqlStateContext),{setPageCurrent:n,setPageSize:u}=f.useContext(b.MysqlDispatchContext),{inputTokens:s,MysqlTables:d,MysqlTableLoading:c,MysqlTableErrorMessage:p,MysqlTableTotal:_}=g.UseMysqlSearch(l,a),E=m.useShowTotal();return f.useEffect(()=>{c||null===_||e(_)},[e,_,c]),f.default.createElement("div",null,f.default.createElement(v.MysqlTableFilter,{total:_}),f.default.createElement(r.default,{spinning:c},p?f.default.createElement("div",{className:y.default.error},p):(null==d?void 0:d.length)?f.default.createElement("div",{className:y.default.tableList},f.default.createElement("div",{className:y.default.tableList},null==d?void 0:d.map((e,l)=>f.default.createElement(t.MysqlTableItem,{key:""+e.uri,keywords:s,index:l,sessionId:a,item:e}))),f.default.createElement("div",{className:y.default.pagination},f.default.createElement(o.Pagination,{showTotal:E,showSizeChanger:!0,showQuickJumper:!0,pageSize:l.pageSize,current:l.pageCurrent,onShowSizeChange:(e,t)=>{u(t),i.updateQuery({pageSize:10!==t?t:null})},onChange:e=>{n(e),i.updateQuery({pageNum:e>1?e:null})},total:_}))):f.default.createElement("div",{className:y.default.tableList},f.default.createElement("div",{className:y.default.tableList},f.default.createElement(o.Empty,{style:{padding:"50px 0"},image:o.Empty.PRESENTED_IMAGE_SIMPLE})))))},t.OwnerTooltip=e=>{if(e.ownerList)return f.default.createElement("div",{className:y.default.dataOwnerItem},e.ownerList.map(e=>f.default.createElement("div",{style:{display:"inline-block"},key:e.account},f.default.createElement(d.DChat,{className:y.default.value,user:e}))))},t.MysqlTableItem=e=>{const{keywords:a,item:l,index:n,sessionId:i}=e,{t:r}=_.useTranslation(),{params:m}=f.useContext(b.MysqlStateContext),h=l.uri;return f.default.createElement("div",{className:y.default.item,key:`${l.dbName}.${l.tableName}`},f.default.createElement("div",{className:y.default.mainContent},f.default.createElement("div",{className:y.default.name},l.isChoicest?f.default.createElement("span",{className:y.default.choicest},"精"):null,f.default.createElement(c.ExternalLink,{className:y.default.text,href:`/detail/mysql?uri=${h}&keyword=${a.join()}`,withReferrer:!0,onClick:()=>{var e;const t={keyword:null===(e=m.pageFilter)||void 0===e?void 0:e.keyword,uri:h,page:m.pageCurrent,rank:n,searchSessionId:i};u.v1SearchApi.searchLogMysql(t)}},f.default.createElement(p.default,{searchWords:a,highlightClassName:y.default.highlighter,autoEscape:!0,textToHighlight:`${l.dbName}.${l.tableName}`}))),l.aliasName&&f.default.createElement(p.default,{className:y.default.title,searchWords:a,highlightClassName:y.default.highlighter,autoEscape:!0,textToHighlight:l.aliasName}),f.default.createElement("div",{className:y.default.metaContent},f.default.createElement("div",{className:y.default.line},f.default.createElement("div",{className:s.default(y.default.item,y.default.idc)},f.default.createElement("span",{className:y.default.label},r("detail:国家"),":"),f.default.createElement("span",{className:y.default.value},f.default.createElement(p.default,{searchWords:a,highlightClassName:y.default.highlighter,autoEscape:!0,textToHighlight:l.idc||"-"}))),f.default.createElement("div",{className:s.default(y.default.item)},f.default.createElement("span",{className:y.default.label},r("detail:业务线"),":"),f.default.createElement("span",{className:y.default.value},f.default.createElement(p.default,{searchWords:a,highlightClassName:y.default.highlighter,autoEscape:!0,textToHighlight:l.bu||"-"}))),f.default.createElement("div",{className:s.default(y.default.item,y.default.dataOwner)},f.default.createElement(p.default,{className:y.default.label,searchWords:a,highlightClassName:y.default.highlighter,autoEscape:!0,textToHighlight:r("detail:负责人")+":"}),f.default.createElement(o.Tooltip,{title:f.default.createElement(t.OwnerTooltip,{ownerList:l.ownerList})},f.default.createElement("div",{className:y.default.dataOwnerItem},l.ownerList.map((e,t)=>{if(t<3)return f.default.createElement(d.DChat,{className:y.default.value,user:e,key:e.account})}),l.ownerList.length>3?"...":""))),f.default.createElement("div",{className:s.default(y.default.item,y.default.collectStatus)},f.default.createElement("span",{className:y.default.label},r("search:采集状态"),":"),f.default.createElement("span",{className:y.default.value},f.default.createElement(p.default,{searchWords:a,highlightClassName:y.default.highlighter,autoEscape:!0,textToHighlight:E.COLLECT_STATUS[l.collectStatus]||"-"})))))),f.default.createElement("div",{className:y.default.extra}))}},function(e,t,a){e.exports={error:"index_error_2VLvX","filter-options":"index_filter-options_1YLcs",filterOptions:"index_filter-options_1YLcs",sort:"index_sort_1OZ82",list:"index_list_26wgJ",active:"index_active_10wH7","page-wrapper":"index_page-wrapper_1Yu2v",pageWrapper:"index_page-wrapper_1Yu2v",disabled:"index_disabled_bNDvw",page:"index_page_2ouAb",current:"index_current_3Algk","table-list":"index_table-list_1U6WO",tableList:"index_table-list_1U6WO",highlighter:"index_highlighter_13HIR",item:"index_item_3gRpn","main-content":"index_main-content_3iZeI",mainContent:"index_main-content_3iZeI",name:"index_name_XUZVo",choicest:"index_choicest_2giiA",text:"index_text_25l5g",title:"index_title_3nj2F","meta-content":"index_meta-content_HNQRA",metaContent:"index_meta-content_HNQRA",line:"index_line_ZVWP9",label:"index_label_3yce9","project-code":"index_project-code_276m5",projectCode:"index_project-code_276m5","storage-medium":"index_storage-medium_2OxtH",storageMedium:"index_storage-medium_2OxtH","latest-partition":"index_latest-partition_2Xqbi",latestPartition:"index_latest-partition_2Xqbi",value:"index_value_FqGIK",idc:"index_idc_1hujM","collect-status":"index_collect-status_3vvfT",collectStatus:"index_collect-status_3vvfT","data-owner":"index_data-owner_B0d50",dataOwner:"index_data-owner_B0d50","data-owner-item":"index_data-owner-item_3aJRV",dataOwnerItem:"index_data-owner-item_3aJRV","communicate-icon":"index_communicate-icon_3UoXi",communicateIcon:"index_communicate-icon_3UoXi","topic-name":"index_topic-name_1U0-n",topicName:"index_topic-name_1U0-n","last-updated":"index_last-updated_3L_Ll",lastUpdated:"index_last-updated_3L_Ll","last-partition":"index_last-partition_mz7K3",lastPartition:"index_last-partition_mz7K3","column-info":"index_column-info_3TWJf",columnInfo:"index_column-info_3TWJf",description:"index_description_CYObe",extra:"index_extra_1CmEt",statistics:"index_statistics_Bot-T","last-of-type":"index_last-of-type_YuNW2",lastOfType:"index_last-of-type_YuNW2",nps:"index_nps_3nEua",column:"index_column_gQ-Pq","show-column-detail":"index_show-column-detail_aFEL_",showColumnDetail:"index_show-column-detail_aFEL_",pagination:"index_pagination_1zC_t"}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=l(a(4)),i=l(a(0)),r=l(a(281));t.Tag=e=>{const{count:t,selected:a=!1}=e;let l=e.name;return t&&(l=`${l}(${t})`),i.default.createElement("span",{onClick:e.onClick,className:n.default(r.default.tag,{[e.classNames]:e.classNames,[r.default.selected]:a})},l)}},function(e,t,a){"use strict";var l;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.PARAMS="PARAMS",e.UPDATECOUNTS="UPDATECOUNTS"}(l=t.COUNTS_ACTION_TYPES||(t.COUNTS_ACTION_TYPES={})),function(e){e.HIVE="hiveCount",e.STREAM="streamCount",e.MYSQL="rdsCount"}(t.COUNTS_TYPES_RESULT||(t.COUNTS_TYPES_RESULT={})),t.SHOW_NUMBER=20,t.CountsParamsReducer=(e,t)=>{switch(t.type){case l.PARAMS:return{...e,...t.params};case l.UPDATECOUNTS:return{...e,counts:t.params.counts};default:return e}}},function(e,t,a){e.exports={"public-log":"index_public-log_29ELX",publicLog:"index_public-log_29ELX","table-item":"index_table-item_3hXv4",tableItem:"index_table-item_3hXv4",title:"index_title_wjNqL","data-owner-item":"index_data-owner-item_105t0",dataOwnerItem:"index_data-owner-item_105t0","communicate-icon":"index_communicate-icon_1zAUr",communicateIcon:"index_communicate-icon_1zAUr",label:"index_label_sD2p2",value:"index_value_1_tLD","short-items":"index_short-items_cwb70",shortItems:"index_short-items_cwb70","width-box":"index_width-box_2-LtR",widthBox:"index_width-box_2-LtR","last-box":"index_last-box_bYGyy",lastBox:"index_last-box_bYGyy",pagination:"index_pagination_NcCIU","filter-options":"index_filter-options_1cYkG",filterOptions:"index_filter-options_1cYkG",sort:"index_sort_2UULX",list:"index_list_3UKS8",active:"index_active_1ttrk","page-wrapper":"index_page-wrapper_2JMgA",pageWrapper:"index_page-wrapper_2JMgA",disabled:"index_disabled_czDs_",page:"index_page_3VbA1",current:"index_current_3fip_"}},function(e,t,a){e.exports={error:"index_error_2RmSq","filter-options":"index_filter-options_1GpSp",filterOptions:"index_filter-options_1GpSp",sort:"index_sort_2GK1i",list:"index_list_3qw8N",active:"index_active_26OCf","page-wrapper":"index_page-wrapper_2g9kf",pageWrapper:"index_page-wrapper_2g9kf",disabled:"index_disabled_29znH",page:"index_page_3Ys3P",current:"index_current_tfLGF","table-list":"index_table-list_LXSP5",tableList:"index_table-list_LXSP5",highlighter:"index_highlighter_1vEi9",item:"index_item_20wst","main-content":"index_main-content_1o6gJ",mainContent:"index_main-content_1o6gJ",name:"index_name_33GY-",choicest:"index_choicest_oxSn_",text:"index_text_hm_WR",title:"index_title_32axh","meta-content":"index_meta-content_FRfnJ",metaContent:"index_meta-content_FRfnJ",line:"index_line_1I0a9",label:"index_label_T7yIm","project-code":"index_project-code_AS-s8",projectCode:"index_project-code_AS-s8","storage-medium":"index_storage-medium_12N6C",storageMedium:"index_storage-medium_12N6C","latest-partition":"index_latest-partition_3KnfG",latestPartition:"index_latest-partition_3KnfG",value:"index_value_3IMsK","data-owner":"index_data-owner_2CEiM",dataOwner:"index_data-owner_2CEiM","data-owner-item":"index_data-owner-item_1Ld6I",dataOwnerItem:"index_data-owner-item_1Ld6I","communicate-icon":"index_communicate-icon_1P3Kr",communicateIcon:"index_communicate-icon_1P3Kr","topic-name":"index_topic-name_TzOkn",topicName:"index_topic-name_TzOkn","last-updated":"index_last-updated_2ac_p",lastUpdated:"index_last-updated_2ac_p","last-partition":"index_last-partition_cFAjN",lastPartition:"index_last-partition_cFAjN","column-info":"index_column-info__IvG-",columnInfo:"index_column-info__IvG-",description:"index_description_8RBjD",extra:"index_extra_1ca2q",statistics:"index_statistics_3aveq","last-of-type":"index_last-of-type_1_aYL",lastOfType:"index_last-of-type_1_aYL",nps:"index_nps_1RTKQ",column:"index_column_3Fz-n","show-column-detail":"index_show-column-detail_24ils",showColumnDetail:"index_show-column-detail_24ils",pagination:"index_pagination_2qBXY"}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=l(a(82)),r=a(330),u=a(26),s=n(a(0)),o=a(19),d=l(a(552));t.ColumnAction=e=>{const{data:t,fetchList:a}=e,[l,n]=s.useState(!1),{t:c}=o.useTranslation();return s.default.createElement("div",{className:d.default.columnActions},s.default.createElement(i.default,{type:"link",loading:l,onClick:async()=>{n(!0);try{await r.tableMetaApi.cancelCare([t.tableUri]),n(!1),await a()}catch(e){n(!1),u.message.error(e.message)}}},c("common:取消关注")))}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=a(30),r=l(a(82)),u=l(a(361)),s=a(330),o=a(406),d=a(26),c=n(a(0)),m=a(19),f=l(a(282));t.BatchActions=e=>{const{successCallback:t,choicestIds:a,notChoicestIds:l,hiddenIds:n,showIds:p,setTransformVisible:_,transformIds:h}=e,{t:g}=m.useTranslation(),[E,b]=c.useState(!1),[v,y]=c.useState(!1),[T,N]=c.useState(!1),[S,C]=c.useState(!1),x=o.useAddChoicestResponse(),w="data-owner"===i.getQuery("tab"),I=c.useMemo(()=>w?(null==h?void 0:h.size)?c.default.createElement(r.default,{onClick:()=>_(!0)},g("category:批量转交"),"(",h.size,")"):c.default.createElement(r.default,{disabled:!0},g("category:批量转交")):null,[w,_,g,h]);return c.default.createElement("div",{className:f.default.actions},l.size?c.default.createElement(u.default,{title:g("message:确认将选中的表添加到精品表？"),onConfirm:async()=>{try{b(!0);const e=await s.tableMetaApi.addChoicest([...l]);x(e),e.successCount>0&&t()}catch(e){d.message.error(e.message)}b(!1)},okText:g("common:是"),cancelText:g("common:否")},c.default.createElement(r.default,{loading:E},g("category:批量加精"),"(",l.size,")")):c.default.createElement(r.default,{disabled:!0},g("category:批量加精")),a.size?c.default.createElement(u.default,{title:g("message:确认将选中的表从精品表中移除？"),onConfirm:async()=>{try{y(!0),await s.tableMetaApi.removeChoicest([...a]),t()}catch(e){d.message.error(e.message)}y(!1)},okText:g("common:是"),cancelText:g("common:否")},c.default.createElement(r.default,{loading:v},g("category:批量移除加精"),"(",a.size,")")):c.default.createElement(r.default,{disabled:!0},g("category:批量移除加精")),n.size?c.default.createElement(u.default,{title:g("message:确认将选中的表显示？"),onConfirm:async()=>{try{N(!0),await s.tableMetaApi.show([...n]),t(),d.message.success(g("message:显示成功, 该表将对用户开放搜索查看"))}catch(e){d.message.error(e.message)}N(!1)},okText:g("commom:是"),cancelText:g("common:否")},c.default.createElement(r.default,{loading:T},g("category:批量显示"),"(",n.size,")")):c.default.createElement(r.default,{disabled:!0},g("category:批量显示")),p.size?c.default.createElement(u.default,{title:g("message:确认将选中的表隐藏？"),onConfirm:async()=>{try{C(!0),await s.tableMetaApi.hidden([...p]),t(),d.message.success(g("message:隐藏成功, 用户将无法搜索查看该表信息"))}catch(e){d.message.error(e.message)}C(!1)},okText:g("common:是"),cancelText:g("common:否")},c.default.createElement(r.default,{loading:S},g("category:批量隐藏"),"(",p.size,")")):c.default.createElement(r.default,{disabled:!0},g("category:批量隐藏")),I)}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=l(a(2313)),r=a(30),u=l(a(82)),s=a(330),o=a(406),d=a(26),c=a(120),m=a(97),f=n(a(0)),p=a(19),_=l(a(282));t.ColumnAction=e=>{const{t:t}=p.useTranslation(),{from:a,data:l,fetchList:n,transformSingleId:h}=e,{tableId:g}=l,{dbName:E,tableName:b}=l,[v,y]=f.useState(!1),[T,N]=f.useState(!1),S=o.useAddChoicestResponse();return f.default.createElement("div",{className:_.default.columnActions},l.isChoicest?f.default.createElement(u.default,{type:"link",loading:v,onClick:async()=>{y(!0);try{await s.tableMetaApi.removeChoicest([g]),y(!1),await n()}catch(e){y(!1),d.message.error(e.message)}}},t("category:取消加精")):f.default.createElement(u.default,{type:"link",loading:v,onClick:async()=>{y(!0);try{const e=await s.tableMetaApi.addChoicest([g]);y(!1),1===e.failCount?S(e):await n()}catch(e){y(!1),d.message.error(e.message)}}},t("category:加精")),"data-owner"===a&&f.default.createElement(u.default,{type:"link",onClick:()=>h(l.tableId)},t("common:转交")),l.isHidden?f.default.createElement(u.default,{type:"link",loading:T,onClick:async()=>{N(!0);try{await s.tableMetaApi.show([g]),N(!1),await n(),d.message.success(t("message:显示成功, 该表将对用户开放搜索查看"))}catch(e){N(!1),d.message.error(e.message)}}},t("common:显示")):f.default.createElement(d.Tooltip,{title:f.default.createElement("div",null,t("message:由于鼓励数据共享，不建议隐藏库表，如有特殊情况请联系"),f.default.createElement(c.DChat,{user:{account:"sophialixiaofei",name:"李晓菲"}}))},f.default.createElement(u.default,{type:"link",loading:T,disabled:!0,onClick:async()=>{N(!0);try{await s.tableMetaApi.hidden([g]),N(!1),await n(),d.message.success(t("message:隐藏成功, 用户将无法搜索查看该表信息"))}catch(e){N(!1),d.message.error(e.message)}}},t("common:隐藏"))),"tech-owner"===a&&f.default.createElement(d.Dropdown,{placement:"bottomRight",overlay:f.default.createElement(d.Menu,null,f.default.createElement(d.Menu.Item,null,f.default.createElement(m.ExternalLink,{href:`${r.metaOrigin}/management?tableKeyword=${E}.${b}`},t("detail:去管理"))),f.default.createElement(d.Menu.Item,null,f.default.createElement(m.ExternalLink,{href:`${r.studioOrigin}/dt-table?operate=edit&tableName=${b}`},t("detail:修改DDL"))))},f.default.createElement("a",null,t("common:更多"),f.default.createElement(i.default,{style:{fontSize:13}}))))}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=l(a(220)),r=l(a(162)),u=l(a(163)),s=a(647),o=n(a(0)),d=a(19),c=l(a(282));t.OwnerFilter=e=>{const{t:t}=d.useTranslation(),{form:a}=e,[l,n]=o.useState(void 0),{dbList:m}=s.useDbOptions(l);return o.default.createElement(i.default,{className:c.default.filter,layout:"inline",form:a,onFinish:e.onFinish},o.default.createElement(i.default.Item,{label:t("detail:库名"),name:"dbName"},o.default.createElement(u.default,{autoFocus:!0,showSearch:!0,onSearch:e=>n(e),placeholder:t("common:请选择"),allowClear:!0,onChange:a.submit},m.map(e=>o.default.createElement(u.default.Option,{key:e.name,value:e.name},e.name)))),o.default.createElement(i.default.Item,{label:t("category:表名"),name:"tableName"},o.default.createElement(r.default,{placeholder:t("message:请输入"),allowClear:!0,onPressEnter:a.submit,onChange:e=>{e.target.value||a.submit()}})))}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";(function(e){var l,n,i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=i(a(43)),u=a(831),s=document.getElementById("root");r.default.render(u.APP(),s),null===(l=e.hot)||void 0===l||l.accept(["./src/app.tsx"],()=>{const e=a(831).APP;r.default.render(e(),s)}),null===(n=e.hot)||void 0===n||n.accept()}).call(this,a(396)(e))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e){e.exports=JSON.parse('{"规范管理后台":"Admin","数据专辑":"Album","test":"test"}')},function(e){e.exports=JSON.parse('{"类目":" category","作用项目":"Bound project","编辑作用项目":"Edit function project","编辑规范管理员":"Edit specification Administrators","项目":"Project","已绑定":"Already bound ","最后一位":"last","第一位":"first","第二位":"second","第三位":"third","第四位":"fourth","第五位":"fifth","快速添加":"Quick add","快速添加精品表":"Quick add choicest table","搜索添加":"Add","本地导入":"Import","批量移出类目":"Batch remove category","导入共条，成功条":"A total of {{total}} items were imported，{{success}} items were successful","添加时表名全匹配，表名之间使用英文分号;隔开":"The table names are fully matched when adding, which are separated with  English semicolons “；”","已添加":"Added","显示已添加":"With added","未添加":"Not added","表名":"Table name","快速添加至":"Quick add to ","test":"test","请先选择表":"Please select the table first","批量取消关注":"Batch unfollowed","批量加精":"Batch choicest table added","批量移除加精":"Batch remove from choicest table","批量显示":"Batch display","批量隐藏":"Batch hide","批量转交":"Batch Transform","取消加精":"Cancel choicest table added","加精":"choicest","修改成功":"Modified successfully","表最近更新时间":"Last updated time","加精时间":"Time added","加精操作人":"Operator","批量移出精品":"Batch remove choicest","分享":"Share","回复":"Reply","专辑中至少保留一个类目存在":"At least one category exists in the album","请先完成编辑，新增等操作":"Please finish editing, adding, etc","新建分组":"New group","分类管理":"Classification management","查看全部":"view all","类目最大为3层，可将表加到对应类目下":"The maximum category is 3 levels, and the table can be added under the corresponding category","该分组下包含":"This group contains","张表":"tables","确定删除该分组吗？":"Are you sure to delete this group？","删除分组后表将移出该专辑，且类目及子目录不可恢复，请谨慎操作。":"After deleting the group, the table will be moved out of the album, and the categories and subdirectories cannot be restored. Please operate with caution.","未采集":"Not collected","已采集":"Collected","前往采集":"Go to collection"}')},function(e){e.exports=JSON.parse('{"描述":"Description","操作":"Action","类型":"Type","发布":"Release","发表":"Submit","关注":"Follow","已关注":"Followed","关闭":"Close","提示":"Tips","标签":"Tag","天":" Days","重置":"Reset","导出":"Export","导出全部":"Export all","查看":"View","取消":"Cancel","确定":"Submit","删除":"Delete","复制":"Copy","移出":"Remove","分享":"share","统计值":"statistics","是":"Yes","否":"No","查看更多":"Show more","数据地图":"Data Map","国内":"China","美东":"Us","中文名":"China name","项目":"Project","搜索":"Search","状态":"Status","请选择":"Please choose","共条":"Total {{total}} items","创建时间":"Created time","我的权限申请":"Permission request","我的权限审批":"Permission approval","我的数据":"My Data","使用文档":"Introduction","我拥有的数据":"Owned data","我拥有的表":"Owned table","我创建的专辑(敬请期待)":"Created album(stay tuned)","我关注的数据":"Followed data","我关注的表":"Followed table","我关注的专辑":"Followed album","我最近浏览的表":"Visited table","联系我们":"Contact us","首 页":"Home","变更通知":"Change notice","找数据":"Search","离线表数":"Offline table","实时表数":"Stream table","指标数":"Index","项目数":"Project","特征数":"Feature","报表数":"Report","查看全部搜索结果":"Browse all search results","搜数据、找指标，一站式搜索平台":"One-stop search platform with searching data and finding index","常见问题":"FAQ","元数据专区":"Metadata Zone","开放API":"Open API","帮助手册":"Help","2020滴滴数据平台 数据地图D-chat群: ":"D-chat group of 2020-Didi data platform and data map: ","不能为空":"Can not be empty","匿名":"Anonymity","发表评论":"Submit","管理员":"Administrators","序号":"Number","旧版详情":"Old version","待开发":"Wait developing","未设置":"Not set","永久":"Permanent","搜索分区名":"Partition name ","名称":"Name","下游数量":"Downstream number","上游数量":"Upstream number","查看血缘":"Blood relationship","未开通":"Nonactivated","显示":"Display","评价":"Evaluation","俄罗斯":"Russia","保存":"Save","取消关注":"Unsubscribe","提交":"Submit","全部":"All","Public日志":"Public log","指标":"Index","报表":"Report","模板":"Template","Hive表字段":"Hive table column","血缘":"Blood","个字段":"columns","隐藏":"hide","历史版本":"Historic version","版本":"Version","提交者":"Submitter","更新":"Update","血缘工具":"Blood tools","新建专辑":"New album","展开":"Show more","收起":"Return","编辑专辑":"Edit album","专辑名称":"Name","专辑描述":"Description","专辑封面":"Cover","业务标签":"Label","创建成功":"Created successfully","我拥有的专辑":"Owned album","更多":"more","浏览":"Browse","更新于":"Updated","血缘信息":"Blood info","预览":"Preview","转交":"Transform","是否开放":"Is Public","管理工具":"Management tool","搜索专辑":"Search Album"}')},function(e){e.exports=JSON.parse('{"基础信息":"Basic info","明细信息":"Detail","字段信息":"Column","分区信息":"Partition info","变更历史":"Change history","产出信息":"Output info","血缘信息":"Blood info","30天使用":"30 days use","直接下游":"Direct downstream","编辑字段信息":"Edit field info","建表语句":"DDL","查询语句":"DQL","申请权限":"Apply permission","加入专辑":"Join album","给个评价":"Comment","已下线":"Offline","下线中":"Offline","沟通顺畅":"Good","热度":"Hot","枚举值":"Enum value","主键":"Primary key","安全等级":"Security Level","字段名":"Column Name","序号":"Position","资产负责人":"Asset owner","业务版块":"Business segment","所属项目":"View project","更新标签":"Update label","请输入新标签名称":"Please enter a new label name","推荐标签":"Recommend label","规范管理员":"Admins :","数据类目":"Data category","精品表":"Choicest table","环境类型":"Environment type","产出任务":"Output task","tag详情":"tag detail","表类型":"Table type","最早分区":"Earliest partition","最晚分区":"Latest partition","数据层次":"Data hierarchy","增量字段":"Increment column","中文名":"China Name","英文名":"English Name","缩写":"Abbr","近30天常用关联":"Commonly used in the last 30 days","关联表":"Table","关联条件":"Condition","关联次数":"Times","模板SQL":"Template SQL","test":"test","前往提取工具":"The aging of the number of partition records is T+1. Please obtain the latest number of partition records by inquiring, and immediately <1> go to the extraction tool </1> to query","已绑定类目":"Bound category","文件数":"File number","记录数":"Record number","技术负责人":"Technology owner","来源类型":"Source type","关注时间":"Follow time","最近修改时间":"Last modified time","表描述":"Table description","关注用户数":"Followed users","30天访问天数":"Visit days in 30 days","库名":"Library name","93天访问天数":"Visit days in 93 days","最后修改时间":"Last modified time","直接下游表数":"Direct downstream","浏览时间":"Browse time","含义":"Meaning","是否展示注释":"Display comment?","查看联系人":"View contacts","拉取周期":"Pull cycle","数据层级":"Data hierarchy","责任人":"Owner","旧版搜索":"Old search","去管理":"Manage","修改DDL":"Modify DDL","返回首页":"Back homepage","总行数":"Total number of rows","搜索字段名称/字段描述":"Search column name/description","去查询":"Query","直接上游数":"Direct upstream number","全部上游数":"Total upstream number","直接下游数":"Direct downstream number","全部下游数":"Total downstream number","最近更新时间":"Latest update time","字段血缘":"Column blood","表级血缘":"Table blood","节点名":"Node name","负责人":"Owner","节点类型":"Node type","生产脚本":"Production script","数据预览":"Data preview","使用记录":"Usage record","使用说明":"Introduction","使用人":"User","账号":"Account","使用次数":"Usage count","最近30天使用详情":"Use details in the last 30 days","SQL实例":"SQL instance","搜索使用人/账号":"Search user/account","查看SQL实例":"View SQL instance","内容":"Content","粒度":"Granularity","操作时间":"Operating time","操作人":"Operator","创建表":"Create table","列表查看":"List view","使用统计":"Usage statistics","频繁关联":"Frequent association","最近30天字段使用明细":"Column details in last 30 days","最近30天使用次数":"Used in last 30 days","Select次数":"Select times","Where次数":"Where times","Group by次数":"Group by times","Join次数":"Join times","搜索字段名":"Search column name","知识问答":"Quiz","评价记录":"Evaluation record","编辑":"Edit","预览":"Preview","查看历史版本":"View historical version","富文本":"Rich text","分区记录明细":"Partition record details","分区名":"Partition name","存储量":"Storage","提取工具":"Extraction tool","查询":"Query","选择类型":"Choose type","选择时间":"Choose time","调度任务执行情况":"Scheduled task execution","最多展示":"It most shows ","最近30个批次执行情况，更多批次信息请点击任务查看":" \'s last 30 batches of execution status. Please click the task to view for more batch info","执行时长/秒":"Execution time/s","结束时间":"End time","开始时间":"Start time","任务批次号":"Task batch number","生产脚本解析自集群 Hive SQL 运行日志，只覆盖 SQL 类生产过程，只取更新时间前最近一次执行的SQL。":"The production script is parsed from the cluster Hive SQL run log, which only covers the SQL production process and takes the most recently executed SQL before the update time.","图例":"Graph","UV为使用人去重":"UV is the number after deduplication","最近查询模板":"Recent query template","搜索模板名称":"Search template name","查看模板SQL":"View template SQL","模板名称":"Template name","模板ID":"Template ID","近15天使用次数":"Usage times within 15 days","搜索表":"Search table","模板SQL含有变量，如需使用，请到":"The template SQL contains variables. if you need to use it, please go to","查询，需申请表权限，并替换变量为真实值":"to query. You need to apply for table permission and replace variables with real values","业务属性":"Business attributes","数据域":"Data field","您是写入任务owner":"You are the owner of the write task","您是写入任务owner, 点击查看任务":"You are the owner of the write task, click to view the task","抽取周期":"Extraction cycle","编辑表结构":"Edit table structure","表上线":"Table online","表下线":"Table offline","共个分区":"Total {{count}} partitions","系统变更":"System changes","全部专辑":"All albums","最新的":"New","最热的":"Popular","创建时间":"Created time","添加成功":"Added successfully","表 owner":"Table owner","已点赞":"Liked","点赞":"Like","专辑基础信息":"Basic info","总表数":"Tables","专辑创建人":"Album creator","专辑管理员":"Album manager","移出类目":"Remove category","存储介质":"Storage medium","引入时间":"Introduction time","数据格式":"Data Format","topic名称":"topic name","关联推荐":"Related recommendation","已加入的专辑":"Added album","基于公司信息安全规约，Hive表字段按照C1~4安全等级划分，表安全等级取字段最高等级。":"Based on the company\'s information security protocol, the Hive table fields are classified according to the C1~4 security level, and the table security level takes the highest level of the field.","字段类型":"Type","字段描述":"Description","对应字段":"Correspond column","计算方式":"Calculation","聚合方式":"Aggregation method","实时-测试表":"Realtime-test table","实时-生产表":"Realtime-production table","流式报表":"Streaming report","关联Topic":"Related Topic","源字段":"Source field","维度/指标":"Dimension/Metric","图形查看":"Graph view","业务线":"Business Line","主库用户名":"Main library user name","从库用户名":"Slave user name","国家":"Country","分表策略":"Sub-table strategy","表详情":"Table details","节点列表详情":"Node list details","MySQL表-生产表":"MySQL-production table","MySQL表-测试表":"MySQL-test table","SQL查询":"SQL query","直接上游":"Direct upstream","间接下游":"Indirect downstream","全部上游":"All upstream","全部下游":"All downstream","HDFS路径":"HDFS Path","数据统计":"Statistics","描述":"describe","类型":"type","Null值数":"Null count","Null值占比":"Null ratio ","历史分析":"Analysis","保存为图片":"Save","图表查看":"Chart view","下载":"Download","当前分区":"current partition","的统计值":" statistical value","业务负责人":"Business owner","埋点状态":"Omega Status","应用":"Apps","应用组":"App Group","埋点等级":"Omega Level","报表ID":"Report ID","更新时间":"update Time","子报表":"Subreport","数易项目":"Digital project","申请报表权限":"Application report permission","报表状态":"Report status","报表详情":"Statement info"}')},function(e){e.exports=JSON.parse('{"存储信息":"Storage info","存储量(逻辑)":"Storage(Logic)","生命周期":"Life cycle","分区个数":"Partition number","表创建时间":"Table created time","离线-测试表":"Offline-Test table","离线-生产表":"Offline-Production table","以下是分区字段信息":"The following is the partition column info","DDL最后变更时间":"DDL last change time","最后数据变更时间":"Last change time","最后数据查看时间":"Last viewing time","业务信息":"Business info","业务负责人":"Business owner","权限审批人":"Approver","我的权限":"Permission","权限信息":"Permission info","有权限":"Have permission","无权限":"No permission","去验证权限":"Verify permission","内表":"Managed table","外表":"External table","索引表":"Index table","视图表":"View table","ETL层(ODS)":"ETL layer(ODS)","统计计算层(DW|DWM)":"Statistical calculation layer(DW|DWM)","数据主题层(DM)":"Data subject layer(DM)","外部数据源(mysql原始表或原始日志)":"Outer data source(mysql-origin table or log)","明细数据层(DWD|DWV)":"Detail data layer(DWD|DWV)","应用层(APP)":"Application layer(APP)","维度层(DIM)":"Dimension layer(DIM)","分区表":"Partition table","test":"test"}')},function(e){e.exports=JSON.parse('{"离线表数":"offline tables","实时表数":"stream tables","指标数":"indicators","项目数":"projects","特征数":"features","报表数":"reports","热门精品表":"Top choicest table","2020滴滴数据平台 数据地图D-chat群":"D-chat group of 2020-Didi data platform and data map","热门专辑":"Top album","test":"test"}')},function(e){e.exports=JSON.parse('{"复制成功":"Copy success","抱歉，服务端接口出错了":"Sorry, api error","呃..... 浏览器兼容有问题":"Uh... There is a problem with browser compatibility","请使用Chrome浏览器(谷歌浏览器) 版本需要在60及以上":"Please use Google Chrome version must be 60 and above","确认要删除这条信息吗？":"Are you sure you want to delete this info?","最多只能连续添加3项":"You can only add 3 items in a row","请输入":"Please input","请输入搜索":"Please input search","请输入名字添加":"Please input search","确认移出类目吗？":"Are you sure to remove the category?","确认是否把表移出类目？":"Are you sure to remove the table from category?","确认将表移出精品表？":"Are you sure to remove the table from choicest table?","确定要删除该标签吗？":"Are you sure you want to delete this label？","删除信息将连同关联的内容一起删除，是否确认？":"The deleted info will be deleted along with the associated content. Are you sure?","负责表数据内容的产出、数据生命周期等管理工作":"Responsible for the management of the output of the table data content and the data life cycle","原数据负责人，负责数据口径的解释、元数据维护工作":"Original data owner is responsible for the interpretation of the data caliber and the maintenance of metadata","请先选择左侧类目":"Please select the left category first","分享链路复制成功":"Sharing link copy successfully","test":"test","请输入表名，回车搜索":"Please enter the table name, press enter to search","系统默认每次返回前10,000条结果，您可以搜索分区名来查看具体分区信息":"The system returns the first 10,000 results each time by default. You can search for the partition name to view the specific partition info","默认按最后更新时间排序":"Sort by last update time by default","默认按创建时间排序":"Sort by created time by default","确认取消关注选中的表？":"Are you sure to unfollow the selected table?","确认将选中的表添加到精品表":"Are you sure to add the selected table to the choicest table?","确认将选中的表从精品表中移除？":"Are you sure to remove the selected table from the choicest table?","确认将选中的表显示":"Confirm that the selected table is displayed?","显示成功, 该表将对用户开放搜索查看":"Displayed successfully, the table will be open to users","隐藏成功, 用户将无法搜索查看该表信息":"If the hiding is successful, the user will not be able to search and view the table info","由于鼓励数据共享，不建议隐藏库表，如有特殊情况请联系":"Since data sharing is encouraged, it is not recommended to hide the library table. If you have special circumstances, please contact","业务负责人拥有数据表口径的解释、表描述、字段描述等业务元数据信息的维护权限":"Business owner has the authority to maintain business metadata info such as the interpretation of data table, table description and column description","资产负责人拥有数据表生命周期修改、数据表DDL维护以及数据资产管理等权限":"Asset owner has the authority to modify life cycle of data table, maintain DDL and manage data assets","请先选择星标":"Please select star first","请输入内容":"Please enter content","添加wiki地址":"Add wiki address","添加枚举值":"Add enum value","新建枚举值将会放在最后一行":"The new enum value will be placed on the last line","请先输入枚举值":"Please enter the enum value first","枚举值不能重复":"Enum values cannot be repeated","鼠标点击定位到代码区域，command+f，搜索关键词":"Mouse click to locate the code area, search keywords by\'command + F\'","业务负责人负责编辑表的元数据信息，对业务属性、数据域、业务场景有新增需求，":"Business owner is responsible for editing the metadata info  and has new requirements for business attributes, data fields, and business scenarios,","字段安全等级修改T+1生效，其他内容修改立即修":"Column security level modification T+1 takes effect, and other content modifications are immediately modified","抱歉，您访问的页面找不到了。":"Sorry, the page you visited is no longer found.","新版专辑建设中":"New album under construction","此项目未开通实时能力":"Real-time capability is not available for this project","点击查看tag详情":"Click to view tag details","点击分享复制链接":"Click copy link to share","请先选择字段":"Please select the column first","编辑表元数据信息":"Edit table metadata info","根据安全要求，对没有权限的表，数据样例仅展示数仓层级为ODS、DWD、DIM、DWV的表中安全级别为C1/C2的数据列。可请求表的负责人合理设置hive表的数仓层级以及字段的安全级别，以便预览数据。预览数据会针对数字做千分位处理。":"According to the security requirements, the data sample only shows the data columns with security level C1/C2 in the tables with data warehouse levels of ODS, DWD, DIM, and DWV for tables without permission. The owner can be requested to reasonably set the data warehouse level and column security level of the hive table in order to preview the data. The preview data will be processed for thousands of numbers.","数据表需要满足：1.非分区字段需要80%以上有描述；2.表说明需要有不少于36个字符的内容":"The data table needs to meet: 1. More than 80% of the non-partitioned columns need to be described; 2. The table description needs to have no less than 36 characters.","切换编辑器会清空当前的内容，是否继续？":"Switching the editor will clear the current content. Do you want to continue?","最近30天被访问TOP最热分区":"The popular TOP partition in the last 30 days","分区记录数时效为T+1，最新分区记录数请通过查询获取，立即前往":"The time limit for the number of partition records is T+1, and the latest number of partition records can be obtained through query.","请输入直接上游节点名称":"Please enter the direct upstream node","请输入直接下游节点名称":"Please enter the direct downstream node","可输入专辑名称/描述/专辑内表名进行搜索":"Please input album name, description or table name to search","搜索表加入专辑":"Search table to add album","输入表名搜索":"Enter table name to search","确定取消关注该专辑吗？":"Are you sure to unfollow this album?","取消关注后，专辑会从页面中移除。":"After unfollowing, the album will be removed from the page.","取消成功":"Cancel success","取消关注成功":"Unfollow successfully","确定删除该专辑吗？":"Are you sure to delete this album?","删除专辑后不可恢复，你还要删除吗？":"After deleting the album, it cannot be restored. Do you want to delete it?","删除成功":"Deleted successfully","编辑专辑中的表":"Edit the table in the album","给表添加我的备注":"Add my notes to the table","关注成功":"Followed successfully","您已成功添加":"You have addedsuccessfully","张表":" tables","失败的表请确认表名正确":"Please confirm that the failed table name is correct","输入表名":"Input table name","点赞成功":"Like success","取消点赞成功":"Cancel the like successfully","添加专辑管理员":"Add album manager","选择新的分组":"Select new group","选择分组":"Select group","选择分组不能为空":"Selection group cannot be empty","加入专辑不能为空":"Add album cannot be empty","添加":"Add","移动至":"Move to","关注原因":"Reason for concern","请填写关注原因":"Please fill in the reason for attention","非必填":"Not required","包含指标个数":"","加入专辑备注":"Contains the number of indicators","未开放":"Not open","该表未开放申请权限，如需使用可点击":"The form is not open to apply for permission, if you need to use it, click","请求开放":"request open","告知表负责人":"inform the person in charge of the table","修改备注":"Edit notes","加入时间":"Join time","确认从专辑中移除该表？":"Are you sure to remove the table from the album?","移除成功":"Removed successfully","确认":"Confirm","移除":"Remove","本地批量导入":"Local batch import","确定删除这条评论吗？":"Are you sure to delete this comment?","评论成功":"评论成功","表关系图":"Table diagram","专辑内容":"Album content","专辑说明":"Album description","支持格式：png、jpg，大小不超过2MB":"Support format: png and jpg(the size does not exceed 2MB)","资产负责人默认为表创建人，有编辑、删除等权限":"Asset owner is the creator of table by default with editing and deleting permissions","选择加入的专辑":"Opt-in album","加入专辑失败":"Failed to join album","加入专辑成功":"Successfully joined the album","您还没有关注任何专辑，去专辑列表页看看吧":"You haven’t followed any albums, go to the album list page to check it out","没有更多数据了":"No more data","前往专辑列表页":"Go to the album list page","您拥有的专辑列表为空， 赶紧新建吧":"The album list you own is empty, please create a new one","请先输入需要检测血缘的对象名称，如表名、指标、模板等":"Please enter the name of the object to be tested, such as table name, indicator, template, etc.","请输入表名、指标、报表、模板":"Please enter the table name, index, report, template","检测结果系统默认显示最短血缘链路，详情可查看表血缘信息":"The test result shows the shortest blood link by default, and you can check the blood link info for details","系统检测无血缘关系":"The system detects no blood relationship","检测血缘":"Blood ties","成功加精":"{{total}} tables have been added successfully with the following incompatible tables added unsuccessful","基于数据上下游血缘得出":"Based on data upstream and downstream blood relationship","数据地图设置表关联推荐后，会在表详情页有关联推荐的置顶通知。":"After data map setting table Association recommendation, there will be a top notification on the table details page.","请点击下载模板，按照模板格式填写库名和表名，模板的首行不要删除。注：仅表的资产负责人和表所在项目的管理员有关联推荐的操作权限。上传文件最多不超过1000行，且文件大小不超过5MB":"Please click to download the template, fill in the database name and table name according to the template format, and do not delete the first line of the template. Note: only the asset owner of the table and the administrator of the project where the table is located have associated recommended operation permissions. The maximum number of uploaded files is 1000 lines and the file size is no more than 5MB","(变更通知发送成功后，会在对应Hive表详情页置顶显示通知公告一个月，到期则不显示。)":"(after the change notice is sent successfully, the notice notice will be displayed at the top of the corresponding hive table details page for one month, and it will not be displayed when it expires. )","基于数据信息安全考虑,C4级别字段暂不支持查看统计信。统计值的计算规则详情可":"Based on data information security considerations, C4 level fields do not support viewing statistical information. For details of calculation rules of statistics","查看wiki":"please refer to wiki","指业务含义上的主键，可在数梦可视化建表时指定字段为主键。":"It refers to the primary key in the meaning of business. You can specify the field as the primary key when you create a table visually.","旧版数据地图服务于2020-11-30正式下线，所有旧版地址会自动跳转至新版数据地图，且不可返回旧版，请知悉。":"The old version of data map service will be officially offline on November 30, 2020. All old version addresses will automatically jump to the new version of data map, and cannot return to the old version. Please note.","如有问题欢迎加入":"If you have any questions, please join us"}')},function(e){e.exports=JSON.parse('{"变更通知名称":"Change notice","变更节点名":"Change node name","变更类型":"Change type","发起人":"Sponsor","发送时间":"Sending time","预计操作时间":"Estimated time","调整产出时间":"Adjust output time","通知详情":"Notice details","只看自己的":"Look at your own","全部":"whole","变更通知列表":"Change notice list","类型":"Type","人数":"people","通知方式":"Notification method","发起变更通知":"Initiate change notice","请输入db.table的格式":"Please enter db.table Format of","通知列表":"Notification list","补充邮箱":"Supplementary mailbox","查看":"see","邮件":"Email","D-chat":"D-chat","通知名称":"Notice name","选择变更节点":"Change node","为防止表被随意发起变更通知，故控制变更节点下拉选择范围：本人是该表的资产负责人，或者是表所在Hive库的管理员。":"In order to prevent the table from being arbitrarily initiated change notifications, control the change node to drop down the selection range: I am the asset owner of the table or the administrator of the Hive library where the table is located.","变更时间":"Change time","变更详情":"Change details","取消":"cancel","发起通知":"Initiate notice","无":"null","负责人":"person in charge","直接下游节点名":"Direct node name","描述":"describe","节点类型":"Node type","直接下游节点负责人":"directDownStreamOwners","直接下游负责人":"directDownStreamOwners","间接下游节点负责人":"indirectDownStreamOwners","有权限使用当前节点的人":"hasAuthUsers","有权使用当前节点的人":"hasAuthUsers","当前节点关注的人":"focusUsers","发送人":"Sender","部门":"userDept","详情":"details","请输入多个邮箱前缀（个人邮箱和邮件组都可以），应以逗号隔开":"Please enter multiple mailbox prefixes (both personal and group) separated by commas"}')},function(e){e.exports=JSON.parse('{"用户NPS指数":"User NPS","已有人评价":"{{count}} comments","还行":"Not bad","推荐":"Recommend","力荐":"Very good","较差":"Bad","很差":"Very bad","test":"test"}')},function(e){e.exports=JSON.parse('{"实时表数":"Stream table","生产表数":"Production table","精品表数":"Choicest table\'","开发表数":"Development table","生产账号":"Production account","项目简介":"Project introduction","开发库":"Development library","生产库":"Production library","实时库":"Stream library","所属租户":"Tenant belonged","生产":"Production","开发":"Development"}')},function(e){e.exports=JSON.parse('{"Hive表":"Hive table","业务负责人":"Business owner","最后更新时间":"Latest update time","最晚分区":"Latest partition","表说明":"Table description","综合排序":"Best match","更新时间":"Updated time","访问次数":"Visits","价值排名":"Value rank","精品表":"choicest table","我浏览过的":"browsed","我有权限的":"permitted","我近期常用的":"recently used","元数据描述完整":"metadata description totally","最近一个月有更新":"updated in last month","含开发表":"development table included","含DQC配置":"DQC config included","次使用":" times use","人已关注":" followers","用户NPS":"User NPS","特征、日志等数据搜索请访问旧版":"Please visit old version for data search such as feature and log","筛选条件":"Filter condition","字段说明":"Column info","实时表":"Stream table","MySQL表":"MySQL table","采集状态":"Collection status","找到一个项目：":"Find a project : ","Public日志":"Public log","指标":"Metric","埋点":"Omega","特征":"Features","报表":"Report form","我收藏的":"Collection","我负责的":"conscientious"}')},function(e){e.exports=JSON.parse('{"修改库表关联推荐":"Edit table recommend","点击上传":"Click upload","序号":"Serial number","库名":"Library name","表名":"Table name","关联Hive库名":"Associated hive name","关联Hive表名":"Associated hive table name","推荐原因":"Reasons for recommendation","是否有效":"Is it effective","修改表关联推荐":"Edit table recommend","Hive表管理工具":"Hive table tool","修改表的关联推荐":"Modifying the association recommendation of a table ","选择文件":"Select file","血缘检测工具":"Blood testing tools","确认批量修改选中":"Confirm batch modify selection","按照模板格式填写库名和表名，模板的首行不要删除。注：仅表的资产负责人和表所在项目的管理员有关联推荐的操作权限。上传文件最多不超过1000行，且文件大小不超过5MB":"fill in the database name and table name according to the template format, and do not delete the first line of the template. Note: only the asset owner of the table and the administrator of the project where the table is located have associated recommended operation permissions. The maximum number of uploaded files is 1000 lines and the file size is no more than 5MB","上传csv格式文件":"Upload file in CSV format","请点击":"Please click","模板下载":"Download template","下载模版":"Download template","张表的关联推荐吗？":"recommend a table?","共上传":"{{ count }} items Uploaded","有效项":"Valid {{ count }} items","无效项":"Invalid {{ count }} items","该表已在数据地图设置下线,如需对表进一步下线删除请前往资产管理平台进行操作。":"The table has been offline in the data map settings. If you need to delete the table further offline, please go to the asset management platform to operate.","数据地图设置表下线后，会在表详情页有“下线中”的标识，但不会对表进行任何下线删除操作，如需对表进行下线删除请前往资产平台进行操作。":"After the data map setting table is offline, there will be an offline mark on the table details page, but no offline deletion operation will be performed on the table. If you need to delete the table offline, please go to the asset platform to operate.","操作记录":"Operation record"}')},function(e){e.exports=JSON.parse('{"生产表明细":"Production detail","开发表明细":"Development detail","实时表明细":"Stream detail","我是资产负责人":"Asset owner","我是业务负责人":"Business owner","Hive表":"Hive table","实时表":"Stream table","转交成功":"Successfully transferred","新业务负责人":"New owner","批量转交":"Bulk forwarding"}')},function(e,t,a){"use strict";var l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=a(30),r=a(176),u=a(26),s=a(97),o=a(1686),d=a(1702),c=a(1722),m=a(1737),f=a(2006),p=a(2007),_=a(2008),h=a(2017),g=a(2018),E=a(2019),b=a(2021),v=a(2023),y=a(2034),T=a(2175),N=a(2187),S=a(2197),C=a(2221),x=a(2224),w=a(2238),I=a(1012),L=a(2248),O=a(2252),P=a(2292),M=a(2297),k=a(2299),D=a(2301),A=a(2303),j=a(2307),F=a(2311),R=a(2323),H=a(2326),U=l(a(0)),B=a(19),q=a(117),z=a(840),Q=n(a(2328));t.Router=e=>{z.Analytics.sendPageView();const t=q.useLocation(),a=U.useRef(null),{warning:l}=r.Modal,{t:n}=B.useTranslation();U.useLayoutEffect(()=>{a.current=t},[t]);let V=10;const G={title:"旧版数据地图已下线",style:{marginTop:150},content:U.default.createElement("div",null,U.default.createElement("p",{style:{color:"red"}},n("message:旧版数据地图服务于2020-11-30正式下线，所有旧版地址会自动跳转至新版数据地图，且不可返回旧版，请知悉。")),U.default.createElement("p",null,n("message:如有问题欢迎加入"),U.default.createElement(s.ExternalLink,{href:"https://im.xiaojukeji.com/channel?uid=4176&token=0938b2256f9db8cc5726333fb3fb3a23&id=233514078071707136"},"Dchat数据地图用户群",U.default.createElement(u.IconFont,{type:"icon-d-chat"})))),okText:U.default.createElement(U.default.Fragment,null,`知道了(${V}s)`)};return U.useLayoutEffect(()=>{"offline"==i.getQuery("from")&&(()=>{const e=l(G),t=setInterval(()=>{V-=1,e.update({style:{marginTop:150},content:U.default.createElement("div",null,U.default.createElement("p",{style:{color:"red"}},n("message:旧版数据地图服务于2020-11-30正式下线，所有旧版地址会自动跳转至新版数据地图，且不可返回旧版，请知悉。")),U.default.createElement("p",null,n("message:如有问题欢迎加入"),U.default.createElement(s.ExternalLink,{href:"https://im.xiaojukeji.com/channel?uid=4176&token=0938b2256f9db8cc5726333fb3fb3a23&id=233514078071707136"},"Dchat数据地图用户群",U.default.createElement(u.IconFont,{type:"icon-d-chat"})))),okText:U.default.createElement(U.default.Fragment,null,`知道了(${V}s)`)})},1e3);setTimeout(()=>{clearInterval(t),i.updateQuery({from:null}),e.destroy(),r.Modal.destroyAll()},1e3*V)})()},[]),U.default.createElement(U.default.Fragment,null,U.default.createElement(o.Header,null),U.default.createElement(q.Switch,{location:e.location},U.default.createElement(q.Route,{exact:!0,path:"/",component:x.HomePage}),U.default.createElement(q.Route,{exact:!0,path:"/search",component:O.DataSearchPage}),U.default.createElement(q.Route,{exact:!0,path:"/detail",render:()=>U.default.createElement(y.DetailPage,{prevLocation:a.current})}),U.default.createElement(q.Route,{exact:!0,path:"/detail/datae",render:()=>U.default.createElement(v.DataeDetailPage,{prevLocation:a.current})}),U.default.createElement(q.Route,{exact:!0,path:"/detail/stream",render:()=>U.default.createElement(S.StreamDetailPage,{prevLocation:a.current})}),U.default.createElement(q.Route,{exact:!0,path:"/detail/mysql",render:()=>U.default.createElement(N.MysqlDetailPage,{prevLocation:a.current})}),U.default.createElement(q.Route,{exact:!0,path:"/detail/log",render:()=>U.default.createElement(T.PublicLogDetailPage,{prevLocation:a.current})}),U.default.createElement(q.Route,{exact:!0,path:"/detail/meta/update",component:A.UpdateMetaPage}),U.default.createElement(q.Route,{exact:!0,path:"/project/detail",component:L.ProjectDetailPage}),U.default.createElement(q.Route,{exact:!0,path:"/admin",component:d.AdminPage}),U.default.createElement(q.Route,{exact:!0,path:"/compatible",component:b.Compatible}),U.default.createElement(q.Route,{exact:!0,path:"/album",component:c.Album}),U.default.createElement(q.Route,{exact:!0,path:"/album/detail",component:m.AlbumDetail}),U.default.createElement(q.Redirect,{from:"/lineage/tool",to:"/tool/lineage"}),U.default.createElement(q.Route,{path:"/notify"},U.default.createElement("div",{className:Q.default.router},U.default.createElement(E.ChangeSidebar,{pathname:e.location.pathname}),U.default.createElement("div",{className:Q.default.routerContent},U.default.createElement(q.Switch,{location:e.location},U.default.createElement(q.Route,{exact:!0,path:"/notify/index",component:g.NotifyListIndex}),U.default.createElement(q.Route,{exact:!0,path:"/notify/detail",component:h.NotifyListDetail}),U.default.createElement(q.Route,{exact:!0,path:"/notify/initiate",component:_.NotifyInitiate}),U.default.createElement(q.Route,{component:I.NotFound}))))),U.default.createElement(q.Route,{path:"/tool"},U.default.createElement("div",{className:Q.default.router},U.default.createElement(D.ToolSidebar,{pathname:e.location.pathname}),U.default.createElement("div",{className:Q.default.routerContent},U.default.createElement(q.Switch,{location:e.location},U.default.createElement(q.Route,{exact:!0,path:"/tool/lineage",component:w.LineageTool}),U.default.createElement(q.Route,{exact:!0,path:"/tool/hive/changereminder",component:M.ToolHiveChangeReminder}),U.default.createElement(q.Route,{exact:!0,path:"/tool/hive/off-or-on",component:k.ToolHiveOnOrOff}),U.default.createElement(q.Route,{exact:!0,path:"/tool/hive/change-history",component:P.ChangeHistory}),U.default.createElement(q.Route,{component:I.NotFound}))))),U.default.createElement(q.Route,{exact:!0,path:"/editor",component:C.EditDagrePage}),U.default.createElement(q.Route,{path:"/user"},U.default.createElement("div",{className:Q.default.router},U.default.createElement(H.UserSidebar,{pathname:e.location.pathname}),U.default.createElement("div",{className:Q.default.routerContent},U.default.createElement(q.Switch,{location:e.location},U.default.createElement(q.Route,{exact:!0,path:"/user/table/owner",component:F.UserOwnerPage}),U.default.createElement(q.Route,{exact:!0,path:"/user/album/owner",component:p.MySelfAlbum}),U.default.createElement(q.Route,{exact:!0,path:"/user/album/care",component:f.FollowedAlbum}),U.default.createElement(q.Route,{exact:!0,path:"/user/table/care",component:j.UserCarePage}),U.default.createElement(q.Route,{exact:!0,path:"/user/table/recent",component:R.UserRecentPage}),U.default.createElement(q.Route,{component:I.NotFound}))))),U.default.createElement(q.Route,{component:I.NotFound})))},t.AppRouter=()=>U.default.createElement(q.BrowserRouter,null,U.default.createElement(q.Route,{component:t.Router}))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){var l={"./af":854,"./af.js":854,"./ar":855,"./ar-dz":856,"./ar-dz.js":856,"./ar-kw":857,"./ar-kw.js":857,"./ar-ly":858,"./ar-ly.js":858,"./ar-ma":859,"./ar-ma.js":859,"./ar-sa":860,"./ar-sa.js":860,"./ar-tn":861,"./ar-tn.js":861,"./ar.js":855,"./az":862,"./az.js":862,"./be":863,"./be.js":863,"./bg":864,"./bg.js":864,"./bm":865,"./bm.js":865,"./bn":866,"./bn.js":866,"./bo":867,"./bo.js":867,"./br":868,"./br.js":868,"./bs":869,"./bs.js":869,"./ca":870,"./ca.js":870,"./cs":871,"./cs.js":871,"./cv":872,"./cv.js":872,"./cy":873,"./cy.js":873,"./da":874,"./da.js":874,"./de":875,"./de-at":876,"./de-at.js":876,"./de-ch":877,"./de-ch.js":877,"./de.js":875,"./dv":878,"./dv.js":878,"./el":879,"./el.js":879,"./en-SG":880,"./en-SG.js":880,"./en-au":881,"./en-au.js":881,"./en-ca":882,"./en-ca.js":882,"./en-gb":883,"./en-gb.js":883,"./en-ie":884,"./en-ie.js":884,"./en-il":885,"./en-il.js":885,"./en-nz":886,"./en-nz.js":886,"./eo":887,"./eo.js":887,"./es":888,"./es-do":889,"./es-do.js":889,"./es-us":890,"./es-us.js":890,"./es.js":888,"./et":891,"./et.js":891,"./eu":892,"./eu.js":892,"./fa":893,"./fa.js":893,"./fi":894,"./fi.js":894,"./fo":895,"./fo.js":895,"./fr":896,"./fr-ca":897,"./fr-ca.js":897,"./fr-ch":898,"./fr-ch.js":898,"./fr.js":896,"./fy":899,"./fy.js":899,"./ga":900,"./ga.js":900,"./gd":901,"./gd.js":901,"./gl":902,"./gl.js":902,"./gom-latn":903,"./gom-latn.js":903,"./gu":904,"./gu.js":904,"./he":905,"./he.js":905,"./hi":906,"./hi.js":906,"./hr":907,"./hr.js":907,"./hu":908,"./hu.js":908,"./hy-am":909,"./hy-am.js":909,"./id":910,"./id.js":910,"./is":911,"./is.js":911,"./it":912,"./it-ch":913,"./it-ch.js":913,"./it.js":912,"./ja":914,"./ja.js":914,"./jv":915,"./jv.js":915,"./ka":916,"./ka.js":916,"./kk":917,"./kk.js":917,"./km":918,"./km.js":918,"./kn":919,"./kn.js":919,"./ko":920,"./ko.js":920,"./ku":921,"./ku.js":921,"./ky":922,"./ky.js":922,"./lb":923,"./lb.js":923,"./lo":924,"./lo.js":924,"./lt":925,"./lt.js":925,"./lv":926,"./lv.js":926,"./me":927,"./me.js":927,"./mi":928,"./mi.js":928,"./mk":929,"./mk.js":929,"./ml":930,"./ml.js":930,"./mn":931,"./mn.js":931,"./mr":932,"./mr.js":932,"./ms":933,"./ms-my":934,"./ms-my.js":934,"./ms.js":933,"./mt":935,"./mt.js":935,"./my":936,"./my.js":936,"./nb":937,"./nb.js":937,"./ne":938,"./ne.js":938,"./nl":939,"./nl-be":940,"./nl-be.js":940,"./nl.js":939,"./nn":941,"./nn.js":941,"./pa-in":942,"./pa-in.js":942,"./pl":943,"./pl.js":943,"./pt":944,"./pt-br":945,"./pt-br.js":945,"./pt.js":944,"./ro":946,"./ro.js":946,"./ru":947,"./ru.js":947,"./sd":948,"./sd.js":948,"./se":949,"./se.js":949,"./si":950,"./si.js":950,"./sk":951,"./sk.js":951,"./sl":952,"./sl.js":952,"./sq":953,"./sq.js":953,"./sr":954,"./sr-cyrl":955,"./sr-cyrl.js":955,"./sr.js":954,"./ss":956,"./ss.js":956,"./sv":957,"./sv.js":957,"./sw":958,"./sw.js":958,"./ta":959,"./ta.js":959,"./te":960,"./te.js":960,"./tet":961,"./tet.js":961,"./tg":962,"./tg.js":962,"./th":963,"./th.js":963,"./tl-ph":964,"./tl-ph.js":964,"./tlh":965,"./tlh.js":965,"./tr":966,"./tr.js":966,"./tzl":967,"./tzl.js":967,"./tzm":968,"./tzm-latn":969,"./tzm-latn.js":969,"./tzm.js":968,"./ug-cn":970,"./ug-cn.js":970,"./uk":971,"./uk.js":971,"./ur":972,"./ur.js":972,"./uz":973,"./uz-latn":974,"./uz-latn.js":974,"./uz.js":973,"./vi":975,"./vi.js":975,"./x-pseudo":976,"./x-pseudo.js":976,"./yo":977,"./yo.js":977,"./zh-cn":978,"./zh-cn.js":978,"./zh-hk":979,"./zh-hk.js":979,"./zh-tw":980,"./zh-tw.js":980};function n(e){var t=i(e);return a(t)}function i(e){if(!a.o(l,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return l[e]}n.keys=function(){return Object.keys(l)},n.resolve=i,e.exports=n,n.id=1420},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=l(a(4)),r=a(26),u=a(319),s=a(1687),o=a(500),d=n(a(0)),c=a(1691),m=a(1693),f=l(a(519)),p=a(1696),_=a(1698),h=a(1700);t.Header=()=>{const e=d.useContext(u.LngStateContext),t=d.useContext(u.LngDispatchContext);return d.default.createElement("header",{className:f.default.header},d.default.createElement(s.Logo,null),d.default.createElement(p.HeaderMenu,null),d.default.createElement(_.SearchNew,null),d.default.createElement(p.RightMenu,null),d.default.createElement(c.HeaderArea,null),d.default.createElement(m.HeaderAvatar,null),d.default.createElement(r.IconFont,{onClick:()=>t(e===o.Language.EN?o.Language.ZH:o.Language.EN),className:i.default(f.default.lng,f.default.headerItem),type:e===o.Language.EN?"icon-lng-en":"icon-lng-zh"}),d.default.createElement(h.UserData,null))}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=l(a(4)),i=l(a(0)),r=a(19),u=a(117),s=l(a(1689)),o=l(a(1690));t.Logo=e=>{const{t:t}=r.useTranslation(),a=t("common:数据地图");return i.default.createElement("div",{className:n.default(e.classNames,s.default.logo)},i.default.createElement(u.Link,{className:s.default.content,to:{pathname:"/"}},i.default.createElement("img",{src:o.default,alt:"logo"}),i.default.createElement("div",{className:s.default.title},a)))}},,function(e,t,a){e.exports={logo:"logo_logo_2a-M3",content:"logo_content_N3ukh",title:"logo_title_2QsuW"}},function(e,t,a){"use strict";a.r(t),t.default=a.p+"c9b6f81229def0bb9c32f151d3180f74.png"},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=l(a(129)),i=l(a(4)),r=a(26),u=a(97),s=l(a(0)),o=a(19),d=l(a(519)),c=l(a(1692));t.HeaderArea=()=>{const{t:e}=o.useTranslation(),t=e("common:国内"),a=e("common:美东"),l=e("common:俄罗斯"),m=location.host.endsWith(".didichuxing.com")?t:location.host.includes("datamap-ru.intra")?l:a;return s.default.createElement(r.Dropdown,{placement:"bottomRight",overlay:s.default.createElement(r.Menu,{defaultSelectedKeys:[m],className:i.default(c.default.areaSelectDropdown)},s.default.createElement(r.Menu.Item,{key:t},m===t?t:s.default.createElement(u.ExternalLink,{href:"//datamap.didichuxing.com"},t)),s.default.createElement(r.Menu.Item,{key:a},m===a?a:s.default.createElement(u.ExternalLink,{href:"//datamap.intra.didiglobal.com"},a)),s.default.createElement(r.Menu.Item,{key:l},m===l?l:s.default.createElement(u.ExternalLink,{href:"//datamap-ru.intra.didiglobal.com"},l)))},s.default.createElement("div",{className:i.default(d.default.headerItem,c.default.area)},s.default.createElement("span",null,m),s.default.createElement(n.default,null)))}},function(e,t,a){e.exports={area:"area_area_1SpBs","area-select-dropdown":"area_area-select-dropdown_3A0yX",areaSelectDropdown:"area_area-select-dropdown_3A0yX"}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=a(30),r=a(259),u=l(a(4)),s=a(26),o=a(97),d=n(a(0)),c=a(19),m=l(a(519)),f=l(a(1694)),p=l(a(1695));t.HeaderAvatar=()=>{const{t:e}=c.useTranslation(),[t,a]=d.useState("");return d.useEffect(()=>{let e=!1;return(async()=>{const t=await r.v1CommonApi.avatar();!e&&t&&a(t)})(),()=>e=!0},[]),t?d.default.createElement(s.Dropdown,{placement:"bottomRight",overlay:d.default.createElement("div",{className:u.default(f.default.avatarDropdown)},d.default.createElement(o.ExternalLink,{href:i.pamOrigin+"/user/flow/apply",className:u.default(f.default.item,f.default.link)},d.default.createElement(s.IconFont,{type:"icon-my-application"}),d.default.createElement("span",null,e("common:我的权限申请"))),d.default.createElement(o.ExternalLink,{href:i.pamOrigin+"/user/flow/approval",className:u.default(f.default.item,f.default.link)},d.default.createElement(s.IconFont,{type:"icon-my-approval"}),d.default.createElement("span",null,e("common:我的权限审批"))),d.default.createElement(o.ExternalLink,{className:u.default(f.default.item,f.default.link),wikiPageId:356179098},d.default.createElement(s.IconFont,{type:"icon-doc"}),d.default.createElement("span",null,e("common:使用文档"))),d.default.createElement("div",{className:u.default(f.default.item,f.default.itemContactUs)},d.default.createElement("span",null,e("common:联系我们"))),d.default.createElement("div",{className:u.default(f.default.itemQcCode)},d.default.createElement("img",{src:p.default,alt:"logo"})))},d.default.createElement("div",{className:u.default(m.default.headerItem,f.default.avatarPerson)},d.default.createElement("div",{className:f.default.avatar},d.default.createElement("img",{src:t})))):null}},function(e,t,a){e.exports={"avatar-person":"avatar_avatar-person_1KWSY",avatarPerson:"avatar_avatar-person_1KWSY",avatar:"avatar_avatar_1GroD","avatar-dropdown":"avatar_avatar-dropdown_3xaf_",avatarDropdown:"avatar_avatar-dropdown_3xaf_",item:"avatar_item_cLOE9",link:"avatar_link_3CrVc","item-contact-us":"avatar_item-contact-us_2Pj_5",itemContactUs:"avatar_item-contact-us_2Pj_5","item-qc-code":"avatar_item-qc-code_2qNh0",itemQcCode:"avatar_item-qc-code_2qNh0"}},function(e,t,a){"use strict";a.r(t),t.default=a.p+"5ff11827cc5f85ed3eb6b004f5bbd43e.png"},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=l(a(4)),r=a(319),u=n(a(0)),s=a(19),o=a(117),d=l(a(1697));t.HeaderMenu=()=>{const{pathname:e}=o.useLocation(),{t:t}=s.useTranslation(),{isBUManager:a,isSuperAdmin:l}=u.useContext(r.UserStateContext);return u.default.createElement("div",{className:d.default.homeMenu},u.default.createElement(o.Link,{className:i.default(d.default.item,{[d.default.active]:"/"===e}),to:{pathname:"/"}},t("common:首 页")),"/search"===e?u.default.createElement("div",{className:i.default(d.default.item,{[d.default.active]:["/search","/detail"].includes(e)})},t("common:找数据")):u.default.createElement(o.Link,{className:i.default(d.default.item,{[d.default.active]:["/search","/detail","/detail/meta/update"].includes(e)}),to:{pathname:"/search"}},t("common:找数据")),u.default.createElement(o.Link,{className:i.default(d.default.item,{[d.default.active]:e.startsWith("/user")}),to:{pathname:"/user/table/owner"}},t("common:我的数据")),u.default.createElement(o.Link,{className:i.default(d.default.item,{[d.default.active]:e.startsWith("/notify")}),to:{pathname:"/notify/index"}},t("common:变更通知")),u.default.createElement(o.Link,{className:i.default(d.default.item,{[d.default.active]:e.startsWith("/album")}),to:{pathname:"/album"}},t("admin:数据专辑")),a||l?u.default.createElement(o.Link,{className:i.default(d.default.item,{[d.default.active]:"/admin"===e}),to:{pathname:"/admin"}},t("admin:规范管理后台")):null)},t.RightMenu=()=>{const{t:e}=s.useTranslation(),{pathname:t}=o.useLocation();return u.default.createElement("div",{className:i.default(d.default.rightMenu,d.default.homeMenu)},u.default.createElement(o.Link,{className:i.default(d.default.item,{[d.default.active]:["/tool"].includes(t)}),to:{pathname:"/tool/hive/off-or-on"}},e("common:管理工具")))}},function(e,t,a){e.exports={"home-menu":"style_home-menu_1gauC",homeMenu:"style_home-menu_1gauC",item:"style_item_2Nskz",active:"style_active_3TgkI","right-menu":"style_right-menu_2v3WT",rightMenu:"style_right-menu_2v3WT"}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=a(30),r=a(176),u=l(a(162)),s=a(142),o=l(a(4)),d=a(26),c=a(148),m=n(a(0)),f=l(a(260)),p=a(19),_=a(143),h=a(117),g=l(a(1699));t.SearchNew=h.withRouter(e=>{const{t:t}=p.useTranslation(),{pathname:a}=_.useLocation(),[l,n]=m.useState(!1),E="/search"===a||"/"===a,[b,v]=m.useState([]),[y,T]=m.useState([]),[N,S]=m.useState(null),[C,x]=m.useState(i.getQuery("keyword","string")||null),[w,I]=m.useState(!1),L=h.useHistory(),O=m.useRef(),[P,M]=m.useState(""),k=async e=>{I(!0),s.v1SearchApi.searchHiveReminder(e).then(e=>{const{inputTokens:t,records:a}=e;T(t),v(a),I(!1)}).catch(e=>{r.message.error(e),I(!1)})};return m.useEffect(()=>{O.current&&(O.current.setValue(""),O.current.blur(),M(""),n(!1))},[e]),E?null:m.default.createElement("div",{className:g.default.homeInput},m.default.createElement(d.Popover,{placement:"bottomLeft",visible:l,destroyTooltipOnHide:!0,overlayClassName:g.default.searchTip,content:m.default.createElement("div",{className:g.default.listWrapper},m.default.createElement(d.Spin,{spinning:w},m.default.createElement("div",{className:g.default.list},b.length?b.map(({label:e,historyKeywords:t,uri:a,user:l},i)=>m.default.createElement("div",{key:e+a},t?m.default.createElement("div",{className:o.default(g.default.item,{[g.default.selected]:N===i}),onClick:()=>{x(t),L.push("/search?keyword="+t),n(!1)}},m.default.createElement(d.Tooltip,{title:t},m.default.createElement(f.default,{className:g.default.label,searchWords:y,highlightClassName:g.default.highlighter,autoEscape:!0,textToHighlight:t})),l?m.default.createElement("span",{className:g.default.value},null==l?void 0:l.name):null):m.default.createElement(h.Link,{className:o.default(g.default.item,{[g.default.selected]:N===i}),to:{pathname:"/detail",search:"?uri="+a,state:{referer:c.RefererType.INNER}}},m.default.createElement(d.Tooltip,{title:e},m.default.createElement(f.default,{className:g.default.label,searchWords:y,highlightClassName:g.default.highlighter,autoEscape:!0,textToHighlight:e})),l?m.default.createElement("span",{className:g.default.value},null==l?void 0:l.name):null))):null)))}),m.default.createElement(u.default.Search,{ref:O,onFocus:()=>{n(!0),k(""),S(null)},allowClear:!0,onBlur:()=>setTimeout(()=>n(!1),200),className:o.default(g.default.search,{[g.default.focus]:l}),placeholder:t("message:请输入"),onKeyDown:e=>{var t;if(["ArrowUp","ArrowDown","Enter"].includes(e.key)){e.stopPropagation(),e.preventDefault();const a=b.length;if(!a)return;const l=null===N?0:(N+("ArrowUp"===e.key?a-1:1))%a,i=b[l];if(x(null!==(t=i.historyKeywords)&&void 0!==t?t:`${i.dbName}.${i.tableName}`),S(l),"Enter"===e.key&&C){if(null===N)return;i.historyKeywords&&(L.push("/search?keyword="+C),S(null),x(""),n(!1)),(i.dbName||i.tableName)&&(L.push("/detail?uri=hive://mycluster-tj:"+C.replace(".",":"),{referer:c.RefererType.INNER}),S(null),x(""),n(!1))}}},onSearch:e=>{n(!0),e?L.push("/search?keyword="+e):setTimeout(()=>{O.current.blur(),M("")},0)},defaultValue:"",onInput:()=>{setTimeout(()=>{k(O.current.state.value),M(O.current.state.value)},0)},onPressEnter:()=>{P?L.push("/search?keyword="+P):L.push("/search")}}))})},function(e,t,a){e.exports={search:"style_search_39EQy","list-wrapper":"style_list-wrapper_1bb0t",listWrapper:"style_list-wrapper_1bb0t","search-all":"style_search-all_2G79x",searchAll:"style_search-all_2G79x",list:"style_list_1BDPL",item:"style_item_3coQR",label:"style_label_3Ul4H",highlighter:"style_highlighter_pHAkC",value:"style_value_1lueY",selected:"style_selected_DlVJQ",focus:"style_focus_1Gwks","home-input":"style_home-input_1irkg",homeInput:"style_home-input_1irkg","search-tip":"style_search-tip_1S3Ql",searchTip:"style_search-tip_1S3Ql"}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=l(a(129)),i=l(a(4)),r=a(26),u=l(a(0)),s=a(19),o=a(117),d=l(a(519)),c=l(a(1701));t.UserData=()=>{const{t:e}=s.useTranslation();return u.default.createElement(r.Dropdown,{placement:"bottomRight",overlay:u.default.createElement("div",{className:c.default.headerDataDropdown},u.default.createElement("div",{className:c.default.headerDataItem},u.default.createElement("div",{className:c.default.title},u.default.createElement(r.IconFont,{type:"icon-person"}),u.default.createElement("span",null,e("common:我拥有的数据"))),u.default.createElement("div",{className:c.default.list},u.default.createElement(o.Link,{className:c.default.listItem,to:{pathname:"/user/table/owner"}},e("common:我拥有的表")),u.default.createElement(o.Link,{className:c.default.listItem,to:{pathname:"/user/album/owner"}},e("common:我拥有的专辑")))),u.default.createElement("div",{className:i.default(c.default.headerDataItem,c.default.careData)},u.default.createElement("div",{className:c.default.title},u.default.createElement(r.IconFont,{type:"icon-project"}),u.default.createElement("span",null,e("common:我关注的数据"))),u.default.createElement("div",{className:c.default.list},u.default.createElement(o.Link,{className:c.default.listItem,to:{pathname:"/user/table/care"}},e("common:我关注的表")),u.default.createElement(o.Link,{className:c.default.listItem,to:{pathname:"/user/album/care"}},e("common:我关注的专辑")),u.default.createElement(o.Link,{className:c.default.listItem,to:{pathname:"/user/table/recent"}},e("common:我最近浏览的表")))))},u.default.createElement("div",{className:i.default(d.default.headerItem,c.default.headerData)},u.default.createElement(r.IconFont,{type:"icon-data"}),u.default.createElement("span",null,e("common:我的数据")),u.default.createElement(n.default,null)))}},function(e,t,a){e.exports={"header-data":"style_header-data_3Pj9c",headerData:"style_header-data_3Pj9c","header-data-dropdown":"style_header-data-dropdown_29100",headerDataDropdown:"style_header-data-dropdown_29100","header-data-item":"style_header-data-item_1SYki",headerDataItem:"style_header-data-item_1SYki","care-data":"style_care-data_3ey_a",careData:"style_care-data_3ey_a",title:"style_title_26wUS",list:"style_list_2EXIy","list-item":"style_list-item_2Al_s",listItem:"style_list-item_2Al_s",active:"style_active_2pyzU"}},function(e,t,a){"use strict";var l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=a(30),r=a(298),u=a(26),s=a(319),o=a(1012),d=l(a(0)),c=a(19),m=a(1705),f=a(521),p=a(1712),_=a(275),h=a(1720),g=a(1721),E=n(a(651));t.AdminPageContent=()=>{const{t:e}=c.useTranslation(),{buOption:t,setBuOption:a}=d.useContext(_.ProjectsContext),[l,n]=d.useState(!1),[s,o]=d.useState(!1),{buOptions:b,buOptionsLoading:v}=r.useBuOptions(),{buProjects:y,fetchData:T,buProjectsLoading:N}=r.useBuProjects(null==t?void 0:t.id),{buManagers:S,setBuManagers:C,buManagersLoading:x}=r.useBuManagers(null==t?void 0:t.id);return d.useEffect(()=>{!t&&b.length&&a(b[0])},[t,b,a]),d.default.createElement("div",{className:E.default.adminPage},d.default.createElement(u.Form,{layout:"inline",className:E.default.filter},d.default.createElement(u.Form.Item,{label:e("detail:业务版块")},d.default.createElement(u.Select,{loading:v,dropdownClassName:E.default.selectSmall,notFoundContent:v&&d.default.createElement(u.Spin,{size:"small"}),filterOption:!1,value:null==t?void 0:t.id,onChange:e=>a(b.find(t=>e===t.id))},b.map(e=>d.default.createElement(u.Select.Option,{key:e.name,value:e.id},e.name)))),d.default.createElement(u.Form.Item,{label:e("category:作用项目"),className:E.default.projects},d.default.createElement(u.Spin,{spinning:N,size:"small"},d.default.createElement(u.Tooltip,{overlayStyle:{maxWidth:450},placement:"bottom",title:y.map(({name:e,code:t})=>`${e}(${t})`).join("、")},d.default.createElement("span",{className:E.default.text},y.map(({code:e})=>e).join("、"))),(null==t?void 0:t.id)?d.default.createElement(u.IconFont,{type:"icon-edit",onClick:()=>n(!0)}):null)),d.default.createElement(u.Form.Item,{label:e("detail:规范管理员"),className:E.default.managers},d.default.createElement(u.Spin,{spinning:x,size:"small"},d.default.createElement(u.Tooltip,{overlayStyle:{maxWidth:450},placement:"bottom",title:S.map(({name:e})=>e).join("、")},d.default.createElement("span",{className:E.default.text},S.map(e=>e.name).join("、"))),(null==t?void 0:t.id)?d.default.createElement(u.IconFont,{type:"icon-edit",onClick:()=>o(!0)}):null))),d.default.createElement(u.Tabs,{defaultActiveKey:i.getQuery("tab")||"category",tabBarStyle:{padding:"0 16px",margin:0},onChange:e=>i.updateQuery({tab:"category"===e?null:e}),animated:!1},d.default.createElement(u.Tabs.TabPane,{tab:d.default.createElement("span",{className:E.default.tabNavText},e("detail:数据类目")),key:"category"},d.default.createElement(f.CategoryProvider,null,d.default.createElement(m.AdminCategoriesPage,{buOption:t}))),d.default.createElement(u.Tabs.TabPane,{tab:d.default.createElement("span",{className:E.default.tabNavText},e("detail:精品表")),key:"choicestTable"},d.default.createElement(p.ChoicestTable,null))),d.default.createElement(g.EditProjects,{visible:l,setVisible:n,loading:N,update:async()=>{await T()}}),d.default.createElement(h.EditManagers,{visible:s,setVisible:o,buId:null==t?void 0:t.id,buManagers:S,setBuManagers:C,loading:x}))},t.AdminPage=()=>{const{isBUManager:e,fetchLoading:a,isSuperAdmin:l}=d.useContext(s.UserStateContext);return a?d.default.createElement("div",{className:E.default.loading},d.default.createElement(u.Spin,{size:"large"})):e||l?d.default.createElement(_.ProjectsProvider,null,d.default.createElement(t.AdminPageContent,null)):d.default.createElement(o.NotFound,null)}},function(e,t,a){"use strict";a.r(t),t.default=a.p+"6d0109e870c06810c4269e5e60caa916.svg"},function(e,t,a){e.exports={"not-found":"not-found_not-found_25rEv",notFound:"not-found_not-found_25rEv",img:"not-found_img_1QcET",oops:"not-found_oops_1DV9s",tips:"not-found_tips_1dN3-",action:"not-found_action_2U1nU"}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=l(a(118)),r=a(298),u=a(26),s=n(a(0)),o=a(1706),d=a(1711),c=a(521),m=l(a(1013));t.AdminCategoriesPage=e=>{const{buOption:t}=e,a=null==t?void 0:t.id,l=s.useContext(c.CategoryContext),[n,f]=s.useState(null),{categoryTreeLoading:p}=r.useCategoryTree(a);return s.useEffect(()=>f(null),[a]),a?s.default.createElement("div",{className:m.default.adminCategoriesPage},s.default.createElement(i.default,{spinning:p},s.default.createElement("div",{className:m.default.categories},s.default.createElement(d.BuTitle,{data:t}),null==l?void 0:l.map(e=>s.default.createElement("div",{key:e.categoryId},s.default.createElement(d.SubBuTitle,{data:e,buId:a}),e.fold?null:s.default.createElement(d.SubBuItem,{data:e,key:e.categoryId,selectCategory:n,setSelectCategory:f}))))),s.default.createElement("div",{className:m.default.categoriesContent},s.default.createElement(o.CategoryTableList,{category:n}))):s.default.createElement(u.Empty,{image:u.Empty.PRESENTED_IMAGE_SIMPLE})}},function(e,t,a){"use strict";var l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=a(362),r=a(298),u=a(218),s=a(26),o=a(89),d=a(98),c=l(a(0)),m=a(19),f=a(405),p=a(275),_=n(a(1708)),h=a(1709);t.CategoryTableList=e=>{var t,a;const l=null===(a=null===(t=e.category)||void 0===t?void 0:t.item)||void 0===a?void 0:a.itemId,{t:n}=m.useTranslation(),[g,E]=c.useState(!1),[b,v]=c.useState(!1),[y,T]=c.useState(null),{projectList:N,loading:S}=c.useContext(p.ProjectsContext),[C,x]=c.useState(),[w,I]=c.useState(),L=c.useRef(null),[O,P]=c.useState(1),[M,k]=c.useState(d.PAGE_SIZE),[D,A]=c.useState([]),j=o.useShowTotal();c.useEffect(()=>{x(void 0),I(void 0),P(1),k(d.PAGE_SIZE),A([])},[]);const F=c.useMemo(()=>({pageCurrent:O,pageSize:M,pageFilter:{categoryItemId:l,projectCode:C,tableName:w}}),[l,O,M,C,w]),R=r.useFilterTableInCategory(F),{total:H}=R,U=f.useTableNameColumn(),B=c.useMemo(()=>[U,{title:n("detail:资产负责人"),width:100,dataIndex:"owner",ellipsis:!0,render:e=>c.default.createElement(i.DChat,{user:e})},{title:n("detail:已绑定类目"),width:120,dataIndex:"categoryItemLabel",ellipsis:!0},{title:n("common:项目"),width:100,dataIndex:"projectCode",ellipsis:!0},{title:n("common:创建时间"),width:160,dataIndex:"createTimeLabel"},{title:n("common:操作"),dataIndex:"action",width:80,fixed:"right",className:_.default.columnAction,render:(e,{tableId:t})=>c.default.createElement(s.Popconfirm,{title:n("message:确认是否把表移出类目？"),onConfirm:async()=>{try{T(t),await u.v1CategoriesApi.removeFormCategory({categoryItemId:l,tableIdList:[t]}),A([]),T(null),await R.fetchData()}catch(e){T(null),s.message.error(e.message)}},okText:n("common:是"),cancelText:n("common:否")},c.default.createElement(s.Spin,{size:"small",spinning:t===y},c.default.createElement("span",{className:_.default.actionRemove},n("detail:移出类目"))))}],[l,n,R,y,U]);return l?c.default.createElement("div",{className:_.default.categoryTableList},c.default.createElement("div",{className:_.default.filterWrapper},c.default.createElement(s.Form,{layout:"inline",className:_.default.filter},c.default.createElement(s.Form.Item,{label:n("category:项目")},c.default.createElement(s.Select,{value:C,loading:S,allowClear:!0,notFoundContent:S&&c.default.createElement(s.Spin,{size:"small"}),showSearch:!0,onChange:e=>{x(e),P(1)}},N.map(e=>c.default.createElement(s.Select.Option,{key:e.name,value:e.code},e.name)))),c.default.createElement(s.Form.Item,{label:n("category:表名"),className:_.default.tableName},c.default.createElement(s.Input,{defaultValue:w,allowClear:!0,ref:L,onBlur:e=>I(e.target.value),onPressEnter:()=>{var e,t;I(null===(t=null===(e=L.current)||void 0===e?void 0:e.state)||void 0===t?void 0:t.value),P(1)}}))),c.default.createElement(s.Button,{className:_.default.quickAdd,type:"primary",onClick:()=>E(!0)},n("category:快速添加"))),c.default.createElement("div",{className:_.default.actions},D.length?c.default.createElement(s.Popconfirm,{title:n("message:确认是否把表移出类目？"),onConfirm:async()=>{try{v(!0),await u.v1CategoriesApi.removeFormCategory({categoryItemId:l,tableIdList:D}),v(!1),A([]),await R.fetchData()}catch(e){v(!1),s.message.error(e.message)}},okText:n("common:是"),cancelText:n("common:否")},c.default.createElement(s.Button,{loading:b},n("category:批量移出类目"),"(",D.length,")")):c.default.createElement(s.Button,{disabled:!0},n("category:批量移出类目"))),c.default.createElement(s.Table,{rowKey:"tableId",rowSelection:{columnWidth:40,type:"checkbox",selectedRowKeys:D,onChange:e=>A(e)},loading:R.loading,columns:B,dataSource:R.tables,pagination:{hideOnSinglePage:!0,...d.PAGE_CONFIG,pageSize:M,current:O,total:H,showTotal:j,onShowSizeChange:(e,t)=>k(t),onChange:e=>P(e)}}),c.default.createElement(h.QuickAddTableList,{category:e.category,visible:g,setVisible:E,fetchData:R.fetchData})):c.default.createElement(s.Empty,{style:{padding:"50px 0"},image:s.Empty.PRESENTED_IMAGE_SIMPLE,description:n("message:请先选择左侧类目")})}},,function(e,t,a){e.exports={"category-table-list":"category-table-list_category-table-list_IWAhR",categoryTableList:"category-table-list_category-table-list_IWAhR","filter-wrapper":"category-table-list_filter-wrapper_3_EXM",filterWrapper:"category-table-list_filter-wrapper_3_EXM",filter:"category-table-list_filter_2LFBV","table-name":"category-table-list_table-name_TY6rb",tableName:"category-table-list_table-name_TY6rb","quick-add":"category-table-list_quick-add_3s3wS",quickAdd:"category-table-list_quick-add_3s3wS",actions:"category-table-list_actions_16K8y","column-action":"category-table-list_column-action_2GrSj",columnAction:"category-table-list_column-action_2GrSj","action-remove":"category-table-list_action-remove_3qnBD",actionRemove:"category-table-list_action-remove_3qnBD"}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=l(a(118)),r=a(298),u=a(218),s=a(646),o=a(26),d=a(89),c=a(98),m=n(a(0)),f=a(19),p=a(648),_=a(649),h=a(405),g=a(650),E=a(275),b=l(a(1710));t.QuickAddTableList=e=>{var t,a;const{category:l,visible:n,setVisible:v}=e,y=null===(t=null==l?void 0:l.item)||void 0===t?void 0:t.itemId,{t:T}=f.useTranslation(),[N,S]=m.useState(),{projectList:C,loading:x,isPublicBu:w}=m.useContext(E.ProjectsContext),[I,L]=m.useState(),O=m.useRef(null),[P,M]=m.useState(!1),[k,D]=m.useState(!1),[A,j]=m.useState(1),[F,R]=m.useState(c.PAGE_SIZE),[H,U]=m.useState([]),B=d.useShowTotal(),q=m.useMemo(()=>{if(!w||N)return{pageCurrent:A,pageSize:F,pageFilter:{categoryItemId:y,projectCode:N,tableName:I,withAdded:P}}},[w,N,A,F,y,I,P]),z=r.useFilterTableWhenAddToCategory(q),{total:Q}=z,V=h.useTableNameColumn(),G=g.useTableNameZHColumn(),Y=p.useDataOwnerColumn(),W=_.useStatusColumn(),$=m.useMemo(()=>[V,G,Y,{title:T("common:创建时间"),width:150,dataIndex:"createTimeLabel"},W],[T,V,G,Y,W]),K=m.useMemo(()=>{if(w)return C&&0!==C.length?{label:C[0].name,value:C[0].code}:{label:"",value:""}},[w,C]);return m.useEffect(()=>{K&&n&&S(String(K.value))},[K,y,n]),m.default.createElement(o.Modal,{title:`${T("category:快速添加至")}${null==l?void 0:l.categoryName}-${null===(a=null==l?void 0:l.item)||void 0===a?void 0:a.nameZh}${T("category:类目")}`,className:b.default.quickAddTableList,centered:window.innerHeight<800,width:820,visible:n,destroyOnClose:!0,wrapClassName:b.default.quickAddTableList,onCancel:()=>v(!1),afterClose:()=>{S(void 0),L(void 0),M(!1),j(1)},okButtonProps:{loading:k},onOk:async()=>{if(H.length){D(!0);try{await u.v1CategoriesApi.addToCategory({categoryItemId:y,tableIdList:H}),U([]),await z.fetchData(),e.fetchData(),v(!1)}catch(e){o.message.error(e.message)}D(!1)}}},m.default.createElement(o.Form,{layout:"inline",className:b.default.filter},m.default.createElement(o.Form.Item,{label:T("category:项目"),className:b.default.project},w?m.default.createElement(s.SelectProject,{initValue:N,updateProject:e=>{S(e),j(1)}}):m.default.createElement(o.Select,{value:N,loading:x,allowClear:!0,notFoundContent:x&&m.default.createElement(i.default,{size:"small"}),onChange:e=>{S(e),j(1)}},C.map(e=>m.default.createElement(o.Select.Option,{key:e.name,value:e.code},e.name)))),m.default.createElement(o.Form.Item,{label:T("category:表名"),className:b.default.tableName},m.default.createElement(o.Input,{defaultValue:I,allowClear:!0,ref:O,onBlur:e=>{L(e.target.value),j(1)},onPressEnter:()=>{var e,t;L(null===(t=null===(e=O.current)||void 0===e?void 0:e.state)||void 0===t?void 0:t.value),j(1)}})),m.default.createElement(o.Form.Item,{label:"",className:b.default.added},m.default.createElement(o.Checkbox,{checked:P,onChange:e=>{M(e.target.checked),j(1)}},T("category:显示已添加")))),m.default.createElement(o.Table,{scroll:{y:360},rowKey:"tableId",rowSelection:{columnWidth:30,type:"checkbox",selectedRowKeys:H,onChange:e=>U(e),getCheckboxProps:e=>({disabled:e.added})},loading:z.loading,columns:$,dataSource:z.tables,size:"small",pagination:{hideOnSinglePage:!0,...c.PAGE_CONFIG,pageSize:F,current:A,total:Q,showTotal:B,onShowSizeChange:(e,t)=>R(t),onChange:e=>j(e)}}))}},function(e,t,a){e.exports={"quick-add-table-list":"quick-add-table-list_quick-add-table-list_1zoEf",quickAddTableList:"quick-add-table-list_quick-add-table-list_1zoEf",filter:"quick-add-table-list_filter_2GL1X",project:"quick-add-table-list_project_aVvQ-","table-name":"quick-add-table-list_table-name_3EtI0",tableName:"quick-add-table-list_table-name_3EtI0",added:"quick-add-table-list_added_UE5Sj",actions:"quick-add-table-list_actions_2hNFb","selected-num":"quick-add-table-list_selected-num_25xMr",selectedNum:"quick-add-table-list_selected-num_25xMr"}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=l(a(816)),r=l(a(815)),u=l(a(302)),s=l(a(303)),o=l(a(286)),d=a(218),c=l(a(4)),m=a(26),f=n(a(0)),p=a(19),_=a(520),h=a(521),g=l(a(1013));t.BuTitle=e=>{const{data:t}=e,a=f.useContext(h.CategoryDispatchContext);return t?f.default.createElement("div",{className:g.default.buTitle},f.default.createElement("div",{className:g.default.title},f.default.createElement("span",{className:g.default.text},null==t?void 0:t.name),f.default.createElement(m.IconFont,{type:"icon-add",onClick:()=>a({type:_.CATEGORY_ACTION_TYPES.ADD})}))):null},t.SubBuTitleForm=e=>{const{t:t}=p.useTranslation(),{data:a,buId:l}=e,{categoryId:n}=a,[i,r]=f.useState(!1),o=f.useContext(h.CategoryDispatchContext),[c]=m.Form.useForm();return f.default.createElement(m.Spin,{spinning:i,size:"small"},f.default.createElement(m.Form,{layout:"inline",initialValues:a,className:g.default.dataEdit,form:c,onFinish:async({categoryName:e})=>{r(!0);try{if(a.isNew){const t=await d.v1CategoriesApi.createCategory({buId:l,categoryName:e});r(!1),o({type:_.CATEGORY_ACTION_TYPES.ADD_FINISH,categoryId:n,category:{...a,categoryId:t.categoryId,categoryName:e,edit:!1,isNew:!1}})}else await d.v1CategoriesApi.updateCategory({categoryId:n,categoryName:e}),r(!1),o({type:_.CATEGORY_ACTION_TYPES.SUBMIT,categoryId:n,category:{...a,categoryName:e,edit:!1}})}catch(e){r(!1),m.message.error(e.message)}}},f.default.createElement(m.Form.Item,{label:"",name:"categoryName",className:g.default.itemName,rules:[{required:!0,message:t("common:不能为空")}]},f.default.createElement(m.Input,{autoFocus:!0})),f.default.createElement(m.Form.Item,{className:g.default.itemAction},f.default.createElement(u.default,{className:g.default.iconSuccess,onClick:c.submit}),f.default.createElement(s.default,{className:g.default.iconWarn,onClick:()=>{a.isNew?o({type:_.CATEGORY_ACTION_TYPES.DELETE,categoryId:n}):(o({type:_.CATEGORY_ACTION_TYPES.EDIT,categoryId:n,edit:!1}),c.resetFields())}}))))},t.SubBuTitle=e=>{var a;const{t:l}=p.useTranslation(),{data:n}=e,{categoryId:u,categoryName:s,mappingLayer:c,mappingPosition:E}=n,b=f.useContext(h.CategoryDispatchContext),v={"-1":l("category:最后一位"),1:l("category:第一位"),2:l("category:第二位"),3:l("category:第三位"),4:l("category:第四位"),5:l("category:第五位")},y=`${s}${c?`(${c}${null!==(a=v[E])&&void 0!==a?a:""})`:""}`;return f.default.createElement("div",{className:g.default.subBuTitle},f.default.createElement("div",{className:g.default.actionFold},n.fold?f.default.createElement(r.default,{onClick:()=>b({type:_.CATEGORY_ACTION_TYPES.FOLD,categoryId:u,fold:!1})}):f.default.createElement(i.default,{onClick:()=>b({type:_.CATEGORY_ACTION_TYPES.FOLD,categoryId:u,fold:!0})})),n.edit?f.default.createElement(t.SubBuTitleForm,{data:n,buId:e.buId}):f.default.createElement("div",{className:g.default.title},f.default.createElement("span",{className:g.default.text},y),f.default.createElement("div",{className:g.default.actions},f.default.createElement(m.IconFont,{type:"icon-add",onClick:()=>{if(n.itemList.filter(e=>e.isNew).length>2)return m.message.warn(l("message:最多只能连续添加3项"));b({type:_.CATEGORY_ACTION_TYPES.ADD_ITEM,categoryId:u})}}),n.canEdit?f.default.createElement(f.default.Fragment,null,f.default.createElement("span",{className:g.default.border}),f.default.createElement(m.IconFont,{type:"icon-delete",onClick:()=>{m.Modal.confirm({title:l("message:确认要删除这条信息吗？"),icon:f.default.createElement(o.default,null),content:l("message:删除信息将连同关联的内容一起删除，是否确认？"),onOk:async()=>{try{await d.v1CategoriesApi.deleteCategory(u),b({type:_.CATEGORY_ACTION_TYPES.DELETE,categoryId:u})}catch(e){m.message.error(e.message)}}})}}),f.default.createElement("span",{className:g.default.border}),f.default.createElement(m.IconFont,{type:"icon-edit",onClick:()=>b({type:_.CATEGORY_ACTION_TYPES.EDIT,categoryId:u,edit:!0})})):null)))},t.SubBuItemForm=e=>{var t;const{t:a}=p.useTranslation(),{data:l,item:n}=e,{categoryId:i}=l,{itemId:r}=n,[o,E]=f.useState(!1),b=f.useContext(h.CategoryDispatchContext),[v]=m.Form.useForm();return(null===(t=l.itemList)||void 0===t?void 0:t.length)?f.default.createElement(m.Spin,{spinning:o,size:"small"},f.default.createElement(m.Form,{layout:"inline",initialValues:n,className:g.default.columnItem,form:v,onFinish:async e=>{const{nameZh:t,nameEn:a,abbreviation:l}=e;E(!0);try{if(n.isNew){const u=await d.v1CategoriesApi.createCategoryItem({categoryId:i,nameZh:t,nameEn:a,abbreviation:l});E(!1),b({type:_.CATEGORY_ACTION_TYPES.ADD_ITEM_FINISH,categoryId:i,itemId:r,item:{...n,...e,itemId:u.itemId,edit:!1,isNew:!1}})}else await d.v1CategoriesApi.updateCategoryItem({categoryItemId:r,nameZh:t,nameEn:a,abbreviation:l}),E(!1),b({type:_.CATEGORY_ACTION_TYPES.SUBMIT_ITEM,categoryId:i,itemId:r,item:{...n,...e,edit:!1}})}catch(e){m.message.error(e.message),E(!1)}}},f.default.createElement(m.Form.Item,{label:"",name:"nameZh",className:c.default(g.default.item,g.default.itemChina),rules:[{required:!0,message:a("common:不能为空")}]},f.default.createElement(m.Input,{autoFocus:!0,onPressEnter:v.submit})),f.default.createElement(m.Form.Item,{label:"",name:"nameEn",className:c.default(g.default.item,g.default.itemEn),rules:[{required:!0,message:a("common:不能为空")}]},f.default.createElement(m.Input,{onPressEnter:v.submit})),f.default.createElement(m.Form.Item,{label:"",name:"abbreviation",className:c.default(g.default.item,g.default.itemAbbreviation),rules:[{required:!0,message:a("common:不能为空")}]},f.default.createElement(m.Input,{onPressEnter:v.submit})),f.default.createElement(m.Form.Item,{className:c.default(g.default.item,g.default.itemAction)},f.default.createElement(u.default,{className:g.default.iconSuccess,onClick:v.submit}),f.default.createElement(s.default,{className:g.default.iconWarn,onClick:()=>{n.isNew?b({type:_.CATEGORY_ACTION_TYPES.DELETE_ITEM,categoryId:i,itemId:r}):(b({type:_.CATEGORY_ACTION_TYPES.EDIT_ITEM,categoryId:i,itemId:r,edit:!1}),v.resetFields())}})))):null},t.SubBuItem=e=>{var a;const{t:l}=p.useTranslation(),{data:n,selectCategory:i,setSelectCategory:r}=e,{categoryId:u}=n,s=f.useContext(h.CategoryDispatchContext);return(null===(a=n.itemList)||void 0===a?void 0:a.length)?f.default.createElement("div",{className:c.default(g.default.subBuItem)},f.default.createElement("div",{className:g.default.columnHeader},f.default.createElement("div",{className:c.default(g.default.item,g.default.itemChina)},l("detail:中文名")),f.default.createElement("div",{className:c.default(g.default.item,g.default.itemEn)},l("detail:英文名")),f.default.createElement("div",{className:c.default(g.default.item,g.default.itemAbbreviation)},l("detail:缩写")),f.default.createElement("div",{className:c.default(g.default.item,g.default.itemAction)},l("common:操作"))),n.itemList.map(a=>{var p;const{itemId:h}=a,E=(null==i?void 0:i.categoryId)===u&&(null===(p=null==i?void 0:i.item)||void 0===p?void 0:p.itemId)===a.itemId;return a.edit?f.default.createElement(t.SubBuItemForm,{data:e.data,key:h,item:a}):f.default.createElement("div",{className:c.default(g.default.columnItem,{[g.default.selected]:E}),key:h,onClick:()=>r(a.selected?null:{categoryId:u,categoryName:n.categoryName,item:a})},f.default.createElement("div",{className:c.default(g.default.item,g.default.itemChina,{[g.default.normal]:!0})},a.nameZh),f.default.createElement("div",{className:c.default(g.default.item,g.default.itemEn,{[g.default.normal]:!0})},a.nameEn),f.default.createElement("div",{className:c.default(g.default.item,g.default.itemAbbreviation,{[g.default.normal]:!0})},a.abbreviation),f.default.createElement("div",{className:c.default(g.default.item,g.default.itemAction,{[g.default.normal]:!0})},f.default.createElement(m.IconFont,{type:"icon-delete",className:g.default.iconDelete,onClick:e=>{e.preventDefault(),e.stopPropagation(),m.Modal.confirm({title:l("message:确认要删除这条信息吗？"),icon:f.default.createElement(o.default,null),content:l("message:删除信息将连同关联的内容一起删除，是否确认？"),onOk:async()=>{try{await d.v1CategoriesApi.deleteCategoryItem(h),s({type:_.CATEGORY_ACTION_TYPES.DELETE_ITEM,categoryId:u,itemId:h}),r(null)}catch(e){m.message.error(e.message)}}})}}),f.default.createElement(m.IconFont,{type:"icon-edit",className:g.default.iconEdit,onClick:e=>{e.preventDefault(),e.stopPropagation(),s({type:_.CATEGORY_ACTION_TYPES.EDIT_ITEM,categoryId:u,itemId:h,edit:!0})}})))})):null}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=a(30),i=a(26),r=l(a(0)),u=a(19),s=a(1713),o=a(1717),d=l(a(462));t.ChoicestTable=()=>{const{t:e}=u.useTranslation();return r.default.createElement("div",{className:d.default.choicestTableList},r.default.createElement(i.Tabs,{animated:!1,onChange:e=>n.updateQuery({subTab:"hive"===e?null:e}),defaultActiveKey:"hive"==n.getQuery("subTab")?null:n.getQuery("subTab")},r.default.createElement(i.Tabs.TabPane,{tab:r.default.createElement("span",{className:"tab-nav-text"},e("user:Hive表")),key:"hive"},r.default.createElement(s.HiveList,null)),r.default.createElement(i.Tabs.TabPane,{tab:r.default.createElement("span",{className:"tab-nav-text"},e("user:实时表")),key:"stream"},r.default.createElement(o.StreamList,null))))}},function(e,t,a){"use strict";var l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=a(298),r=a(218),u=a(26),s=a(89),o=a(98),d=l(a(0)),c=a(19),m=a(405),f=a(275),p=a(1714),_=a(1716),h=n(a(462));t.HiveList=()=>{const{buId:e,projectList:t}=d.useContext(f.ProjectsContext),{t:a}=c.useTranslation(),[l,n]=d.useState(!1),[g,E]=d.useState(!1),[b,v]=d.useState(),[y,T]=d.useState(),[N,S]=d.useState(!1),[C,x]=d.useState([]),[w,I]=d.useState(null),L=s.useShowTotal(),O=d.useMemo(()=>{const t={buId:e,projectCode:b,tableName:y};return b&&delete t.buId,{pageCurrent:1,pageSize:1e4,pageFilter:t}},[b,y,e]),P=i.useChoicestTableList(O,"hive/meta/table/choicest/list"),M=m.useTableNameColumn(),k=d.useMemo(()=>[M,{title:a("中文名"),dataIndex:"tableNameZh",ellipsis:!0},{title:a("detail:资产负责人"),width:160,dataIndex:"ownerLabel",ellipsis:!0},{title:a("category:表最近更新时间"),width:180,dataIndex:"lastUpdateTimeLabel"},{title:a("category:加精时间"),width:170,dataIndex:"choicestTimeLabel"},{title:a("category:加精操作人"),width:160,dataIndex:"choicestUserLabel"},{title:a("common:操作"),dataIndex:"action",width:90,fixed:"right",render:(e,{tableId:t})=>d.default.createElement(u.Popconfirm,{title:a("message:确认将表移出精品表？"),onConfirm:async()=>{try{I(t),await r.v1CategoriesApi.removeChoicest([t]),x([]),I(null),await P.fetchData()}catch(e){I(null),u.message.error(e.message)}},okText:a("common:是"),cancelText:a("common:否")},d.default.createElement(u.Spin,{size:"small",spinning:t===w},d.default.createElement("span",{className:h.default.actionRemove},a("common:移出"))))}],[w,a,P,M]);return d.default.createElement(d.default.Fragment,null,d.default.createElement("div",{className:h.default.filterWrapper},d.default.createElement(u.Form,{layout:"inline",className:h.default.filter},d.default.createElement(u.Form.Item,{label:a("category:项目")},d.default.createElement(u.Select,{value:b,allowClear:!0,onChange:e=>v(e)},t.map(e=>d.default.createElement(u.Select.Option,{key:e.name,value:e.code},e.name)))),d.default.createElement(u.Form.Item,{label:a("category:表名"),className:h.default.tableName},d.default.createElement(u.Input,{defaultValue:y,allowClear:!0,onChange:e=>T(e.target.value)}))),d.default.createElement(u.Button,{className:h.default.quickAdd,type:"primary",onClick:()=>n(!0)},a("category:搜索添加")),d.default.createElement(u.Button,{onClick:()=>E(!0)},a("category:本地导入"))),d.default.createElement("div",{className:h.default.actions},C.length?d.default.createElement(u.Popconfirm,{title:a("message:确认将表移出精品表？"),onConfirm:async()=>{try{S(!0),await r.v1CategoriesApi.removeChoicest(C),S(!1),x([]),await P.fetchData()}catch(e){S(!1),u.message.error(e.message)}},okText:a("common:是"),cancelText:a("common:否")},d.default.createElement(u.Button,{loading:N},a("category:批量移出精品"),"(",C.length,")")):d.default.createElement(u.Button,{disabled:!0},a("category:批量移出精品"))),d.default.createElement(u.Table,{rowKey:"tableId",rowSelection:{columnWidth:40,type:"checkbox",selectedRowKeys:C,onChange:e=>x(e)},loading:P.loading,columns:k,dataSource:P.tables,pagination:{...o.PAGE_CONFIG,showTotal:L}}),d.default.createElement(_.AddChoicestTableList,{visible:l,setVisible:n,fetchData:P.fetchData}),d.default.createElement(p.ImportTableList,{visible:g,setVisible:E,fetchData:P.fetchData}))}},function(e,t,a){"use strict";var l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=a(218),r=a(406),u=a(26),s=l(a(0)),o=a(19),d=a(275),c=n(a(462));t.ImportTableList=e=>{const{visible:t,setVisible:a}=e,{buId:l}=s.useContext(d.ProjectsContext),{t:n}=o.useTranslation(),[m]=u.useForm(),[f,p]=s.useState(!1),_=r.useAddChoicestResponse();return s.default.createElement(u.Modal,{title:n("category:本地导入"),centered:window.innerHeight<800,width:620,visible:t,wrapClassName:c.default.importTable,afterClose:()=>m.resetFields(),onCancel:()=>a(!1),okButtonProps:{loading:f},onOk:async()=>m.submit()},s.default.createElement(u.Form,{className:c.default.filter,form:m,initialValues:{importString:""},onFinish:async({importString:t})=>{p(!0);try{const a=await i.v1CategoriesApi.importTable({importString:t,buId:l});_(a),a.successCount>0&&(m.resetFields(),e.setVisible(!1),e.fetchData())}catch(e){u.message.error(e.message)}p(!1)}},s.default.createElement(u.Form.Item,{label:n("category:表名"),className:c.default.tableName,extra:s.default.createElement("div",null,n("category:添加时表名全匹配，表名之间使用英文分号;隔开")),name:"importString"},s.default.createElement(u.Input.TextArea,{placeholder:n("message:请输入"),autoSize:{minRows:5,maxRows:10},allowClear:!0}))))}},function(e,t,a){e.exports={"add-choicest-result-modal":"style_add-choicest-result-modal_29wR3",addChoicestResultModal:"style_add-choicest-result-modal_29wR3",intro:"style_intro_178YN",list:"style_list_3cRKu"}},function(e,t,a){"use strict";var l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=a(298),r=a(218),u=a(26),s=a(89),o=a(98),d=l(a(0)),c=a(19),m=a(648),f=a(649),p=a(405),_=a(650),h=a(275),g=n(a(1014));t.AddChoicestTableList=e=>{const{visible:t,setVisible:a}=e,{buId:l,projectList:n}=d.useContext(h.ProjectsContext),{t:E}=c.useTranslation(),[b]=u.useForm(),[v,y]=d.useState(),[T,N]=d.useState(),[S,C]=d.useState(!1),[x,w]=d.useState(!1),[I,L]=d.useState(1),[O,P]=d.useState(o.PAGE_SIZE),[M,k]=d.useState([]),D=s.useShowTotal(),A=d.useMemo(()=>{const e={buId:l,projectCode:v,tableName:T,withAdded:S};return v&&delete e.buId,{pageCurrent:I,pageSize:O,pageFilter:e}},[I,O,l,v,T,S]),j=i.useChoicestTableListForAdd(A),{total:F}=j,R=p.useTableNameColumn(),H=_.useTableNameZHColumn(),U=m.useDataOwnerColumn(),B=f.useStatusColumn(),q=d.useMemo(()=>[R,H,U,{title:E("common:创建时间"),width:150,dataIndex:"createTimeLabel"},B],[E,R,H,U,B]);return d.default.createElement(u.Modal,{title:E("category:快速添加精品表"),className:g.default.quickAddTableList,centered:window.innerHeight<800,width:820,visible:t,wrapClassName:g.default.quickAddTableList,afterClose:()=>{y(void 0),N(void 0),C(!1),L(1),b.setFieldsValue({tableName:void 0,projectCode:void 0,withAdded:!1})},onCancel:()=>a(!1),okButtonProps:{loading:x},onOk:async()=>{if(M.length){w(!0);try{await r.v1CategoriesApi.addChoicest(M),k([]),await j.fetchData(),e.fetchData(),a(!1),b.resetFields()}catch(e){u.message.error(e.message)}w(!1)}else u.message.warn(E("category:请先选择表"))}},d.default.createElement(u.Form,{layout:"inline",className:g.default.filter,form:b,initialValues:{projectCode:v,tableName:T,withAdded:S},onFinish:async({projectCode:e,tableName:t,withAdded:a})=>{L(1),N(t),y(e),C(a)}},d.default.createElement(u.Form.Item,{label:E("category:项目"),className:g.default.project,name:"projectCode"},d.default.createElement(u.Select,{placeholder:E("common:请选择"),allowClear:!0,onChange:b.submit},n.map(e=>d.default.createElement(u.Select.Option,{key:e.name,value:e.code},e.name)))),d.default.createElement(u.Form.Item,{label:E("category:表名"),className:g.default.tableName,name:"tableName"},d.default.createElement(u.Input,{placeholder:E("message:请输入表名，回车搜索"),allowClear:!0,onPressEnter:b.submit})),d.default.createElement(u.Form.Item,{label:"",className:g.default.added,name:"withAdded",valuePropName:"checked"},d.default.createElement(u.Checkbox,{onChange:b.submit},E("category:显示已添加")))),d.default.createElement(u.Table,{scroll:{y:450},rowKey:"tableId",rowSelection:{columnWidth:30,type:"checkbox",selectedRowKeys:M,onChange:e=>k(e),getCheckboxProps:e=>({disabled:e.added})},loading:j.loading,columns:q,dataSource:j.tables,pagination:{hideOnSinglePage:!0,...o.PAGE_CONFIG,pageSize:O,current:I,total:F,showTotal:D,onShowSizeChange:(e,t)=>P(t),onChange:e=>L(e)}}))}},function(e,t,a){"use strict";var l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=a(298),r=a(218),u=a(26),s=a(89),o=a(98),d=l(a(0)),c=a(19),m=a(405),f=a(275),p=a(1718),_=a(1719),h=n(a(462));t.StreamList=()=>{const{buId:e,projectList:t}=d.useContext(f.ProjectsContext),{t:a}=c.useTranslation(),[l,n]=d.useState(!1),[g,E]=d.useState(!1),[b,v]=d.useState(),[y,T]=d.useState(),[N,S]=d.useState(!1),[C,x]=d.useState([]),[w,I]=d.useState(null),L=s.useShowTotal(),O=d.useMemo(()=>{const t={buId:e,projectCode:b,tableName:y};return b&&delete t.buId,{pageCurrent:1,pageSize:1e4,pageFilter:t}},[b,y,e]),P=i.useChoicestTableList(O,"meta/stream/choicest/list"),M=m.useTableNameColumn(),k=d.useMemo(()=>[M,{title:a("中文名"),dataIndex:"tableNameZh",ellipsis:!0},{title:a("detail:资产负责人"),width:160,dataIndex:"ownerLabel",ellipsis:!0},{title:a("category:表最近更新时间"),width:180,dataIndex:"lastUpdateTimeLabel"},{title:a("category:加精时间"),width:170,dataIndex:"choicestTimeLabel"},{title:a("category:加精操作人"),width:160,dataIndex:"choicestUserLabel"},{title:a("common:操作"),dataIndex:"action",width:90,fixed:"right",render:(e,{tableId:t})=>d.default.createElement(u.Popconfirm,{title:a("message:确认将表移出精品表？"),onConfirm:async()=>{try{I(t),await r.v1CategoriesApi.removeStreamChoicest([t]),x([]),I(null),await P.fetchData()}catch(e){I(null),u.message.error(e.message)}},okText:a("common:是"),cancelText:a("common:否")},d.default.createElement(u.Spin,{size:"small",spinning:t===w},d.default.createElement("span",{className:h.default.actionRemove},a("common:移出"))))}],[w,a,P,M]);return d.default.createElement(d.default.Fragment,null,d.default.createElement("div",{className:h.default.filterWrapper},d.default.createElement(u.Form,{layout:"inline",className:h.default.filter},d.default.createElement(u.Form.Item,{label:a("category:项目")},d.default.createElement(u.Select,{value:b,allowClear:!0,onChange:e=>v(e)},t.map(e=>d.default.createElement(u.Select.Option,{key:e.name,value:e.code},e.name)))),d.default.createElement(u.Form.Item,{label:a("category:表名"),className:h.default.tableName},d.default.createElement(u.Input,{defaultValue:y,allowClear:!0,onChange:e=>T(e.target.value)}))),d.default.createElement(u.Button,{className:h.default.quickAdd,type:"primary",onClick:()=>n(!0)},a("category:搜索添加")),d.default.createElement(u.Button,{onClick:()=>E(!0)},a("category:本地导入"))),d.default.createElement("div",{className:h.default.actions},C.length?d.default.createElement(u.Popconfirm,{title:a("message:确认将表移出精品表？"),onConfirm:async()=>{try{S(!0),await r.v1CategoriesApi.removeStreamChoicest(C),S(!1),x([]),await P.fetchData()}catch(e){S(!1),u.message.error(e.message)}},okText:a("common:是"),cancelText:a("common:否")},d.default.createElement(u.Button,{loading:N},a("category:批量移出精品"),"(",C.length,")")):d.default.createElement(u.Button,{disabled:!0},a("category:批量移出精品"))),d.default.createElement(u.Table,{rowKey:"tableId",rowSelection:{columnWidth:40,type:"checkbox",selectedRowKeys:C,onChange:e=>x(e)},loading:P.loading,columns:k,dataSource:P.tables,pagination:{...o.PAGE_CONFIG,showTotal:L}}),d.default.createElement(_.AddChoicestTableList,{visible:l,setVisible:n,fetchData:P.fetchData}),d.default.createElement(p.ImportTableList,{visible:g,setVisible:E,fetchData:P.fetchData}))}},function(e,t,a){"use strict";var l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=a(218),r=a(406),u=a(26),s=l(a(0)),o=a(19),d=a(275),c=n(a(462));t.ImportTableList=e=>{const{visible:t,setVisible:a}=e,{buId:l}=s.useContext(d.ProjectsContext),{t:n}=o.useTranslation(),[m]=u.useForm(),[f,p]=s.useState(!1),_=r.useAddChoicestResponse();return s.default.createElement(u.Modal,{title:n("category:本地导入"),centered:window.innerHeight<800,width:620,visible:t,wrapClassName:c.default.importTable,afterClose:()=>m.resetFields(),onCancel:()=>a(!1),okButtonProps:{loading:f},onOk:async()=>m.submit()},s.default.createElement(u.Form,{className:c.default.filter,form:m,initialValues:{importString:""},onFinish:async({importString:t})=>{p(!0);try{const a=await i.v1CategoriesApi.importTableStream({importString:t,buId:l});_(a),a.successCount>0&&(m.resetFields(),e.setVisible(!1),e.fetchData())}catch(e){u.message.error(e.message)}p(!1)}},s.default.createElement(u.Form.Item,{label:n("category:表名"),className:c.default.tableName,extra:s.default.createElement("div",null,n("category:添加时表名全匹配，表名之间使用英文分号;隔开")),name:"importString"},s.default.createElement(u.Input.TextArea,{placeholder:n("message:请输入"),autoSize:{minRows:5,maxRows:10},allowClear:!0}))))}},function(e,t,a){"use strict";var l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=a(298),r=a(218),u=a(26),s=a(89),o=a(98),d=l(a(0)),c=a(19),m=a(648),f=a(649),p=a(405),_=a(650),h=a(275),g=n(a(1014));t.AddChoicestTableList=e=>{const{visible:t,setVisible:a}=e,{buId:l,projectList:n}=d.useContext(h.ProjectsContext),{t:E}=c.useTranslation(),[b]=u.useForm(),[v,y]=d.useState(),[T,N]=d.useState(),[S,C]=d.useState(!1),[x,w]=d.useState(!1),[I,L]=d.useState(1),[O,P]=d.useState(o.PAGE_SIZE),[M,k]=d.useState([]),D=s.useShowTotal(),A=d.useMemo(()=>{const e={buId:l,projectCode:v,tableName:T,withAdded:S};return v&&delete e.buId,{pageCurrent:I,pageSize:O,pageFilter:e}},[I,O,l,v,T,S]),j=i.useChoicestTableListForAddStream(A),{total:F}=j,R=p.useTableNameColumn(),H=_.useTableNameZHColumn(),U=m.useDataOwnerColumn(),B=f.useStatusColumn(),q=d.useMemo(()=>[R,H,U,{title:E("common:创建时间"),width:150,dataIndex:"createTimeLabel"},B],[E,R,H,U,B]);return d.default.createElement(u.Modal,{title:E("category:快速添加精品表"),className:g.default.quickAddTableList,centered:window.innerHeight<800,width:820,visible:t,wrapClassName:g.default.quickAddTableList,afterClose:()=>{y(void 0),N(void 0),C(!1),L(1),b.setFieldsValue({tableName:void 0,projectCode:void 0,withAdded:!1})},onCancel:()=>a(!1),okButtonProps:{loading:x},onOk:async()=>{if(M.length){w(!0);try{await r.v1CategoriesApi.addStreamChoicest(M),k([]),await j.fetchData(),e.fetchData(),a(!1),b.resetFields()}catch(e){u.message.error(e.message)}w(!1)}else u.message.warn(E("category:请先选择表"))}},d.default.createElement(u.Form,{layout:"inline",className:g.default.filter,form:b,initialValues:{projectCode:v,tableName:T,withAdded:S},onFinish:async({projectCode:e,tableName:t,withAdded:a})=>{L(1),N(t),y(e),C(a)}},d.default.createElement(u.Form.Item,{label:E("category:项目"),className:g.default.project,name:"projectCode"},d.default.createElement(u.Select,{placeholder:E("common:请选择"),allowClear:!0,onChange:b.submit},n.map(e=>d.default.createElement(u.Select.Option,{key:e.name,value:e.code},e.name)))),d.default.createElement(u.Form.Item,{label:E("category:表名"),className:g.default.tableName,name:"tableName"},d.default.createElement(u.Input,{placeholder:E("message:请输入表名，回车搜索"),allowClear:!0,onPressEnter:b.submit})),d.default.createElement(u.Form.Item,{label:"",className:g.default.added,name:"withAdded",valuePropName:"checked"},d.default.createElement(u.Checkbox,{onChange:b.submit},E("category:显示已添加")))),d.default.createElement(u.Table,{scroll:{y:450},rowKey:"tableId",rowSelection:{columnWidth:30,type:"checkbox",selectedRowKeys:M,onChange:e=>k(e),getCheckboxProps:e=>({disabled:e.added})},loading:j.loading,columns:q,dataSource:j.tables,pagination:{hideOnSinglePage:!0,...o.PAGE_CONFIG,pageSize:O,current:I,total:F,showTotal:D,onShowSizeChange:(e,t)=>P(t),onChange:e=>L(e)}}))}},function(e,t,a){"use strict";var l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=a(218),r=a(259),u=a(26),s=l(a(0)),o=a(19),d=n(a(651));t.EditManagers=e=>{const{t:t}=o.useTranslation(),{buId:a}=e,[l,n]=s.useState(!1),[c,m]=s.useState(!1),[f,p]=s.useState(e.buManagers.map(e=>({key:e.account,value:e.name,label:[e.name,"(",e.account,")"]}))),[_,h]=s.useState([]);return s.useEffect(()=>{p(e.buManagers.map(e=>({key:e.account,value:e.account,label:[e.name,"(",e.account,")"]})))},[e.buManagers]),s.default.createElement(u.Modal,{maskClosable:!1,className:d.default.editManagers,title:t("category:编辑规范管理员"),visible:e.visible,onCancel:()=>e.setVisible(!1),okButtonProps:{loading:l},onOk:async()=>{n(!0);try{const t=f.map(e=>e.value),l=await i.v1CategoriesApi.updateBuManager({buId:a,list:t}),n=f.map(e=>({account:e.value,name:e.label[0]}));l&&e.setBuManagers(n),e.setVisible(!1)}catch(e){u.message.error(e.message)}n(!1)}},s.default.createElement(u.Select,{loading:e.loading,style:{width:"100%"},placeholder:t("message:请输入名字添加"),notFoundContent:c?s.default.createElement(u.Spin,{size:"small"}):s.default.createElement(u.Empty,{image:u.Empty.PRESENTED_IMAGE_SIMPLE}),showSearch:!0,value:f,mode:"multiple",labelInValue:!0,onSearch:async e=>{m(!0);const t=await r.v1CommonApi.searchStaff(e);h(t),m(!1)},onChange:e=>p(e),filterOption:()=>!0},_.map(e=>s.default.createElement(u.Select.Option,{key:e.account,value:e.account},e.name,"(",e.account,")"))))}},function(e,t,a){"use strict";var l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=a(298),r=a(218),u=a(26),s=l(a(0)),o=a(19),d=a(275),c=n(a(651));t.EditProjects=e=>{const{t:t}=o.useTranslation(),{projectList:a,loading:l,buOption:n,updateProjects:m}=s.useContext(d.ProjectsContext),[f,p]=s.useState(a.map(({code:e})=>e)),[_,h]=s.useState(!1),{buProjectOptions:g,buProjectOptionsLoading:E}=i.useBuProjectOptions(null==n?void 0:n.id);return s.useEffect(()=>p(a.map(({code:e})=>e)),[a]),s.default.createElement(u.Modal,{maskClosable:!1,className:c.default.editProjects,title:t("category:编辑作用项目"),visible:e.visible,onCancel:()=>e.setVisible(!1),okButtonProps:{loading:_},onOk:async()=>{h(!0);try{await r.v1CategoriesApi.updateBuProject({buId:null==n?void 0:n.id,list:f})&&await m(),e.setVisible(!1),e.update()}catch(e){u.message.error(e.message)}h(!1)}},s.default.createElement(u.Select,{dropdownClassName:c.default.selectSmall,notFoundContent:l||E?s.default.createElement(u.Spin,{size:"small"}):s.default.createElement(u.Empty,{image:u.Empty.PRESENTED_IMAGE_SIMPLE}),value:f,placeholder:t("message:请输入搜索"),mode:"multiple",onChange:e=>p(e),filterOption:(e,t)=>t.children[0].includes(e)||t.value.includes(e)},g.map(e=>s.default.createElement(u.Select.Option,{disabled:e.bindOtherUnit,key:e.code,value:e.code},e.name,e.bindOtherUnit?`(${t("category:已绑定")}${e.otherUnitName})`:""))))}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=a(652),i=a(1732),r=a(1734),u=l(a(0)),s=a(261),o=a(299),d=l(a(1736));t.Album=()=>u.default.createElement("div",{className:d.default.albumBody},u.default.createElement(o.AlbumListProvider,null,u.default.createElement(r.AlbumSearch,null),u.default.createElement(i.AlbumNav,null),u.default.createElement(n.AlbumListCard,{type:s.ALBUM_LIST_TYPE.SEARCH})))},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=a(472),r=a(30),u=a(176),s=l(a(2395)),o=l(a(118));a(1011);const d=a(26),c=n(a(0)),m=a(19),f=l(a(1724));t.UploadImage=({onChange:e,initValue:t})=>{const{t:a}=m.useTranslation(),[l,n]=c.useState(!1),[p,_]=c.useState(t),[h,g]=c.useState(""),E={name:"file",action:"/dataMap/api/web/v1/album/uploadAvatar",showUploadList:!1,headers:{authorization:"authorization-text","HEADER-CSRF":r.getCookie("datadream_ticket")},onChange(t){var l,i;if(g(""),"uploading"!==t.file.status)return"done"===t.file.status?(n(!1),"0"!==(null===(l=t.file.response)||void 0===l?void 0:l.resultCode)?g(a(""+(null===(i=t.file.response)||void 0===i?void 0:i.returnMsg))):((e,t)=>{const a=new FileReader;a.addEventListener("load",()=>t(a.result)),a.readAsDataURL(e)})(t.file.originFileObj,a=>{var l;e(null===(l=t.file.response)||void 0===l?void 0:l.data),_(null==a?void 0:a.toString())})):void("error"===t.file.status&&(n(!1),g(a("接口500"))));n(!0)},async onPreview(e){let t=e.url;t||(t=await new Promise(t=>{const a=new FileReader;a.readAsDataURL(e.originFileObj),a.onload=()=>{var e;return t(null===(e=a.result)||void 0===e?void 0:e.toString())}}));const a=new Image;a.src=t,window.open(t).document.write(a.outerHTML)}};return c.default.createElement("div",{className:f.default.upload},c.default.createElement("div",{className:f.default.imgContainer},c.default.createElement(o.default,{spinning:l},c.default.createElement(s.default,{rotate:!0},c.default.createElement(u.Upload,Object.assign({},E),c.default.createElement("div",{className:f.default.imgCropContainer},c.default.createElement("img",{className:f.default.uploadPng,src:p,alt:"avatar"}),c.default.createElement("div",{className:f.default.iconBox},l?c.default.createElement(i.UploadOutlined,null):c.default.createElement(d.IconFont,{type:"icon-edit"})))))),c.default.createElement("div",null,c.default.createElement("div",{className:f.default.text},a("message:支持格式：png、jpg，大小不超过2MB")),h&&c.default.createElement("div",{className:"error"},h))))}},function(e,t,a){e.exports={"class-btn":"style_class-btn_38AOO",classBtn:"style_class-btn_38AOO","img-container":"style_img-container_2yIYO",imgContainer:"style_img-container_2yIYO",text:"style_text_2u8zJ","img-crop-container":"style_img-crop-container_1ddb6",imgCropContainer:"style_img-crop-container_1ddb6","icon-box":"style_icon-box_HRXs0",iconBox:"style_icon-box_HRXs0","upload-png":"style_upload-png_2QtUb",uploadPng:"style_upload-png_2QtUb",explain:"style_explain_121cY",upload:"style_upload_1N8Iz"}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=a(166),r=l(a(4)),u=a(26),s=a(261),o=a(299),d=n(a(0)),c=a(19),m=a(143),f=a(1726),p=a(1727),_=a(1015),h=a(1016),g=a(1017),E=l(a(654));t.CardItem=e=>{const t=m.useHistory(),{item:a,type:l,editAlbum:n,updateList:b}=e,{t:v}=c.useTranslation(),{dispatchFilter:y}=d.useContext(o.AlbumDispatchContext),[T,N]=d.useState(!1),S=l===s.ALBUM_LIST_TYPE.MY_SELF,C=d.useMemo(()=>!a.isPublic&&!S,[S,a]);return l!==s.ALBUM_LIST_TYPE.SEARCH||a.isPublic?d.default.createElement(u.Card,{hoverable:!0,onMouseMove:()=>N(!0),onMouseLeave:()=>N(!1),key:a.id},s.ALBUM_LIST_TYPE.MY_FOLLOW===l&&d.default.createElement("div",{className:E.default.execIcon,style:{display:T?"block":"none"}},d.default.createElement(f.CancelFollowIcon,{albumId:a.id,onSuccess:()=>{y({type:s.ALBUM_ACTION_TYPES.RESET})}})),S&&d.default.createElement("div",{className:r.default({[E.default.openSign]:!0,[E.default.notPublic]:!a.isPublic})},a.isPublic?v("已开放"):v("未开放")),S&&d.default.createElement("div",{className:E.default.execIcon,style:{display:T?"block":"none"}},d.default.createElement(u.IconFont,{onClick:e=>{e.stopPropagation(),n(a)},type:"icon-edit-circle"}),d.default.createElement(p.DeleteAlbumIcon,{albumId:a.id,onSuccess:()=>{y({type:s.ALBUM_ACTION_TYPES.RESET})}})),d.default.createElement("div",{className:r.default(E.default.itemContent,{[E.default.isGray]:C}),onClick:()=>{(a.isPublic||S)&&t.push({pathname:"/album/detail",search:"?albumId="+a.id})}},d.default.createElement("div",{className:r.default(E.default.itemImg)},d.default.createElement("img",{src:a.avatar,alt:a.name})),d.default.createElement("div",{className:E.default.itemMsg},C?d.default.createElement(u.Tooltip,{title:v("此专辑已被管理员设置为未开放状态，暂无权限查看专辑内的信息")},d.default.createElement("div",null,d.default.createElement("h3",{className:E.default.title},a.name),d.default.createElement("p",{className:E.default.desc},a.comment))):d.default.createElement(d.default.Fragment,null,d.default.createElement(u.Tooltip,{placement:"topLeft",title:a.name},d.default.createElement("h3",{className:E.default.title},a.name)),d.default.createElement(u.Tooltip,{placement:"topLeft",title:a.comment},d.default.createElement("p",{className:E.default.desc},a.comment))),d.default.createElement("div",{className:E.default.tag},d.default.createElement(u.Tag,null,d.default.createElement(u.IconFont,{type:"icon-table-active"})," ",a.tableCount," ",v("message:张表"))),d.default.createElement("div",{className:E.default.userMsg},d.default.createElement("span",{className:E.default.name},a.creator.name),d.default.createElement("span",{className:E.default.updateTimer},v("更新于"),": ",i.humanDate(a.modifyTime,"YYYY-MM-DD HH:mm"))))),d.default.createElement("div",{className:E.default.itemFooter},d.default.createElement("span",{className:E.default.footerItem},d.default.createElement(g.ShareIcon,{albumId:a.id})),d.default.createElement("span",{className:E.default.footerItem},d.default.createElement(u.IconFont,{type:"icon-page-views"})," ",a.viewCount),d.default.createElement("span",{className:E.default.footerItem},d.default.createElement(_.FollowIcon,{followed:a.followed,albumId:a.id,onSuccess:()=>{if(a.followed)return b(a.id,{followCount:a.followCount-1,followed:!1});b(a.id,{followed:!0,followCount:a.followCount+1})}}," ",a.followCount)),d.default.createElement("span",{className:E.default.footerItem},d.default.createElement(h.LikeIcon,{liked:a.liked,albumId:a.id,onSuccess:()=>{if(a.liked)return b(a.id,{likeCount:a.followCount-1,liked:!1});b(a.id,{liked:!0,likeCount:a.likeCount+1})}}," ",a.likeCount)))):null}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=a(174),i=a(26),r=l(a(0)),u=a(19);t.CancelFollowIcon=e=>{const{t:t}=u.useTranslation();return r.default.createElement(i.IconFont,{onClick:a=>{a.stopPropagation(),i.Modal.confirm({title:t("message:确定取消关注该专辑吗？"),content:t("message:取消关注后，专辑会从页面中移除。"),onOk:()=>{n.AlbumApi.cancelFollowAlbum(e.albumId).then(()=>{var a;i.message.success(t("message:取消成功")),null===(a=e.onSuccess)||void 0===a||a.call(e)}).catch(e=>{i.message.error(e.message)})}})},type:"icon-yishoucang"})}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=a(174),i=a(26),r=l(a(0)),u=a(19);t.DeleteAlbumIcon=e=>{const{t:t}=u.useTranslation();return r.default.createElement(i.IconFont,{onClick:a=>{a.stopPropagation(),i.Modal.confirm({title:t("message:确定删除该专辑吗？"),content:t("message:删除专辑后不可恢复，你还要删除吗？"),okButtonProps:{danger:!0},onOk:()=>{n.AlbumApi.deleteDetail(e.albumId).then(()=>{var a;i.message.success(t("message:删除成功")),null===(a=e.onSuccess)||void 0===a||a.call(e)}).catch(e=>{i.message.error(e.message)})}})},type:"icon-delete-circle"})}},,function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=a(176),i=a(261),r=l(a(0)),u=a(19),s=a(143),o=l(a(654));t.AlbumListEmpty=e=>{const{t:t}=u.useTranslation(),a=s.useHistory();return r.default.createElement("div",{className:o.default.listEmpty},r.default.createElement("div",{className:o.default.emptyImg}),e.type===i.ALBUM_LIST_TYPE.MY_FOLLOW?r.default.createElement(r.default.Fragment,null,r.default.createElement("p",null,t("message:您还没有关注任何专辑，去专辑列表页看看吧")),r.default.createElement("p",null,r.default.createElement(n.Button,{type:"primary",onClick:()=>{a.push({pathname:"/album"})}},t("message:前往专辑列表页")))):r.default.createElement(r.default.Fragment,null,r.default.createElement("p",null,t("message:您拥有的专辑列表为空， 赶紧新建吧")),r.default.createElement("p",null,r.default.createElement(n.Button,{type:"primary",onClick:e.showEdit},t("common:新建专辑")))))}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const l=a(174),n=a(261),i=a(299),r=a(0);t.useFetchAlbumList=e=>{const[t,a]=r.useState(null),[u,s]=r.useState([]),[o,d]=r.useState(!1),[c,m]=r.useState(""),f=r.useContext(i.AlbumStateContext),{pageFilter:p}=f,{setPageCurrent:_}=r.useContext(i.AlbumDispatchContext),h=r.useCallback(async t=>{if(!(f.pageCurrent<1)){d(!0);try{let i=[],r=0;const o={...f,pageCurrent:t};switch(e){case n.ALBUM_LIST_TYPE.SEARCH:const e=await l.AlbumApi.searchAlbum(o);i=e.records,r=e.total;break;case n.ALBUM_LIST_TYPE.MY_SELF:const t=await l.AlbumApi.mySelfAlbum(o);i=t.records,r=t.total;break;case n.ALBUM_LIST_TYPE.MY_FOLLOW:const a=await l.AlbumApi.myFollowAlbum(o);i=a.records,r=a.total}s(u.concat(i)),a(r)}catch(e){m(e.message)}d(!1)}},[u,f,e]);return r.useEffect(()=>{(async()=>{d(!0);const t={pageFilter:p,pageCurrent:1,pageSize:9};_(1);try{let i=[],r=0;switch(e){case n.ALBUM_LIST_TYPE.SEARCH:const e=await l.AlbumApi.searchAlbum(t);i=e.records,r=e.total;break;case n.ALBUM_LIST_TYPE.MY_SELF:const a=await l.AlbumApi.mySelfAlbum(t);i=a.records,r=a.total;break;case n.ALBUM_LIST_TYPE.MY_FOLLOW:const u=await l.AlbumApi.myFollowAlbum(t);i=u.records,r=u.total}s(i),a(r)}catch(e){m(e.message)}d(!1)})()},[p,_,e]),{total:t,albumCardsList:u,fetchAlbumLoading:o,fetchAlbumList:h,albumListErrMsg:c}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const l=a(174),n=a(299),i=a(0);t.useTagList=()=>{const[e,t]=i.useState(""),[a,r]=i.useState([]),[u,s]=i.useState(!1),{pageFilter:o}=i.useContext(n.AlbumStateContext);return i.useEffect(()=>{const e={keyword:o.keyword,tagIdList:o.tagIdList,tagList:o.tagList};(async()=>{s(!0);try{await l.AlbumApi.aggregationAlbum(e).then(e=>{r(e.filter((e,t)=>t<=50))})}catch(e){t(e.message)}s(!1)})()},[o]),{tagList:a,tagListErrMsg:e,fetchTagsLoading:u}}},function(e,t,a){"use strict";var l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=a(176),r=a(26),u=a(261),s=a(299),o=l(a(0)),d=a(19),c=a(653),m=n(a(1733)),{TabPane:f}=i.Tabs;t.AlbumNav=()=>{const{t:e}=d.useTranslation(),[t,a]=o.useState(!1),{dispatchFilter:l}=o.useContext(s.AlbumDispatchContext);return o.default.createElement(o.default.Fragment,null,o.default.createElement("div",{className:m.default.albumNav},o.default.createElement("div",{className:m.default.tabsWrapper},o.default.createElement(i.Tabs,{defaultActiveKey:u.ALBUM_SORT_TYPES.COMPOSITE,onChange:e=>{l({type:u.ALBUM_ACTION_TYPES.UPDATE_SORT,payload:e})}},o.default.createElement(f,{tab:e("detail:全部专辑"),key:u.ALBUM_SORT_TYPES.COMPOSITE}),o.default.createElement(f,{tab:e("detail:最新的"),key:u.ALBUM_SORT_TYPES.NEWEST}),o.default.createElement(f,{tab:e("detail:最热的"),key:u.ALBUM_SORT_TYPES.HOTTEST}))),o.default.createElement("div",{className:m.default.options,onClick:()=>{a(!0)}},o.default.createElement(r.IconFont,{type:"icon-add-white"}),o.default.createElement("span",null," ",e("common:新建专辑")," "))),o.default.createElement(c.AlbumCreate,{visible:t,setVisible:a}))}},function(e,t,a){e.exports={"album-nav":"index_album-nav_2uzls",albumNav:"index_album-nav_2uzls","tabs-wrapper":"index_tabs-wrapper_pw8n5",tabsWrapper:"index_tabs-wrapper_pw8n5",options:"index_options_33DjC",span:"index_span_3SY99"}},function(e,t,a){"use strict";var l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=a(30),r=a(26),u=a(261),s=a(299),o=l(a(0)),d=a(19),c=n(a(1735)),{Search:m}=r.Input;t.AlbumSearch=()=>{const{t:e}=d.useTranslation(),[t,a]=o.useState(i.getQuery("keyword")||null),{dispatchFilter:l}=o.useContext(s.AlbumDispatchContext);return o.default.createElement("div",{className:c.default.searchWrapper},o.default.createElement("div",{className:c.default.searchBox},o.default.createElement("div",{className:c.default.searchInput},o.default.createElement(m,{placeholder:e("message:可输入专辑名称/描述/专辑内表名进行搜索"),defaultValue:t,allowClear:!0,onSearch:e=>{a(e),i.updateQuery({keyword:e}),l({type:u.ALBUM_ACTION_TYPES.UPDATE_KEYWORD,payload:e})},enterButton:e("common:搜索专辑")}))))}},function(e,t,a){e.exports={"search-wrapper":"index_search-wrapper_1I5FQ",searchWrapper:"index_search-wrapper_1I5FQ","search-box":"index_search-box_3dZRg",searchBox:"index_search-box_3dZRg","search-input":"index_search-input_21_US",searchInput:"index_search-input_21_US","search-tip":"index_search-tip_k7gac",searchTip:"index_search-tip_k7gac","list-wrapper":"index_list-wrapper_l1iGx",listWrapper:"index_list-wrapper_l1iGx","search-all":"index_search-all_1dQv1",searchAll:"index_search-all_1dQv1",list:"index_list_2mxXn",item:"index_item_UDUZ8",label:"index_label_daAnO",highlighter:"index_highlighter_13UhY",value:"index_value_mItO2",selected:"index_selected_1cNUS"}},function(e,t,a){e.exports={"album-body":"index_album-body_2O9hV",albumBody:"index_album-body_2O9hV"}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=l(a(1738)),i=l(a(2e3)),r=l(a(0)),u=a(364),s=l(a(2005));t.AlbumDetail=()=>r.default.createElement("div",{style:{minWidth:"1280px"}},r.default.createElement(u.AlbumDetailProvider,null,r.default.createElement(i.default,null),r.default.createElement("div",{className:s.default.albumDetailContent},r.default.createElement("div",{className:s.default.content},r.default.createElement(n.default,null)))))},function(e,t,a){"use strict";var l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=a(176),r=a(363),u=a(364),s=l(a(0)),o=a(19),d=a(1739),c=a(1757),m=a(326),f=n(a(522)),{TabPane:p}=i.Tabs;t.default=()=>{const{t:e}=o.useTranslation(),{errorMessage:t}=s.useContext(u.AlbumDetailContext);return t?s.default.createElement("div",{className:f.default.err},s.default.createElement("div",{className:"error"},t)):s.default.createElement(m.AlbumTableListProvider,null,s.default.createElement("div",{className:f.default.albumDetailContent},s.default.createElement(i.Tabs,{className:(f.default.detailTabs,"tabs-custom-light")},s.default.createElement(p,{tab:s.default.createElement("span",{className:"nav-text"},e("message:专辑内容")),key:r.ALBUM_DETAIL_TABS.CONTENT},s.default.createElement(d.AlbumContent,null)),s.default.createElement(p,{tab:s.default.createElement("span",{className:"nav-text"},e("message:专辑说明")),key:r.ALBUM_DETAIL_TABS.DESC},s.default.createElement(c.AlbumDescription,null)))))}},function(e,t,a){"use strict";var l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=a(176),r=a(363),u=l(a(0)),s=a(19),o=a(1740),d=a(326),c=n(a(522)),{TabPane:m}=i.Tabs;t.AlbumContent=()=>{const{t:e}=s.useTranslation(),{setTableType:t}=u.useContext(d.AlbumTableListDispatchContext);return u.default.createElement("div",{className:c.default.albumContent},u.default.createElement(i.Tabs,{onChange:e=>{t(e)}},u.default.createElement(m,{tab:u.default.createElement("span",{className:"nav-text"},e("user:Hive表")),key:r.ALBUM_TABLE_TYPE.OFFLINE}),u.default.createElement(m,{tab:u.default.createElement("span",{className:"nav-text"},e("user:实时表")),key:r.ALBUM_TABLE_TYPE.STREAM})),u.default.createElement(o.AlbumContentList,null))}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=l(a(129)),r=a(30),u=a(166),s=a(1741),o=a(1743),d=a(1744),c=l(a(1746)),m=l(a(1747)),f=a(646),p=l(a(1748)),_=a(26),h=a(89),g=a(148),E=a(363),b=a(364),v=n(a(0)),y=a(19),T=a(117),N=a(103),S=a(326),C=l(a(522));t.AlbumContentList=()=>{const{t:e}=y.useTranslation(),t=(r.getQuery("albumId"),h.useShowTotal()),{isAdmin:a}=v.useContext(b.AlbumDetailContext),{tableList:l,total:n,loading:x,pageSize:w,pageCurrent:I,fetchTableList:L,tableType:O}=v.useContext(S.AlbumTableListStateContext),{updateList:P}=v.useContext(S.AlbumGroupDispatchContext),{setPageCurrent:M,setPageSize:k,setProjectCode:D,setTableName:A}=v.useContext(S.AlbumTableListDispatchContext),[j,F]=v.useState(!1),[R,H]=v.useState(!1),[U,B]=v.useState(!1),[q,z]=v.useState(!1),[Q,V]=v.useState(!1),[G,Y]=v.useState(null),W=v.useRef(null),$=v.useMemo(()=>{const t=[{title:e("category:表名"),fixed:"left",dataIndex:"tableName",render:(e,t)=>{const a=`${t.dbName}.${t.tableName}`,l=O===E.ALBUM_TABLE_TYPE.OFFLINE?"/detail":"/detail/stream",n=O===E.ALBUM_TABLE_TYPE.OFFLINE?"?uri="+N.generateUri(t.dbName,t.tableName):"?uri="+N.generateStreamUri(t.dbName,t.tableName);return v.default.createElement(_.Tooltip,{placement:"topLeft",title:a},v.default.createElement(T.Link,{to:{pathname:l,search:n,state:{referer:g.RefererType.INNER}}},a))},ellipsis:{showTitle:!1}},{title:e("common:中文名"),dataIndex:"tableNameZh",ellipsis:{showTitle:!1},render:e=>v.default.createElement(_.Tooltip,{placement:"topLeft",title:e},e)},{title:e("detail:表 owner"),dataIndex:"owner",align:"center",width:"104px",render:e=>v.default.createElement("div",null,e.name||"-")},{title:e("message:包含指标个数"),dataIndex:"metricCount",align:"center",width:"104px",render:e=>v.default.createElement("div",null,null!=e?e:"-")},{title:e("message:加入专辑备注"),dataIndex:"comment",ellipsis:{showTitle:!1},render:e=>v.default.createElement(_.Tooltip,{placement:"topLeft",title:e},e)},{title:e("message:加入时间"),dataIndex:"addToTime",render:e=>v.default.createElement("span",null,u.humanDate(e))}];return a&&t.push({title:e("common:操作"),key:"operate",fixed:"right",width:"188px",render:(t,a)=>{const l=O===E.ALBUM_TABLE_TYPE.OFFLINE?"/detail":"/detail/stream",n=O===E.ALBUM_TABLE_TYPE.OFFLINE?`?uri=${N.generateUri(a.dbName,a.tableName)}&tab=intro`:`?uri=${N.generateStreamUri(a.dbName,a.tableName)}&tab=intro`;return v.default.createElement(v.default.Fragment,null,v.default.createElement("a",{onClick:()=>{Y(a),H(!0)}},e("message:修改备注")),v.default.createElement("a",{style:{marginLeft:"15px"},onClick:()=>{Y(a),z(!0)}},e("message:移动至")),v.default.createElement(_.Dropdown,{overlay:()=>v.default.createElement(_.Menu,null,v.default.createElement(_.Menu.Item,null,v.default.createElement(T.Link,{to:{pathname:l,search:n}},e("detail:使用说明"))),v.default.createElement(_.Menu.Item,null,v.default.createElement("a",{onClick:()=>{Y(a),V(!0)}},e("message:移除")))),arrow:!0},v.default.createElement("a",{style:{marginLeft:"15px"},onClick:e=>e.preventDefault()},e("common:更多")," ",v.default.createElement(i.default,null))))}}),t},[a,e,O]);return v.default.createElement("div",{className:C.default.albumTableContentBox},v.default.createElement(p.default,null),v.default.createElement("div",{className:C.default.albumTableContent},v.default.createElement("div",{className:C.default.contentFilter},v.default.createElement("div",{className:C.default.left},v.default.createElement("span",null,e("category:项目"),"："),v.default.createElement(f.SelectProject,{updateProject:D,allowClear:!0})),v.default.createElement("div",{className:C.default.btnBox},v.default.createElement(_.Input.Search,{className:C.default.search,placeholder:e("message:输入表名搜索"),ref:W,onSearch:e=>A(e)}),a?v.default.createElement(v.default.Fragment,null,v.default.createElement(_.Button,{onClick:()=>{F(!0)}},e("message:搜索表加入专辑")),v.default.createElement(_.Button,{onClick:()=>{B(!0)}},e("message:本地批量导入"))):null)),v.default.createElement(_.Table,{style:{marginTop:"24px"},columns:$,dataSource:l,loading:x,rowKey:"tableName",scroll:{x:1300},pagination:{pageSize:w,current:I,total:n,showTotal:t,onShowSizeChange:(e,t)=>k(t),onChange:e=>M(e)}}),j&&v.default.createElement(s.AlbumAddTable,{visible:j,updateVisible:e=>{F(e)},onSuccess:()=>{L(),P()}}),q&&v.default.createElement(c.default,{visible:q,tableDetail:G,onCancel:()=>{z(!1)},onSuccess:()=>{L(),P()}}),Q&&v.default.createElement(m.default,{visible:Q,tableDetail:G,onCancel:()=>{V(!1)},onSuccess:()=>{L(),P()}}),v.default.createElement(o.UpdateTableComment,{visible:R,tableDetail:G,updateVisible:()=>{H(!1)},onSuccess:()=>{L()}}),U&&v.default.createElement(d.BatchImportTable,{visible:U,updateVisible:()=>{B(!1)},onSuccess:()=>{L(),P()}})))}},function(e,t,a){"use strict";var l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=a(30),r=a(166),u=a(174),s=a(646),o=a(326),d=a(26),c=a(89),m=l(a(0)),f=a(19),p=n(a(1742));t.AlbumAddTable=e=>{var t;const{t:a}=f.useTranslation(),{dataSource:l}=m.useContext(o.AlbumGroupStateContext),n=Number(i.getQuery("albumId")),{tableType:_,groupId:h}=m.useContext(o.AlbumTableListStateContext),g=c.useShowTotal(),[E]=d.Form.useForm(),[b,v]=m.useState(!1),[y,T]=m.useState(!1),[N,S]=m.useState(""),[C,x]=m.useState(""),[w,I]=m.useState(1),[L,O]=m.useState(10),[P,M]=m.useState(0),[k,D]=m.useState([]),[A,j]=m.useState([]),[F,R]=m.useState(!1),[H,U]=m.useState(!0),B=[{title:a("category:表名"),dataIndex:"tableName",key:"tableName",width:"200px",ellipsis:{showTitle:!1},render:(e,t)=>{const a=`${t.dbName}.${t.tableName}`;return m.default.createElement(d.Tooltip,{placement:"topLeft",title:a},m.default.createElement("span",null,a))}},{title:a("common:中文名"),dataIndex:"tableNameZh",key:"tableNameZh",ellipsis:{showTitle:!1},render:e=>m.default.createElement(d.Tooltip,{placement:"topLeft",title:e},e)},{title:a("detail:技术负责人"),dataIndex:"owner",key:"owner",render:e=>m.default.createElement("div",null,e.name||"-")},{title:a("common:创建时间"),width:155,dataIndex:"createTime",key:"createTime",render:e=>r.humanDate(e)},{title:a("common:状态"),dataIndex:"added",key:"added",render:e=>m.default.createElement("span",null,a(e?"category:已添加":"category:未添加"))}];return m.useEffect(()=>{if(!N)return;U(!0);(async()=>{try{const{total:e,records:t}=await u.AlbumApi.getTableToAddAlbum({pageCurrent:w,pageSize:L,pageFilter:{withAdded:b,albumId:n,tableType:_,projectCode:N,tableName:C,hasAuth:y}});M(e),D(t)}catch(e){d.message.error(e.message)}U(!1)})()},[n,y,w,L,N,C,_,b]),m.default.createElement(d.Drawer,{className:p.default.albumAddTab,title:a("message:搜索表加入专辑"),visible:e.visible,width:908,onClose:()=>e.updateVisible(!1),footer:m.default.createElement("div",{style:{textAlign:"right"}},m.default.createElement(d.Button,{onClick:()=>e.updateVisible(!1),style:{marginRight:8}},"取消"),m.default.createElement(d.Button,{loading:F,onClick:()=>{E.submit()},type:"primary"},"确定"))},m.default.createElement("div",{className:p.default.filter},m.default.createElement("span",{className:p.default.label},a("category:项目"),":"),m.default.createElement(s.SelectProject,{className:p.default.project,autoInitValue:!0,updateProject:S}),m.default.createElement("span",{className:p.default.label,style:{marginLeft:"24px"}},a("category:表名"),":"),m.default.createElement(d.Input.Search,{className:p.default.search,placeholder:a("message:输入表名搜索"),onSearch:e=>x(e)}),m.default.createElement(d.Checkbox,{defaultChecked:!1,onChange:e=>T(e.target.checked)},a("category:我有权限的表")),m.default.createElement(d.Checkbox,{defaultChecked:!1,onChange:e=>v(e.target.checked)},a("category:显示已添加"))),m.default.createElement(d.Table,{style:{marginTop:"24px"},rowKey:"uri",loading:H,rowSelection:{columnWidth:32,type:"checkbox",selectedRowKeys:A,onChange:e=>j(e),getCheckboxProps:e=>({disabled:!0===e.added})},columns:B,dataSource:k,pagination:{size:"small",pageSize:L,current:w,total:P,showTotal:g,onShowSizeChange:(e,t)=>O(t),onChange:e=>I(e)}}),m.default.createElement(d.Divider,null),m.default.createElement(d.Form,{form:E,className:p.default.selectForm,onFinish:t=>{A.length>0?(R(!0),u.AlbumApi.albumAddTab({albumId:n,groupId:t.groupId,uriList:A,comment:""}).then(()=>{d.message.success(a("detail:添加成功")),null==e||e.onSuccess(),e.updateVisible(!1)}).catch(e=>{d.message.error(e.message)}).finally(()=>{R(!1)})):d.message.info(a("category:请先选择表"))},initialValues:{groupId:h||(null===(t=l[0])||void 0===t?void 0:t.key)||void 0}},m.default.createElement(d.Form.Item,{className:p.default.selectAlbumLine,name:"groupId",label:a("message:选择分组"),rules:[{required:!0,message:a("common:请选择")}]},m.default.createElement(d.TreeSelect,{placeholder:a("common:请选择"),showSearch:!0,allowClear:!0,treeDefaultExpandAll:!0,treeData:l,treeNodeFilterProp:"title"}))))}},function(e,t,a){e.exports={"album-add-tab":"style_album-add-tab_jtWtF",albumAddTab:"style_album-add-tab_jtWtF",filter:"style_filter_2QLEq",label:"style_label_UXz_j",project:"style_project_15Oa4",search:"style_search_2XVpE","select-form":"style_select-form_pw_27",selectForm:"style_select-form_pw_27","select-album-line":"style_select-album-line_3lHs-",selectAlbumLine:"style_select-album-line_3lHs-"}},function(e,t,a){"use strict";var l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=a(30),i=a(176),r=a(174),u=l(a(0)),s=a(19),{TextArea:o}=i.Input;t.UpdateTableComment=e=>{const{t:t}=s.useTranslation(),a=Number(n.getQuery("albumId")),{tableDetail:l}=e,[d,c]=u.useState();u.useEffect(()=>{l&&c(l.comment)},[l]);return u.default.createElement(u.default.Fragment,null,l?u.default.createElement(i.Modal,{title:t("message:编辑专辑中的表"),visible:e.visible,onOk:()=>{r.AlbumApi.updateTableComment({albumId:a,uri:l.uri,comment:d}).then(()=>{i.message.success(t("catogary:修改成功")),null==e||e.onSuccess()}).catch(e=>{i.message.error(e.message)}).finally(()=>{e.updateVisible(!1)})},onCancel:()=>e.updateVisible(!1)},u.default.createElement("p",null,u.default.createElement("span",{style:{color:"#666"}},t("category:表名"),"： "),u.default.createElement("span",{style:{color:"#333"}},l.dbName,".",l.tableName)),u.default.createElement("span",{style:{color:"#666"}},t("message:给表添加我的备注")),u.default.createElement(o,{defaultValue:l.comment,style:{marginTop:"8px"},placeholder:t("message:请输入"),rows:4,value:d,onChange:e=>{c(e.target.value)}})):null)}},function(e,t,a){"use strict";var l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=a(30),r=a(176),u=a(174),s=l(a(0)),o=a(19),d=a(326),c=n(a(1745)),{TextArea:m}=r.Input;t.BatchImportTable=e=>{var t;const{dataSource:a}=s.useContext(d.AlbumGroupStateContext),{groupId:l}=s.useContext(d.AlbumTableListStateContext),{t:n}=o.useTranslation(),f=Number(i.getQuery("albumId")),[p]=r.Form.useForm();return s.default.createElement(s.default.Fragment,null,s.default.createElement(r.Modal,{title:n("category:本地导入"),visible:e.visible,onOk:()=>{p.validateFields().then(t=>{u.AlbumApi.importTable({albumId:f,groupId:t.groupId,importString:t.importString}).then(t=>{var a,l;(null===(a=t.failTableList)||void 0===a?void 0:a.length)>0?r.Modal.info({title:n("message:您已成功添加")+t.successCnt+n("message:张表")+","+t.failCnt+n("张表添加失败"),content:s.default.createElement("div",null,s.default.createElement("p",null,n("message:失败的表请确认表名正确")),s.default.createElement("div",{style:{height:"180px",overflow:"hidden",padding:"16px 0",background:"#f5f5f5"}},(null===(l=t.failTableList)||void 0===l?void 0:l.length)>0?s.default.createElement("ul",null,t.failTableList.map(e=>s.default.createElement("li",{key:e},e))):null)),onOk:()=>{e.onSuccess()}}):r.Modal.success({title:n("detail:添加成功"),content:n("message:您已成功添加")+t.successCnt+n("message:张表"),onOk:()=>{e.onSuccess()}})}).catch(e=>{r.message.error(e.message)}).finally(()=>{e.updateVisible(!1)})})},onCancel:()=>e.updateVisible(!1),destroyOnClose:!0},s.default.createElement(r.Form,Object.assign({form:p,className:c.default.albumCommonForm},{labelCol:{span:4}},{initialValues:{groupId:l||(null===(t=a[0])||void 0===t?void 0:t.key)||void 0}}),s.default.createElement(r.Form.Item,{label:n("message:输入表名")},s.default.createElement(r.Form.Item,{name:"importString",noStyle:!0},s.default.createElement(m,{rows:4,placeholder:n("message:请输入")})),s.default.createElement("p",{style:{marginTop:"8px",color:"#999"}},n("category:添加时表名全匹配，表名之间使用英文分号;隔开"))),s.default.createElement(r.Form.Item,{name:"groupId",label:n("message:选择分组"),rules:[{required:!0,message:n("common:请选择")}]},s.default.createElement(r.TreeSelect,{placeholder:n("common:请选择"),showSearch:!0,allowClear:!0,treeDefaultExpandAll:!0,treeData:a,treeNodeFilterProp:"title"})))))}},function(e,t,a){e.exports={"album-common-form":"index_album-common-form_12w09",albumCommonForm:"index_album-common-form_12w09"}},function(e,t,a){"use strict";var l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=a(30),i=a(174),r=a(26),u=l(a(0)),s=a(19),o=a(326);t.default=e=>{var t;const{visible:a,onCancel:l,tableDetail:d,onSuccess:c}=e,{t:m}=s.useTranslation(),[f]=r.Form.useForm(),p=n.getQuery("albumId"),{dataSource:_}=u.useContext(o.AlbumGroupStateContext),{groupId:h}=u.useContext(o.AlbumTableListStateContext),g=u.useCallback(async e=>{const t={albumId:p,groupId:e.groupId,uriList:[null==d?void 0:d.uri]};try{await i.AlbumApi.moveToAlbumGroup(t)&&(l(),c())}catch(e){r.message.error(e)}},[p,l,c,d]),E=u.useCallback(()=>{f.validateFields().then(e=>{g(e)}).catch()},[f,g]);return u.default.createElement(r.Modal,{visible:a,title:m("message:移动至"),onCancel:l,onOk:E,destroyOnClose:!0,maskClosable:!1},u.default.createElement(r.Form,{form:f,initialValues:{groupId:h||(null===(t=_[0])||void 0===t?void 0:t.key)||void 0}},u.default.createElement(r.Form.Item,{name:"groupId",label:m("message:选择新的分组"),rules:[{required:!0,message:m("common:请选择")}]},u.default.createElement(r.TreeSelect,{placeholder:m("common:请选择"),showSearch:!0,onSearch:e=>{},allowClear:!0,treeDefaultExpandAll:!0,treeData:_,treeNodeFilterProp:"title"}))))}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=a(30),i=a(174),r=a(26),u=l(a(0)),s=a(19);t.default=e=>{const{visible:t,tableDetail:a,onCancel:l,onSuccess:o}=e,{t:d}=s.useTranslation(),c=n.getQuery("albumId");return u.default.createElement(r.Modal,{title:d("message:移除"),visible:t,onOk:()=>{i.AlbumApi.removeTabFromAlbum({albumId:Number(c),uriList:[a.uri]}).then(()=>{r.message.success(d("message:移除成功")),l(),o()}).catch(e=>{r.message.error(e.message)})},onCancel:l},u.default.createElement("p",null,d("message:确认从专辑中移除该表？")))}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=l(a(332)),r=a(1018),u=l(a(4)),s=a(26),o=a(364),d=n(a(0)),c=a(19),m=a(103),f=a(326),p=l(a(1019)),_=l(a(1749)),h=a(1756),{TreeNode:g}=s.Tree;t.default=()=>{const[e,t]=d.useState([]),[a,l]=d.useState(!1),[n,E]=d.useState(null),[b,v]=d.useState(null),[y,T]=d.useState([]),{setCurrentMode:N,updateList:S}=d.useContext(f.AlbumGroupDispatchContext),{currentMode:C,dataSource:x,groupLoading:w,errorMessage:I}=d.useContext(f.AlbumGroupStateContext),{setGroupId:L}=d.useContext(f.AlbumTableListDispatchContext),{groupId:O}=d.useContext(f.AlbumTableListStateContext),{isAdmin:P}=d.useContext(o.AlbumDetailContext),{t:M}=c.useTranslation(),k=d.useRef(x);d.useEffect(()=>{var e;(!k.current&&x||!(null===(e=k.current)||void 0===e?void 0:e.length)&&x)&&t(h.getExtendKeys(x))},[x]),d.useEffect(()=>{T(x)},[x]);const D=d.useCallback(()=>{N(f.GroupMode.Read),S()},[S,N]),A=d.useCallback(a=>{N(f.GroupMode.Edit);const l=m.deepCopy(y),n=h.getCurrentItem(a,l);(null==n?void 0:n.children)||(n.children=[]);const i={title:"",key:m.uuid(),isAdd:!0,parentGroupId:a};if(n.children.unshift(i),T(l),!e.includes(a)){const l=[...e];l.push(a),t(l)}},[e,N,y]),j=d.useCallback(()=>{N(f.GroupMode.Edit);const e=m.deepCopy(y),t={title:"",key:m.uuid(),isAdd:!0};e.push(t),T(e)},[T,y,N]),F=d.useCallback(e=>{var t,a;const l=m.deepCopy(y),n=h.getParentMsg(e,l,!0);if(n){const l=null===(t=null==n?void 0:n.children)||void 0===t?void 0:t.findIndex(t=>t.key===e);null===(a=null==n?void 0:n.children)||void 0===a||a.splice(l,1)}else{const t=null==l?void 0:l.findIndex(t=>t.key===e);null==l||l.splice(t,1)}T(l)},[y]),R=d.useCallback(()=>{L(null)},[L]),H=e=>{D(),e===O&&R()},U=e=>null==e?void 0:e.map(e=>d.default.createElement(g,{title:d.default.createElement(_.default,{name:e.title,itemKey:e.key,tableCount:e.tableCount,streamTableCount:e.streamTableCount,isAdd:e.isAdd,parentGroupId:e.parentGroupId,level:e.level,treeData:y,deleteCallback:H,updateList:D,setCurrentLineKey:E,setDeleteVisible:l,setCurrentTableCount:v,handleAdd:A,handleItemDelete:F,isAdmin:P}),key:e.key},e.children&&e.children.length>0&&U(e.children)));return d.default.createElement("aside",{className:p.default.albumSliderGroup},d.default.createElement("h5",null,d.default.createElement("span",null,M("category:分类管理")),P&&(C===f.GroupMode.Edit?d.default.createElement("div",{className:u.default(p.default.addBtn,{[p.default.disabled]:C===f.GroupMode.Edit})},d.default.createElement(i.default,null),M("category:新建分组")):d.default.createElement("div",{className:p.default.addBtn,onClick:j},d.default.createElement(i.default,null),M("category:新建分组")))),P&&d.default.createElement("p",{className:p.default.titleTip},M("category:类目最大为3层，可将表加到对应类目下")),d.default.createElement(s.Button,{className:p.default.wholeBtn,onClick:R},M("category:查看全部")),d.default.createElement(s.Spin,{spinning:w},d.default.createElement(r.ErrMsg,{message:I},d.default.createElement(s.Tree,{expandedKeys:e,onExpand:e=>{t(e)},blockNode:!0,showLine:!0,className:p.default.sliderTree},U(y)))))}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=l(a(302)),r=l(a(303)),u=l(a(1750)),s=l(a(1753)),o=a(30),d=a(174),c=l(a(4)),m=a(26),f=a(363),p=n(a(0)),_=a(19),h=a(326),g=l(a(1019));t.default=e=>{const{name:t,updateList:a,itemKey:l,setDeleteVisible:n,setCurrentLineKey:E,tableCount:b,streamTableCount:v,setCurrentTableCount:y,handleAdd:T,isAdd:N,parentGroupId:S,handleItemDelete:C,level:x,treeData:w,isAdmin:I,deleteCallback:L}=e,[O,P]=p.useState(!1),[M,k]=p.useState(t),D=Number(o.getQuery("albumId")),{t:A}=_.useTranslation(),{setGroupId:j}=p.useContext(h.AlbumTableListDispatchContext),{groupId:F,tableType:R}=p.useContext(h.AlbumTableListStateContext),{setCurrentMode:H}=p.useContext(h.AlbumGroupDispatchContext),{currentMode:U}=p.useContext(h.AlbumGroupStateContext),B=p.useMemo(()=>O||N,[O,N]),q=p.useCallback(e=>{k(e.target.value)},[]),z=p.useCallback(()=>{H(h.GroupMode.Edit),P(!0)},[H]),Q=p.useCallback(()=>{if(w&&1===w.length&&w[0].key===l)return m.message.warning(A("category: 专辑中至少保留一个类目存在")),!1;m.Modal.confirm({title:A("category:确定删除该分组吗？"),icon:p.default.createElement(s.default,null),content:p.default.createElement(p.default.Fragment,null,A("category:该分组下包含"),b,A("category:张表"),"，",A("category:删除分组后表将移出该专辑，且类目及子目录不可恢复，请谨慎操作。")),okButtonProps:{danger:!0},onOk:()=>{const e={albumId:D,groupId:l};d.AlbumApi.deleteAlbumGroup(e).then(()=>{m.message.success(A("message:删除成功")),L(l)}).catch(e=>{m.message.error(e.message)})}})},[w,l,A,b,D,L]),V=p.useCallback(()=>{const e=U===h.GroupMode.Edit;return e?p.default.createElement(m.Tooltip,{title:A("category:请先完成编辑，新增等操作")},p.default.createElement("div",{className:c.default(g.default.toolLine,{[g.default.disabled]:e})},x<3&&p.default.createElement(p.default.Fragment,null,p.default.createElement(m.IconFont,{type:"icon-new"}),p.default.createElement(m.Divider,{type:"vertical"})),p.default.createElement(m.IconFont,{type:"icon-edit"}),p.default.createElement(m.Divider,{type:"vertical"}),p.default.createElement(m.IconFont,{type:"icon-delete"}))):p.default.createElement("div",{className:g.default.toolLine},x<3&&p.default.createElement(p.default.Fragment,null,p.default.createElement(m.IconFont,{onClick:()=>T(l),type:"icon-new"}),p.default.createElement(m.Divider,{type:"vertical"})),p.default.createElement(m.IconFont,{type:"icon-edit",onClick:z}),p.default.createElement(m.Divider,{type:"vertical"}),p.default.createElement(m.IconFont,{type:"icon-delete",onClick:Q}))},[U,A,z,Q,T,l,x]),G=p.useCallback(async()=>{const e={albumId:D,parentGroupId:S||0,name:M};try{await d.AlbumApi.addAlbumGroup(e)&&a()}catch(e){m.message.error(e.message)}},[D,M,S,a]),Y=p.useCallback(async()=>{const e={albumId:D,groupId:l,name:M};try{await d.AlbumApi.updateAlbumGroup(e)&&(P(!1),a())}catch(e){m.message.error(e.message)}},[D,M,l,a]),W=p.useCallback(()=>{if(!M)return m.message.warning(A("message:请输入内容")),!1;N?G():Y()},[M,N,A,G,Y]),$=p.useCallback(()=>{H(h.GroupMode.Read),N?C(l):P(!1)},[C,N,l,H]),K=p.useCallback(()=>{j(F&&l===F?null:l)},[F,l,j]);return p.default.createElement("div",{className:c.default(g.default.titleLine,{[g.default.selected]:F===l,[g.default.currentIsEdit]:B})},p.default.createElement("div",{className:g.default.titleLeft},B?p.default.createElement(m.Input,{size:"small",value:M,onChange:q,onPressEnter:W}):p.default.createElement("span",{onClick:K,className:g.default.nameLine},t,R===f.ALBUM_TABLE_TYPE.OFFLINE?!!b&&p.default.createElement(p.default.Fragment,null,"(",b,")"):!!v&&p.default.createElement(p.default.Fragment,null,"(",v,")")),B&&p.default.createElement(p.default.Fragment,null,p.default.createElement(i.default,{style:{color:"#59B368",fontSize:12},onClick:W}),p.default.createElement(r.default,{style:{color:"#E6505A",fontSize:12},onClick:$}))),I&&!B&&p.default.createElement(m.Popover,{overlayClassName:g.default.sliderGroupPopover,content:V()},p.default.createElement(u.default,{className:g.default.menuBtn})))}},,,,,,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getParentMsg=function e(t,a,l){let n;for(let i=0;i<a.length;i++){const r=a[i];r.children&&r.children.length>0&&(r.children.some(e=>e.key===t)?n=l?r:String(r.key):e(t,r.children)&&(n=e(t,r.children,l)))}return n},t.getCurrentItem=function e(t,a){if(!a)return null;for(let l=0;l<a.length;l++){const n=a[l];if(n.key===t)return n;if(n.children&&e(t,n.children))return e(t,n.children)}return null},t.generateList=e=>{if(!e)return[];let a=[];for(let l=0;l<e.length;l++){const n=e[l],{key:i}=n;a.push({key:i,title:String(i),hasChild:!!n.children}),n.children&&(a=a.concat(t.generateList(n.children)))}return a},t.getExtendKeys=e=>{if(!e)return[];let a=[];for(let l=0;l<e.length;l++){const n=e[l];n.children&&n.children.length>0&&(a.push(n.key),a=a.concat(t.getExtendKeys(n.children)))}return a}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=a(553),r=l(a(82)),u=a(174),s=a(26),o=a(276),d=n(a(365)),c=a(364),m=n(a(0)),f=a(19),p=l(a(734));a(740),a(741),a(742),a(743),a(744),a(745),a(746),a(747),a(748),a(749),a(750),a(751),a(752),a(753),a(754),a(755),a(756),a(757),a(758),a(759);const _=l(a(522));var h;!function(e){e.EDIT="edit",e.PREVIEW="preview"}(h||(h={})),t.AlbumDescription=()=>{const{detail:e,isAdmin:t}=m.useContext(c.AlbumDetailContext),{t:a}=f.useTranslation(),[l,n]=m.useState(""),[g,E]=m.useState(""),[b,v]=m.useState(""),[y,T]=m.useState(""),[N,S]=m.useState(!1),[C,x]=m.useState(!1),w=m.useRef(null),[I,L]=m.useState(!1),[O,P]=m.useState(h.EDIT);m.useEffect(()=>{n(g)},[g]),m.useEffect(()=>{E(e.description),v(e.descriptionType),T(e.descriptionType)},[e]),m.useLayoutEffect(()=>{I&&O!==h.PREVIEW&&b!==o.IntroContentType.HTML&&(w.current=d.editor.create(document.getElementById(_.default.markdownEditor),{value:l,language:"markdown",automaticLayout:!0,minimap:{enabled:!1}}))},[l,b,I,O]);const M=m.useCallback(()=>{var e,t;return null!==(t=null===(e=w.current)||void 0===e?void 0:e.getValue())&&void 0!==t?t:""},[]);return m.default.createElement("div",{className:_.default.tableIntro},I?m.default.createElement("div",{className:_.default.editActions},m.default.createElement(s.Radio.Group,{value:b,onChange:e=>{const t=()=>{const t=e.target.value;n(y===t?g:""),v(t),P(h.EDIT)};l?s.Modal.confirm({title:a("common:提示"),content:a("message:切换编辑器会清空当前的内容，是否继续？"),onOk:t}):t()}},m.default.createElement(s.Radio.Button,{value:o.IntroContentType.HTML},a("detail:富文本")),m.default.createElement(s.Radio.Button,{value:o.IntroContentType.MARKDOWN},a("Markdown"))),m.default.createElement(s.Radio.Group,{className:_.default.editPreview,value:O,onChange:e=>{const t=e.target.value;P(t),b===o.IntroContentType.MARKDOWN&&n(M())}},m.default.createElement(s.Radio.Button,{value:h.EDIT},a("detail:编辑")),m.default.createElement(s.Radio.Button,{value:h.PREVIEW},a("detail:预览")))):m.default.createElement("div",{className:_.default.actions},t?m.default.createElement(r.default,{type:"primary",disabled:N,onClick:()=>L(!0)},a("detail:编辑")):null),I?m.default.createElement(m.default.Fragment,null,O===h.EDIT?b===o.IntroContentType.HTML?m.default.createElement(i.Editor,{value:l,inline:!1,init:{relative_urls:!1,remove_script_host:!1,convert_urls:!0,contentCss:{"font-size":"12px"},height:560,menubar:!1,statusbar:!1,plugins:["advlist autolink lists link image charmap print preview anchor searchreplace visualblocks code fullscreen insertdatetime media table paste code"],toolbar:"formatselect bold italic backcolor alignleft aligncenter alignright alignjustify link bullist numlist outdent indent removeformat table undo redo",content_style:"body {font-size: 12px; color: #666; font-family: PingFangSC-Regular, -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'Helvetica Neue', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';}"},onEditorChange:e=>n(e)}):m.default.createElement("div",{id:_.default.markdownEditor,className:_.default.markdownEditor}):b===o.IntroContentType.HTML?m.default.createElement("div",{dangerouslySetInnerHTML:{__html:O===h.PREVIEW?l:g}}):m.default.createElement(p.default,{source:l}),m.default.createElement("div",{className:_.default.editFooterActions},m.default.createElement(r.default,{type:"primary",loading:C,onClick:async()=>{try{const t=b===o.IntroContentType.MARKDOWN?M():l;x(!0),await u.AlbumApi.updateDescription({albumId:e.id,content:t,type:b}),E(t),T(b)}catch(e){s.message.error(e.message)}L(!1),x(!1)}},a("common:提交")),m.default.createElement(r.default,{disabled:C,onClick:()=>{L(!1),n(g),v(y)}},a("common:取消")))):b===o.IntroContentType.HTML?m.default.createElement("div",{dangerouslySetInnerHTML:{__html:O===h.PREVIEW?l:g}}):m.default.createElement(p.default,{source:l}))}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=a(1015),r=a(1016),u=a(1017),s=a(653),o=l(a(2001)),d=a(26),c=a(364),m=n(a(0)),f=a(19),p=l(a(2004));t.default=()=>{const[e,t]=m.useState(!1),{detail:a,fetchDetail:l,isAdmin:n}=m.useContext(c.AlbumDetailContext),{t:_}=f.useTranslation();return m.default.createElement(m.default.Fragment,null,m.default.createElement("section",{className:p.default.albumDetailHeaderBox},m.default.createElement("div",{className:p.default.albumDetailHeader},a?m.default.createElement(m.default.Fragment,null,m.default.createElement("div",{className:p.default.imgBox},m.default.createElement("img",{src:a.avatar,alt:a.name})),m.default.createElement("div",{className:p.default.headerMsg},m.default.createElement("p",{className:p.default.title},a.name,n&&m.default.createElement("span",{className:p.default.titleEdit},m.default.createElement(d.IconFont,{type:"icon-edit-copy",onClick:()=>{t(!0)}}))),m.default.createElement("p",{className:p.default.message},m.default.createElement("span",{className:p.default.messageIcon},m.default.createElement(i.FollowIcon,{followed:a.followed,albumId:a.id,onSuccess:()=>{l()}}," ",a.followed?_("common:已关注"):_("common:关注"))),m.default.createElement("span",{className:p.default.messageIcon},m.default.createElement(r.LikeIcon,{liked:a.liked,albumId:a.id,onSuccess:()=>{l()}}," ",a.liked?_("detail:已点赞"):_("detail:点赞"))),m.default.createElement(u.ShareIcon,{albumId:a.id})),m.default.createElement("div",{className:p.default.msgCardBox},m.default.createElement("div",{className:p.default.item},m.default.createElement("span",{className:p.default.label},_("detail:总表数")),m.default.createElement("span",{className:p.default.span},a.tableCount)),m.default.createElement("div",{className:p.default.item},m.default.createElement("span",{className:p.default.label},_("common:关注")),m.default.createElement("span",{className:p.default.span},a.followCount)),m.default.createElement("div",{className:p.default.item},m.default.createElement("span",{className:p.default.label},_("common:浏览")),m.default.createElement("span",{className:p.default.span},a.viewCount)),m.default.createElement("div",{className:p.default.item},m.default.createElement("span",{className:p.default.label},_("detail:点赞")),m.default.createElement("span",{className:p.default.span},a.likeCount))),m.default.createElement(o.default,null))):null)),m.default.createElement(s.AlbumCreate,{visible:e,detailData:a,setVisible:t,afterSuccessExec:l}))}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=a(166),r=a(174),u=l(a(4)),s=a(2002),o=a(26),d=a(120),c=a(363),m=a(364),f=n(a(0)),p=a(19),_=l(a(2003));t.default=()=>{var e,t;const{t:a}=p.useTranslation(),{detail:l,fetchDetail:n,isAdmin:h,dispatchDetail:g}=f.useContext(m.AlbumDetailContext),[E,b]=f.useState(!1);return f.default.createElement("div",{className:_.default.detailSidebarBox},l?f.default.createElement(f.default.Fragment,null,f.default.createElement("div",{className:_.default.flexLine},f.default.createElement("div",{className:_.default.msgLine},f.default.createElement("span",{className:_.default.label},a("detail:专辑创建人"),"："),f.default.createElement(d.DChat,{user:l.creator})),f.default.createElement("div",{className:_.default.msgLine},f.default.createElement("span",{className:_.default.label},a("common:创建时间"),"："),i.humanDate(l.createTime)," "),f.default.createElement("div",{className:_.default.msgLine},f.default.createElement("span",{className:_.default.label},a("detail:最近更新时间"),"："),i.humanDate(l.modifyTime,"YYYY-MM-DD HH:mm")," "),l.isAlbumAdmin&&f.default.createElement("div",{className:_.default.msgLine},f.default.createElement("span",{className:_.default.label},a("common:是否开放"),"："),f.default.createElement(o.Switch,{checked:l.isPublic,disabled:!h,onChange:e=>{if(e)return o.Modal.confirm({title:a("确认开启专辑的开放状态吗？"),content:a("开启后，首页专辑列表和已关注列表中可查看到该专辑的信息"),onOk:async()=>{try{await r.AlbumApi.updatePublic(null==l?void 0:l.id,!0),g({type:c.ALBUM_ACTION_TYPES.UPDATE_PUBLIC,updatedPublicValue:e}),o.message.success("开放成功")}catch(e){o.message.error(e.message)}}});o.Modal.confirm({title:a("确认关闭专辑的开放状态吗？"),content:a("关闭后，首页专辑列表和已关注列表中将不可查看到该专辑的信息"),onOk:async()=>{try{await r.AlbumApi.updatePublic(null==l?void 0:l.id,!1),g({type:c.ALBUM_ACTION_TYPES.UPDATE_PUBLIC,updatedPublicValue:e}),o.message.success("关闭成功")}catch(e){o.message.error(e.message)}}})}})),f.default.createElement("div",{className:_.default.msgLine},f.default.createElement("span",{className:_.default.label},a("detail:专辑管理员"),"："),l.managerList.map(e=>e.name).join("、")," ",h?f.default.createElement(o.IconFont,{type:"icon-edit-copy",onClick:()=>{b(!0)}}):null)),f.default.createElement("div",{className:u.default(_.default.tagBox,_.default.msgLine)},f.default.createElement(f.default.Fragment,null,a("common:标签"),"："," ",null===(t=null===(e=l.tagList)||void 0===e?void 0:e.filter((e,t)=>t<=10))||void 0===t?void 0:t.map(e=>f.default.createElement(o.Tag,{key:e},e)))),f.default.createElement("div",{className:_.default.msgLine},f.default.createElement("span",{className:_.default.label},a("common:描述"),"："),l.comment," "),f.default.createElement(s.UpdateManager,{visible:E,detailData:l,updateVisible:e=>{b(e),n()}})):null)}},function(e,t,a){"use strict";var l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=a(176),i=a(174),r=a(259),u=a(26),s=l(a(0)),o=a(19);t.UpdateManager=e=>{const{t:t}=o.useTranslation(),{detailData:a}=e,[l,d]=s.useState(!1),[c,m]=s.useState(a.managerList?a.managerList:[]),[f,p]=s.useState([]);return s.useEffect(()=>{p(a.managerList.map(e=>e.account))},[a]),s.default.createElement(s.default.Fragment,null,s.default.createElement(n.Modal,{title:t("message:添加专辑管理员"),visible:e.visible,onOk:()=>{i.AlbumApi.updateManager({albumId:a.id,managerList:f}).then(()=>{n.message.success(t("category:修改成功"))}).catch(e=>{n.message.error(e.message)}).finally(()=>{e.updateVisible(!1)})},onCancel:()=>e.updateVisible(!1)},s.default.createElement(u.Select,{mode:"multiple",style:{width:"100%"},placeholder:t("message:请输入名字添加"),notFoundContent:l?s.default.createElement(u.Spin,{size:"small"}):null,filterOption:!1,allowClear:!0,value:f,onSearch:async e=>{if(!e)return void m([]);d(!0);const t=await r.v1CommonApi.searchStaff(e);m(t),d(!1)},onChange:e=>{p(e)}},c.map(({name:e,account:t})=>s.default.createElement(u.Select.Option,{key:t,value:t,label:e},e,"(",t,")")))))}},function(e,t,a){e.exports={"detail-sidebar-box":"index_detail-sidebar-box_3JOiE",detailSidebarBox:"index_detail-sidebar-box_3JOiE","flex-line":"index_flex-line_15D8u",flexLine:"index_flex-line_15D8u","tag-box":"index_tag-box_2Cxnk",tagBox:"index_tag-box_2Cxnk",title:"index_title_1KfSm","msg-card-box":"index_msg-card-box_2DmMp",msgCardBox:"index_msg-card-box_2DmMp",item:"index_item_3WwJu",label:"index_label_2JyHS",span:"index_span__IqaQ","msg-line":"index_msg-line_3wd4z",msgLine:"index_msg-line_3wd4z"}},function(e,t,a){e.exports={albumDetailHeaderBox:"index_albumDetailHeaderBox_2YJzz","msg-card-box":"index_msg-card-box_yJSCB",msgCardBox:"index_msg-card-box_yJSCB",item:"index_item_1Q2b6",label:"index_label_3F2yr",span:"index_span_2Rypl","album-detail-header":"index_album-detail-header_3PKVu",albumDetailHeader:"index_album-detail-header_3PKVu","img-box":"index_img-box_3RNxp",imgBox:"index_img-box_3RNxp","header-msg":"index_header-msg_3JLyN",headerMsg:"index_header-msg_3JLyN",title:"index_title_2KVC4","title-edit":"index_title-edit_1aLR3",titleEdit:"index_title-edit_1aLR3",message:"index_message_2Xd7P","message-icon":"index_message-icon_2_T3U",messageIcon:"index_message-icon_2_T3U","tag-box":"index_tag-box_2MVMz",tagBox:"index_tag-box_2MVMz"}},function(e,t,a){e.exports={"album-detail-content":"index_album-detail-content_PWgmk",albumDetailContent:"index_album-detail-content_PWgmk",slider:"index_slider_2qnFi",content:"index_content_yRkzF"}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=a(652),i=l(a(0)),r=a(19),u=a(261),s=a(299);t.FollowedAlbum=()=>{const{t:e}=r.useTranslation();return i.default.createElement(i.default.Fragment,null,i.default.createElement("div",{style:{height:"54px",lineHeight:"54px",background:"#fff",fontSize:"14px",color:"#333",paddingLeft:"25px"}},e("common:我关注的专辑")),i.default.createElement(s.AlbumListProvider,null,i.default.createElement(n.AlbumListCard,{type:u.ALBUM_LIST_TYPE.MY_FOLLOW})))}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=a(652),i=l(a(0)),r=a(19),u=a(261),s=a(299);t.MySelfAlbum=()=>{const{t:e}=r.useTranslation();return i.default.createElement(i.default.Fragment,null,i.default.createElement("div",{style:{height:"54px",lineHeight:"54px",background:"#fff",fontSize:"14px",color:"#333",paddingLeft:"25px"}},e("common:我拥有的专辑")),i.default.createElement(s.AlbumListProvider,null,i.default.createElement(n.AlbumListCard,{type:u.ALBUM_LIST_TYPE.MY_SELF})))}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=l(a(408)),r=a(233),u=a(30),s=a(553),o=l(a(161)),d=a(463),c=a(26),m=l(a(33)),f=n(a(0)),p=a(19),_=a(117),h=a(1163),g=l(a(2013)),E=a(1164),b=l(a(2016)),{Option:v}=c.Select;t.NotifyInitiate=()=>{const e=u.getQuery("name","string"),t=u.getQuery("uri","string"),{t:a}=p.useTranslation(),l=_.useHistory(),[n]=c.Form.useForm(),[y,T]=f.useState([]),[N,S]=f.useState(!1),[C,x]=f.useState(!1),[w,I,L]=r.useRequest(d.notifyApi.getListTypes),[O,P]=f.useState(!1),[M,k]=f.useState(g.default),[D,A]=f.useState(""),[j,F]=f.useState(""),[R,H]=f.useState(""),U=()=>{k(g.default),n.resetFields()},B=f.useMemo(()=>t,[t]);f.useEffect(()=>{A(B)},[B]);const q=[{key:"directDownStreamOwners",name:a("notify:直接下游负责人"),dchatNotify:M.directDownStreamOwners.dchatNotify,emailNotify:M.directDownStreamOwners.emailNotify,failedCount:M.directDownStreamOwners.failedCount,userCount:M.directDownStreamOwners.userCount,waitingCount:M.directDownStreamOwners.waitingCount},{key:"indirectDownStreamOwners",name:a("notify:间接下游节点负责人"),dchatNotify:M.indirectDownStreamOwners.dchatNotify,emailNotify:M.indirectDownStreamOwners.emailNotify,failedCount:M.indirectDownStreamOwners.failedCount,userCount:M.indirectDownStreamOwners.userCount,waitingCount:M.indirectDownStreamOwners.waitingCount},{key:"hasAuthUsers",name:a("notify:有权使用当前节点的人"),dchatNotify:M.hasAuthUsers.dchatNotify,emailNotify:M.hasAuthUsers.emailNotify,failedCount:M.hasAuthUsers.failedCount,userCount:M.hasAuthUsers.userCount,waitingCount:M.hasAuthUsers.waitingCount},{key:"focusUsers",name:a("notify:当前节点关注的人"),dchatNotify:M.focusUsers.dchatNotify,emailNotify:M.focusUsers.emailNotify,failedCount:M.focusUsers.failedCount,userCount:M.focusUsers.userCount,waitingCount:M.focusUsers.waitingCount}];f.useEffect(()=>{if(!D)return;x(!0);(async()=>{try{const e=await d.notifyApi.getTableTipDetail(D);k(e),x(!1)}catch(e){c.message.error(e.message),x(!1)}})()},[D]);const z=e=>{P(e.visible),H(e.dependencyType)};if(!I&&L)return f.default.createElement("div",{className:"error"},L);if(null==w)return f.default.createElement(f.default.Fragment,null);const Q=[{title:a("notify:类型"),dataIndex:"name",key:"directDownStreamOwners"},{title:a("notify:人数"),dataIndex:"userCount",key:"userCount"},{title:a("notify:通知方式"),dataIndex:"key",render:(e,t)=>f.default.createElement("div",{className:b.default.fromCheckboxWrap},f.default.createElement("div",{className:b.default.fromCheckboxItemWrap},f.default.createElement(c.Checkbox,{checked:t.emailNotify,onChange:t=>{"hasAuthUsers"===e&&(M.hasAuthUsers.emailNotify=t.target.checked),"directDownStreamOwners"===e&&(M.directDownStreamOwners.emailNotify=t.target.checked),"focusUsers"===e&&(M.focusUsers.emailNotify=t.target.checked),"indirectDownStreamOwners"===e&&(M.indirectDownStreamOwners.emailNotify=t.target.checked),k(Object.assign({},M))}}),f.default.createElement("span",null,a("notify:邮件"))),f.default.createElement("div",{className:""},f.default.createElement(c.Checkbox,{checked:t.dchatNotify,onChange:t=>{"hasAuthUsers"===e&&(M.hasAuthUsers.dchatNotify=t.target.checked),"directDownStreamOwners"===e&&(M.directDownStreamOwners.dchatNotify=t.target.checked),"focusUsers"===e&&(M.focusUsers.dchatNotify=t.target.checked),"indirectDownStreamOwners"===e&&(M.indirectDownStreamOwners.dchatNotify=t.target.checked),k(Object.assign({},M))}})," ",f.default.createElement("span",null,a("notify:D-Chat"))))},{title:a("notify:详情"),dataIndex:"key",key:"key",render:e=>f.default.createElement("a",{"data-key":e,onClick:()=>{if(!D)return c.message.error("请先选择节点");z({visible:!0,dependencyType:e})}},a("notify:查看"))}];return f.default.createElement("div",{className:b.default.notifyInitiate},f.default.createElement(h.NotifyHeader,{title:a("notify:发起变更通知"),subTitle:a("message:(变更通知发送成功后，会在对应Hive表详情页置顶显示通知公告一个月，到期则不显示。)")}),f.default.createElement("div",{className:b.default.main},f.default.createElement(E.NotifyDrawer,{notifyId:null,changeVisible:z,visible:O,title:"通知列表",value:"",uri:D,dependencyType:R}),f.default.createElement("div",{className:b.default.mainFormWrap},f.default.createElement(c.Form,{className:b.default.mainForm,layout:"inline",labelAlign:"right",form:n,onFinish:async e=>{S(!0);const t=Object.assign({},e,{changeDetail:j},M);t.changeTime=m.default(t.changeTime).valueOf();try{await d.notifyApi.setChangeNotifySubmit(t)&&(c.message.success("提交成功"),U(),S(!1),l.push("/notify/index"))}catch(e){c.message.error(e.message),U(),S(!1)}},initialValues:{uri:e},onValuesChange:e=>{const t=Object.assign({},{uri:""},e);t.uri&&A(t.uri)}},f.default.createElement(c.Form.Item,{label:f.default.createElement("span",{style:{display:"inline-flex",alignItems:"center"}},a("notify:选择变更节点")," ",f.default.createElement(c.Tooltip,{title:a("notify:为防止表被随意发起变更通知，故控制变更节点下拉选择范围：本人是该表的资产负责人，或者是表所在Hive库的管理员。")},f.default.createElement(i.default,{style:{color:"#d9d9d9",fontSize:14}}))),name:"uri",style:{maxHeight:"50px"},rules:[{required:!0}]},f.default.createElement(c.Select,{autoFocus:!0,showSearch:!0,onFocus:async e=>{if(e)try{const e=await d.notifyApi.getTableTips("");T(e)}catch(e){c.message.error(e.message)}},onSearch:async e=>{if(e)try{const t=await d.notifyApi.getTableTips(e);T(t)}catch(e){c.message.error(e.message)}},placeholder:a("notify:请输入db.table的格式"),allowClear:!0,filterOption:!1},y.map((e,t)=>f.default.createElement(c.Select.Option,{key:t,value:e.uri},e.dbName,".",e.tableName)))),f.default.createElement(c.Form.Item,{className:"illustration-show",label:" ",colon:!1,style:{display:M.tableNameZh?"flex":"none"}},f.default.createElement("div",{className:b.default.illustrationWrap},f.default.createElement("div",{className:b.default.illustrationLeft},f.default.createElement("div",null,f.default.createElement("label",null,"中 文 名 ："),f.default.createElement("span",null,M.tableNameZh)),f.default.createElement("div",null,f.default.createElement("label",null,"直接下游：")," ",M.directDownStreamCount,"  ",f.default.createElement("label",null,"全部下游："),M.allDownStreamCount)),f.default.createElement("div",{className:b.default.illustrationRight},f.default.createElement(c.Button,{target:"_blank",href:`/detail?uri=${D}&tab=lineage`},"查看血缘图")))),f.default.createElement(c.Form.Item,{label:a("notify:变更通知名称"),name:"changeName",rules:[{required:!0}]},f.default.createElement(c.Input,{allowClear:!0,placeholder:a("notify:请输入")})),f.default.createElement(c.Form.Item,{labelAlign:"right",label:a("notify:变更类型"),name:"changeTypes",rules:[{required:!0}]},f.default.createElement(c.Select,{placeholder:a("notify:全部"),allowClear:!0,mode:"multiple"},w.map(e=>f.default.createElement(v,{key:e.id,value:e.id},e.name)))),f.default.createElement(c.Form.Item,{labelAlign:"right",label:a("notify:变更时间"),name:"changeTime",rules:[{required:!0}]},f.default.createElement(c.DatePicker,{showTime:!0,format:"YYYY/MM/DD HH:mm:ss"})),f.default.createElement(c.Form.Item,{label:a("notify:变更详情"),name:"changeDetail",style:{position:"relative"},rules:[{required:!0}]},f.default.createElement(c.Form.Item,{name:"changeDetail",noStyle:!0},f.default.createElement(s.Editor,{value:j,inline:!1,init:{contentCss:{"font-size":"12px"},height:240,menubar:!1,statusbar:!1,plugins:["advlist autolink lists link image charmap print preview anchor searchreplace visualblocks code fullscreen insertdatetime media table paste code"],toolbar:"formatselect bold italic backcolor alignleft aligncenter alignright alignjustify link bullist numlist outdent indent removeformat table undo redo",content_style:"body {font-size: 12px; color: #666; font-family: PingFangSC-Regular, -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'Helvetica Neue', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';}"},onEditorChange:e=>{F(e)}})),f.default.createElement("div",{style:{position:"absolute",right:"3px",bottom:"2px",zIndex:10,color:"#000"}},j.length,"/2000")),f.default.createElement(c.Form.Item,{label:a("notify:通知列表")},f.default.createElement("div",{className:""},f.default.createElement(o.default,{loading:C,tableLayout:"auto",dataSource:q,columns:Q,pagination:!1}))),f.default.createElement(c.Form.Item,{label:a("notify:补充邮箱"),name:"extraEmails"},f.default.createElement(c.Input,{placeholder:a("notify:请输入多个邮箱前缀（个人邮箱和邮件组都可以），应以逗号隔开")})),f.default.createElement(c.Form.Item,null,f.default.createElement(c.Row,null,f.default.createElement(c.Col,{span:10,offset:5},f.default.createElement(c.Space,{size:10},f.default.createElement(c.Button,{htmlType:"button",onClick:U},a("notify:取消")),f.default.createElement(c.Button,{type:"primary",htmlType:"submit",loading:N},a("notify:发起通知"))))))))))}},,,function(e,t,a){var l={"./af":1031,"./af.js":1031,"./ar":1032,"./ar-dz":1033,"./ar-dz.js":1033,"./ar-kw":1034,"./ar-kw.js":1034,"./ar-ly":1035,"./ar-ly.js":1035,"./ar-ma":1036,"./ar-ma.js":1036,"./ar-sa":1037,"./ar-sa.js":1037,"./ar-tn":1038,"./ar-tn.js":1038,"./ar.js":1032,"./az":1039,"./az.js":1039,"./be":1040,"./be.js":1040,"./bg":1041,"./bg.js":1041,"./bm":1042,"./bm.js":1042,"./bn":1043,"./bn.js":1043,"./bo":1044,"./bo.js":1044,"./br":1045,"./br.js":1045,"./bs":1046,"./bs.js":1046,"./ca":1047,"./ca.js":1047,"./cs":1048,"./cs.js":1048,"./cv":1049,"./cv.js":1049,"./cy":1050,"./cy.js":1050,"./da":1051,"./da.js":1051,"./de":1052,"./de-at":1053,"./de-at.js":1053,"./de-ch":1054,"./de-ch.js":1054,"./de.js":1052,"./dv":1055,"./dv.js":1055,"./el":1056,"./el.js":1056,"./en-au":1057,"./en-au.js":1057,"./en-ca":1058,"./en-ca.js":1058,"./en-gb":1059,"./en-gb.js":1059,"./en-ie":1060,"./en-ie.js":1060,"./en-il":1061,"./en-il.js":1061,"./en-in":1062,"./en-in.js":1062,"./en-nz":1063,"./en-nz.js":1063,"./en-sg":1064,"./en-sg.js":1064,"./eo":1065,"./eo.js":1065,"./es":1066,"./es-do":1067,"./es-do.js":1067,"./es-us":1068,"./es-us.js":1068,"./es.js":1066,"./et":1069,"./et.js":1069,"./eu":1070,"./eu.js":1070,"./fa":1071,"./fa.js":1071,"./fi":1072,"./fi.js":1072,"./fil":1073,"./fil.js":1073,"./fo":1074,"./fo.js":1074,"./fr":1075,"./fr-ca":1076,"./fr-ca.js":1076,"./fr-ch":1077,"./fr-ch.js":1077,"./fr.js":1075,"./fy":1078,"./fy.js":1078,"./ga":1079,"./ga.js":1079,"./gd":1080,"./gd.js":1080,"./gl":1081,"./gl.js":1081,"./gom-deva":1082,"./gom-deva.js":1082,"./gom-latn":1083,"./gom-latn.js":1083,"./gu":1084,"./gu.js":1084,"./he":1085,"./he.js":1085,"./hi":1086,"./hi.js":1086,"./hr":1087,"./hr.js":1087,"./hu":1088,"./hu.js":1088,"./hy-am":1089,"./hy-am.js":1089,"./id":1090,"./id.js":1090,"./is":1091,"./is.js":1091,"./it":1092,"./it-ch":1093,"./it-ch.js":1093,"./it.js":1092,"./ja":1094,"./ja.js":1094,"./jv":1095,"./jv.js":1095,"./ka":1096,"./ka.js":1096,"./kk":1097,"./kk.js":1097,"./km":1098,"./km.js":1098,"./kn":1099,"./kn.js":1099,"./ko":1100,"./ko.js":1100,"./ku":1101,"./ku.js":1101,"./ky":1102,"./ky.js":1102,"./lb":1103,"./lb.js":1103,"./lo":1104,"./lo.js":1104,"./lt":1105,"./lt.js":1105,"./lv":1106,"./lv.js":1106,"./me":1107,"./me.js":1107,"./mi":1108,"./mi.js":1108,"./mk":1109,"./mk.js":1109,"./ml":1110,"./ml.js":1110,"./mn":1111,"./mn.js":1111,"./mr":1112,"./mr.js":1112,"./ms":1113,"./ms-my":1114,"./ms-my.js":1114,"./ms.js":1113,"./mt":1115,"./mt.js":1115,"./my":1116,"./my.js":1116,"./nb":1117,"./nb.js":1117,"./ne":1118,"./ne.js":1118,"./nl":1119,"./nl-be":1120,"./nl-be.js":1120,"./nl.js":1119,"./nn":1121,"./nn.js":1121,"./oc-lnc":1122,"./oc-lnc.js":1122,"./pa-in":1123,"./pa-in.js":1123,"./pl":1124,"./pl.js":1124,"./pt":1125,"./pt-br":1126,"./pt-br.js":1126,"./pt.js":1125,"./ro":1127,"./ro.js":1127,"./ru":1128,"./ru.js":1128,"./sd":1129,"./sd.js":1129,"./se":1130,"./se.js":1130,"./si":1131,"./si.js":1131,"./sk":1132,"./sk.js":1132,"./sl":1133,"./sl.js":1133,"./sq":1134,"./sq.js":1134,"./sr":1135,"./sr-cyrl":1136,"./sr-cyrl.js":1136,"./sr.js":1135,"./ss":1137,"./ss.js":1137,"./sv":1138,"./sv.js":1138,"./sw":1139,"./sw.js":1139,"./ta":1140,"./ta.js":1140,"./te":1141,"./te.js":1141,"./tet":1142,"./tet.js":1142,"./tg":1143,"./tg.js":1143,"./th":1144,"./th.js":1144,"./tl-ph":1145,"./tl-ph.js":1145,"./tlh":1146,"./tlh.js":1146,"./tr":1147,"./tr.js":1147,"./tzl":1148,"./tzl.js":1148,"./tzm":1149,"./tzm-latn":1150,"./tzm-latn.js":1150,"./tzm.js":1149,"./ug-cn":1151,"./ug-cn.js":1151,"./uk":1152,"./uk.js":1152,"./ur":1153,"./ur.js":1153,"./uz":1154,"./uz-latn":1155,"./uz-latn.js":1155,"./uz.js":1154,"./vi":1156,"./vi.js":1156,"./x-pseudo":1157,"./x-pseudo.js":1157,"./yo":1158,"./yo.js":1158,"./zh-cn":1159,"./zh-cn.js":1159,"./zh-hk":1160,"./zh-hk.js":1160,"./zh-mo":1161,"./zh-mo.js":1161,"./zh-tw":1162,"./zh-tw.js":1162};function n(e){var t=i(e);return a(t)}function i(e){if(!a.o(l,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return l[e]}n.keys=function(){return Object.keys(l)},n.resolve=i,e.exports=n,n.id=2011},function(e,t,a){e.exports={"notify-header":"style_notify-header_2OA5n",notifyHeader:"style_notify-header_2OA5n","sub-title":"style_sub-title_1N2N7",subTitle:"style_sub-title_1N2N7"}},function(e){e.exports=JSON.parse('{"tableNameZh":"","directDownStreamCount":0,"allDownStreamCount":0,"directDownStreamOwners":{"userCount":0,"failedCount":0,"waitingCount":0,"emailNotify":false,"dchatNotify":false},"indirectDownStreamOwners":{"userCount":0,"failedCount":0,"waitingCount":0,"emailNotify":false,"dchatNotify":false},"hasAuthUsers":{"userCount":0,"failedCount":0,"waitingCount":0,"emailNotify":false,"dchatNotify":false},"focusUsers":{"userCount":0,"failedCount":0,"waitingCount":0,"emailNotify":false,"dchatNotify":false}}')},function(e,t,a){"use strict";var l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=a(233),i=a(463),r=a(26),u=a(89),s=a(277),o=l(a(0)),d=a(19);t.NotifyDIRECTNew=e=>{const{t:t}=d.useTranslation(),[a,l]=o.useState(1),[c,m]=o.useState(10),f=u.useShowTotal(),[p]=o.useState({notifyId:e.notifyId,dependencyType:e.dependencyType,uri:e.uri}),_=s.useEntityTypeOptions("TABLE"),h=o.useMemo(()=>({pageCurrent:a,pageSize:c,pageFilter:p}),[a,c,p]),[g,E,b]=n.useRequest(i.notifyApi.getAffectDetail,h);if(!E&&b)return o.default.createElement("div",{className:"error"},b);if(null==g)return o.default.createElement(o.default.Fragment,null);const v=[{title:t("notify:负责人"),dataIndex:"userNameCn",key:"userNameCn",width:90,render:e=>o.default.createElement(o.default.Fragment,null,o.default.createElement("a",{className:"normal-d-chat",href:"dchat://im/start_conversation?name="+e},o.default.createElement("span",null,e||"--",o.default.createElement(r.IconFont,{type:"icon-d-chat"}))))},{title:t("notify:直接下游节点名"),dataIndex:"entities",key:"entities",width:400,render:e=>o.default.createElement("table",null,o.default.createElement("tbody",null,e.map(e=>o.default.createElement("tr",{key:e.entityName+e.entityLink},o.default.createElement("td",null,o.default.createElement("a",{href:e.entityLink,target:"_black"},e.entityName?e.entityName:"---"))))))},{title:t("notify:描述"),dataIndex:"entities",key:"entities",render:e=>o.default.createElement("table",null,o.default.createElement("tbody",null,e.map(e=>o.default.createElement("tr",{key:e.desc+e.entityLink},o.default.createElement("td",null,e.desc?e.desc:"---")))))},{title:t("notify:节点类型"),dataIndex:"entities",key:"entities",render:e=>o.default.createElement("table",null,o.default.createElement("tbody",null,e.map(e=>o.default.createElement("tr",{key:e.schemaId+e.entityLink},o.default.createElement("td",null,_.map(t=>{if(t.value==e.schemaId)return t.label}).join(""))))))}];return o.default.createElement("div",null,o.default.createElement(r.Table,{rowKey:"userName",dataSource:g.records,columns:v,bordered:!0,pagination:{showSizeChanger:!0,showQuickJumper:!0,pageSizeOptions:["10","20","50","100"],pageSize:c,current:a,total:null==g?void 0:g.total,showTotal:f,onShowSizeChange:(e,t)=>{m(t),l(a)},onChange:e=>{l(e)}}}))}},function(e,t,a){"use strict";var l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=a(233),i=a(463),r=a(26),u=a(89),s=l(a(0)),o=a(19);t.NotifyASAUTHNew=e=>{const{t:t}=o.useTranslation(),[a,l]=s.useState(1),[d,c]=s.useState(10),m=u.useShowTotal(),[f]=s.useState({notifyId:e.notifyId,dependencyType:e.dependencyType,uri:e.uri}),p=s.useMemo(()=>({pageCurrent:a,pageSize:d,pageFilter:f}),[a,d,f]),[_,h,g]=n.useRequest(i.notifyApi.getAffectDetail,p);if(!h&&g)return s.default.createElement("div",{className:"error"},g);if(null==_)return s.default.createElement(s.default.Fragment,null);const E=[{title:t("notify:负责人"),dataIndex:"userNameCn",key:"userNameCn",width:200,render:e=>s.default.createElement(s.default.Fragment,null,s.default.createElement("a",{className:"normal-d-chat",href:"dchat://im/start_conversation?name="+e},s.default.createElement("span",null,e||"--",s.default.createElement(r.IconFont,{type:"icon-d-chat"}))))},{title:t("notify:部门"),dataIndex:"userDept",key:"userDept",width:300,render:e=>s.default.createElement(s.default.Fragment,null,e.trim()?e:"--")}];return s.default.createElement("div",null,s.default.createElement(r.Table,{rowKey:"userName",dataSource:_.records,columns:E,pagination:{showSizeChanger:!0,showQuickJumper:!0,pageSizeOptions:["10","20","50","100"],pageSize:d,current:a,total:null==_?void 0:_.total,showTotal:m,onShowSizeChange:(e,t)=>{c(t),l(a)},onChange:e=>{l(e)}}}))}},function(e,t,a){e.exports={"notify-initiate":"style_notify-initiate_3cshD",notifyInitiate:"style_notify-initiate_3cshD",main:"style_main_31Uo2","main-form-wrap":"style_main-form-wrap_1l-18",mainFormWrap:"style_main-form-wrap_1l-18","main-form":"style_main-form_1bqYk",mainForm:"style_main-form_1bqYk","illustration-show":"style_illustration-show_31Lt2",illustrationShow:"style_illustration-show_31Lt2","illustration-wrap":"style_illustration-wrap_3TIBl",illustrationWrap:"style_illustration-wrap_3TIBl","illustration-left":"style_illustration-left_31-fb",illustrationLeft:"style_illustration-left_31-fb","illustration-right":"style_illustration-right_13Giu",illustrationRight:"style_illustration-right_13Giu","from-checkbox-wrap":"style_from-checkbox-wrap_1KQFX",fromCheckboxWrap:"style_from-checkbox-wrap_1KQFX","from-checkbox-item-wrap":"style_from-checkbox-item-wrap_2R34Z",fromCheckboxItemWrap:"style_from-checkbox-item-wrap_2R34Z"}},function(e,t,a){"use strict";var l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=a(233),r=a(30),u=a(166),s=a(463),o=a(26),d=a(97),c=l(a(0)),m=a(19),f=a(1164),p=a(1163),_=n(a(1165));t.NotifyListDetail=()=>{const{t:e}=m.useTranslation(),t=r.getQuery("nodifyId","string"),[a,l]=c.useState(!1),[n,h,g]=i.useRequest(s.notifyApi.getNotifyDetail,t),[E,b]=c.useState("directDownStreamOwners");if(!h&&g)return c.default.createElement("div",{className:"error"},g);if(null==n)return c.default.createElement(c.default.Fragment,null);const v=n.changeNoticeCountDetail,y=[{key:"directDownStreamOwners",name:e("notify:直接下游节点负责人"),dchatNotify:v.directDownStreamOwners.dchatNotify,emailNotify:v.directDownStreamOwners.emailNotify,failedCount:v.directDownStreamOwners.failedCount,userCount:v.directDownStreamOwners.userCount,waitingCount:v.directDownStreamOwners.waitingCount},{key:"indirectDownStreamOwners",name:e("notify:间接下游节点负责人"),dchatNotify:v.indirectDownStreamOwners.dchatNotify,emailNotify:v.indirectDownStreamOwners.emailNotify,failedCount:v.indirectDownStreamOwners.failedCount,userCount:v.indirectDownStreamOwners.userCount,waitingCount:v.indirectDownStreamOwners.waitingCount},{key:"hasAuthUsers",name:e("notify:有权限使用当前节点的人"),dchatNotify:v.hasAuthUsers.dchatNotify,emailNotify:v.hasAuthUsers.emailNotify,failedCount:v.hasAuthUsers.failedCount,userCount:v.hasAuthUsers.userCount,waitingCount:v.hasAuthUsers.waitingCount},{key:"focusUsers",name:e("notify:当前节点关注的人"),dchatNotify:v.focusUsers.dchatNotify,emailNotify:v.focusUsers.emailNotify,failedCount:v.focusUsers.failedCount,userCount:v.focusUsers.userCount,waitingCount:v.focusUsers.waitingCount}],T=e=>{l(e.visible),b(e.dependencyType)},N=[{title:e("notify:类型"),dataIndex:"name",key:"name"},{title:e("notify:人数"),dataIndex:"userCount",key:"userCount"},{title:e("notify:通知方式"),dataIndex:"key",render:(t,a)=>c.default.createElement("div",{"data-key":t},c.default.createElement(o.Checkbox,{defaultChecked:a.emailNotify,disabled:!0})," ",e("notify:邮件"),"  ",c.default.createElement(o.Checkbox,{defaultChecked:a.dchatNotify,disabled:!0})," ",e("notify:D-Chat"))},{title:e("notify:详情"),dataIndex:"key",key:"key",render:t=>c.default.createElement("a",{"data-key":t,onClick:()=>{T({visible:!0,dependencyType:t})}},e("notify:查看"))}];return c.default.createElement("div",{className:_.default.changeNotifyDetail},c.default.createElement(p.NotifyHeader,{title:n.noticeName}),c.default.createElement("div",{className:_.default.main},c.default.createElement(f.NotifyDrawer,{notifyId:t,changeVisible:T,visible:a,title:e("notify:通知列表"),value:"",dependencyType:E}),c.default.createElement(o.Descriptions,{title:e("notify:通知详情"),layout:"vertical",column:4},c.default.createElement(o.Descriptions.Item,{span:1,label:e("notify:变更节点名")},c.default.createElement(d.ExternalLink,{href:"/detail?uri="+n.changeNotifyNode.uri},n.changeNotifyNode.dbName,".",n.changeNotifyNode.tableName)),c.default.createElement(o.Descriptions.Item,{span:1,label:e("notify:发送人")},c.default.createElement("a",{className:"normal-d-chat",href:"dchat://im/start_conversation?name="+n.sender.name},c.default.createElement("span",null,n.sender.name,c.default.createElement(o.IconFont,{type:"icon-d-chat"})))),c.default.createElement(o.Descriptions.Item,{span:1,label:e("notify:发送时间")},u.humanDate(n.sendTime)),c.default.createElement(o.Descriptions.Item,{span:1,label:e("notify:预计操作时间")},u.humanDate(n.changeTime)),c.default.createElement(o.Descriptions.Item,{span:4,label:e("notify:变更类型")},c.default.createElement("div",{className:_.default.changeTypeSpan},n.changeTypes.map(e=>c.default.createElement("span",{key:e},e)))),c.default.createElement(o.Descriptions.Item,{span:4,label:e("notify:变更详情")},"")),c.default.createElement("div",{className:_.default.changeDetailText,dangerouslySetInnerHTML:{__html:n.changeDetail}}),c.default.createElement("div",null,c.default.createElement(o.Table,{dataSource:y,columns:N,pagination:!1})),c.default.createElement("div",{style:{marginTop:"16px"}},c.default.createElement("p",null,e("notify:补充邮箱"),":"),c.default.createElement("p",null,n.extraEmails?n.extraEmails:e("notify:无")))))}},function(e,t,a){"use strict";var l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=a(472),r=a(362),u=a(233),s=a(30),o=a(166),d=a(259),c=a(463),m=a(26),f=a(97),p=a(89),_=l(a(0)),h=a(19),g=a(117),E=n(a(1165)),b=e=>{const{t:t}=h.useTranslation();return _.default.createElement("div",{className:E.default.notifyHeader},_.default.createElement("div",null,e.title),_.default.createElement(m.Button,{type:"primary"}," ",_.default.createElement(g.Link,{to:"/notify/initiate"},_.default.createElement("span",{style:{color:"#fff"}},t("notify:发起变更通知")))))};t.NotifyListIndex=()=>{const{t:e}=h.useTranslation(),[t,a]=_.useState(s.getQuery("pageCurrent","number")||1),[l,n]=_.useState(s.getQuery("pageSize","number")||10),[v,y]=_.useState(!1),[T]=m.Form.useForm(),[N,S]=_.useState({changeNodeName:s.getQuery("changeNodeName"),noticeName:s.getQuery("noticeName"),sender:s.getQuery("sender")}),[C,x]=_.useState(!1),[w,I]=_.useState([]),L=p.useShowTotal(),O=_.useMemo(()=>{const{sender:e}=N;return{pageCurrent:t,pageSize:l,pageFilter:{...N,sender:v?s.getUsername():e}}},[t,l,N,v]),[P,M,k]=u.useRequest(c.notifyApi.getNotifyList,O);if(!M&&k)return _.default.createElement("div",{className:"error"},k);return _.default.createElement("div",{className:E.default.changeNotify},_.default.createElement(b,{title:e("notify:变更通知列表"),submit:T.submit}),_.default.createElement("div",{className:E.default.main},_.default.createElement(m.Form,Object.assign({},{labelCol:{span:15,offset:1},wrapperCol:{span:0,offset:0}},{layout:"inline",form:T,onFinish:e=>{S(e)},initialValues:N}),_.default.createElement(m.Form.Item,{label:e("notify:变更节点名"),name:"changeNodeName"},_.default.createElement(m.Input,{style:{width:210},allowClear:!0,onPressEnter:T.submit,onChange:e=>{!e.target.value&&T.submit(),s.updateQuery({changeNodeName:e.target.value})},placeholder:e("message:请输入")})),_.default.createElement(m.Form.Item,{name:"sender",label:e("notify:发起人"),rules:[{required:!1}]},_.default.createElement(m.Select,{style:{width:180},showSearch:!0,allowClear:!0,filterOption:!1,notFoundContent:C?_.default.createElement(m.Spin,{size:"small"}):null,onSearch:async e=>{if(!e)return void I([]);x(!0);const t=await d.v1CommonApi.searchStaff(e);I(t),x(!1)},placeholder:e("notify:全部"),onChange:e=>{y(!1),s.updateQuery({sender:e}),T.submit()}},w.map(({account:e,name:t})=>_.default.createElement(m.Select.Option,{key:e,value:e,width:80},t,"(",e,")")))),_.default.createElement(m.Form.Item,{valuePropName:"checked",style:{width:110}},_.default.createElement(m.Checkbox,{checked:v,onChange:e=>{y(e.target.checked),T.setFieldsValue({sender:void 0})}},e("notify:只看自己的"))),_.default.createElement(m.Form.Item,{name:"noticeName",label:e("notify:通知名称")},_.default.createElement(m.Input,{style:{width:200},placeholder:e("notify:全部"),onPressEnter:T.submit,allowClear:!0,onChange:e=>{!e.target.value&&T.submit(),s.updateQuery({noticeName:e.target.value})},suffix:_.default.createElement(i.SearchOutlined,null)}))),_.default.createElement(m.Table,{loading:M,rowKey:"nodifyId",onRow:e=>({onClick:()=>{var t;t=e.nodifyId,_.default.createElement(g.Link,{to:{pathname:"/notify/detail",search:"?nodifyId="+t}})}}),columns:[{title:e("common:序号"),dataIndex:"position",width:60},{title:e("notify:变更通知名称"),width:120,dataIndex:"noticeName",render:(e,t)=>_.default.createElement(f.ExternalLink,{href:"/notify/detail?nodifyId="+t.nodifyId},e)},{title:e("notify:变更节点名"),width:250,dataIndex:"changeNotifyNode",render:(e,t)=>_.default.createElement(f.ExternalLink,{href:"/detail?uri="+t.changeNotifyNode.uri},e.dbName,".",e.tableName)},{title:e("notify:变更类型"),width:120,dataIndex:"changeTypes",render:e=>e.join("-")},{title:e("notify:发起人"),width:110,dataIndex:"sender",render:e=>_.default.createElement(r.DChat,{user:e})},{title:e("notify:发送时间"),dataIndex:"sendTime",width:150,render:e=>o.humanDate(e)},{title:e("notify:预计操作时间"),width:150,dataIndex:"expectedOperatingTime",render:e=>o.humanDate(e)}],dataSource:null==P?void 0:P.records,pagination:{showSizeChanger:!0,showQuickJumper:!0,pageSizeOptions:["10","20","50","100"],pageSize:l,current:t,total:null==P?void 0:P.total,showTotal:L,onShowSizeChange:(e,l)=>{n(l),a(t),s.updateQuery({pageSize:10===l?null:l,pageCurrent:null})},onChange:e=>{a(e),s.updateQuery({pageCurrent:1===e?null:e})}}})))}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=l(a(4)),i=a(26),r=l(a(0)),u=a(19),s=a(117),o=l(a(2020));t.ChangeSidebar=e=>{const{pathname:t}=e,{t:a}=u.useTranslation();return r.default.createElement("div",{className:n.default(o.default.sidebar)},r.default.createElement("div",{className:o.default.sidebarContent},r.default.createElement("div",{className:o.default.nav},r.default.createElement(i.Menu,{selectedKeys:[t],mode:"inline"},r.default.createElement(i.Menu.Item,{key:"/notify/index",icon:r.default.createElement(i.IconFont,{type:"icon-tongzhi"})},r.default.createElement(s.Link,{to:{pathname:"/notify/index"}},a("notify:变更通知列表"))),r.default.createElement(i.Menu.Item,{key:"/notify/initiate",icon:r.default.createElement(i.IconFont,{type:"icon-table"})},r.default.createElement(s.Link,{to:{pathname:"/notify/initiate"}},a("notify:发起变更通知")))))))}},function(e,t,a){e.exports={sidebar:"style_sidebar_7ZjMD","sidebar-content":"style_sidebar-content_188K5",sidebarContent:"style_sidebar-content_188K5",nav:"style_nav_2AHtW"}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=l(a(0)),i=a(19),r=l(a(2022));t.Compatible=()=>{const{t:e}=i.useTranslation();return n.default.createElement("div",{className:r.default.compatible},n.default.createElement("div",{className:r.default.tips},e("message:呃..... 浏览器兼容有问题")),n.default.createElement("div",{className:r.default.tips},e("message:请使用Chrome浏览器(谷歌浏览器) 版本需要在60及以上")))}},function(e,t,a){e.exports={compatible:"compatible_compatible_2zIs6",tips:"compatible_tips_1MhEW"}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=l(a(118)),r=l(a(4)),u=a(301),s=a(525),o=n(a(0)),d=a(19),c=a(464),m=l(a(182)),f=a(2026),p=a(2028),_=a(466),h=a(2030);t.DetailContent=()=>{const{detail:e,loading:t,errorMessage:a}=o.useContext(_.DataeDetailContext),{t:l}=d.useTranslation();return o.useEffect(()=>{e&&(document.title=""+e.name)},[e]),o.useEffect(()=>()=>document.title=l("common:数据地图"),[l]),a?o.default.createElement("div",{className:"error",style:{padding:20}},a):o.default.createElement(o.default.Fragment,null,o.default.createElement("div",{className:m.default.tableDetailPage},o.default.createElement(i.default,{spinning:t},o.default.createElement("div",{className:r.default(m.default.top,m.default.minTop)},t||!e?null:o.default.createElement(p.TopInfo,null))),o.default.createElement("div",{className:m.default.content},o.default.createElement(c.DetailUnfold,{loading:t},o.default.createElement("div",{className:m.default.baseInfo},!t&&e&&o.default.createElement("div",{className:m.default.baseInfo},o.default.createElement(f.Base,null)))),o.default.createElement(h.DataeDetailPane,null))),o.default.createElement(u.Footer,null))},t.DataeDetailPage=e=>o.default.createElement(_.DataeDetailProvider,Object.assign({},e),o.default.createElement(t.DetailContent,null),o.default.createElement(s.GoTop,null))},function(e,t,a){e.exports={"home-footer":"index_home-footer_1u34D",homeFooter:"index_home-footer_1u34D",links:"index_links_35BzP",copyright:"index_copyright_1Za1e"}},function(e,t,a){e.exports={"go-top":"style_go-top_2cpVE",goTop:"style_go-top_2cpVE",show:"style_show_3UykH"}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=l(a(4)),r=a(120),u=l(a(320)),s=n(a(0)),o=a(19),d=l(a(182)),c=a(466);t.BaseList=()=>{const{t:e}=o.useTranslation(),t=[e("detail:未发布"),e("detail:已发布")],{uri:a,detail:l}=s.useContext(c.DataeDetailContext),n=s.useMemo(()=>[{label:s.default.createElement("span",null,e("detail:负责人")),value:s.default.createElement("div",{className:d.default.userItem},s.default.createElement(s.default.Fragment,null,s.default.createElement(r.DChat,{user:l.owner})," "))},{label:e("detail:报表ID"),value:l.id},{label:e("detail:报表状态"),value:t[l.status]},{label:e("detail:安全等级"),value:l.securityLevel},{label:e("detail:更新时间"),value:u.default(l.updateTime).format("YYYY-MM-DD HH:mm:ss")},{label:e("detail:创建时间"),value:u.default(l.createTime).format("YYYY-MM-DD HH:mm:ss")}].filter(e=>e),[l,e,a]);return s.default.createElement("div",{className:d.default.list},n.map(({value:e,label:t,hide:a},l)=>{if(!a)return s.default.createElement("div",{key:l,className:d.default.item},s.default.createElement("div",{className:d.default.label},t),s.default.createElement("div",{className:d.default.value},e))}))},t.Base=()=>{const{t:e}=o.useTranslation(),{detail:a}=s.useContext(c.DataeDetailContext);return s.default.createElement("div",{className:i.default(d.default.infoItem,d.default.base)},s.default.createElement("div",{className:d.default.title},s.default.createElement("span",null,e("detail:基础信息"))),a&&s.default.createElement(t.BaseList,null))}},function(e,t,a){"use strict";var l;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.INIT="INIT",e.DETAIL="DETAIL"}(l=t.DATAE_TABLE_ACTION_TYPES||(t.DATAE_TABLE_ACTION_TYPES={})),t.DataeDetailReducer=(e,t)=>{switch(t.type){case l.INIT:return t.init;case l.DETAIL:return{...e,...t.detail};default:return e}}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=a(30),r=l(a(4)),u=a(26),s=a(97),o=n(a(0)),d=l(a(262)),c=a(19),m=a(466),f=l(a(2029));t.ToUpmUrl=e=>{let t="https://upm.xiaojukeji.com/upm2-static/main/new-apply/bigdata_report/280/"+e;return i.isEast&&(t="https://upm.xiaojukeji.com/upm2-static/main/new-apply/bigdata_report/1620/"+e),i.isRussia&&(t="https://upm.xiaojukeji.com/upm2-static/main/new-apply/bigdata_report/1620/"+e),t},t.ToBigDataUrl=e=>`${i.bigDataOrigin}/datae/#/homepage/report-info?type=reportView&reportId=${e}&isContainMenu=0`,t.TopInfo=()=>{const{t:e}=c.useTranslation(),{detail:a}=o.useContext(m.DataeDetailContext);return o.default.createElement("div",{className:r.default(f.default.topInfo)},o.default.createElement("div",{className:f.default.header},o.default.createElement(u.Tooltip,{title:""+a.name,placement:"bottom"},o.default.createElement("div",{className:f.default.title},a.name)),o.default.createElement(d.default,{text:""+a.name,onCopy:()=>u.message.success(e("message:复制成功"))},o.default.createElement(u.IconFont,{type:"icon-copy",style:{color:"#D6D6D6"}})),o.default.createElement("div",{className:f.default.envTag},e("detail:报表"))),o.default.createElement("div",{className:f.default.comment},o.default.createElement("span",null,a.description)),o.default.createElement("div",{className:f.default.actions},a.hasAuth?o.default.createElement("div",null,o.default.createElement(s.ExternalLink,{href:t.ToBigDataUrl(a.id)},o.default.createElement(u.IconFont,{type:"icon-page-views",style:{fontSize:"16px"}}),o.default.createElement("span",null,e("detail:查看报表")))):null,a.hasAuth?null:o.default.createElement("div",null,o.default.createElement(s.ExternalLink,{href:t.ToUpmUrl(a.id)},o.default.createElement(u.IconFont,{type:"icon-permission"}),o.default.createElement("span",null,e("detail:申请报表权限"))))))}},function(e,t,a){e.exports={"top-info":"top-info_top-info_3QHRm",topInfo:"top-info_top-info_3QHRm",header:"top-info_header_1E6Qi","offline-status":"top-info_offline-status_1IWpw",offlineStatus:"top-info_offline-status_1IWpw",title:"top-info_title_1ZNYC","choicest-text":"top-info_choicest-text_3enTG",choicestText:"top-info_choicest-text_3enTG","env-tag":"top-info_env-tag_2ZVha",envTag:"top-info_env-tag_2ZVha",comment:"top-info_comment_122c4",actions:"top-info_actions_2mAbG"}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=a(30),r=l(a(4)),u=a(26),s=a(1167),o=n(a(0)),d=a(19),c=a(466),m=l(a(2031)),f=a(2032);t.DataeDetailPane=()=>{const{t:e}=d.useTranslation(),{tab:t,setTab:a,detail:l}=o.useContext(c.DataeDetailContext);return l?o.default.createElement("div",{className:m.default.detailInfo},o.default.createElement(u.Tabs,{animated:!1,className:r.default(m.default.detailTabs,"tabs-custom-light"),onChange:e=>{i.updateQuery({tab:e===s.IDataeDetailTab.STATEMENT_DETAIL?null:e,subTab:null,pageSize:null,pageCurrent:null}),a(e)},activeKey:t},o.default.createElement(u.Tabs.TabPane,{tab:o.default.createElement("span",{className:"nav-text"},e("detail:报表详情")),key:s.IDataeDetailTab.STATEMENT_DETAIL},t===s.IDataeDetailTab.STATEMENT_DETAIL&&o.default.createElement(f.StatementDetail,null)))):null}},function(e,t,a){e.exports={"detail-info":"index_detail-info_1-C6A",detailInfo:"index_detail-info_1-C6A","go-to-old-version":"index_go-to-old-version_3U27d",goToOldVersion:"index_go-to-old-version_3U27d","detail-tabs":"index_detail-tabs_1qCbo",detailTabs:"index_detail-tabs_1qCbo"}},function(e,t,a){"use strict";var l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=a(1166),r=a(26),u=l(a(0)),s=a(19),o=a(466),d=n(a(1168)),c=a(2033);t.StatementDetail=()=>{const{uri:e,detail:t}=u.useContext(o.DataeDetailContext),{t:a}=s.useTranslation(),[l,n]=u.useState([]),[m,f]=u.useState(!1),[p,_]=u.useState([]),[h,g]=u.useState(!1);return u.useEffect(()=>{if(!e)return;(async()=>{try{f(!0);const t=await i.v1DataeInfoApi.DataeRelation(e);n(t||[])}catch(e){}f(!1)})(),(async()=>{try{g(!0);const t=await i.v1DataeInfoApi.DataeSimilarRep(e);_(t||[])}catch(e){}g(!1)})()},[a,e]),u.default.createElement("div",{className:d.default.statementDetail},t?null:u.default.createElement(r.Spin,null,u.default.createElement(r.Empty,{image:r.Empty.PRESENTED_IMAGE_SIMPLE})),l.length?u.default.createElement("div",{className:d.default.item},u.default.createElement("div",{className:d.default.hd},u.default.createElement("i",{className:d.default.spe}),u.default.createElement("div",{className:d.default.title},a("detail:关联推荐")," ",u.default.createElement(r.Tooltip,{title:a("message:基于数据上下游血缘得出")},u.default.createElement(r.IconFont,{type:"icon-question",style:{color:"#D9D9D9"}})))),u.default.createElement("div",{className:d.default.content},u.default.createElement("p",null,a("message:此报表使用以下Hive表作为数据源生成：")),u.default.createElement(c.RelationVirtualList,{loading:m,data:l}))):null,u.default.createElement("div",{className:d.default.item},u.default.createElement("div",{className:d.default.hd},u.default.createElement("i",{className:d.default.spe}),u.default.createElement("div",{className:d.default.title},a("detail:子报表"))),u.default.createElement("div",{className:d.default.content},u.default.createElement("p",null,t.subRep.join("，")))),u.default.createElement("div",{className:d.default.item},u.default.createElement("div",{className:d.default.hd},u.default.createElement("i",{className:d.default.spe}),u.default.createElement("div",{className:d.default.title},a("detail:维度"))),u.default.createElement("div",{className:d.default.content},u.default.createElement("p",null,t.dimension.join("，")))),u.default.createElement("div",{className:d.default.item},u.default.createElement("div",{className:d.default.hd},u.default.createElement("i",{className:d.default.spe}),u.default.createElement("div",{className:d.default.title},a("detail:指标"))),u.default.createElement("div",{className:d.default.content},u.default.createElement("p",null,t.metric.join("，")))),p.length?u.default.createElement("div",{className:d.default.item},u.default.createElement("div",{className:d.default.hd},u.default.createElement("i",{className:d.default.spe}),u.default.createElement("div",{className:d.default.title},a("detail:猜您想要的报表"))),u.default.createElement("div",{className:d.default.content},u.default.createElement("p",null,a("message:如下报表与本报表有使用到相同的数据源，可点击查看：")),u.default.createElement(c.SimilarRepVirtualList,{loading:h,data:p}))):null)}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=a(26),i=l(a(0)),r=a(2394),u=l(a(1168));t.RelationVirtualList=e=>{const{data:t,loading:a}=e,l=()=>{if(!t.length)return 200;let e=200;const a=35*t.length;return a<e&&(e=a),e};return i.default.createElement("div",{className:u.default.virtualListRelation,style:{height:l+"px"}},i.default.createElement(n.Spin,{spinning:a},i.default.createElement(r.FixedSizeList,{height:l(),itemCount:t.length,itemSize:35,width:"100%"},({index:e,style:a})=>i.default.createElement("a",{href:"/detail?uri="+t[e].uri,target:"_blank",rel:"noopener noreferrer"},i.default.createElement("div",{className:u.default.item,style:a,key:e,"data-item":t[e].tableName},i.default.createElement("span",{className:u.default.icon},i.default.createElement("i",null)),i.default.createElement("span",{className:u.default.text},`${t[e].dbName}.${t[e].tableName}（${t[e].nameZh}）`))))))},t.SimilarRepVirtualList=e=>{const{data:t,loading:a}=e,l=()=>{if(!t.length)return 200;let e=200;const a=35*t.length;return a<e&&(e=a),e};return i.default.createElement("div",{className:u.default.virtualListRelation,style:{height:l()+"px"}},i.default.createElement(n.Spin,{spinning:a},i.default.createElement(r.FixedSizeList,{height:l(),itemCount:t.length,itemSize:35,width:"100%"},({index:e,style:a})=>i.default.createElement("a",{href:"/detail/datae?uri="+t[e].uri,target:"_blank",rel:"noopener noreferrer"},i.default.createElement("div",{className:u.default.item,style:a},i.default.createElement("span",{className:u.default.icon},i.default.createElement("i",null)),i.default.createElement("span",{className:u.default.text},t[e].name))))))}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=l(a(245)),r=a(30),u=a(166),s=a(263),o=a(97),d=a(301),c=a(525),m=n(a(0)),f=a(19),p=a(117),_=l(a(182)),h=a(2035),g=a(2036),E=a(2071),b=a(2073),v=a(2078),y=a(2079),T=a(106),N=a(2087),S=a(464);t.DetailContent=()=>{const{detail:e,loading:t,errorMessage:a}=m.useContext(T.HiveDetailContext),[l,n]=m.useState(null),[c,C]=m.useState(!1),{t:x}=f.useTranslation(),w=r.getQuery("id"),I=p.useHistory(),L=m.useMemo(()=>t||c,[t,c]),O=m.useCallback(async()=>{const e=I.location.search,t=new URLSearchParams(e);C(!0);try{const e=await s.v1HiveInfoApi.getHiveUriById(w);t.delete("id"),t.set("uri",e),I.replace({pathname:"/detail",search:decodeURIComponent(t.toString())})}catch(e){n(e.message),r.updateQuery({id:null})}C(!1)},[I,w]);m.useEffect(()=>{const e=location.href;if(-1!==location.href.indexOf("detail#")){const t=e.split("?")[1];I.replace({pathname:"/detail",search:t})}},[I]),m.useEffect(()=>{e&&(document.title=`${e.dbName}.${e.tableName}`)},[e]),m.useEffect(()=>()=>document.title=x("common:数据地图"),[x]);const P=m.useMemo(()=>{const t=[];if(!e)return t;const{recommendINFO:a,notifyINFO:l}=e;if(a&&t.push(m.default.createElement(m.default.Fragment,null,m.default.createElement(i.default,{className:_.default.icon}),"关联推荐通知：该Hive表已设置关联推荐，推荐使用表",m.default.createElement(o.ExternalLink,{href:`/detail?uri=hive://mycluster-tj:${e.recommendINFO.recommendDb}:${e.recommendINFO.recommendTable}`},e.recommendINFO.recommendDb,".",e.recommendINFO.recommendTable),"进行数据查询等工作，更多功能可前往",m.default.createElement(o.ExternalLink,{href:"http://migration-tool.didichuxing.com/#/page/transform"},"迁移工具"),"。")),l){const e=m.default.createElement(m.default.Fragment,null,m.default.createElement(i.default,{className:_.default.icon}),"变更通知：",m.default.createElement("span",null,l.sender)," 于 ",u.humanDate(l.sendTime),"发送了变更通知",m.default.createElement(o.ExternalLink,{href:"/notify/detail?nodifyId="+l.notifyId},l.notifyTitle),"，对生产或使用此数据可能会造成影响，点击"," ",m.default.createElement(o.ExternalLink,{href:"/notify/detail?nodifyId="+l.notifyId},"查看详情"));l.sendTime<(null==a?void 0:a.recommendTime)?t.push(e):t.unshift(e)}return t},[e]);return m.useEffect(()=>{w&&O()},[O,w]),l?m.default.createElement("div",{className:"error",style:{padding:20}},l):a?m.default.createElement("div",{className:"error",style:{padding:20}},a):m.default.createElement(m.default.Fragment,null,m.default.createElement("div",{className:_.default.tableDetailPage},P.map((e,t)=>m.default.createElement("div",{className:_.default.warning,key:t},e)),m.default.createElement("div",{className:_.default.top},!L&&e&&m.default.createElement(y.TopInfo,null),m.default.createElement(b.Nps,null)),m.default.createElement("div",{className:_.default.content},m.default.createElement(S.DetailUnfold,{loading:L},m.default.createElement("div",{className:_.default.baseInfo},m.default.createElement(g.Base,null),!L&&e&&m.default.createElement(m.default.Fragment,null,m.default.createElement(E.Business,null),m.default.createElement(h.Auth,null),m.default.createElement(v.Storage,null)))),m.default.createElement(N.HiveDetailPane,null))),m.default.createElement(d.Footer,null))},t.DetailPage=e=>m.default.createElement(T.HiveDetailProvider,Object.assign({},e),m.default.createElement(t.DetailContent,null),m.default.createElement(c.GoTop,null))},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=a(30),r=l(a(4)),u=a(120),s=a(97),o=n(a(0)),d=a(19),c=l(a(182)),m=a(106);t.Auth=()=>{const{detail:e,tableId:t}=o.useContext(m.HiveDetailContext),{t:a}=d.useTranslation(),l=[{label:a("hiveTable:权限审批人"),value:e.privOwner.map((e,t)=>o.default.createElement(u.DChat,{key:t,user:e}))},{label:a("hiveTable:我的权限"),value:o.default.createElement(o.default.Fragment,null,o.default.createElement("span",null,e.isAuth?a("hiveTable:有权限"):a("hiveTable:无权限")),o.default.createElement(s.ExternalLink,{className:c.default.verifyAuth,href:`${i.pamOrigin}/role/verify?account=${i.getUsername()}&tblName=${e.tableName}&dbName=${e.dbName}`},a("hiveTable:去验证权限")))}];return o.default.createElement("div",{className:r.default(c.default.infoItem,c.default.auth)},o.default.createElement("div",{className:c.default.title},a("hiveTable:权限信息")),o.default.createElement("div",{className:c.default.list},l.map(({value:e,label:t},a)=>o.default.createElement("div",{key:a,className:c.default.item},o.default.createElement("div",{className:c.default.label},t),o.default.createElement("div",{className:c.default.value},e)))))}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=l(a(129)),r=l(a(332)),u=l(a(408)),s=l(a(221)),o=a(30),d=a(181),c=l(a(4)),m=a(1169),f=a(26),p=a(120),_=a(97),h=a(2068),g=a(526),E=a(2070),b=a(98),v=n(a(0)),y=a(19),T=a(117),N=l(a(182)),S=a(106);t.BaseList=()=>{var e,t,a,l;const{t:n}=y.useTranslation(),{uri:C,detail:x}=v.useContext(S.HiveDetailContext),[w,I]=v.useState(!1),[L,O]=v.useState(!1),[P,M]=v.useState(!1),[k,D]=v.useState(x.assetOwner),[A,j]=v.useState(x.assetOwner),[F,R]=v.useState(x.addedAlbumList),[H,U]=v.useState(!1),[B,q]=v.useState(!1),[z,Q]=v.useState(!1),V=v.useMemo(()=>({[b.TABLE_TYPE.EXTERNAL_TABLE]:n("hiveTable:外表"),[b.TABLE_TYPE.INDEX_TABLE]:n("hiveTable:索引表"),[b.TABLE_TYPE.MANAGED_TABLE]:n("hiveTable:内表"),[b.TABLE_TYPE.VIRTUAL_VIEW]:n("hiveTable:视图表")}),[n]),G=v.useMemo(()=>{var e;let t="";switch(x.layerId){case 3002:t=n("hiveTable:ETL层(ODS)");break;case 3003:t=n("hiveTable:统计计算层(DW|DWM)");break;case 3004:t=n("hiveTable:数据主题层(DM)");break;case 3005:t=n("hiveTable:外部数据源(mysql原始表或原始日志)");break;case 3006:t=n("hiveTable:明细数据层(DWD|DWV)");break;case 3007:t=n("hiveTable:应用层(APP)");break;case 3008:t=n("hiveTable:维度层(DIM)");break;default:t=null!==(e=x.layerName)&&void 0!==e?e:"-"}return n("hiveTable:"+t)},[x.layerId,x.layerName,n]),{taskCode:Y,capriVersion:W}=(null==x?void 0:x.assetOwnerInfo)||{},$=o.getScheduleTaskUrl(Y,W),K=[{label:v.default.createElement(v.default.Fragment,null,v.default.createElement("span",null,n("detail:资产负责人")),v.default.createElement(f.Tooltip,{title:n("message:负责表数据内容的产出、数据生命周期等管理工作")},v.default.createElement(u.default,{className:N.default.tip}))),value:v.default.createElement(v.default.Fragment,null,x.isAssetOwner?v.default.createElement(f.Popover,{visible:L,placement:"topRight",trigger:"click",onVisibleChange:e=>O(e),content:x.assetOwnerType===E.AssetOwnerType.WriteOwner&&"v4"===W?v.default.createElement("div",{className:N.default.popoverUpdate},v.default.createElement("div",{className:N.default.breakWord},Y?W?v.default.createElement(v.default.Fragment,null,v.default.createElement("span",null,n("detail:您是写入任务owner, 点击查看任务")),v.default.createElement(_.ExternalLink,{href:$},v.default.createElement("div",null,Y))):n("detail:您是写入任务owner",""+Y):n("detail:您是写入任务owner")),v.default.createElement("div",{className:N.default.actions},v.default.createElement(f.Button,{size:"small",onClick:()=>O(!1)},n("common:关闭")))):v.default.createElement("div",{className:N.default.popoverUpdate},v.default.createElement(g.UserSelect,{user:A,setUser:j}),v.default.createElement("div",{className:N.default.actions},v.default.createElement(f.Button,{size:"small",onClick:()=>O(!1)},n("common:取消")),v.default.createElement(f.Button,{size:"small",type:"primary",loading:H,disabled:!(null==A?void 0:A.account)||(null==A?void 0:A.account)===(null==k?void 0:k.account),onClick:async()=>{U(!0);try{await d.v1TableDetailApi.updateAssetOwner({uri:C,owner:null==A?void 0:A.account}),D(A),O(!1)}catch(e){f.message.error(e.message)}U(!1)}},n("common:确定"))))},v.default.createElement("div",{className:N.default.actions},v.default.createElement(f.IconFont,{type:"icon-edit",onClick:()=>O(!0)}))):null,v.default.createElement(p.DChat,{user:k}))},{label:n("detail:所属项目"),value:v.default.createElement(T.Link,{to:{pathname:"/project/detail",search:"?projectCode="+x.projectCode}},x.projectCode)},{label:n("detail:环境类型"),value:x.envType===b.ENV_TYPE.PROD?n("project:生产"):n("project:开发")},{label:n("detail:产出任务"),value:(null===(e=x.capriInfoList)||void 0===e?void 0:e.length)?v.default.createElement("div",{className:N.default.capriInfoList},x.capriInfoList.slice(0,P?x.capriInfoList.length:3).map((e,t)=>v.default.createElement("div",{className:N.default.item,key:t},v.default.createElement("div",{className:c.default(N.default.tag,"href-normal"),onClick:()=>{f.Modal.info({width:480,title:e.capriTask+"的Tag详情",content:v.default.createElement("div",null,e.capriTag.map((e,t)=>v.default.createElement("div",{key:t},e)))})}},v.default.createElement(f.Tooltip,{title:n("message:点击查看tag详情")},v.default.createElement("span",{className:N.default.text},"tag"))),v.default.createElement(_.ExternalLink,{href:o.getScheduleTaskUrl(e.capriTask,e.capriVersion)},e.capriTask))),!P&&(null===(t=x.capriInfoList)||void 0===t?void 0:t.length)>3?v.default.createElement(f.Button,{type:"link",style:{padding:0},onClick:()=>M(!0)},n("common:查看更多")):null):"-"},{label:n("detail:表类型"),value:`${V[x.tableType]} ${x.isPartition?n("hiveTable:分区表"):""}`},x.isPartition?{label:n("detail:最早分区"),value:x.earliestPartition||"-"}:null,x.isPartition?{label:n("detail:最晚分区"),value:x.latestPartition||"-"}:null,{label:n("detail:HDFS路径"),value:x.location},{label:n("detail:数据层次"),value:G},{label:n("detail:增量字段"),value:(null===(a=x.incrementColumn)||void 0===a?void 0:a.join(","))||"-"},{label:n("detail:抽取周期"),value:null!==(l=x.etlTypeName)&&void 0!==l?l:"-"},{label:n("common:描述"),value:v.default.createElement(h.HiveTableComment,{visible:w,setVisible:I})},{label:n("detail:已加入的专辑"),value:v.default.createElement(v.default.Fragment,null,v.default.createElement("div",{className:N.default.addedAlbums},(null==F?void 0:F.length)>4?v.default.createElement("div",{className:N.default.albumMore,onClick:()=>q(!B)},B?v.default.createElement(s.default,null):v.default.createElement(i.default,null)):null,null==F?void 0:F.map((e,t)=>B||t<=3?v.default.createElement("a",{href:"/album/detail?albumId="+e.albumId,key:e.albumId,className:N.default.album},e.name):null),v.default.createElement(f.Tag,{onClick:()=>Q(!0),className:N.default.tagAdd},v.default.createElement(r.default,null)),v.default.createElement(m.AddAlbumModal,{addedAlbums:F,tableName:`${x.dbName}.${x.tableName}`,uri:C,onOk:R,setVisible:()=>Q(!1),title:n("detail:加入专辑"),okText:n("detail:加入专辑"),visible:z})))}].filter(e=>e);return v.default.createElement("div",{className:N.default.list},K.map(({value:e,label:t},a)=>v.default.createElement("div",{key:a,className:N.default.item},v.default.createElement("div",{className:N.default.label},t),v.default.createElement("div",{className:N.default.value},e))))},t.Base=()=>{const{t:e}=y.useTranslation(),{detail:a}=v.useContext(S.HiveDetailContext);return v.default.createElement("div",{className:c.default(N.default.infoItem,N.default.base)},v.default.createElement("div",{className:N.default.title},v.default.createElement("span",null,e("detail:基础信息")),a&&v.default.createElement("div",{className:N.default.value},v.default.createElement("span",{className:N.default.valueLabel},e("search:价值排名"),": "),v.default.createElement("span",{className:N.default.currentScore},a.scoreRankLabel),v.default.createElement("span",null,"/"),v.default.createElement("span",null,a.scoreRankTotalLabel))),v.default.createElement("div",{className:N.default.countInfo},v.default.createElement("div",{className:N.default.item},v.default.createElement("div",{className:N.default.label},e("common:关注")),v.default.createElement("div",{className:N.default.value},(null==a?void 0:a.likeCountLabel)||"-")),v.default.createElement("div",{className:N.default.border}),v.default.createElement("div",{className:N.default.item},v.default.createElement("div",{className:N.default.label},e("detail:30天使用")),v.default.createElement("div",{className:N.default.value},(null==a?void 0:a.last30DayVisitCountLabel)||"-")),v.default.createElement("div",{className:N.default.border}),v.default.createElement("div",{className:N.default.item},v.default.createElement("div",{className:N.default.label},e("detail:直接下游")),v.default.createElement("div",{className:N.default.value},(null==a?void 0:a.directDownstreamCountLabel)||"-")),v.default.createElement("div",{className:N.default.border}),v.default.createElement("div",{className:N.default.item},v.default.createElement("div",{className:N.default.label},e("detail:安全等级"),v.default.createElement(f.Tooltip,{title:e("detail:基于公司信息安全规约，Hive表字段按照C1~4安全等级划分，表安全等级取字段最高等级。")},v.default.createElement(u.default,{style:{color:"#d9d9d9",marginLeft:2}}))),v.default.createElement("div",{className:N.default.value},(null==a?void 0:a.securityLevel)||"-"))),a&&v.default.createElement(t.BaseList,null))}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){e.exports={"add-aibum-modal":"style_add-aibum-modal_nP4Sa",addAibumModal:"style_add-aibum-modal_nP4Sa","album-group-part":"style_album-group-part_E0c25",albumGroupPart:"style_album-group-part_E0c25","add-line":"style_add-line_1ztYK",addLine:"style_add-line_1ztYK","comment-line":"style_comment-line_1GnGq",commentLine:"style_comment-line_1GnGq","album-group":"style_album-group_CEoot",albumGroup:"style_album-group_CEoot","delete-btn":"style_delete-btn_7IFq5",deleteBtn:"style_delete-btn_7IFq5","album-group-left":"style_album-group-left_2tDSx",albumGroupLeft:"style_album-group-left_2tDSx"}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=l(a(82)),r=l(a(162)),u=l(a(414)),s=a(181),o=a(26),d=a(465),c=a(106),m=n(a(0)),f=a(19),p=l(a(2069));t.HiveTableComment=e=>{var t,a;const{uri:l,detail:n}=m.useContext(c.HiveDetailContext),_=m.useContext(c.HiveDetailDispatchContext),{t:h}=f.useTranslation(),{visible:g,setVisible:E}=e,[b,v]=m.useState(!1),[y,T]=m.useState(n.comment);return m.useEffect(()=>T(n.comment),[n.comment]),n.isAssetOwner&&n.isDataOwner?m.default.createElement("div",{className:p.default.comment},m.default.createElement(u.default,{visible:g,trigger:"click",onVisibleChange:e=>E(e),content:m.default.createElement("div",{className:p.default.updateComment},m.default.createElement(r.default.TextArea,{value:y,autoSize:{minRows:3,maxRows:6},onChange:e=>T(e.target.value)}),m.default.createElement("div",{className:p.default.actions},m.default.createElement(i.default,{size:"small",onClick:()=>{E(!1),T(n.comment)}},h("common:取消")),m.default.createElement(i.default,{size:"small",type:"primary",loading:b,onClick:async()=>{v(!0);try{await s.v1TableDetailApi.updateComment({uri:l,comment:y}),_({type:d.HIVE_TABLE_ACTION_TYPES.DETAIL,detail:{comment:y}}),E(!1)}catch(e){o.message.error(e.message)}v(!1)}},h("common:确定"))))},m.default.createElement("div",{className:p.default.actions,onClick:()=>E(!0)},m.default.createElement(o.IconFont,{type:"icon-edit"}))),m.default.createElement("span",null,null!==(a=n.comment)&&void 0!==a?a:"-")):m.default.createElement("span",null,null!==(t=n.comment)&&void 0!==t?t:"-")}},function(e,t,a){e.exports={"update-comment":"style_update-comment_3tj3K",updateComment:"style_update-comment_3tj3K",actions:"style_actions_2-1lX",comment:"style_comment_1F_ps"}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.TableCreator=0]="TableCreator",e[e.WriteOwner=1]="WriteOwner",e[e.HadoopOwner=2]="HadoopOwner",e[e.DDTSOwner=3]="DDTSOwner",e[e.DataRunOwner=4]="DataRunOwner",e[e.TableOwner=5]="TableOwner",e[e.ProjectOwner=6]="ProjectOwner",e[e.DatabaseOwner=7]="DatabaseOwner",e[e.TenantOwner=8]="TenantOwner",e[e.MoveByOther=9]="MoveByOther"}(t.AssetOwnerType||(t.AssetOwnerType={}))},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=l(a(121)),r=l(a(129)),u=l(a(286)),s=l(a(332)),o=l(a(408)),d=l(a(221)),c=a(181),m=l(a(4)),f=a(26),p=a(120),_=a(526),h=n(a(0)),g=a(19),E=l(a(182)),b=a(106),v=a(2072);t.Business=()=>{const{uri:e,detail:t}=h.useContext(b.HiveDetailContext),[a,l]=h.useState(t.userTagList),{t:n}=g.useTranslation(),[y,T]=h.useState(!1),[N,S]=h.useState(!1),[C,x]=h.useState(t.dataOwner),[w,I]=h.useState(t.dataOwner),[L,O]=h.useState(!1),[P,M]=h.useState(!1),[k,D]=h.useState(!1),[A,j]=h.useState(null);return h.useEffect(()=>{l(t.userTagList)},[t.userTagList]),h.default.createElement("div",{className:m.default(E.default.infoItem,E.default.business)},h.default.createElement("div",{className:E.default.title},n("hiveTable:业务信息")),h.default.createElement("div",{className:E.default.list},h.default.createElement("div",{className:E.default.item},h.default.createElement("div",{className:E.default.label},h.default.createElement("span",null,n("hiveTable:业务负责人")),h.default.createElement(f.Tooltip,{title:n("message:原数据负责人，负责数据口径的解释、元数据维护工作")},h.default.createElement(o.default,{className:E.default.tip}))),h.default.createElement("div",{className:E.default.value},t.isDataOwner?h.default.createElement(f.Popover,{visible:N,trigger:"click",onVisibleChange:e=>S(e),content:h.default.createElement("div",{className:E.default.popoverUpdate},h.default.createElement(_.UserSelect,{user:C,setUser:x}),h.default.createElement("div",{className:E.default.actions},h.default.createElement(f.Button,{size:"small",onClick:()=>S(!1)},n("common:取消")),h.default.createElement(f.Button,{size:"small",type:"primary",loading:k,disabled:!(null==C?void 0:C.account)||(null==C?void 0:C.account)===(null==w?void 0:w.account),onClick:async()=>{D(!0);try{await c.v1TableDetailApi.updateDataOwner({uri:e,owner:null==C?void 0:C.account}),I(C),S(!1)}catch(e){f.message.error(e.message)}D(!1)}},n("common:确定"))))},h.default.createElement("div",{className:E.default.actions},h.default.createElement(f.IconFont,{type:"icon-edit",onClick:()=>S(!0)}))):null,h.default.createElement(p.DChat,{user:w}))),t.tableCategoryList.map((e,t)=>h.default.createElement("div",{key:t,className:E.default.item},h.default.createElement("div",{className:E.default.label},e.name),h.default.createElement("div",{className:E.default.value},e.itemNameZh))),h.default.createElement("div",{className:E.default.item},h.default.createElement("div",{className:E.default.label},n("common:标签")),h.default.createElement("div",{className:m.default(E.default.value,E.default.tags)},a.length>10?h.default.createElement("div",{className:E.default.actions,onClick:()=>T(!y)},y?h.default.createElement(r.default,null):h.default.createElement(d.default,null)):null,a.slice(0,y?-1:9).map(t=>h.default.createElement(f.Popover,{key:t.tagId,visible:A===t.tagId,content:h.default.createElement("div",{className:E.default.tagDeleteConfirm},h.default.createElement("div",{className:E.default.tip},h.default.createElement(u.default,null),h.default.createElement("span",null,n("message:确定要删除该标签吗？"))),h.default.createElement("div",{className:E.default.actions},h.default.createElement(f.Button,{size:"small",onClick:()=>j(null)},n("common:取消")),h.default.createElement(f.Button,{size:"small",type:"primary",loading:P,onClick:async()=>{M(!0);try{await c.v1TableDetailApi.deleteTags({uri:e,tagIdList:[t.tagId]}),l(a.filter(e=>e.tagId!==t.tagId)),j(null),M(!1)}catch(e){f.message.error(e.message)}}},n("common:确定"))))},h.default.createElement(f.Tag,{onClick:()=>j(t.tagId)},t.tagName,h.default.createElement(i.default,null)))),h.default.createElement(f.Tag,{onClick:()=>O(!0),className:E.default.tagAdd},h.default.createElement(s.default,null))))),h.default.createElement(v.EditTags,{uri:e,tags:a.map(e=>e.tagName),setTags:l,visible:L,setVisible:O}))}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=a(181),r=l(a(4)),u=a(26),s=n(a(0)),o=a(19),d=l(a(182));t.EditTags=e=>{const{t:t}=o.useTranslation(),{uri:a}=e,[l,n]=s.useState(""),[c,m]=s.useState(e.tags),[f,p]=s.useState(!1),[_,h]=s.useState([]),[g,E]=s.useState(!1),b=s.useCallback(e=>{const t=null==e?void 0:e.trim();t&&!c.includes(t)&&m(c.concat(t)),n("")},[c]);return s.useEffect(()=>m(e.tags),[e.tags]),s.useEffect(()=>{if(!e.visible)return;(async()=>{p(!0);try{const e=await i.v1TableDetailApi.tags();h(e)}catch(e){}p(!1)})()},[e.visible]),s.default.createElement(u.Modal,{className:d.default.updateTagsModal,title:t("detail:更新标签"),visible:e.visible,onCancel:()=>e.setVisible(!1),okButtonProps:{loading:g},onOk:async()=>{E(!0);try{const t=await i.v1TableDetailApi.updateTags({uri:a,tags:c.join(",")});e.setTags(t),e.setVisible(!1)}catch(e){u.message.error(e.message)}E(!1)}},s.default.createElement("div",null,s.default.createElement(u.Input,{className:d.default.tagInput,type:"text",value:l,onChange:e=>n(e.target.value),onBlur:()=>b(l),onPressEnter:()=>b(l),placeholder:t("detail:请输入新标签名称")}),s.default.createElement("div",{className:d.default.tags},c.map((e,t)=>s.default.createElement(u.Tag,{key:e,closable:!0,onClose:()=>m(c.filter((e,a)=>a!==t))},e))),s.default.createElement(u.Spin,{spinning:f,size:"small"},s.default.createElement(s.default.Fragment,null,s.default.createElement("div",{className:d.default.recommendLabel},t("detail:推荐标签"),":"),s.default.createElement("div",{className:r.default(d.default.tags,d.default.recommend)},_.map(e=>s.default.createElement(u.Tag,{key:e,onClick:()=>b(e)},e)))))))}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=l(a(333)),r=l(a(527)),u=a(181),s=l(a(4)),o=a(26),d=a(2076),c=a(368),m=a(276),f=a(148),p=n(a(0)),_=a(19),h=a(117),g=a(106),E=l(a(2077));t.Nps=()=>{const{uri:e,detail:t}=p.useContext(g.HiveDetailContext),{t:a}=_.useTranslation(),l=h.useHistory(),[n,b]=p.useState(),v=c.useNpsLabel(),y=p.useRef(void 0),[T,N]=p.useState(null),[S,C]=p.useState(null);p.useEffect(()=>{t&&N(t.starId)},[t]);return p.useEffect(()=>{if(!y.current&&T)return void(y.current=T);if(!e)return;let t=!1;return(async()=>{const a=await u.v1TableDetailApi.tableNps(e);t||b(a)})(),y.current=T,()=>t=!0},[e,T]),n?p.default.createElement("div",{className:E.default.nps},p.default.createElement("div",{className:E.default.npsInfo},p.default.createElement("div",{className:E.default.score},n.score),p.default.createElement("div",{className:E.default.index},a("nps:用户NPS指数"),": ",n.nps,"%"),p.default.createElement("div",{className:E.default.commented,onClick:()=>{l.push({pathname:"/detail",search:`?uri=${e}&tab=intro&subTab=comment`,state:{referer:f.RefererType.INNER}}),setTimeout(()=>{window.location.reload()},10)}},p.default.createElement(_.Trans,{i18nKey:"nps:已有人评价",count:n.appraisalNum||0},"已有",""+(n.appraisalNum||0),"人评价")),p.default.createElement(d.Comment,{starId:T},p.default.createElement("div",{className:E.default.star},p.default.createElement("span",{className:E.default.text},a("detail:给个评价")),m.AppraisalValue.map(e=>p.default.createElement(o.Tooltip,{key:e,title:v[e]},p.default.createElement("div",{className:s.default(E.default.item,{[E.default.fill]:(null==t?void 0:t.starId)>=e}),onClick:()=>N(e),onMouseEnter:()=>C(e),onMouseLeave:()=>C(null)},(S||(null==t?void 0:t.starId))>=e?p.default.createElement(i.default,{className:E.default.fill,key:e}):p.default.createElement(r.default,{key:e}))))))),p.default.createElement("div",{className:E.default.action},n.starResponse.map(e=>p.default.createElement("div",{className:E.default.item,key:e.tagId},p.default.createElement("div",{className:E.default.label},a("nps:"+v[e.tagId])),p.default.createElement("div",{className:E.default.value},p.default.createElement("div",{className:E.default.percent,style:{width:e.proportion+"%"}})),p.default.createElement("div",{className:E.default.percent},e.proportion,"%"))))):null}},,,function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=l(a(333)),r=l(a(527)),u=a(30),s=l(a(82)),o=l(a(222)),d=l(a(162)),c=l(a(226)),m=l(a(118)),f=a(278),p=l(a(4)),_=a(26),h=a(276),g=a(148),E=a(465),b=n(a(0)),v=a(19),y=a(143),T=a(106),N=l(a(1179)),S=a(368);t.Comment=e=>{const t=u.getQuery("requestOpen"),{t:a}=v.useTranslation(),{uri:l,detail:n,changeNpsVisible:C}=b.useContext(T.HiveDetailContext),x=b.useContext(T.HiveDetailDispatchContext),[w,I]=b.useState(!1),[L,O]=b.useState(!1),[P,M]=b.useState(null),[k,D]=b.useState(void 0),[A,j]=b.useState(e.starId),[F,R]=b.useState(new Set),[H,U]=b.useState(!1),[B,q]=b.useState(!1),z=S.useNpsLabel();b.useEffect(()=>{t&&U(!0)},[t]),b.useEffect(()=>{C&&(u.updateQuery({requestOpen:!0}),U(!0))},[C]),b.useEffect(()=>{t||j(e.starId)},[e.starId,t]);const Q=y.useHistory();b.useEffect(()=>{(async()=>{I(!0);const e=f.appraisalApi.tags(),a=f.appraisalApi.mine(l),n=await e,i=await a;t?(q(!1),D("希望开放表申请权限"),j(h.AppraisalStarId.Recommend),R(new Set([]))):i&&(R(new Set(i.tagList.map(e=>e.tagId))),j(i.starId),D(i.content),q((null==i?void 0:i.isAnonymous)||!0)),M(n),I(!1)})()},[t,l]);const V=()=>{U(!1),t&&u.updateQuery({requestOpen:null})};return n?b.default.createElement(b.default.Fragment,null,b.default.createElement("div",{onClick:()=>U(!0)},e.children),b.default.createElement(c.default,{width:560,title:""+a("common:评价"),visible:H,onCancel:V,className:N.default.comment,footer:b.default.createElement(b.default.Fragment,null,b.default.createElement(o.default,{onChange:e=>q(e.target.checked),checked:B},a("common:匿名")),b.default.createElement("div",{className:N.default.actions},b.default.createElement(s.default,{onClick:V,disabled:L},a("common:取消")),b.default.createElement(s.default,{type:"primary",onClick:async()=>{if(!A)return _.message.error(a("message:请先选择星标"));if(A<103&&!k)return _.message.error(a("message:请输入内容"));try{O(!0),await f.appraisalApi.appraisal({uri:l,starId:A,tagIds:[...F],content:k,isAnonymous:B}),x({type:E.HIVE_TABLE_ACTION_TYPES.DETAIL,detail:{starId:A}}),U(!1),Q.push({pathname:"/detail",search:`?uri=${l}&tab=intro&subTab=comment`,state:{referer:g.RefererType.INNER}}),Q.go(0)}catch(e){_.message.error(e.message)}O(!1),t&&u.updateQuery({requestOpen:null})},loading:L},a("common:发表评论"))))},b.default.createElement(m.default,{spinning:w},b.default.createElement("div",{className:N.default.title},`${n.dbName}.${n.tableName}`),b.default.createElement("div",{className:N.default.desc},n.tableNameZh),b.default.createElement("div",{className:N.default.star},h.AppraisalValue.map(e=>b.default.createElement("div",{className:p.default(N.default.item,{[N.default.fill]:A>=e}),key:e,onClick:()=>j(e)},A>=e?b.default.createElement(i.default,{className:N.default.fill,key:e}):b.default.createElement(r.default,{key:e}),b.default.createElement("div",{className:N.default.text},z[e])))),b.default.createElement("div",{className:N.default.tags},((A<=h.AppraisalStarId.NotBad?null==P?void 0:P.notRecommendTagList:null==P?void 0:P.recommendTagList)||[]).map(({tagId:e,tagName:t})=>b.default.createElement("div",{key:e,className:p.default(N.default.tag,{[N.default.active]:F.has(e)}),onClick:()=>{F.has(e)?(F.delete(e),R(new Set(F))):R(new Set(F.add(e)))}},t))),b.default.createElement(d.default.TextArea,{placeholder:a("message:请输入"),className:N.default.content,value:k,rows:5,onChange:e=>D(e.target.value)})))):null}},function(e,t,a){e.exports={nps:"nps_nps_1RCfM","nps-info":"nps_nps-info_LcPVR",npsInfo:"nps_nps-info_LcPVR",score:"nps_score_VVdw9",index:"nps_index_2pBPb",commented:"nps_commented_3TKrF",star:"nps_star_2zhD-",text:"nps_text_1TJJe",item:"nps_item_2E3cC",fill:"nps_fill_3vzHK",action:"nps_action_1NHWM",label:"nps_label_2zU1p",value:"nps_value_3wYvr",percent:"nps_percent_nZKiI"}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=l(a(4)),r=n(a(0)),u=a(19),s=l(a(182)),o=a(106);t.Storage=()=>{const{detail:e}=r.useContext(o.HiveDetailContext),{t:t}=u.useTranslation(),a=[{label:t("hiveTable:存储量(逻辑)"),value:e.storageLabel},{label:t("hiveTable:生命周期"),value:-1===e.ttl?t("common:未设置"):0===e.ttl?t("common:永久"):`${e.ttl}${t("common:天")}`},e.isPartition?{label:t("hiveTable:分区个数"),value:e.partitionNumLabel}:null,{label:t("hiveTable:表创建时间"),value:e.tableCreateTimeLabel},{label:t("hiveTable:DDL最后变更时间"),value:e.tableModifyTimeLabel},{label:t("hiveTable:最后数据变更时间"),value:e.lastDataUpdateTimeLabel},{label:t("hiveTable:最后数据查看时间"),value:e.lastDataAccessTimeLabel}].filter(e=>e);return r.default.createElement("div",{className:i.default(s.default.infoItem,s.default.storage)},r.default.createElement("div",{className:s.default.title},t("hiveTable:存储信息")),r.default.createElement("div",{className:s.default.list},a.map(({value:e,label:t},a)=>r.default.createElement("div",{key:a,className:s.default.item},r.default.createElement("div",{className:s.default.label},t),r.default.createElement("div",{className:s.default.value},e)))))}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=l(a(408)),r=l(a(2080)),u=l(a(809)),s=a(30),o=a(176),d=a(263),c=a(181),m=l(a(4)),f=a(26),p=a(97),_=a(2083),h=a(2085),g=a(98),E=n(a(0)),b=l(a(262)),v=a(19),y=a(117),T=l(a(182)),N=a(465),S=a(106),C=l(a(2086));t.TopInfo=()=>{const{t:e}=v.useTranslation(),{uri:t,detail:a,tableId:l,setChangeNpsVisible:n}=E.useContext(S.HiveDetailContext),x=E.useContext(S.HiveDetailDispatchContext),[w,I]=E.useState(a.isLike),[L,O]=E.useState(!1),[P,M]=E.useState(!1),[k,D]=E.useState(!1),[A,j]=E.useState(a.tableNameZh),[F,R]=E.useState(a.tableNameZh),[H,U]=E.useState(!1),B=y.useHistory(),[q]=f.Form.useForm(),z=E.useMemo(()=>{const{tableName:e,dbName:t}=a;return(null==a?void 0:a.recommendINFO)?{tableName:`${t}.${e}`,recommendTable:`${a.recommendINFO.recommendDb}.${a.recommendINFO.recommendTable}`,recommendReason:a.recommendINFO.recommendReason}:{tableName:`${t}.${e}`}},[a]),Q=E.useMemo(()=>a.isProjectManager||a.isAssetOwner,[a.isProjectManager,a.isAssetOwner]);return E.default.createElement("div",{className:m.default(C.default.topInfo,{[C.default.offline]:a.isOffline||a.isMetaOffline})},E.default.createElement("div",{className:C.default.header},a.isOffline&&!a.isMetaOffline?E.default.createElement("div",{className:C.default.offlineStatus},e("detail:下线中"),E.default.createElement(f.Tooltip,{placement:"bottomLeft",title:e("toolHive:该表已在数据地图设置下线,如需对表进一步下线删除请前往资产管理平台进行操作。")},E.default.createElement(i.default,{style:{color:"#fff",marginLeft:4,fontSize:12}}))):null,a.isMetaOffline&&E.default.createElement("div",{className:C.default.offlineStatus},e("detail:已下线"),E.default.createElement(f.Tooltip,{placement:"bottomLeft",title:`${e("meaasge:该表已在资产管理平台设置下线，将于")}${a.metaOfflineTimeLabel}${e("meaasge:正式删除表")}`},E.default.createElement(i.default,{style:{color:"#fff",marginLeft:4,fontSize:12}}))),a.isChoicest&&E.default.createElement("span",{className:C.default.choicestText},"精"),E.default.createElement(f.Tooltip,{title:`${a.dbName}.${a.tableName}`,placement:"bottom"},E.default.createElement("div",{className:C.default.title},a.dbName,".",a.tableName)),E.default.createElement(b.default,{text:`${a.dbName}.${a.tableName}`,onCopy:()=>f.message.success(e("message:复制成功"))},E.default.createElement(f.IconFont,{type:"icon-copy"})),!1===a.isOpen&&E.default.createElement(f.Tooltip,{title:E.default.createElement("div",{className:C.default.openTooltip},e("message:该表未开放申请权限，如需使用可点击"),E.default.createElement("a",{onClick:()=>{n(!0),setTimeout(()=>{n(!1)},1e3)}},e("message:请求开放")),e("message:告知表负责人"),"。")},E.default.createElement("span",{className:C.default.openTag},e("message:未开放"))),E.default.createElement("div",{className:C.default.envTag},a.tableType===g.TABLE_TYPE.VIRTUAL_VIEW?e("hiveTable:视图表"):a.envType===g.ENV_TYPE.DEV?e("hiveTable:离线-测试表"):e("hiveTable:离线-生产表"))),E.default.createElement("div",{className:C.default.comment},E.default.createElement("span",null,A),!a.isDataOwner||a.isOffline||a.isMetaOffline?null:E.default.createElement(f.Popover,{visible:P,trigger:"click",placement:"bottomLeft",align:{offset:[-10,0]},onVisibleChange:e=>M(e),content:E.default.createElement("div",{className:T.default.updateComment},E.default.createElement(f.Input.TextArea,{value:F,autoSize:{minRows:3,maxRows:6},onChange:e=>R(e.target.value)}),E.default.createElement("div",{className:T.default.actions},E.default.createElement(f.Button,{size:"small",onClick:()=>M(!1)},e("common:取消")),E.default.createElement(f.Button,{size:"small",type:"primary",loading:k,onClick:async()=>{D(!0);try{await c.v1TableDetailApi.updateNameZh({uri:t,name:F}),R(F),j(F),M(!1),D(!1)}catch(e){f.message.error(e.message)}}},e("common:确定"))))},E.default.createElement(f.IconFont,{onClick:()=>M(!0),type:"icon-edit"}))),E.default.createElement("div",{className:C.default.actions},!a.isMetaOffline&&!a.isOffline&&E.default.createElement(f.Spin,{size:"small",spinning:L},E.default.createElement("div",{className:m.default(C.default.care,{[C.default.cared]:w}),onClick:async()=>{var e;if(!a.isOffline){try{O(!0);let l=a.likeCount;w&&(l=await c.v1TableDetailApi.unLike(t),I(!1),x({type:N.HIVE_TABLE_ACTION_TYPES.DETAIL,detail:{likeCount:l,likeCountLabel:null!==(e=s.humanNum(l,{useGrouping:!0}))&&void 0!==e?e:"-"}}))}catch(e){f.message.error(e)}O(!1)}}},w?E.default.createElement(E.default.Fragment,null,E.default.createElement(f.IconFont,{type:"icon-liked"}),E.default.createElement("span",null,e("common:已关注"))):E.default.createElement(f.Popconfirm,{icon:null,overlayClassName:T.default.concernPopover,placement:"topLeft",title:E.default.createElement(f.Form,{form:q},E.default.createElement(f.Form.Item,{name:"comment"},E.default.createElement(f.Input,{placeholder:`${e("message:请填写关注原因")}，${e("message:非必填")}`}))),onConfirm:()=>{q.validateFields().then(e=>{O(!0),(async e=>{var l;try{let n=a.likeCount;n=await c.v1TableDetailApi.likeWithComment({uri:t,comment:e.comment}),I(!0),x({type:N.HIVE_TABLE_ACTION_TYPES.DETAIL,detail:{likeCount:n,likeCountLabel:null!==(l=s.humanNum(n,{useGrouping:!0}))&&void 0!==l?l:"-"}})}catch(e){f.message.error(e)}O(!1)})(e)})},okText:e("common:确定"),cancelText:e("common:取消")},E.default.createElement("div",{className:m.default(C.default.care)},E.default.createElement(f.IconFont,{type:w?"icon-liked":"icon-like"}),E.default.createElement("span",null,e("common:关注")))))),!a.isMetaOffline&&!a.isOffline&&(a.isAuth?E.default.createElement("div",null,E.default.createElement(f.IconFont,{type:"icon-sql-query"}),E.default.createElement(p.ExternalLink,{href:`${s.bigDataOrigin}/ddc_fetch_tools/sql.html#/sql?tableId=${l}`},e("detail:SQL查询"))):E.default.createElement("div",null,E.default.createElement(f.IconFont,{type:"icon-permission"}),E.default.createElement(p.ExternalLink,{href:`${s.pamOrigin}/role/apply?type=personal&tblName=${a.dbName}.${a.tableName}&purposeFlag=1`},e("detail:申请权限")))),Q&&!a.isOffline&&!a.isMetaOffline&&E.default.createElement(p.ExternalLink,{href:`${s.studioOrigin}/dt-table?projectId=${a.projectId}&operate=edit&tableName=${a.tableName}&env=${a.envType}`},E.default.createElement(f.IconFont,{type:"icon-edit"}),E.default.createElement("span",null,e("detail:编辑表结构"))),Q&&E.default.createElement(E.default.Fragment,null,E.default.createElement("div",{className:C.default.online,onClick:()=>U(!0)},E.default.createElement(f.IconFont,{type:"icon-related-recommend"}),E.default.createElement("span",null,e("detail:关联推荐")),E.default.createElement(f.Tooltip,{title:e("当表经过迁移、封装、脱敏等过程形成新表时，可设置关联推荐让用户使用新表进行数据查询等工作。")},E.default.createElement(f.IconFont,{className:"action",type:"icon-question",style:{color:"#d9d9d9"}}))),E.default.createElement(_.RecommendModal,{visible:H,setVisible:U,initValue:z})),Q&&E.default.createElement("div",{className:C.default.online,onClick:()=>B.push({pathname:"/notify/initiate",search:`?name=${null==a?void 0:a.dbName}.${null==a?void 0:a.tableName}&uri=${t}`})},E.default.createElement(f.IconFont,{className:"action",type:"icon-tongzhi"}),e("变更通知")),Q&&!a.isMetaOffline&&E.default.createElement("div",{onClick:a.isOffline?()=>{o.Modal.confirm({title:"确认将表上线吗？",content:"设置表上线后，表详情页的“下线中”标识将会消除，可对表进行操作",onOk:async()=>{try{await d.v1HiveInfoApi.tableOnOrOff({status:h.ON_TABLE,uris:[t]}),x({type:N.HIVE_TABLE_ACTION_TYPES.DETAIL,detail:{isOffline:!1}}),f.message.success("表已上线")}catch(e){f.message.error(e.message)}}})}:()=>{o.Modal.confirm({title:"确认将表下线吗？",content:E.default.createElement(E.default.Fragment,null,"设置表下线后，表详情页会显示“下线中”标识，如需对表进一步下线删除请前往",E.default.createElement(p.ExternalLink,{href:`${s.metaOrigin}/storage?tableKeyword=${a.dbName}.${a.tableName}`},"资产管理平台"),"进行操作。"),onOk:async()=>{try{await d.v1HiveInfoApi.tableOnOrOff({status:h.OFFLINE_TABLE,uris:[t]}),x({type:N.HIVE_TABLE_ACTION_TYPES.DETAIL,detail:{isOffline:!0}}),f.message.success("表已下线")}catch(e){f.message.error(e.message)}}})},className:C.default.online},a.isOffline?E.default.createElement(u.default,{className:"action"}):E.default.createElement(r.default,{className:"action"}),E.default.createElement("span",null,a.isOffline?e("detail:表上线"):e("detail:表下线")))))}},,,,function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=a(263),r=l(a(4)),u=a(26),s=a(465),o=a(106),d=n(a(0)),c=a(19),m=l(a(2084)),f={labelCol:{span:6},wrapperCol:{span:20}};t.RecommendModal=e=>{const{visible:t,setVisible:a,initValue:l}=e,{uri:n,detail:p}=d.useContext(o.HiveDetailContext),_=d.useContext(o.HiveDetailDispatchContext),{t:h}=c.useTranslation(),[g]=u.useForm(),{resetFields:E}=g,[b,v]=d.useState(!1);d.useEffect(()=>{t&&E()},[E,t]);return d.default.createElement(u.Modal,{visible:t,onCancel:()=>{a(!1),g.resetFields()},onOk:g.submit,title:h("修改Hive表关联推荐"),confirmLoading:b,width:540},d.default.createElement(u.Alert,{className:r.default("alert-normal",m.default.alertNormalStyle),showIcon:!0,type:"warning",message:d.default.createElement(d.default.Fragment,null,h("message:设置表关联推荐后，为避免影响数据查询等工作，建议"),d.default.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:`/notify/initiate?name=${null==p?void 0:p.dbName}.${null==p?void 0:p.tableName}&uri=${n}`},h("message:发起变更通知")),h("message:给相关人员。"))}),d.default.createElement(u.Form,Object.assign({initialValues:l,onFinish:async({recommendTable:e,recommendReason:t})=>{v(!0);const l=e.split(".")[1],r=e.split(".")[0],o=`hive://mycluster-tj:${r}:${l}`;try{await i.v1HiveInfoApi.recommendTable([{recommendReason:t,recommendUri:o,uri:n}])?(u.message.success(h("关联成功")),a(!1),_({type:s.HIVE_TABLE_ACTION_TYPES.DETAIL,detail:{recommendINFO:{recommendDb:r,recommendTable:l,recommendReason:t}}})):u.message.error(h("关联失败"))}catch(e){u.message.error(e.message)}v(!1)},form:g},f),d.default.createElement(u.Form.Item,{label:h("表名"),required:!0},l.tableName),d.default.createElement(u.Form.Item,{label:h("关联推荐表名"),name:"recommendTable",required:!0},d.default.createElement(u.Input,null)),d.default.createElement(u.Form.Item,{label:h("关联推荐原因"),name:"recommendReason"},d.default.createElement(u.Input,null))))}},function(e,t,a){e.exports={"alert-normal-style":"style_alert-normal-style_299Hb",alertNormalStyle:"style_alert-normal-style_299Hb"}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ON_TABLE=1,t.OFFLINE_TABLE=2},function(e,t,a){e.exports={"open-tooltip":"top-info_open-tooltip_r63Ew",openTooltip:"top-info_open-tooltip_r63Ew","top-info":"top-info_top-info_3_vW1",topInfo:"top-info_top-info_3_vW1","disabled-line":"top-info_disabled-line_GsrL9",disabledLine:"top-info_disabled-line_GsrL9","open-tag":"top-info_open-tag_3EU0o",openTag:"top-info_open-tag_3EU0o",offline:"top-info_offline_J_HhC",header:"top-info_header_CGY5Z","choicest-text":"top-info_choicest-text_2Awu5",choicestText:"top-info_choicest-text_2Awu5","env-tag":"top-info_env-tag_OcIbx",envTag:"top-info_env-tag_OcIbx","capriTag?":"top-info_capriTag?_1HhXi",length:"top-info_length_1BVyZ",comment:"top-info_comment_33ywi",actions:"top-info_actions_29B6o",online:"top-info_online_3zzLH","offline-status":"top-info_offline-status_1MdW_",offlineStatus:"top-info_offline-status_1MdW_",title:"top-info_title_3I_qQ",care:"top-info_care_12p17",cared:"top-info_cared_1LbOc",permission:"top-info_permission_XFI0P",album:"top-info_album_2lclL",score:"top-info_score_1dW-m"}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=a(30),r=l(a(4)),u=a(26),s=a(760),o=n(a(0)),d=a(19),c=a(106),m=l(a(2088)),f=a(2089),p=a(2134),_=a(2146),h=a(2158),g=a(2161),E=a(2169);t.HiveDetailPane=()=>{const{t:e}=d.useTranslation(),{uri:t,tab:a,setTab:l}=o.useContext(c.HiveDetailContext);return o.default.createElement("div",{className:m.default.detailInfo},o.default.createElement(u.Tabs,{animated:!1,className:r.default(m.default.detailTabs,"tabs-custom-light"),onChange:e=>{i.updateQuery({tab:"info"===e?null:e,subTab:null,pageSize:null,pageCurrent:null}),l(e)},activeKey:a},o.default.createElement(u.Tabs.TabPane,{tab:o.default.createElement("span",{className:"nav-text"},e("detail:明细信息")),key:s.IHiveDetailTab.INFO},a===s.IHiveDetailTab.INFO&&o.default.createElement(f.TabInfo,null)),o.default.createElement(u.Tabs.TabPane,{tab:o.default.createElement("span",{className:"nav-text"},e("detail:血缘信息")),key:s.IHiveDetailTab.LINEAGE},a===s.IHiveDetailTab.LINEAGE&&o.default.createElement(_.Lineage,null)),o.default.createElement(u.Tabs.TabPane,{tab:o.default.createElement("span",{className:"nav-text"},e("detail:数据预览")),key:s.IHiveDetailTab.PREVIEW},a===s.IHiveDetailTab.PREVIEW&&o.default.createElement(h.TabPreview,null)),o.default.createElement(u.Tabs.TabPane,{tab:o.default.createElement("span",{className:"nav-text"},e("detail:数据统计")),key:s.IHiveDetailTab.STATISTICS},a===s.IHiveDetailTab.STATISTICS&&o.default.createElement(g.TabStatistics,null)),o.default.createElement(u.Tabs.TabPane,{tab:o.default.createElement("span",{className:"nav-text"},e("detail:使用记录")),key:s.IHiveDetailTab.USAGE},a===s.IHiveDetailTab.USAGE&&o.default.createElement(E.TabUsage,null)),o.default.createElement(u.Tabs.TabPane,{tab:o.default.createElement("span",{className:"nav-text"},e("detail:使用说明")),key:s.IHiveDetailTab.INTRO},a===s.IHiveDetailTab.INTRO&&o.default.createElement(p.TabIntro,null))))}},function(e,t,a){e.exports={"detail-info":"index_detail-info_18F-S",detailInfo:"index_detail-info_18F-S","go-to-old-version":"index_go-to-old-version_1Rkf-",goToOldVersion:"index_go-to-old-version_1Rkf-","detail-tabs":"index_detail-tabs_31Rfd",detailTabs:"index_detail-tabs_31Rfd"}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=a(30),i=a(26),r=l(a(0)),u=a(19),s=a(2090),o=a(2093),d=l(a(1181)),c=a(2100),m=a(2130),f=a(2132);t.TabInfo=()=>{const{t:e}=u.useTranslation();return r.default.createElement(i.Tabs,{animated:!1,className:d.default.tabInfo,onChange:e=>n.updateQuery({subTab:"field"===e?null:e,pageSize:null,pageCurrent:null}),defaultActiveKey:n.getQuery("tab")?null:n.getQuery("subTab")},r.default.createElement(i.Tabs.TabPane,{className:d.default.fieldPane,tab:r.default.createElement("span",{className:"tab-nav-text"},e("detail:字段信息")),key:"field"},r.default.createElement(o.Field,null)),r.default.createElement(i.Tabs.TabPane,{tab:r.default.createElement("span",{className:"tab-nav-text"},e("detail:分区信息")),key:"partition"},r.default.createElement(m.Partition,null)),r.default.createElement(i.Tabs.TabPane,{tab:r.default.createElement("span",{className:"tab-nav-text"},e("detail:变更历史")),key:"updateLog"},r.default.createElement(s.ChangeHistory,null)),r.default.createElement(i.Tabs.TabPane,{tab:r.default.createElement("span",{className:"tab-nav-text"},e("detail:产出信息")),key:"output"},r.default.createElement(c.Output,null)),r.default.createElement(i.Tabs.TabPane,{tab:r.default.createElement("span",{className:"tab-nav-text"},e("detail:生产脚本")),key:"script"},r.default.createElement(f.ProdScript,null)))}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=a(30),r=l(a(220)),u=a(555),s=a(263),o=a(26),d=a(120),c=a(89),m=l(a(320)),f=a(2091),p=a(98),_=a(106),h=n(a(0)),g=a(19),E=l(a(2092));t.ChangeHistory=()=>{const{t:e}=g.useTranslation(),{uri:t}=h.useContext(_.HiveDetailContext),[a,l]=h.useState(!1),[n,b]=h.useState([]),[v]=u.useForm(),[y,T]=h.useState(i.getQuery("pageCurrent","number")||1),[N,S]=h.useState(i.getQuery("pageSize","number")||10),[C,x]=h.useState(null),[w,I]=h.useState({tableUri:t}),L=c.useShowTotal(),O=h.useCallback(async()=>{if(!t)return;let e=!1;try{l(!0);const t=await s.v1HiveInfoApi.changeHistory({pageCurrent:y,pageSize:N,pageFilter:w});if(e)return;x(t.total),b(t.records)}catch(e){}return e?void 0:(l(!1),()=>e=!0)},[t,y,N,w]);h.useEffect(()=>{O()},[O]);const P=h.useMemo(()=>[{label:e("detail:创建表"),value:f.ChangeHistoryType.CREATE},{label:e("common:删除"),value:f.ChangeHistoryType.DELETE},{label:e("common:更新"),value:f.ChangeHistoryType.UPDATE}],[e]);return h.default.createElement("div",{className:E.default.changeHistory},h.default.createElement(r.default,{layout:"inline",form:v,initialValues:{type:i.getQuery("type")||void 0},onFinish:async({type:e,dates:a})=>{const l={tableUri:t,type:e};(null==a?void 0:a[0])&&(l.startTime=a[0].valueOf()),(null==a?void 0:a[1])&&(l.endTime=a[1].valueOf()),I(l),T(1)}},h.default.createElement(r.default.Item,{label:e("detail:选择类型"),name:"type"},h.default.createElement(o.Select,{style:{width:230},placeholder:e("common:请选择"),allowClear:!0,onChange:e=>{i.updateQuery({type:e}),v.submit()}},P.map(e=>h.default.createElement(o.Select.Option,{key:e.label,value:e.value},e.label)))),h.default.createElement(r.default.Item,{label:e("detail:选择时间"),name:"dates"},h.default.createElement(o.DatePicker.RangePicker,{style:{width:230},onChange:v.submit,format:"YYYY/MM/DD",disabledDate:e=>e>m.default().endOf("day")}))),h.default.createElement(o.Table,{rowKey:"key",loading:a,columns:[{title:e("detail:内容"),dataIndex:"changeInfo"},{title:e("common:类型"),width:170,dataIndex:"type"},{title:e("detail:粒度"),width:180,dataIndex:"granularity"},{title:e("detail:操作时间"),width:160,dataIndex:"operateTimeLabel"},{title:e("detail:操作人"),width:110,dataIndex:"operator",render:(e,t)=>h.default.createElement(d.DChat,{user:t.operator})}],dataSource:n,pagination:{...p.PAGE_CONFIG,pageSize:N,current:y,total:C,showTotal:L,onShowSizeChange:(e,t)=>{S(t),T(1),i.updateQuery({pageSize:10===t?null:t,pageCurrent:null})},onChange:e=>{T(e),i.updateQuery({pageCurrent:1===e?null:e})}}}))}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.CREATE="CREATE",e.UPDATE="UPDATE",e.DELETE="DELETE"}(t.ChangeHistoryType||(t.ChangeHistoryType={}))},function(e,t,a){e.exports={"change-history":"change-history_change-history_2Blqr",changeHistory:"change-history_change-history_2Blqr"}},function(e,t,a){"use strict";var l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=a(30),r=a(263),u=a(181),s=a(26),o=a(2094),d=a(97),c=a(1180),m=a(327),f=a(760),p=a(106),_=l(a(0)),h=n(a(262)),g=n(a(260)),E=a(19),b=a(117),v=a(103),y=n(a(1181));let T="";t.Field=()=>{const{t:e}=E.useTranslation(),{uri:t,tableId:a,detail:l,sharedColumnName:n,setTab:N}=_.useContext(p.HiveDetailContext),{dbName:S,tableName:C}=v.getDbTableFromUri(i.getQuery("uri")),x=i.getQuery("keyword").split(","),[w,I]=_.useState(!1),[L,O]=_.useState(null),[P,M]=_.useState(!1),[k,D]=_.useState(!1),[A,j]=_.useState(""),[F,R]=_.useState(!1),[H,U]=_.useState(!1),[B,q]=_.useState(""),[z,Q]=_.useState([]),[V,G]=_.useState([]),Y=_.useMemo(()=>L?z.filter(e=>{var t,a;return(null===(t=e.columnName)||void 0===t?void 0:t.includes(L))||(null===(a=e.comment)||void 0===a?void 0:a.includes(L))}):z,[L,z]);_.useLayoutEffect(()=>{if(T===n)return;if(!n||!Y.length)return;const e=Y.findIndex(e=>e.columnName===n);if(e){const{top:t}=document.querySelector("."+y.default.table).getBoundingClientRect();window.scrollTo({top:window.scrollY+t+51+47*e,behavior:"smooth"}),T=n}},[Y,n]);const W=_.useCallback(async()=>{I(!0);const e=await u.v1TableDetailApi.tableColumns(t,!0),a=[],l=[];for(const t of e)t.isPartitionKey?a.push(t):l.push(t);Q(l),G(a),I(!1)},[t]);_.useEffect(()=>{let e=!1;if(!t)return;return(async()=>{try{I(!0);const a=await u.v1TableDetailApi.tableColumns(t);if(e)return;const l=[],n=[];for(const e of a)e.isPartitionKey?l.push(e):n.push(e);Q(n),G(l)}catch(e){}e||I(!1)})(),()=>e=!0},[t]);const $=_.useMemo(()=>[{title:e("common:序号"),width:80,fixed:"left",dataIndex:"position"},{title:e("detail:字段名"),fixed:"left",dataIndex:"columnName",className:y.default.columnName,render:(e,t)=>t.isMetric?_.default.createElement(s.Tooltip,{title:t.metricName},_.default.createElement("div",null,_.default.createElement(d.ExternalLink,{className:y.default.columnContent,href:`${i.dataMapOrigin}/indicators_manage/manage.html#/detail/${t.metricId}`},_.default.createElement(s.IconFont,{type:"icon-index"}),_.default.createElement("span",null,_.default.createElement(g.default,{textToHighlight:e,searchWords:x,highlightClassName:y.default.highlighter,autoEscape:!0}))))):_.default.createElement(g.default,{textToHighlight:e,searchWords:x,highlightClassName:y.default.highlighter,autoEscape:!0})},{title:e("common:描述"),dataIndex:"comment",render:e=>_.default.createElement(g.default,{textToHighlight:e,searchWords:x,highlightClassName:y.default.highlighter,autoEscape:!0})},{title:e("common:类型"),width:120,dataIndex:"type"},{title:e("detail:安全等级"),width:120,dataIndex:"securityLevel"},{title:e("detail:中文名"),dataIndex:"columnNameZhLabel",render:(e,{columnNameZh:t})=>e.length>20?_.default.createElement(s.Tooltip,{title:t},_.default.createElement(g.default,{textToHighlight:e,searchWords:x,highlightClassName:y.default.highlighter,autoEscape:!0})):_.default.createElement(g.default,{textToHighlight:e,searchWords:x,highlightClassName:y.default.highlighter,autoEscape:!0})},{title:e("detail:热度"),width:90,dataIndex:"hotRate",sorter:(e,t)=>e.hotRate-t.hotRate,className:y.default.columnHot,render:e=>_.default.createElement("div",{className:y.default.columnContent},_.default.createElement(s.IconFont,{className:y.default.iconHot,type:"icon-hot"}),_.default.createElement("div",{className:y.default.hotCurrent},_.default.createElement(s.IconFont,{className:y.default.iconHotCurrent,style:{width:e+"%"},type:"icon-hot"})))},{title:e("detail:枚举值"),width:110,dataIndex:"columnEnum",key:"columnEnum",render:(e,t)=>_.default.createElement(o.Enum,{columnName:t.columnName,columnId:t.columnId,data:t.columnEnum,afterSuccess:W})},{title:_.default.createElement(s.Tooltip,{title:e("message:指业务含义上的主键，可在数梦可视化建表时指定字段为主键。")},_.default.createElement("span",null,e("detail:主键")," ",_.default.createElement(s.IconFont,{style:{color:"#ccc"},type:"icon-question"}))),width:110,dataIndex:"isPrimaryKey",render:t=>e(t?"是":"否")},{title:e("common:操作"),dataIndex:"action",width:160,className:y.default.columnAction,fixed:"right",render:(a,l)=>_.default.createElement("div",{className:y.default.columnContent},_.default.createElement("span",{className:y.default.actionStat,onClick:()=>{i.updateQuery({field:l.columnName}),N(f.IHiveDetailTab.PREVIEW)}},e("common:预览")),_.default.createElement(s.Tooltip,{overlayStyle:{maxWidth:400},title:_.default.createElement("div",null,_.default.createElement("div",null,`${location.origin}/detail?uri=${t}:${l.columnName}`),_.default.createElement("div",null,e("message:点击分享复制链接")))},_.default.createElement(h.default,{text:`${location.origin}/detail?uri=${t}:${l.columnName}`,onCopy:()=>s.message.success(e("message:分享链接复制成功"))},_.default.createElement("span",{className:y.default.actionShare},e("common:分享")))))}],[e,x,W,t,N]),K=_.useMemo(()=>v.getTableWidth($,0,250),[$]),Z=$.slice(0,6);Z.push({title:e("detail:分区字段"),width:110,dataIndex:"isPartition",key:"isPartition",render:e=>e});const J=m.useExportList(Z,`${S}.${C}字段信息.csv`);return _.default.createElement("div",null,_.default.createElement("div",{className:y.default.actions},((null==l?void 0:l.isDataOwner)||(null==l?void 0:l.isAssetOwner)||(null==l?void 0:l.isProjectManager))&&_.default.createElement(s.Button,null,_.default.createElement(b.Link,{to:{pathname:"/detail/meta/update",search:"?uri="+t}},e("detail:编辑字段信息"))),_.default.createElement(s.Button,{onClick:async()=>{M(!0),D(!0);try{j(await r.v1HiveInfoApi.createSql(t))}catch(e){}D(!1)}},e("detail:建表语句")),_.default.createElement(s.Button,{onClick:async()=>{R(!0),U(!0);try{q(await r.v1HiveInfoApi.selectSql(t))}catch(e){}U(!1)}},e("detail:查询语句")),_.default.createElement(s.Button,{onClick:()=>{let t=Y;t.forEach(t=>{t.isPartition=e("detail:否")}),V.length&&(V.forEach(t=>{t.isPartition=e("detail:是")}),t=[...t,...V]),t.forEach((e,t)=>{e.position=t+1}),J(t)}},e("detail:导出")),_.default.createElement("div",{className:y.default.right},_.default.createElement(s.Input.Search,{style:{width:240},placeholder:e("detail:搜索字段名称/字段描述"),onSearch:O}))),_.default.createElement(s.Table,{className:y.default.table,rowClassName:e=>e.columnName===n?y.default.columnShared:"",loading:w,columns:$,dataSource:Y,rowKey:"position",scroll:{x:K},pagination:!1}),V.length?_.default.createElement(_.default.Fragment,null,_.default.createElement("div",{className:y.default.columnTitle},e("hiveTable:以下是分区字段信息")),_.default.createElement(s.Table,{loading:w,columns:$,dataSource:V,rowKey:"position",scroll:{x:K},pagination:!1})):null,_.default.createElement(c.SqlModal,{okText:e("common:确定"),onOk:()=>M(!1),title:e("detail:建表语句"),loading:k,visible:P,setVisible:M,sql:A}),_.default.createElement(c.SqlModal,{okText:e("detail:去查询"),onOk:()=>window.open(`${i.bigDataOrigin}/ddc_fetch_tools/sql.html#/sql?tableId=${a}`,"_blank"),title:e("detail:查询语句"),loading:H,visible:F,setVisible:R,sql:B}))}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=l(a(284)),r=l(a(332)),u=l(a(82)),s=l(a(220)),o=l(a(162)),d=l(a(226)),c=l(a(161)),m=l(a(149)),f=a(263),p=a(26),_=a(97),h=n(a(0)),g=a(19),E=l(a(2095));t.Enum=e=>{var t;const{columnId:a,columnName:l}=e,{t:n}=g.useTranslation(),[b,v]=h.useState(!1),[y,T]=h.useState(!1),[N,S]=h.useState(!1),[C,x]=h.useState(!Boolean(e.data.enumList.length)),[w,I]=h.useState(void 0),[L,O]=h.useState(void 0),[P]=s.default.useForm(),[M,k]=h.useState(e.data);return h.useEffect(()=>k(e.data),[e.data]),h.default.createElement(h.default.Fragment,null,h.default.createElement("div",{className:E.default.list},null===(t=e.data.enumList)||void 0===t?void 0:t.slice(0,b?e.data.enumList.length:3).map(e=>{const t=`${e.name}: ${e.description}`;return t.length<=10?h.default.createElement("div",{key:e.name},t):h.default.createElement(m.default,{title:t,key:e.name},h.default.createElement("div",null,t))})),h.default.createElement("div",{className:E.default.links},M.enumList.length>3&&(b?h.default.createElement(p.IconFont,{type:"icon-up",onClick:()=>v(!1)}):h.default.createElement(p.IconFont,{type:"icon-down",onClick:()=>v(!0)})),h.default.createElement(p.IconFont,{type:"icon-edit",onClick:()=>S(!0)}),M.enumWiki&&h.default.createElement(_.ExternalLink,{href:M.enumWiki},h.default.createElement(p.IconFont,{type:"icon-wiki"}))),h.default.createElement(d.default,{width:600,title:""+n(`编辑${l}的枚举值`),visible:N,onCancel:()=>{S(!1)},afterClose:()=>{k(e.data),P.setFieldsValue(e.data)},okButtonProps:{loading:y},onOk:P.submit,className:E.default.enumModal},h.default.createElement(s.default,{form:P,size:"small",layout:"inline",initialValues:M,onFinish:async t=>{var l;t.enumList||(t.enumList=[]),T(!0);try{await f.v1HiveInfoApi.updateColumnEnum({...t,columnId:a}),p.message.success(n("category:修改成功")),S(!1),k(t),null===(l=e.afterSuccess)||void 0===l||l.call(e)}catch(e){p.message.error(e.message)}T(!1)}},h.default.createElement("div",{className:E.default.wiki},h.default.createElement(s.default.Item,{name:"enumWiki",label:n("message:添加wiki地址")},h.default.createElement(o.default,{size:"middle",placeholder:n("message:请输入")}))),C?h.default.createElement("div",{className:E.default.addValue},h.default.createElement("div",{className:E.default.form},h.default.createElement("div",{className:E.default.item},h.default.createElement("div",{className:E.default.label},n("detail:枚举值:")),h.default.createElement(o.default,{size:"middle",autoFocus:!0,placeholder:n("message:请输入"),value:w,onChange:e=>I(e.target.value)})),h.default.createElement("div",{className:E.default.item},h.default.createElement("div",{className:E.default.label},n("detail:含义:")),h.default.createElement(o.default,{size:"middle",placeholder:n("message:请输入"),value:L,onChange:e=>O(e.target.value)}))),h.default.createElement("div",{className:E.default.footer},h.default.createElement("div",{className:E.default.tip},h.default.createElement(i.default,null),h.default.createElement("span",{className:E.default.text},n("message:新建枚举值将会放在最后一行"))),h.default.createElement("div",{className:E.default.actions},h.default.createElement(u.default,{size:"small",onClick:()=>x(!1)},n("common:取消")),h.default.createElement(u.default,{size:"small",type:"primary",onClick:()=>{var e;if(!w)return p.message.error(n("message:请先输入枚举值"));const t=P.getFieldsValue();if(null===(e=t.enumList)||void 0===e?void 0:e.find(e=>e.name===w))return p.message.error(n("枚举值已存在"));t.enumList||(t.enumList=[]),t.enumList.push({name:w,description:L}),k({enumWiki:M.enumWiki,enumList:[...M.enumList,{name:w,description:L}]}),I(void 0),O(void 0),P.setFieldsValue(t)}},n("common:保存"))))):h.default.createElement("div",{className:E.default.showAddForm},h.default.createElement(u.default,{type:"link",icon:h.default.createElement(r.default,null),onClick:()=>x(!0)},n("message:添加枚举值"))),h.default.createElement(c.default,{dataSource:M.enumList,rowKey:"name",scroll:{y:205},columns:[{title:n("detail:枚举值"),dataIndex:"name",render:(e,t,a)=>h.default.createElement(s.default.Item,{name:["enumList",a,"name"],rules:[{required:!0,validator:async(e,t)=>{if(!t)throw new Error(n("common:不能为空"));if(P.getFieldValue("enumList").find((e,l)=>l!==a&&e.name===t))throw new Error(n("枚举值不能重复"))}}]},h.default.createElement(o.default,null))},{title:n("detail:含义"),dataIndex:"description",render:(e,t,a)=>h.default.createElement(s.default.Item,{name:["enumList",a,"description"]},h.default.createElement(o.default,null))},{title:n("common:操作"),dataIndex:"action",width:60,render:(e,t,a)=>h.default.createElement(u.default,{style:{padding:0},type:"link",onClick:()=>{const e=P.getFieldsValue();e.enumList=e.enumList.filter((e,t)=>t!==a),k({enumWiki:M.enumWiki,enumList:M.enumList.filter((e,t)=>t!==a)}),P.setFieldsValue(e)}},n("common:删除"))}],pagination:!1}))))}},function(e,t,a){e.exports={list:"style_list_3M_RV",links:"style_links_3B5Pa","enum-modal":"style_enum-modal_3gkTG",enumModal:"style_enum-modal_3gkTG",wiki:"style_wiki_1rE2I","show-add-form":"style_show-add-form_GUytR",showAddForm:"style_show-add-form_GUytR","add-value":"style_add-value_2OpIr",addValue:"style_add-value_2OpIr",form:"style_form_1Rs5N",item:"style_item_2OJCM",label:"style_label_1imNf",footer:"style_footer_1XJf6",tip:"style_tip_2IjxG",text:"style_text_dQJ2J",actions:"style_actions_10ZRB"}},,,function(e,t,a){e.exports={"sql-template":"style_sql-template_3JRR6",sqlTemplate:"style_sql-template_3JRR6","tool-bar":"style_tool-bar_n6CGc",toolBar:"style_tool-bar_n6CGc",tip:"style_tip_sVuay",right:"style_right__XuzJ","sql-content":"style_sql-content_1f3Nk",sqlContent:"style_sql-content_1f3Nk"}},function(e,t,a){e.exports={"sql-modal":"style_sql-modal_3OCxE",sqlModal:"style_sql-modal_3OCxE","sql-view":"style_sql-view_3wlGL",sqlView:"style_sql-view_3wlGL","sql-comment-switch":"style_sql-comment-switch_1OQMS",sqlCommentSwitch:"style_sql-comment-switch_1OQMS"}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=l(a(284)),r=a(30),u=a(263),s=a(26),o=a(97),d=a(106),c=n(a(0)),m=a(19),f=a(2101),p=l(a(1193));t.Output=()=>{const{uri:e}=c.useContext(d.HiveDetailContext),{t:t}=m.useTranslation(),[a,l]=c.useState(!1),[n,_]=c.useState(""),[h,g]=c.useState("-"),[E,b]=c.useState([]);return c.useEffect(()=>{let t=!1;return(async()=>{try{_(""),l(!0);const a=await u.v1HiveInfoApi.outputInfo(e);if(t)return;g(a.lastUpdateTimeLabel),b(a.outputItemList)}catch(e){_(e.message)}t||l(!1)})(),()=>t=!0},[e]),!a&&n?c.default.createElement("div",{className:"error"},n):c.default.createElement(s.Spin,{spinning:a},c.default.createElement("div",{className:p.default.output},c.default.createElement("div",{className:p.default.intro},c.default.createElement("div",{className:p.default.title},t("detail:调度任务执行情况")),c.default.createElement("div",{className:p.default.tip},c.default.createElement(i.default,null),t("detail:最多展示"),e.split(":").pop(),t("detail:最近30个批次执行情况，更多批次信息请点击任务查看")),c.default.createElement("div",{className:p.default.time},t("detail:最近更新时间")," : ",h)),a?null:E.length?c.default.createElement(f.OutputChart,{label:[t("detail:执行时长/秒"),t("detail:结束时间")],list:E}):c.default.createElement(s.Empty,{image:s.Empty.PRESENTED_IMAGE_SIMPLE}),c.default.createElement(s.Table,{rowKey:"finishTime",columns:[{title:t("detail:任务批次号"),dataIndex:"taskInstCode",ellipsis:!0,render:e=>c.default.createElement(o.ExternalLink,{href:r.getScheduleTaskUrl(e,4,"taskInstanceDetail")},e)},{title:t("detail:执行时长/秒"),width:150,align:"right",dataIndex:"elapsedTime"},{title:t("detail:开始时间"),width:"18%",dataIndex:"startTimeLabel"},{title:t("detail:结束时间"),width:"18%",dataIndex:"finishTimeLabel"}],dataSource:E})))}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=a(473),r=a(166),u=l(a(320)),s=n(a(0)),o=a(19),d=l(a(1193));t.OutputChart=e=>{const{t:t}=o.useTranslation(),{label:a,list:l}=e,n=s.useMemo(()=>{if(!(null==l?void 0:l.length))return[];const e=[];for(const t of l.reverse()){const a=u.default(t.finishTime);e.push({label:r.humanDate(t.startTime),elapsedTime:t.elapsedTime,finishTime:3600*a.get("h")+60*a.get("minute")+a.get("s"),originFinishTime:t.finishTime})}return e},[l]);return s.useLayoutEffect(()=>{if(!n.length)return;const e=new i.Chart({container:d.default.chart,autoFit:!0,height:350});e.data(n),e.axis("label",{label:{autoRotate:!1,autoHide:!0}}),e.scale({label:{type:"cat"},elapsedTime:{alias:t("detail:执行时长/秒")},finishTime:{alias:t("detail:结束时间"),formatter:(e,t)=>{const a=n[t]||n.find(t=>t.finishTime===e);return a?r.humanDate(a.originFinishTime,"HH:mm:ss"):""},sync:!0,nice:!0}}),e.tooltip({shared:!0,showCrosshairs:!0,itemTpl:'\n        <li class="g2-tooltip-list-item">\n          <span class="g2-tooltip-marker" style="background: {color}"></span>\n          <span class="g2-tooltip-name">{name}</span>\n          <span style="padding: 0 2px;">:</span>\n          <span class="g2-tooltip-value">{value}</span>\n        </li>\n      ',domStyles:{"g2-tooltip":{background:"rgba(0,0,0,0.75)","font-family":"PingFangSC-Regular","box-shadow":"0 2px 8px 0 rgba(0,0,0,0.15)"},"g2-tooltip-title":{color:"#bbb","font-size":"12px","line-height":"18px"},"g2-tooltip-list-item":{display:"flex",color:"#fff","align-items":"center"},"g2-tooltip-value":{flex:"1","margin-left":"0","text-align":"left"}},crosshairs:{type:"x",line:{style:{stroke:"#E8E8E8"}}}}),e.interval().position("label*elapsedTime").color("#e79e78").size(10),e.line().position("label*finishTime").style({lineWidth:1}).color("#81AAFF"),e.render()},[n,t]),s.default.createElement("div",{className:d.default.chart},s.default.createElement("div",{className:d.default.chartTitle},s.default.createElement("div",{className:d.default.left},a[0]),s.default.createElement("div",{className:d.default.right},a[1])),s.default.createElement("div",{id:d.default.chart}))}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";var l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=a(472),r=a(30),u=a(263),s=a(26),o=a(97),d=a(89),c=a(98),m=a(106),f=l(a(0)),p=a(19),_=a(2131),h=n(a(1194));t.Partition=()=>{const{uri:e,tableId:t}=f.useContext(m.HiveDetailContext),{t:a}=p.useTranslation(),[l,n]=f.useState(!1),[g,E]=f.useState([]),[b,v]=f.useState(r.getQuery("pageCurrent","number")||1),[y,T]=f.useState(r.getQuery("pageSize","number")||10),[N,S]=f.useState(""),[C,x]=f.useState(null),[w,I]=f.useState(null),L=d.useShowTotal(),O=f.useCallback(async()=>{if(!e)return;let t=!1;try{n(!0);const a=await u.v1HiveInfoApi.partition({pageCurrent:b,pageSize:y,pageFilter:{tableUri:e,partitionName:N}});if(t)return;x(a.total>1e4?1e4:a.total),I(a.total),E(a.records)}catch(e){}return t?void 0:(n(!1),()=>t=!0)},[b,y,e,N]);return f.useEffect(()=>{O()},[O]),f.default.createElement("div",{className:h.default.partition},f.default.createElement(_.PartitionHotChart,null),f.default.createElement("div",{className:h.default.filter},f.default.createElement("div",{className:h.default.title},a("detail:分区记录明细"),w>1e4&&f.default.createElement("span",null,a("（message:系统默认每次返回前10,000条结果，您可以搜索分区名来查看具体分区信息）"))),f.default.createElement("div",null,f.default.createElement("span",null,f.default.createElement(p.Trans,{i18nKey:"detail:共个分区",values:{count:r.humanNum(w,{useGrouping:!0,unit:!1})}},"共",r.humanNum(w,{useGrouping:!0,unit:!1}),"个分区")),f.default.createElement(s.Input.Search,{placeholder:a("common:搜索分区名"),className:h.default.partitionName,defaultValue:r.getQuery("partitionName")||void 0,onSearch:async e=>{S(e),v(1)}}))),f.default.createElement(s.Table,{rowKey:"partitionName",loading:l,columns:[{title:a("detail:分区名"),dataIndex:"partitionName"},{title:a("detail:文件数"),width:120,dataIndex:"fileNumLabel",align:"right"},{title:a("detail:记录数"),width:120,dataIndex:"recordCountLabel",align:"right",render:e=>"-1"===e?f.default.createElement(s.Tooltip,{trigger:"hover",title:f.default.createElement(p.Trans,{i18nKey:"detail:前往提取工具"},a("message:分区记录数时效为T+1，最新分区记录数请通过查询获取，立即前往"),f.default.createElement(o.ExternalLink,{style:{color:"#f38031"},href:"https://bigdata.xiaojukeji.com/ddc_fetch_tools/sql.html#/sql?tableId="+t},a("detail:提取工具")),a("detail:查询"))},f.default.createElement("span",null,e,f.default.createElement(i.QuestionCircleOutlined,null))):e},{title:a("detail:存储量"),width:140,dataIndex:"dataSizeLabel",align:"right"},{title:a("common:创建时间"),width:160,dataIndex:"createTimeLabel"},{title:a("search:最后更新时间"),width:160,dataIndex:"modifyTimeLabel"}],dataSource:g,pagination:{...c.PAGE_CONFIG,pageSize:y,current:b,total:C,showTotal:L,onShowSizeChange:(e,t)=>{T(t),v(1),r.updateQuery({pageSize:10===t?null:t,pageCurrent:null})},onChange:e=>{v(e),r.updateQuery({pageCurrent:1===e?null:e})}}}))}},function(e,t,a){"use strict";var l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=a(473),r=a(263),u=a(26),s=a(106),o=l(a(0)),d=a(19),c=n(a(1194));t.PartitionHotChart=()=>{const{uri:e}=o.useContext(s.HiveDetailContext),{t:t}=d.useTranslation(),[a,l]=o.useState(!1),[n,m]=o.useState([]),[f,p]=o.useState(null),[_,h]=o.useState(void 0);return o.useEffect(()=>{let t=!1;return(async()=>{try{l(!0);const a=await r.v1HiveInfoApi.hottestPartition(e);if(t)return;h(a.updateTimeLabel),p(a.partitionTotalLabel);const n=a.itemList.map(e=>({label:e.partition_name,value:e.visit_count}));m(n)}catch(e){}t||l(!1)})(),()=>t=!0},[e]),o.useLayoutEffect(()=>{if(a||!n.length)return;const e=new i.Chart({container:c.default.intro,autoFit:!0,height:350});e.data(n),e.scale("value",{nice:!0}),e.tooltip({showCrosshairs:!0,itemTpl:'\n        <li class="g2-tooltip-list-item">\n          <span class="g2-tooltip-value">{value}</span>\n        </li>\n      ',domStyles:{"g2-tooltip":{background:"rgba(0,0,0,0.75)","font-family":"PingFangSC-Regular","box-shadow":"0 2px 8px 0 rgba(0,0,0,0.15)"},"g2-tooltip-title":{color:"#bbb","font-size":"12px","line-height":"18px"},"g2-tooltip-list-item":{display:"flex",color:"#fff","align-items":"center"},"g2-tooltip-value":{flex:"1","margin-left":"0","text-align":"left"}},crosshairs:{type:"x",line:{style:{stroke:"#E8E8E8"}}}}),e.axis("label",{label:{autoRotate:!1,autoHide:!0}}),e.interval().position("label*value").color("#e79e78").size(10),e.render()},[a,n]),o.default.createElement(u.Spin,{spinning:a},o.default.createElement("div",{className:c.default.intro},o.default.createElement("div",{className:c.default.title},t("message:最近30天被访问TOP最热分区")),o.default.createElement("div",{className:c.default.right},o.default.createElement("span",null,o.default.createElement(d.Trans,{i18nKey:"detail:共个分区",values:{count:f}},"共",{count:f},"个分区")),o.default.createElement("span",{className:c.default.time},t("detail:最近更新时间")," : ",_))),a?null:n.length?o.default.createElement("div",{id:c.default.intro}):o.default.createElement(u.Empty,{image:u.Empty.PRESENTED_IMAGE_SIMPLE}))}},function(e,t,a){"use strict";var l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=a(30),r=a(263),u=a(26),s=a(528),o=l(a(365)),d=a(106),c=l(a(0)),m=a(19),f=n(a(2133));t.ProdScript=()=>{const{t:e}=m.useTranslation(),{uri:t}=c.useContext(d.HiveDetailContext),[a,l]=c.useState(!1),[n,p]=c.useState("-"),[_,h]=c.useState("");return c.useEffect(()=>{if(!t)return;(async()=>{l(!0);try{const e=await r.v1HiveInfoApi.getProdScript(t);p(e.lastUpdateTime),h(e.script)}catch(e){u.message.error(e)}l(!1)})()},[t]),c.useEffect(()=>{var e;if(!a&&_)try{const t=i.getQuery("scriptColumnName"),a=o.editor.createModel(_,"sql"),l=o.editor.create(document.getElementById("prodScript"),{model:a,readOnly:!0,find:{seedSearchStringFromSelection:!0,autoFindInSelection:"always"},automaticLayout:!0,minimap:{enabled:!1}});if(t){const n=null===(e=a.findMatches(t,!0,!1,!1,t,!1))||void 0===e?void 0:e.map(({range:e})=>e);if(!n||0===n.length)return;l.setSelection(n[0]),l.focus()}}catch(e){}},[_,a]),c.default.createElement("div",{className:f.default.script},c.default.createElement(u.Alert,{className:"alert-normal",showIcon:!0,type:"warning",message:e("detail:生产脚本解析自集群 Hive SQL 运行日志，只覆盖 SQL 类生产过程，只取更新时间前最近一次执行的SQL。")}),c.default.createElement("div",{className:f.default.updateTime},e("detail:最近更新时间")," : ",n),c.default.createElement(u.Spin,{spinning:a},c.default.createElement(s.SqlView,{sql:_,id:"prodScript",height:500})))}},function(e,t,a){e.exports={script:"script_script_2qlYL","update-time":"script_update-time_19Ios",updateTime:"script_update-time_19Ios"}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=a(30),i=a(26),r=l(a(0)),u=a(19),s=a(2135),o=l(a(2137)),d=a(2138),c=a(2144);t.TabIntro=()=>{const{t:e}=u.useTranslation();return r.default.createElement(i.Tabs,{animated:!1,className:o.default.tabIntro,onChange:e=>n.updateQuery({subTab:"partition"===e?null:e,pageSize:null,pageCurrent:null}),defaultActiveKey:n.getQuery("subTab")},r.default.createElement(i.Tabs.TabPane,{tab:r.default.createElement("span",{className:"tab-nav-text"},e("search:表说明")),key:"partition"},r.default.createElement(c.TableIntro,null)),r.default.createElement(i.Tabs.TabPane,{tab:r.default.createElement("span",{className:"tab-nav-text"},e("detail:知识问答")),key:"question"},r.default.createElement(d.QuestionAnswer,null)),r.default.createElement(i.Tabs.TabPane,{tab:r.default.createElement("span",{className:"tab-nav-text"},e("detail:评价记录")),key:"comment"},r.default.createElement(s.Comment,null)))}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=l(a(333)),r=l(a(191)),u=a(278),s=l(a(4)),o=a(368),d=a(276),c=a(106),m=n(a(0)),f=a(19),p=l(a(2136));t.Comment=()=>{const{uri:e}=m.useContext(c.HiveDetailContext),{t:t}=f.useTranslation(),[a,l]=m.useState([]),n=o.useNpsLabel();return m.useEffect(()=>{(async()=>{const{records:t}=await u.appraisalApi.appraisalList({pageCurrent:1,pageSize:100,pageFilter:{uri:e}});l(t)})()},[e]),m.default.createElement("div",{className:p.default.comment},m.default.createElement("div",{className:p.default.list},a.map((e,a)=>{var l;return m.default.createElement("div",{key:a,className:p.default.item},m.default.createElement("div",{className:p.default.left},m.default.createElement("div",{className:s.default(p.default.avatar,{[p.default.isAnonymous]:e.isAnonymous})},!e.isAnonymous&&m.default.createElement("img",{src:null===(l=e.creator)||void 0===l?void 0:l.avatar}))),m.default.createElement("div",{className:p.default.right},e.isAnonymous?m.default.createElement("div",{className:p.default.title},m.default.createElement("div",{className:p.default.isAnonymous},t("匿名")),m.default.createElement("div",{className:p.default.time},e.updateTimeLabel)):m.default.createElement("div",{className:p.default.title},m.default.createElement("div",{className:p.default.user},e.creator.name),m.default.createElement("div",{className:p.default.dept},"(",e.creator.deptName,")"),m.default.createElement("div",{className:p.default.time},e.createTimeLabel)),m.default.createElement("div",{className:p.default.star},m.default.createElement(i.default,{className:s.default({[p.default.fill]:e.starId>=d.AppraisalStarId.VeryBad})}),m.default.createElement(i.default,{className:s.default({[p.default.fill]:e.starId>=d.AppraisalStarId.Bad})}),m.default.createElement(i.default,{className:s.default({[p.default.fill]:e.starId>=d.AppraisalStarId.NotBad})}),m.default.createElement(i.default,{className:s.default({[p.default.fill]:e.starId>=d.AppraisalStarId.Recommend})}),m.default.createElement(i.default,{className:s.default({[p.default.fill]:e.starId>=d.AppraisalStarId.VeryGood})}),m.default.createElement("div",{className:p.default.label},n[e.starId]),e.tagList.map((e,t)=>m.default.createElement("div",{className:p.default.tag,key:t},e.tagName))),m.default.createElement("div",{className:p.default.content},e.content)))})),!a.length&&m.default.createElement(r.default,{image:r.default.PRESENTED_IMAGE_SIMPLE}))}},function(e,t,a){e.exports={comment:"comment_comment_15dpE",list:"comment_list_2vtHA",item:"comment_item_1VgsE",left:"comment_left_3YtCb",avatar:"comment_avatar_2y9wE","is-anonymous":"comment_is-anonymous_LnvOY",isAnonymous:"comment_is-anonymous_LnvOY",right:"comment_right_3VZpD",title:"comment_title_6pGat",user:"comment_user_LQY8X",dept:"comment_dept_2os4m",time:"comment_time_2iUNe",star:"comment_star_msGDI",fill:"comment_fill_3XKIb",label:"comment_label_2y3zz",tag:"comment_tag_m0n8r",content:"comment_content_1kFac"}},function(e,t,a){e.exports={"tab-intro":"index_tab-intro_2mBk5",tabIntro:"index_tab-intro_2mBk5","field-pane":"index_field-pane_1hxit",fieldPane:"index_field-pane_1hxit","column-shared":"index_column-shared_3d1Dc",columnShared:"index_column-shared_3d1Dc","column-name":"index_column-name_1mNqH",columnName:"index_column-name_1mNqH","column-content":"index_column-content_1_B7u",columnContent:"index_column-content_1_B7u","column-hot":"index_column-hot_SReBK",columnHot:"index_column-hot_SReBK","icon-hot":"index_icon-hot_2WTfW",iconHot:"index_icon-hot_2WTfW","hot-current":"index_hot-current_BVnxt",hotCurrent:"index_hot-current_BVnxt","icon-hot-current":"index_icon-hot-current_1H4QF",iconHotCurrent:"index_icon-hot-current_1H4QF","column-enum":"index_column-enum_3r0Ng",columnEnum:"index_column-enum_3r0Ng","column-action":"index_column-action_2EpDh",columnAction:"index_column-action_2EpDh","action-stat":"index_action-stat_1Hazk",actionStat:"index_action-stat_1Hazk","action-share":"index_action-share_A7etC",actionShare:"index_action-share_A7etC",actions:"index_actions_w7d_0","column-title":"index_column-title_3Bosx",columnTitle:"index_column-title_3Bosx"}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=l(a(1195)),r=l(a(1196)),u=a(30),s=l(a(82)),o=l(a(162)),d=a(278),c=l(a(4)),m=a(535),f=a(26),p=a(106),_=n(a(0)),h=l(a(262)),g=a(19),E=a(143),b=a(103),v=l(a(2143));t.CommentItem=e=>{var t;const{detail:a,uri:l}=_.useContext(p.HiveDetailContext),{t:n}=g.useTranslation(),m=_.useRef(null),E=_.useRef(null),[y,T]=_.useState(!1),[N,S]=_.useState(!1),[C,x]=_.useState(!1),[w,I]=_.useState(!1),[L,O]=_.useState(!1),P=u.getUsername(),{data:M,fetchData:k,rootMsgId:D}=e,[A,j]=_.useState(M.content),{msgId:F}=M;_.useEffect(()=>{j(M.content)},[M.content]);const R=_.useCallback(async()=>{try{const e=E.current.state.value;O(!0),await d.appraisalApi.addComment({uri:l,content:e,parentMsgId:F,rootMsgId:D}),O(!1),I(!1),k()}catch(e){}},[F,l,D,k]),H=_.useCallback(async()=>{try{const e=m.current.state.value;S(!0),await d.appraisalApi.updateComment({msgId:F,content:e}),S(!1),j(e),x(!1)}catch(e){}},[F]);if(a&&l)return _.default.createElement("div",{className:v.default.commentContent,id:"msg-"+F},_.default.createElement("div",{className:v.default.left},_.default.createElement("div",{className:v.default.avatar},_.default.createElement("img",{src:null===(t=M.commentUser)||void 0===t?void 0:t.avatar}))),_.default.createElement("div",{className:v.default.right},_.default.createElement("div",{className:v.default.title},_.default.createElement("div",{className:v.default.user},M.commentUser.name||M.commentUser.account),_.default.createElement("div",{className:v.default.dept},M.commentUser.deptName&&`(${M.commentUser.deptName})`),_.default.createElement("div",{className:v.default.time},M.createTimeLabel)),_.default.createElement("div",{className:v.default.content},M.parentMsgId?_.default.createElement(_.default.Fragment,null,_.default.createElement("span",{className:v.default.repliedText},n("category:回复")),_.default.createElement("span",{className:v.default.repliedUser},M.repliedUser.name,":")):null,C?_.default.createElement("div",{className:v.default.commentInput},_.default.createElement(o.default,{ref:m,autoFocus:!0,defaultValue:A,className:v.default.input,onPressEnter:H}),_.default.createElement(s.default,{loading:N,type:"primary",className:v.default.submit,onClick:H},n("common:确定")),_.default.createElement(s.default,{disabled:N,className:v.default.cancel,onClick:()=>x(!1)},n("common:取消"))):_.default.createElement("span",null,A)),_.default.createElement("div",{className:v.default.actionBar},_.default.createElement("div",{className:v.default.action,onClick:()=>I(!0)},_.default.createElement(i.default,null),_.default.createElement("span",{className:v.default.text},M.childMsgList.length)),P===M.commentUser.account&&_.default.createElement(_.default.Fragment,null,_.default.createElement(f.Popconfirm,{title:n("message:确定删除这条评论吗？"),onConfirm:async()=>{try{T(!0),await d.appraisalApi.deleteComment(M.msgId),T(!1),k()}catch(e){f.message.error(e.message)}},okText:n("common:是"),cancelText:n("common:否")},_.default.createElement(f.Spin,{spinning:y,size:"small"},_.default.createElement("div",{className:v.default.action},_.default.createElement(f.IconFont,{type:"icon-delete"}),_.default.createElement("span",{className:v.default.text},n("common:删除"))))),_.default.createElement("div",{className:v.default.action,onClick:()=>x(!0)},_.default.createElement(f.IconFont,{type:"icon-edit"}),_.default.createElement("span",{className:v.default.text},n("detail:编辑")))),_.default.createElement("div",{className:v.default.action},_.default.createElement(f.Tooltip,{overlayStyle:{maxWidth:400},title:_.default.createElement("div",null,_.default.createElement("div",null,`${location.origin}/detail?uri=${b.generateUri(null==a?void 0:a.dbName,null==a?void 0:a.tableName)}&tab=intro&subTab=question#msg-${M.msgId}`),_.default.createElement("div",null,n("message:点击分享复制链接")))},_.default.createElement(h.default,{text:`${location.origin}/detail?uri=${b.generateUri(null==a?void 0:a.dbName,null==a?void 0:a.tableName)}&tab=intro&subTab=question#msg-${M.msgId}`,onCopy:()=>f.message.success(n("message:分享链接复制成功"))},_.default.createElement("div",null,_.default.createElement(r.default,null),_.default.createElement("span",{className:v.default.text},n("category:分享"))))))),w&&_.default.createElement("div",{className:c.default(v.default.commentInput,v.default.commentReplyInput)},_.default.createElement(o.default,{ref:E,autoFocus:!0,className:v.default.input,onPressEnter:R}),_.default.createElement(s.default,{loading:L,type:"primary",className:v.default.submit,onClick:R},n("common:发表")),_.default.createElement(s.default,{disabled:N,className:v.default.cancel,onClick:()=>I(!1)},n("common:取消")))))},t.QuestionAnswer=()=>{const{uri:e}=_.useContext(p.HiveDetailContext),{t:a}=g.useTranslation(),[l,n]=_.useState(!1),[i,r]=_.useState(!1),[u,h]=_.useState([]),b=_.useRef(null),y=E.useLocation(),T=_.useCallback(async()=>{n(!0);try{const{records:t}=await d.appraisalApi.commentList({pageCurrent:1,pageSize:200,pageFilter:{uri:e}});h(t)}catch(e){}n(!1)},[e]);return _.useEffect(()=>{T()},[T]),_.useLayoutEffect(()=>{l&&setTimeout(()=>{m.scrollToAnchor(y.hash.slice(1))},1e3)},[y.hash,l]),_.default.createElement(f.Spin,{spinning:l},_.default.createElement("div",{className:v.default.questionAnswer},_.default.createElement("div",{className:v.default.add},_.default.createElement(o.default.TextArea,{ref:b,rows:4,placeholder:a("message:请输入")}),_.default.createElement("div",{className:v.default.actions},_.default.createElement(s.default,{className:v.default.publish,loading:i,type:"primary",onClick:async()=>{const t=b.current.state.value;try{r(!0),await d.appraisalApi.addComment({uri:e,content:t})&&(b.current.setValue(void 0),f.message.success("message:评论成功"),r(!1),await T())}catch(e){f.message.error(e.message),r(!1)}}},a("common:发布")))),!u.length&&_.default.createElement(f.Empty,{image:f.Empty.PRESENTED_IMAGE_SIMPLE}),_.default.createElement("div",{className:v.default.list},u.map(e=>_.default.createElement("div",{key:e.msgId,className:v.default.commentItem},_.default.createElement(t.CommentItem,{rootMsgId:e.msgId,data:e,fetchData:T}),_.default.createElement("div",{className:v.default.childrenItem},e.childMsgList.map(a=>_.default.createElement("div",{key:a.msgId,className:c.default(v.default.commentItem)},_.default.createElement(t.CommentItem,{rootMsgId:e.msgId,data:a,fetchData:T})))))))))}},,,,,function(e,t,a){e.exports={"question-answer":"question-answer_question-answer_1crXC",questionAnswer:"question-answer_question-answer_1crXC",add:"question-answer_add_xeV-J",actions:"question-answer_actions_7R4K_",publish:"question-answer_publish_2oJUq",list:"question-answer_list_1FM3W","comment-item":"question-answer_comment-item_2w6DL",commentItem:"question-answer_comment-item_2w6DL","children-item":"question-answer_children-item_pVkUo",childrenItem:"question-answer_children-item_pVkUo","comment-content":"question-answer_comment-content_1dY2W",commentContent:"question-answer_comment-content_1dY2W",left:"question-answer_left_33V5T",avatar:"question-answer_avatar_1ZLrZ",right:"question-answer_right_22OuZ",title:"question-answer_title_DipQ7",user:"question-answer_user_2sXZd",dept:"question-answer_dept_3gRgE",time:"question-answer_time_1KTsY",content:"question-answer_content_2PI9u","replied-text":"question-answer_replied-text_1Lui8",repliedText:"question-answer_replied-text_1Lui8","replied-user":"question-answer_replied-user_1nxd_",repliedUser:"question-answer_replied-user_1nxd_","action-bar":"question-answer_action-bar_NTSpu",actionBar:"question-answer_action-bar_NTSpu",action:"question-answer_action_5rzfR",text:"question-answer_text_2YJcB","comment-input":"question-answer_comment-input_3GBUs",commentInput:"question-answer_comment-input_3GBUs","comment-reply-input":"question-answer_comment-reply-input_3yJTE",commentReplyInput:"question-answer_comment-reply-input_3yJTE",input:"question-answer_input_f93Kz",submit:"question-answer_submit_V-5DY",cancel:"question-answer_cancel_1Vilp"}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=a(553),r=l(a(82)),u=a(278),s=a(26),o=a(276),d=n(a(365)),c=a(106),m=n(a(0)),f=a(19),p=l(a(734));a(740),a(741),a(742),a(743),a(744),a(745),a(746),a(747),a(748),a(749),a(750),a(751),a(752),a(753),a(754),a(755),a(756),a(757),a(758),a(759);const _=a(2145),h=l(a(1197));var g;!function(e){e.EDIT="edit",e.PREVIEW="preview"}(g||(g={})),t.TableIntro=()=>{const{uri:e}=m.useContext(c.HiveDetailContext),{t:t}=f.useTranslation(),[a,l]=m.useState(""),[n,E]=m.useState(""),[b,v]=m.useState(o.IntroContentType.HTML),[y,T]=m.useState(o.IntroContentType.HTML),[N,S]=m.useState(!1),[C,x]=m.useState(!1),w=m.useRef(null),[I,L]=m.useState(!1),[O,P]=m.useState(g.EDIT);m.useEffect(()=>{l(n)},[n]),m.useEffect(()=>{(async()=>{S(!0);try{const{content:t,type:a}=await u.appraisalApi.intro(e);E(t),v(a),T(a)}catch(e){}S(!1)})()},[e]),m.useLayoutEffect(()=>{I&&O!==g.PREVIEW&&b!==o.IntroContentType.HTML&&(w.current=d.editor.create(document.getElementById(h.default.markdownEditor),{value:a,language:"markdown",automaticLayout:!0,minimap:{enabled:!1}}))},[a,b,I,O]);const M=m.useCallback(()=>{var e,t;return null!==(t=null===(e=w.current)||void 0===e?void 0:e.getValue())&&void 0!==t?t:""},[]);return m.default.createElement("div",{className:h.default.tableIntro},I?m.default.createElement("div",{className:h.default.editActions},m.default.createElement(s.Radio.Group,{value:b,onChange:e=>{const i=()=>{const t=e.target.value;l(y===t?n:""),v(t),P(g.EDIT)};a?s.Modal.confirm({title:t("common:提示"),content:t("message:切换编辑器会清空当前的内容，是否继续？"),onOk:i}):i()}},m.default.createElement(s.Radio.Button,{value:o.IntroContentType.HTML},t("detail:富文本")),m.default.createElement(s.Radio.Button,{value:o.IntroContentType.MARKDOWN},t("Markdown"))),m.default.createElement(s.Radio.Group,{className:h.default.editPreview,value:O,onChange:e=>{const t=e.target.value;P(t),b===o.IntroContentType.MARKDOWN&&l(M())}},m.default.createElement(s.Radio.Button,{value:g.EDIT},t("detail:编辑")),m.default.createElement(s.Radio.Button,{value:g.PREVIEW},t("detail:预览")))):m.default.createElement("div",{className:h.default.actions},m.default.createElement(r.default,{type:"primary",disabled:N,onClick:()=>L(!0)},t("detail:编辑")),m.default.createElement(_.IntroHistory,null,m.default.createElement(r.default,null,t("detail:查看历史版本")))),I?m.default.createElement(m.default.Fragment,null,O===g.EDIT?b===o.IntroContentType.HTML?m.default.createElement(i.Editor,{value:a,inline:!1,init:{contentCss:{"font-size":"12px"},height:560,menubar:!1,statusbar:!1,plugins:["advlist autolink lists link image charmap print preview anchor searchreplace visualblocks code fullscreen insertdatetime media table paste code"],toolbar:"formatselect bold italic backcolor alignleft aligncenter alignright alignjustify link bullist numlist outdent indent removeformat table undo redo",content_style:"body {font-size: 12px; color: #666; font-family: PingFangSC-Regular, -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'Helvetica Neue', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';}"},onEditorChange:e=>l(e)}):m.default.createElement("div",{id:h.default.markdownEditor,className:h.default.markdownEditor}):b===o.IntroContentType.HTML?m.default.createElement("div",{className:h.default.content,dangerouslySetInnerHTML:{__html:O===g.PREVIEW?a:n}}):m.default.createElement(p.default,{source:a}),m.default.createElement("div",{className:h.default.editFooterActions},m.default.createElement(r.default,{type:"primary",loading:C,onClick:async()=>{try{const t=b===o.IntroContentType.MARKDOWN?M():a;x(!0),await u.appraisalApi.updateIntro({uri:e,content:t,type:b}),E(t),T(b)}catch(e){s.message.error(e.message)}L(!1),x(!1)}},t("common:提交")),m.default.createElement(r.default,{disabled:C,onClick:()=>{L(!1),l(n),v(y)}},t("common:取消")))):b===o.IntroContentType.HTML?m.default.createElement("div",{className:h.default.content,dangerouslySetInnerHTML:{__html:O===g.PREVIEW?a:n}}):m.default.createElement(p.default,{source:a}))}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=l(a(82)),r=l(a(371)),u=l(a(161)),s=a(278),o=a(120),d=a(106),c=n(a(0)),m=a(19),f=l(a(1197));t.IntroHistory=e=>{const{uri:t}=c.useContext(d.HiveDetailContext),{t:a}=m.useTranslation(),[l,n]=c.useState([]),[p,_]=c.useState(!1),[h,g]=c.useState([]);return c.useEffect(()=>{if(!p)return;(async()=>{const e=await s.appraisalApi.introHistoryList(t);n(e)})()},[t,p]),c.default.createElement("div",null,c.default.createElement("div",{onClick:()=>_(!0)},e.children),c.default.createElement(r.default,{className:f.default.historyIntro,title:a("common:历史版本"),width:600,visible:p,placement:"right",onClose:()=>_(!1)},c.default.createElement(u.default,{dataSource:l,rowKey:"version",pagination:!1,expandedRowKeys:h,expandable:{expandedRowRender:e=>c.default.createElement("div",{dangerouslySetInnerHTML:{__html:e.content}})},columns:[{title:a("common:版本"),width:100,dataIndex:"version"},{title:a("common:提交者"),dataIndex:"submitter",render:e=>c.default.createElement(o.DChat,{user:e})},{title:a("search:更新时间"),dataIndex:"createTimeLabel"},{title:a("common:操作"),dataIndex:"action",render:(e,t)=>c.default.createElement(i.default,{size:"small",type:"link",style:{padding:0},onClick:()=>g(h.length?[]:[t.version])},a("common:查看"))}]})))}},function(e,t,a){"use strict";var l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=a(30),r=a(181),u=a(26),s=a(219),o=l(a(0)),d=a(19),c=a(2147),m=a(2154),f=n(a(280)),p=a(2155),_=a(2157);t.Lineage=()=>{const{t:e}=d.useTranslation(),t=i.getQuery("uri"),[a,l]=o.useState(i.getQuery("viewMode")||s.LineageViewMode.GRAPH),[n,h]=o.useState(!1),[g,E]=o.useState([]),[b,v]=o.useState(i.getQuery("columnName")),[y,T]=o.useState(i.getQuery("subTab")),N=o.useCallback(e=>{v(e),i.updateQuery({columnName:e})},[]);return o.useEffect(()=>{if("field"!==y)return;let e=!1;return(async()=>{var a;try{h(!0);const l=await r.v1TableDetailApi.tableColumns(t);if(e)return;E(l),!i.getQuery("columnName")&&v(null===(a=l[0])||void 0===a?void 0:a.columnName)}catch(e){}e||h(!1)})(),()=>e=!0},[t,y]),o.default.createElement(u.Tabs,{className:f.default.tabBloodline,animated:!1,onChange:e=>{i.updateQuery({subTab:"table"===e?null:e,pageSize:null,pageCurrent:null}),T(e)},defaultActiveKey:y},o.default.createElement(u.Tabs.TabPane,{tab:o.default.createElement("span",{className:"tab-nav-text"},e("detail:表级血缘")),key:"table"},a===s.LineageViewMode.GRAPH?o.default.createElement(p.TableGraph,{setViewMode:()=>{l(s.LineageViewMode.LIST),i.updateQuery({viewMode:s.LineageViewMode.LIST})}}):o.default.createElement(_.TableList,{setViewMode:()=>{l(s.LineageViewMode.GRAPH),i.updateQuery({viewMode:null})}})),o.default.createElement(u.Tabs.TabPane,{tab:o.default.createElement("span",{className:"tab-nav-text"},e("detail:字段血缘")),key:"field"},a===s.LineageViewMode.GRAPH?o.default.createElement(c.ColumnGraph,{columns:g,columnsLoading:n,column:b,setColumn:N,setViewMode:()=>{l(s.LineageViewMode.LIST),i.updateQuery({viewMode:s.LineageViewMode.LIST})}}):o.default.createElement(m.ColumnList,{columns:g,columnsLoading:n,column:b,setColumn:N,setViewMode:()=>{l(s.LineageViewMode.GRAPH),i.updateQuery({viewMode:null})}})))}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=l(a(191)),r=l(a(118)),u=a(328),s=a(219),o=a(106),d=n(a(0)),c=a(19),m=a(2148),f=a(536),p=a(1198),_=a(1201),h=a(1202),g=a(1203),E=l(a(280)),b=a(770);t.ColumnGraph=e=>{const{column:t,setColumn:a,columns:l,columnsLoading:n}=e,{uri:v}=d.useContext(o.HiveDetailContext),{t:y}=c.useTranslation(),[T,N]=d.useState(!1),[S,C]=d.useState(null),[x,w]=d.useState(0),I=d.useRef(),L=d.useRef(),[O,P]=d.useState(null),M=g.useConstructGraphData(),k=g.useParseGraphData(),D=g.useInitTreeGraph(),[A,j]=d.useState(null),F=d.useCallback(e=>{const t=D(e,f.initGraphOptions(f.COLUMN_ID,x,f.GRAPH_HEIGHT));t.on("node:mouseenter",e=>{j(null),P(e)}),t.on("node:mouseleave",e=>{j(e.item.get("model").id)}),t.on("node:click",async e=>{P(null);const a=e.item.get("model"),{id:l,name:n,type:i,uri:r,side:o,children:d,hasUpEntities:c,hasDownEntities:m}=a;if(t.removeChild(n+"-temp"),d&&!d.length)if("left"==o&&c){if(i===s.LineageEntityType.HIVE_TABLE_COLUMN){N(!0);const{upEntities:e}=await u.hiveLineageApi.columnLineageGraph({uri:r,view:s.LineageViewType.DIRECT_UP});for(const a of e)t.updateChild(M(a),l);N(!1)}}else if("right"==o&&m&&a.type===s.LineageEntityType.HIVE_TABLE_COLUMN){N(!0);const{downEntities:e}=await u.hiveLineageApi.columnLineageGraph({uri:r,view:s.LineageViewType.DIRECT_DOWN});for(const a of e)t.updateChild(M(a,o,o),l);N(!1)}}),window.onresize=()=>{t.changeSize((null==I?void 0:I.current.clientWidth)||x,f.GRAPH_HEIGHT),t.fitCenter()},L.current=t},[x,M,D]);return d.useEffect(()=>{if(!t)return;let e=!1;return(async()=>{try{N(!0);const a=await u.hiveLineageApi.columnLineageGraph({uri:v+":"+t});if(e)return;C(a),L.current&&L.current.destroy(),a.refEntity&&F(k(a.refEntity,a.upEntities,a.downEntities))}catch(e){}e||N(!1)})(),()=>e=!0},[v,F,k,t]),d.useLayoutEffect(()=>{if(!I.current)return;const e=I.current.getBoundingClientRect();w(e.width)},[I]),d.useLayoutEffect(()=>{if(!O)return;const e=O.item.get("model"),t=b.TooltipApp(e,O);return t.addEventListener("mouseenter",()=>{j(null)}),t.addEventListener("mouseleave",()=>{j(e.id)}),()=>null==t?void 0:t.remove()},[O]),d.useEffect(()=>{if(!A)return;const e=setTimeout(()=>{P(null),j(null)},80);return()=>clearTimeout(e)},[A]),d.default.createElement("div",{className:E.default.fieldPaneGraph},d.default.createElement("div",{className:E.default.changeViewMode,onClick:e.setViewMode},y("detail:列表查看")),d.default.createElement(m.ColumnStatistic,{column:t,setColumn:a,columns:l,columnsLoading:n}),d.default.createElement(r.default,{spinning:T||n},d.default.createElement("div",{className:E.default.content,id:f.CONTAINER_ID},d.default.createElement("div",{className:E.default.bar},d.default.createElement(h.GraphTypeIntro,{type:"FIELD"}),d.default.createElement(p.GraphControl,{width:x,height:f.GRAPH_HEIGHT,graph:L.current})),d.default.createElement(_.GraphFilter,{data:S,updateUp:e=>{e=null==e?void 0:e.trim();const t=L.current;for(const a of S.upEntities){const{name:l,uuid:n}=a;l.includes(e)?t.findDataById(n)||t.addChild(M(a),n):t.removeChild(n)}},updateDown:e=>{e=null==e?void 0:e.trim();const t=L.current;for(const a of S.downEntities){const{name:l,uuid:n}=a;l.includes(e)?t.findDataById(n)||t.addChild(M(a,"right","right"),S.refEntity.uuid):t.removeChild(n)}}}),!e.column&&d.default.createElement(i.default,{description:y("message:请先选择字段"),image:i.default.PRESENTED_IMAGE_SIMPLE}),d.default.createElement("div",{className:E.default.graphContainer,key:f.COLUMN_ID,id:f.COLUMN_ID,ref:I}))))}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=l(a(163)),r=a(328),u=a(106),s=n(a(0)),o=a(19),d=l(a(280));t.ColumnStatistic=e=>{const{column:t,setColumn:a,columns:l,columnsLoading:n}=e,{uri:c}=s.useContext(u.HiveDetailContext),{t:m}=o.useTranslation(),[f,p]=s.useState(null);return s.useEffect(()=>{if(!t)return;let e=!1;return(async()=>{try{const a=await r.hiveLineageApi.columnLineageStatistic(c+":"+t);if(e)return;p(a)}catch(e){}})(),()=>e=!0},[c,t]),s.default.createElement("div",{className:d.default.hd},s.default.createElement("div",{className:d.default.filter},s.default.createElement("div",{className:d.default.label},m("detail:字段名"),":"),s.default.createElement(i.default,{style:{width:180},placeholder:m("common:请选择"),loading:n,value:t,onChange:a,filterOption:!0,showSearch:!0},l.map(e=>s.default.createElement(i.default.Option,{key:e.columnName,value:e.columnName},e.columnName)))),s.default.createElement("div",{className:d.default.right},s.default.createElement("div",null,m("detail:直接上游数"),": ",s.default.createElement("span",{className:d.default.num},null==f?void 0:f.directUpLabel)),s.default.createElement("div",null,m("detail:全部上游数"),":",s.default.createElement("span",{className:d.default.num},null==f?void 0:f.allUpLabel)),s.default.createElement("div",{className:d.default.border}),s.default.createElement("div",null,m("detail:直接下游数"),": ",s.default.createElement("span",{className:d.default.num},null==f?void 0:f.directDownLabel)),s.default.createElement("div",null,m("detail:全部下游数"),": ",s.default.createElement("span",{className:d.default.num},null==f?void 0:f.allDownLabel))))}},,,,,function(e,t,a){e.exports={tooltip:"style_tooltip_2Wk3D",content:"style_content_3W_Va",item:"style_item_tZTQx",label:"style_label_3-Vrs",value:"style_value_3MMrU",link:"style_link_1Dycl",bottom:"style_bottom_353rK",border:"style_border_2BRUD"}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=a(30),r=l(a(82)),u=l(a(220)),s=l(a(162)),o=l(a(163)),d=l(a(161)),c=a(259),m=a(328),f=a(26),p=a(89),_=a(327),h=a(219),g=a(98),E=a(106),b=n(a(0)),v=a(19),y=l(a(280)),T=a(1204),N=a(277),S=a(1205);t.ColumnList=e=>{const{column:t,setColumn:a,columns:l,columnsLoading:n}=e,{uri:C,detail:x}=b.useContext(E.HiveDetailContext),{t:w}=v.useTranslation(),[I,L]=b.useState(!1),[O,P]=b.useState([]),[M,k]=b.useState(i.getQuery("pageCurrent","number")||1),[D,A]=b.useState(i.getQuery("pageSize","number")||10),[j,F]=b.useState(null),[R,H]=b.useState([]),[U,B]=b.useState(!1),[q,z]=b.useState(!1),[Q,V]=b.useState({}),[G]=u.default.useForm(),{getFieldsValue:Y,setFieldsValue:W}=G,$=p.useShowTotal(),K=S.useViewTypeOptions("FIELD"),Z=N.useEntityTypeOptions("FIELD"),J=Z[0].value,X=b.useCallback(e=>{var t,a;for(const l of e)l.viewTypeLabel=(null===(t=K.find(e=>l.viewType===e.value))||void 0===t?void 0:t.label)||"-",l.typeLabel=(null===(a=Z.find(e=>l.type===e.value))||void 0===a?void 0:a.label)||"-"},[K,Z]);b.useEffect(()=>W({column:t}),[W,t]),b.useEffect(()=>{let e=!1;const{column:t,...a}=Y();if(!t)return;return(async()=>{B(!0);try{const l=await m.hiveLineageApi.columnLineagePage({pageCurrent:M,pageSize:D,pageFilter:{uri:C+":"+t,...a}});if(e)return;F(l.total),X(l.records),H(l.records)}catch(e){}e||B(!1)})(),()=>e=!0},[C,M,D,X,J,Y,Q]);const ee=T.useTableColumns(),te=_.useExportList(ee);return b.default.createElement("div",{className:y.default.fieldPaneList},b.default.createElement("div",{className:y.default.changeViewMode,onClick:e.setViewMode},w("detail:图形查看")),b.default.createElement(u.default,{layout:"inline",form:G,className:y.default.filter,initialValues:{column:t,view:h.LineageViewType.ALL_UP,type:J},onFinish:e=>{const{column:t}=e;if(a(t),1!==M)return k(1);V({})}},b.default.createElement(u.default.Item,{label:w("detail:字段名"),name:"column"},b.default.createElement(o.default,{style:{width:"100%"},placeholder:w("common:请选择"),loading:n,filterOption:!0,showSearch:!0,onChange:G.submit},l.map(({columnName:e})=>b.default.createElement(o.default.Option,{key:e,value:e,label:e},e)))),b.default.createElement(u.default.Item,{label:w("detail:节点名"),name:"keyword"},b.default.createElement(s.default,{autoFocus:!0,allowClear:!0,placeholder:w("message:请输入"),onPressEnter:G.submit,onChange:e=>!e.target.value&&G.submit()})),b.default.createElement(u.default.Item,{label:w("detail:负责人"),name:"owner"},b.default.createElement(o.default,{style:{width:"100%"},placeholder:w("message:请输入"),loading:I,filterOption:!1,showSearch:!0,allowClear:!0,onSearch:async e=>{if(!e)return void P([]);L(!0);const t=await c.v1CommonApi.searchStaff(e);P(t),L(!1)},onChange:e=>{const t=O.find(t=>e===t.account);G.submit(),P(t?[t]:[])}},O.map(({name:e,account:t})=>b.default.createElement(o.default.Option,{key:t,value:t,label:e},e,"(",t,")")))),b.default.createElement(u.default.Item,{label:w("detail:节点类型"),name:"type"},b.default.createElement(o.default,{placeholder:w("common:请选择"),onChange:G.submit},Z.map(({value:e,label:t})=>b.default.createElement(o.default.Option,{key:e,value:e},t)))),b.default.createElement(u.default.Item,{label:w("common:血缘"),name:"view"},b.default.createElement(o.default,{onChange:G.submit},K.map(e=>b.default.createElement(o.default.Option,{key:e.value,value:e.value},e.label))))),b.default.createElement("div",{className:y.default.actions},b.default.createElement(r.default,{disabled:!j||U,loading:q,className:y.default.actionExport,onClick:async()=>{z(!0);try{const{column:e,...t}=G.getFieldsValue(),a=await m.hiveLineageApi.columnLineagePage({pageCurrent:M,pageSize:D,pageFilter:{uri:C+(e?":"+e:""),...t}});X(a.records);const l=K.find(e=>e.value===t.view).label;te(a.records,`${x.dbName}.${x.tableName}.${e}的${l}血缘.csv`)}catch(e){f.message.error(e.message)}z(!1)}},w("common:导出"))),b.default.createElement(d.default,{loading:U,rowKey:"uri",columns:ee,dataSource:R,pagination:{...g.PAGE_CONFIG,pageSize:D,current:M,total:j,showTotal:$,onShowSizeChange:(e,t)=>{A(t),k(1),i.updateQuery({pageSize:10===t?null:t,pageCurrent:null})},onChange:e=>{k(e),i.updateQuery({pageCurrent:1===e?null:e})}}}))}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=a(1018),r=a(233),u=l(a(118)),s=a(328),o=a(219),d=a(106),c=n(a(0)),m=a(19),f=a(536),p=a(1198),_=a(1201),h=a(1202),g=a(1203),E=l(a(280)),b=a(2156),v=a(770);t.TableGraph=e=>{const{uri:t}=c.useContext(d.HiveDetailContext),{t:a}=m.useTranslation(),[l,n]=c.useState(!1),y=c.useMemo(()=>({uri:t}),[t]),[T,N,S]=r.useRequest(s.hiveLineageApi.tableLineageGraph,y),[C,x]=c.useState(0),w=c.useRef(),I=c.useRef(),[L,O]=c.useState(null),P=g.useConstructGraphData(),M=g.useParseGraphData(),k=g.useInitTreeGraph(),[D,A]=c.useState(null),j=c.useCallback(e=>{if(!w.current)return;const t=k(e,f.initGraphOptions(f.TABLE_ID,C,f.GRAPH_HEIGHT));t.on("node:mouseenter",e=>{A(null),O(e)}),t.on("node:mouseleave",e=>{A(e.item.get("model").id)}),t.on("node:click",async e=>{O(null);const a=e.item.get("model"),{id:l,name:i,type:r,uri:u,side:d,children:c,hasUpEntities:m,hasDownEntities:f}=a;if(t.removeChild(i+"-temp"),c&&!c.length)if("left"==d&&m){if(r===o.LineageEntityType.HIVE_TABLE){n(!0);const{upEntities:e}=await s.hiveLineageApi.tableLineageGraph({uri:u,view:o.LineageViewType.DIRECT_UP});for(const a of e)t.updateChild(P(a),l);n(!1)}}else if("right"==d&&f&&a.type===o.LineageEntityType.HIVE_TABLE){n(!0);const{downEntities:e}=await s.hiveLineageApi.tableLineageGraph({uri:u,view:o.LineageViewType.DIRECT_DOWN});for(const a of e)t.updateChild(P(a,d,d),l);n(!1)}}),I.current=t,window.onresize=()=>{t.changeSize((null==w?void 0:w.current.clientWidth)||C,f.GRAPH_HEIGHT),t.fitCenter()}},[C,P,k]);return c.useEffect(()=>{T&&T.refEntity&&j(M(T.refEntity,T.upEntities,T.downEntities))},[T,j,M]),c.useLayoutEffect(()=>{w.current&&x(w.current.clientWidth)},[w]),c.useLayoutEffect(()=>{if(!L)return;const e=L.item.get("model"),t=v.TooltipApp(e,L);return t.addEventListener("mouseenter",()=>{A(null)}),t.addEventListener("mouseleave",()=>{A(e.id)}),()=>null==t?void 0:t.remove()},[L]),c.useEffect(()=>{if(!D)return;const e=setTimeout(()=>{O(null),A(null)},80);return()=>clearTimeout(e)},[D]),c.default.createElement("div",{className:E.default.tablePaneGraph},c.default.createElement("div",{className:E.default.changeViewMode,onClick:e.setViewMode},a("detail:列表查看")),c.default.createElement(b.TableStatistic,null),c.default.createElement(u.default,{spinning:N||l},c.default.createElement(i.ErrMsg,{message:S},c.default.createElement("div",{className:`${E.default.content} ${(null==T?void 0:T.refEntity)?"":E.default.noPadding}`,id:f.CONTAINER_ID},(null==T?void 0:T.refEntity)&&c.default.createElement(c.default.Fragment,null,c.default.createElement("div",{className:E.default.bar},c.default.createElement(h.GraphTypeIntro,null),c.default.createElement(p.GraphControl,{width:C,height:f.GRAPH_HEIGHT,graph:I.current})),c.default.createElement(_.GraphFilter,{data:T,updateUp:e=>{e=null==e?void 0:e.trim();const t=I.current;for(const a of T.upEntities){const{name:l,uuid:n}=a;e&&!l.includes(e)?t.removeChild(n):t.findDataById(n)||t.addChild(P(a),T.refEntity.uuid)}},updateDown:e=>{e=null==e?void 0:e.trim();const t=I.current;for(const a of T.downEntities){const{name:l,uuid:n}=a;e&&!l.includes(e)?t.removeChild(n):t.findDataById(n)||t.addChild(P(a,"right","right"),T.refEntity.uuid)}}})),c.default.createElement("div",{className:E.default.graphContainer,key:f.TABLE_ID,id:f.TABLE_ID,ref:w})))))}},function(e,t,a){"use strict";var l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=a(328),r=a(106),u=l(a(0)),s=a(19),o=n(a(280));t.TableStatistic=()=>{const{t:e}=s.useTranslation(),{uri:t}=u.useContext(r.HiveDetailContext),[a,l]=u.useState(null);return u.useEffect(()=>{(async()=>{try{const e=await i.hiveLineageApi.tableLineageStatistic(t);l(e)}catch(e){}})()},[t]),u.default.createElement("div",{className:o.default.hd},u.default.createElement("div",null,e("detail:直接上游数"),": ",u.default.createElement("span",{className:o.default.num},null==a?void 0:a.directUpLabel)),u.default.createElement("div",null,e("detail:全部上游数"),": ",u.default.createElement("span",{className:o.default.num},null==a?void 0:a.allUpLabel)),u.default.createElement("div",{className:o.default.text4},e("detail:直接下游数"),": ",u.default.createElement("span",{className:o.default.num},null==a?void 0:a.directDownLabel)),u.default.createElement("div",null,e("detail:全部下游数"),": ",u.default.createElement("span",{className:o.default.num},null==a?void 0:a.allDownLabel)))}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=a(30),r=l(a(82)),u=l(a(220)),s=l(a(162)),o=l(a(163)),d=l(a(161)),c=a(259),m=a(328),f=a(26),p=a(89),_=a(327),h=a(219),g=a(98),E=a(106),b=n(a(0)),v=a(19),y=a(103),T=l(a(280)),N=a(1204),S=a(277),C=a(1205);t.TableList=e=>{const{uri:t}=b.useContext(E.HiveDetailContext),{t:a}=v.useTranslation(),[l,n]=b.useState(!1),[x,w]=b.useState([]),[I,L]=b.useState(i.getQuery("pageCurrent","number")||1),[O,P]=b.useState(i.getQuery("pageSize","number")||10),[M,k]=b.useState(null),[D,A]=b.useState([]),[j,F]=b.useState(!1),[R,H]=b.useState(!1),[U,B]=b.useState({}),[q]=u.default.useForm(),{getFieldsValue:z}=q,Q=p.useShowTotal(),V=C.useViewTypeOptions(),G=S.useEntityTypeOptions(),Y=b.useMemo(()=>G.reduce((e,t)=>t.value===h.LineageEntityType.OLD_MYSQL?e:t.value===h.LineageEntityType.SELF_MYSQL?(e.push({value:t.value,label:a("自运维MySQL")}),e):(e.push(t),e),[]),[G,a]),W=G[0].value,$=b.useCallback(e=>{var t,a;for(const l of e)l.viewTypeLabel=(null===(t=V.find(e=>l.viewType===e.value))||void 0===t?void 0:t.label)||"-",l.typeLabel=(null===(a=G.find(e=>l.type===e.value))||void 0===a?void 0:a.label)||"-"},[V,G]);b.useEffect(()=>{(async()=>{F(!0);try{const e=z(),a=await m.hiveLineageApi.tableLineagePage({pageCurrent:I,pageSize:O,pageFilter:{uri:t,...e}});k(a.total),$(a.records),A(a.records)}catch(e){}F(!1)})()},[t,I,O,$,W,z,U]);const K=N.useTableColumns(),Z=a("detail:表级血缘"),J=y.getDbTableFromUri(t),X=_.useExportList(K,`表${J.dbName}.${J.tableName}的${Z}.csv`);return b.default.createElement("div",{className:T.default.tablePaneList},b.default.createElement("div",{className:T.default.changeViewMode,onClick:e.setViewMode},a("detail:图形查看")),b.default.createElement(u.default,{layout:"inline",form:q,className:T.default.filter,initialValues:{view:h.LineageViewType.ALL_UP,type:W},onFinish:()=>{if(1===I)return B({});L(1)}},b.default.createElement(u.default.Item,{label:a("detail:节点名"),name:"keyword"},b.default.createElement(s.default,{autoFocus:!0,allowClear:!0,placeholder:a("message:请输入"),onPressEnter:q.submit,onChange:e=>!e.target.value&&q.submit()})),b.default.createElement(u.default.Item,{label:a("detail:负责人"),name:"owner"},b.default.createElement(o.default,{style:{width:"100%"},placeholder:a("message:请输入"),loading:l,filterOption:!1,showSearch:!0,allowClear:!0,onSearch:async e=>{if(!e)return void w([]);n(!0);const t=await c.v1CommonApi.searchStaff(e);w(t),n(!1)},onChange:e=>{const t=x.find(t=>e===t.account);q.submit(),w(t?[t]:[])}},x.map(({name:e,account:t})=>b.default.createElement(o.default.Option,{key:t,value:t,label:e},e,"(",t,")")))),b.default.createElement(u.default.Item,{label:a("detail:节点类型"),name:"type"},b.default.createElement(o.default,{placeholder:a("common:请选择"),onChange:q.submit},Y.map(({value:e,label:t})=>b.default.createElement(o.default.Option,{key:e,value:e},t)))),b.default.createElement(u.default.Item,{label:a("common:血缘"),name:"view"},b.default.createElement(o.default,{onChange:q.submit},V.map(e=>b.default.createElement(o.default.Option,{key:e.value,value:e.value},e.label))))),b.default.createElement("div",{className:T.default.actions},b.default.createElement(r.default,{disabled:!M||j,loading:R,className:T.default.actionExport,onClick:async()=>{H(!0);try{const{column:e,...a}=q.getFieldsValue(),l=await m.hiveLineageApi.tableLineagePage({pageFilter:{uri:t+(e?":"+e:""),...a},pageSize:1e5});$(l.records),X(l.records)}catch(e){f.message.error(e.message)}H(!1)}},a("导出"))),b.default.createElement(d.default,{loading:j,rowKey:"uri",columns:K,dataSource:D,pagination:{...g.PAGE_CONFIG,pageSize:O,current:I,total:M,showTotal:Q,onShowSizeChange:(e,t)=>{P(t),L(1),i.updateQuery({pageSize:10===t?null:t,pageCurrent:null})},onChange:e=>{L(e),i.updateQuery({pageCurrent:1===e?null:e})}}}))}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=a(30),r=l(a(264)),u=a(2159),s=a(535),o=a(26),d=a(106),c=n(a(0)),m=a(19),f=a(103),p=l(a(2160));t.TabPreview=()=>{const{uri:e}=c.useContext(d.HiveDetailContext),{t:t}=m.useTranslation(),[a,l]=c.useState(!1),[n,_]=c.useState(null),[h,g]=c.useState(null),[E,b]=c.useState([]);c.useEffect(()=>{if(!e)return;let t=!1;return(async()=>{try{l(!0);const{data:a,updateTimeLabel:n,columnNameList:r,columnType:o}=await u.v1HivePreviewApi.sampleDataList(e);if(t)return;let d=1;const c=new Map;for(const e of Object.keys(o))c.set(e,{len:e.length,type:["bigint","int"].includes(o[e])?e.includes("_time")?"date":"number":"string",isEmpty:!0,line:1});const m=a.map((e,t)=>{const a={key:t};return r.forEach((t,l)=>{const n=c.get(t);a[t]=e[l],n.isEmpty&&(n.isEmpty=!a[t]),"number"===n.type&&(a[t]=s.isNull(a[t]));const i=a[t]?String(a[t]).length:0;n.len<i&&c.set(t,{...n,len:i})}),a}),f=r.map(e=>{const t=c.get(e);let a=8*t.len+30;return"date"===t.type?(a=6*t.len+30,a&&(a=130)):a>360&&(a/=2,t.line=2,d<2&&(d=2),a>360&&(a=2*a/3,t.line=3,d<2&&(d=3),a>360&&(a=3*a/4,t.line=4,d<2&&(d=4))),a<300&&(a=300),c.set(e,{...t})),{title:e,dataIndex:e,width:Math.ceil(a),className:e===i.getQuery("field")?p.default.highLight:"",align:["bigint","int"].includes(o[e])&&!e.includes("time")?"right":"left"}});for(const e of f){const t=e.dataIndex,a=c.get(t);1===a.line&&d>1&&e.width>200&&(e.width=200),a.isEmpty&&(e.width=6*t.length+40)}g(m),b(f),_(n)}catch(e){}t||l(!1)})(),()=>t=!0},[e]);const v=c.useMemo(()=>({x:f.getTableWidth(E,0,160),y:540}),[E]);return c.default.createElement("div",{className:p.default.tabPreview},c.default.createElement(r.default,{className:"alert-normal",showIcon:!0,type:"warning",message:t("message:根据安全要求，对没有权限的表，数据样例仅展示数仓层级为ODS、DWD、DIM、DWV的表中安全级别为C1/C2的数据列。可请求表的负责人合理设置hive表的数仓层级以及字段的安全级别，以便预览数据。预览数据会针对数字做千分位处理。")}),a?c.default.createElement(o.Spin,null,c.default.createElement(o.Empty,{image:o.Empty.PRESENTED_IMAGE_SIMPLE})):(null==h?void 0:h.length)?c.default.createElement(c.default.Fragment,null,c.default.createElement("div",{className:p.default.dataMeta},c.default.createElement("div",{className:p.default.time},t("detail:最近更新时间")," : ",n||"-")),c.default.createElement(o.Table,{rowKey:"key",loading:a,columns:E,dataSource:h,scroll:v,pagination:!1})):null)}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const l=a(30),n=a(160),i=a(166);let r={};t.v1HivePreviewApi={async sampleDataList(e){if(r[e])r[e].columnNameList.length>20&&await l.sleep(80);else{const t=await n.get("hive/meta/table/sampleData",{uri:e});t.updateTimeLabel=i.humanDate(t.updateTime),r={[e]:t}}return r[e]}}},function(e,t,a){e.exports={"tab-preview":"index_tab-preview_3kwKy",tabPreview:"index_tab-preview_3kwKy","high-light":"index_high-light_L3XKx",highLight:"index_high-light_L3XKx","data-meta":"index_data-meta_CgmYY",dataMeta:"index_data-meta_CgmYY",time:"index_time_6PM3S"}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=a(30),r=l(a(813)),u=a(1206),s=a(26),o=a(97),d=n(a(0)),c=a(19),m=a(106),f=l(a(2162)),p=l(a(2167)),_=l(a(2168));t.TabStatistics=()=>{const{t:e}=c.useTranslation(),t=d.useRef(null),[a]=s.useForm(),[l,n]=d.useState([]),[h,g]=d.useState([]),[E,b]=d.useState(""),[v,y]=d.useState(!0),[T,N]=d.useState(""),[S,C]=d.useState(!0),[x,w]=d.useState([]),{uri:I,tableId:L}=d.useContext(m.HiveDetailContext),[O,P]=d.useState(""),M=d.useCallback(async()=>{y(!0);try{let e=await u.statisticsApi.statisticsList({uri:I,partitionName:E});e=e.sort((e,t)=>+e.partName.substring(3,11)-+t.partName.substring(3,11)),g(e),w(e),y(!1)}catch(e){y(!1)}},[E]),k=d.useCallback(async()=>{C(!0);try{const e=await u.statisticsApi.partitionList({uri:I,partName:T});n(e),P(e[0]),C(!1)}catch(e){C(!1)}},[T]);return d.useEffect(()=>{k()},[T]),d.useEffect(()=>{M()},[E]),d.default.createElement("div",{className:_.default.tabStatistics},d.default.createElement(s.Alert,{className:"alert-normal",showIcon:!0,type:"warning",message:d.default.createElement("div",null,e("message:基于数据信息安全考虑,C4级别字段暂不支持查看统计信。统计值的计算规则详情可"),d.default.createElement(o.ExternalLink,{wikiPageId:187527406}," ",e("message:查看wiki")))}),h?d.default.createElement(d.default.Fragment,null,d.default.createElement("div",{className:_.default.header},d.default.createElement(s.Form,{form:a,layout:"inline",labelCol:{span:10},wrapperCol:{span:30}},d.default.createElement(s.Form.Item,{label:e("detail:当前分区")},d.default.createElement(s.Select,{loading:S,style:{width:230},filterOption:!1,placeholder:"搜索",defaultValue:O,value:E.length?E:O,dropdownRender:e=>d.default.createElement("div",{className:_.default.selectInnerContent},d.default.createElement(r.default,{placeholder:"搜索",onSearch:e=>{N(e)},style:{width:"95%",marginLeft:"4px"}}),e||"未找到符合条件的分区名"),onChange:e=>{if(e)return b(e.toString())}},l.map(e=>d.default.createElement(s.Select.Option,{key:e,value:e},e)))),d.default.createElement(s.Form.Item,null,d.default.createElement(s.Input.Search,{placeholder:e("detail:搜索字段名称/字段描述"),onSearch:e=>{g(e?x.filter(t=>t.comment.includes(e)||t.columnName.includes(e)):x)},onChange:e=>{const t=e.target.value;g(t?x.filter(e=>e.comment.includes(t)||e.columnName.includes(t)):x)}})))),d.default.createElement("div",null,h.length||x.length||v?d.default.createElement(s.Table,{loading:v,rowKey:"position",tableLayout:"auto",dataSource:h,scroll:{x:1300},columns:[{title:e("detail:序号"),width:80,key:"position",dataIndex:"position"},{title:e("detail:字段名"),width:120,key:"columnName",dataIndex:"columnName"},{title:e("detail:描述"),width:100,key:"comment",dataIndex:"comment"},{title:e("detail:类型"),width:100,key:"type",dataIndex:"type"},{title:e("detail:安全等级"),width:80,key:"count",dataIndex:"securityLevel"},{title:e("detail:Null值数"),width:100,key:"nullCount",dataIndex:"nullCount"},{title:e("detail:Null值占比"),width:100,key:"nullRatio",dataIndex:"nullRatio",render:e=>"NaN"==(100*e).toFixed(2)?e:(100*e).toFixed(2)+"%"},{title:e("detail:Max"),width:100,key:"max",dataIndex:"max"},{title:e("detail:Min"),width:100,key:"min",dataIndex:"min"},{title:e("detail:Sum"),width:100,key:"sum",dataIndex:"sum",render:e=>null==e?"-":e},{title:e("detail:Count"),width:100,key:"count",dataIndex:"count"},{title:e("detail:Count(Distinct)"),width:100,key:"columnName",dataIndex:"columnName",render:t=>d.default.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:`${i.dataMapOrigin}/ddc_fetch_tools/sql.html#/sql?tableId=${L}&distinctField=${t}`},e("detail:去查询"))},{title:e("操作"),width:100,key:"columnName",dataIndex:"columnName",fixed:"right",render:a=>d.default.createElement("span",{style:{color:"#4161a3",cursor:"pointer"},onClick:()=>{t.current.setVisible(!0),t.current.setColumnName(a),t.current.setDrawerTitle(a),t.current.setDefaultTab(!0)}},d.default.createElement(s.IconFont,{type:"icon-B"})," ",e("detail:历史分析"))}],pagination:!1}):null,v||x.length?null:d.default.createElement(s.Empty,{image:d.default.createElement("img",{src:p.default}),description:"当前表非ORC格式存储，无统计值信息。如需使用请联系表负责人修改表格式为ORC格式。如有任何问题，请D-Chat联系“小数点-小助手” 。"}),d.default.createElement(f.default,{ref:t}))):d.default.createElement(s.Empty,{image:s.Empty.PRESENTED_IMAGE_SIMPLE,description:"当前表非ORC格式存储，无统计值信息。如需使用请联系表负责人修改表格式为ORC格式。如有问题请钉钉联系滴滴数据平台服务号"}))}},function(e,t,a){"use strict";var l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=a(30),r=a(1206),u=a(26),s=a(327),o=l(a(0)),d=a(19),c=a(103),m=a(2163),f=n(a(2165)),p=a(2166);t.default=o.forwardRef((e,t)=>{const{t:a}=d.useTranslation(),[l,n]=o.useState(!1),[_,h]=o.useState(!1),[g,E]=o.useState(!1),[b,v]=o.useState(1),[y]=o.useState(10),[T,N]=o.useState(""),[S,C]=o.useState(""),[x,w]=o.useState({total:0,records:[]}),[I]=o.useState(i.getQuery("uri")||""),[L,O]=o.useState(!0),P=p.useTableColumns(),M=a("字段_数据统计"),k=c.getDbTableFromUri(I),D=s.useExportList(P,`表${k.dbName}.${k.tableName}.${T}${M}.csv`),A=o.useCallback(async()=>{h(!0);try{const e=await r.statisticsApi.statHistogram({pageCurrent:b,pageSize:y,pageFilter:{uri:I,columnName:T}});e.records=e.records.reverse(),w(e),h(!1)}catch(e){h(!1),u.message.error("error->",e)}},[b,y,I,T]),j=e=>{switch(e){case 1:v(b+1);break;case 2:v(b-1)}};o.useEffect(()=>{A()},[I,A,a]),o.useImperativeHandle(t,()=>({setVisible:n,setColumnName:N,setDrawerTitle:C,setDefaultTab:O}));return o.default.createElement(o.default.Fragment,null,o.default.createElement(u.Drawer,{className:f.default.drawer,destroyOnClose:!0,maskClosable:!0,width:900,title:String(S)+a("detail:的统计值"),placement:"right",closable:!0,visible:l,onClose:()=>{n(!1)}},o.default.createElement("div",{className:f.default.drawerContent},o.default.createElement("div",{className:f.default.header},L?o.default.createElement("div",{className:f.default.headerLeftBtn},o.default.createElement(u.Button,{onClick:()=>{O(!1)}},a("detail:列表查看")),o.default.createElement(u.Button,{onClick:()=>{document.querySelectorAll("canvas").forEach((e,t)=>{const a=document.createElement("a");let l="";a.href=e.toDataURL("image/png"),0==t&&(l=`${k.dbName}.${k.tableName}.${T}字段_Count&Sum_数据统计.png`),1==t&&(l=`${k.dbName}.${k.tableName}.${T}字段_Max&Min_数据统计.png`),2==t&&(l=`${k.dbName}.${k.tableName}.${T}字段_Null值占比&Null值数_数据统计.png`),a.download=l,a.click()})}},a("detail:保存为图片"))):o.default.createElement("div",{className:f.default.headerLeftBtn},o.default.createElement(u.Button,{onClick:()=>{O(!0)}},a("detail:图表查看")),o.default.createElement(u.Button,{loading:g,onClick:async()=>{E(!0);try{const e=await r.statisticsApi.statHistogram({pageCurrent:1,pageSize:1e4,pageFilter:{uri:I,columnName:T}});D(e.records),E(!1)}catch(e){E(!1),u.message.error("导出失败")}}},a("detail:下载"))),o.default.createElement("div",{className:f.default.headerRightTips},o.default.createElement(u.Tooltip,{title:"向前查看10个分区"},o.default.createElement(u.IconFont,{className:"icon-left",type:"icon-left",style:{fontSize:"14px"},disabled:!(x.total>b*y),onClick:()=>{j(1)}})),o.default.createElement(u.Tooltip,{title:"向后查看10个分区"},o.default.createElement(u.IconFont,{disabled:b<=1,className:"icon-right",style:{fontSize:"14px"},type:"icon-right",onClick:()=>{j(2)}})))),o.default.createElement("div",{className:"main"},L?o.default.createElement(m.StatisticalChart,{data:x.records}):o.default.createElement("div",null,o.default.createElement(u.Table,{loading:_,rowKey:"partName",dataSource:x.records,pagination:!1,columns:P,scroll:{x:800}}))))))})},function(e,t,a){"use strict";var l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=a(473),r=l(a(0)),u=a(19),s=n(a(2164));t.StatisticalChart=e=>{const{data:t}=e,{t:a}=u.useTranslation(),l=r.useRef();let n=null,o=null,d=null;const c=()=>(null==n&&(n=new i.Chart({theme:{styleSheet:{backgroundColor:"#fafafa",brandColor:"#025DF4"}},container:s.default.chart1,autoFit:!0,height:200,width:500})),n.data([...t.map(e=>({...e,type:"Count",value:null==e.count?0:e.count})),...t.map(e=>({...e,type:"Sum",value:null==e.sum?0:e.sum}))]),n.scale({value:{nice:!0,type:"linear"}}),n.legend({position:"bottom"}),n.interval().position("partName*value").color("type").adjust([{type:"dodge",marginRatio:0}]),n.annotation().text({position:["0%","110%"],content:t[0].partName,style:{textAlign:"left",fontSize:12}}),n.annotation().text({position:["100%","110%"],content:t[t.length-1].partName,style:{textAlign:"right",fontSize:12}}),n.tooltip({showMarkers:!1,shared:!0}),n.axis("partName",{label:null}),n.render(),()=>{n.destroy()}),m=()=>(null==o&&(o=new i.Chart({container:s.default.chart2,autoFit:!0,height:200,width:500,theme:{styleSheet:{backgroundColor:"#fafafa",brandColor:"#025DF4"}}})),o.data([...t.map(e=>({...e,lineType:"Max",value:null!=e.max?e.max:0})),...t.map(e=>({...e,lineType:"Min",value:null!=e.min?e.min:0}))]),o.scale({range:{nice:!0,sync:!0},value:{type:"linear",nice:!0,sync:!0}}),o.line().position("partName*value").color("lineType").size(2).shape("smooth"),o.tooltip({showCrosshairs:!1,shared:!0}),o.annotation().text({position:["0%","110%"],content:t[0].partName,style:{textAlign:"left",fontSize:12}}),o.annotation().text({position:["100%","110%"],content:t[t.length-1].partName,style:{textAlign:"right",fontSize:12}}),o.axis("partName",{label:null}),o.legend({position:"bottom"}),o.render(),()=>{o.destroy()}),f=()=>(null==d&&(d=new i.Chart({container:s.default.chart3,autoFit:!0,height:200,width:500,theme:{styleSheet:{backgroundColor:"#fafafa",brandColor:"#025DF4"}}})),d.data([...t.map(e=>({...e,countOrRatio:"nullCount",value:null==e.nullCount?0:e.nullCount})),...t.map(e=>({...e,countOrRatio:"nullRatio",value:null==e.nullRatio?0:e.nullRatio}))]),d.scale({nullRatio:{type:"linear",nice:!0},nullCount:{type:"linear",nice:!0}}),d.line().position("partName*nullRatio").color("lineType").size(2).shape("smooth").tooltip("partName*nullRatio",(e,t)=>{const l=(100*t).toFixed(2);return{name:a("detail:Null值占比"),value:"NaN"==l?t:(100*t).toFixed(2)+"%"}}),d.interval().position("partName*nullCount").color("#3182bd").shape("smooth").tooltip("partName*nullCount",(e,t)=>({name:a("detail:Null值数"),value:t})),d.legend({position:"bottom",custom:!0,items:[{value:"nullRatio",name:a("detail:Null值占比"),marker:{symbol:"square",style:{fill:"#3182bd",r:5}}},{value:"nullCount",name:a("detail:Null值数"),marker:{symbol:"hyphen",style:{stroke:"#fdae6b",r:5,lineWidth:3}}}]}),d.annotation().text({position:["0%","110%"],content:t[0].partName,style:{textAlign:"left",fontSize:12}}),d.annotation().text({position:["100%","110%"],content:t[t.length-1].partName,style:{textAlign:"right",fontSize:12}}),d.tooltip({shared:!0}),d.axis("partName",{label:null}),i.registerInteraction("legend-visible-filter",{start:[{trigger:"legend-item:click",action:"list-unchecked:toggle"},{trigger:"legend-item:click",action:"element-filter:filter"},{trigger:"legend-item:click",action:"data-filter:filter"}]}),d.removeInteraction("legend-filter"),d.render(),()=>{d.destroy()});return r.useEffect(()=>{if(t.length)return c(),m(),f(),()=>{c()(),m()(),f()()}},[t]),r.default.createElement("div",{style:{height:"100%"}},r.default.createElement("div",{id:s.default.chart1,ref:l,style:{background:"#fafafa"}}),r.default.createElement("div",{id:s.default.chart2,style:{marginTop:"20px",background:"#fafafa"}}),r.default.createElement("div",{id:s.default.chart3,style:{marginTop:"20px",background:"#fafafa"}}))}},function(e,t,a){e.exports={chart1:"statistical-chart_chart1_SgvRR",chart2:"statistical-chart_chart2_2DECf",chart3:"statistical-chart_chart3_2xyaJ"}},function(e,t,a){e.exports={drawer:"index_drawer_l7Kdl","drawer-content":"index_drawer-content_3VFfo",drawerContent:"index_drawer-content_3VFfo",header:"index_header_1vmiY","header-left-btn":"index_header-left-btn_2hzGK",headerLeftBtn:"index_header-left-btn_2hzGK","header-right-tips":"index_header-right-tips_3S4vF",headerRightTips:"index_header-right-tips_3S4vF"}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const l=a(0),n=a(19);t.useTableColumns=()=>{const{t:e}=n.useTranslation();return l.useMemo(()=>[{title:"分区名",dataIndex:"partName",key:"partName",width:120},{title:"Null值数",dataIndex:"nullCount",key:"nullCount",width:100},{title:"Null值占比",dataIndex:"nullRatio",key:"nullRatio",width:100,render:e=>"NaN"==(100*e).toFixed(2)?e:(100*e).toFixed(2)+"%"},{title:"Max",dataIndex:"max",key:"max"},{title:"Min",dataIndex:"min",key:"min"},{title:"Sum",dataIndex:"sum",key:"sum",render:e=>null==e?"-":e},{title:"Count",dataIndex:"count",key:"count",width:100}],[e])}},function(e,t,a){"use strict";a.r(t),t.default=a.p+"fcb36104b86d3b65efdc75d19331d0a0.png"},function(e,t,a){e.exports={"tab-statistics":"index_tab-statistics_2x-FM",tabStatistics:"index_tab-statistics_2x-FM",header:"index_header_3Efxl","select-inner-content":"index_select-inner-content_12KLK",selectInnerContent:"index_select-inner-content_12KLK"}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=a(30),i=a(26),r=l(a(0)),u=a(19),s=a(2170),o=l(a(410)),d=a(2171),c=a(2172),m=a(2173),f=a(2174);t.TabUsage=()=>{const{t:e}=u.useTranslation();return r.default.createElement(i.Tabs,{className:o.default.tabUsage,onChange:e=>n.updateQuery({subTab:"statistics"===e?null:e,pageSize:null,pageCurrent:null}),defaultActiveKey:n.getQuery("subTab")},r.default.createElement(i.Tabs.TabPane,{tab:r.default.createElement("span",{className:"tab-nav-text"},e("detail:使用统计")),key:"statistics"},r.default.createElement(f.UsageTimes,null),r.default.createElement(s.ColumnUsage,null)),r.default.createElement(i.Tabs.TabPane,{tab:r.default.createElement("span",{className:"tab-nav-text"},e("detail:使用记录")),key:"usage-record"},r.default.createElement(c.Template,null),r.default.createElement(m.Usage,null)),r.default.createElement(i.Tabs.TabPane,{tab:r.default.createElement("span",{className:"tab-nav-text"},e("detail:频繁关联")),key:"join"},r.default.createElement(d.Join,null)))}},function(e,t,a){"use strict";var l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=a(30),r=a(467),u=a(26),s=a(89),o=a(327),d=a(148),c=a(98),m=a(106),f=l(a(0)),p=a(19),_=a(117),h=a(103),g=n(a(410));t.ColumnUsage=()=>{const{uri:e}=f.useContext(m.HiveDetailContext),{t:t}=p.useTranslation(),[a,l]=f.useState(!1),[n,E]=f.useState([]),[b,v]=f.useState(!1),[y,T]=f.useState(null),[N,S]=f.useState(i.getQuery("pageCurrent","number")||1),[C,x]=f.useState(i.getQuery("pageSize","number")||10),[w,I]=f.useState(null),L=s.useShowTotal();f.useEffect(()=>{let t=!1;return(async()=>{try{l(!0);const a=await r.v1HiveUsageApi.columnUsageList({pageCurrent:N,pageSize:C,pageFilter:{tableUri:e,columnName:y}});if(t)return;E(a.records),I(a.total)}catch(e){}t||l(!1)})(),()=>{t=!0}},[N,C,e,y]);const O=f.useMemo(()=>[{title:t("detail:字段名"),dataIndex:"columnName",render:t=>f.default.createElement(_.Link,{to:{pathname:"/detail",search:`?uri=${e}:${t}`,state:{referer:d.RefererType.INNER}}},t)},{title:t("common:描述"),dataIndex:"comment",ellipsis:!0},{title:t("detail:Select次数"),width:130,align:"right",key:"selectTimes",dataIndex:"selectTimesLabel"},{title:t("detail:Where次数"),width:110,align:"right",key:"whereTimes",dataIndex:"whereTimesLabel"},{title:t("detail:Group by次数"),width:120,align:"right",key:"groupByTimes",dataIndex:"groupByTimesLabel"},{title:t("detail:Join次数"),width:110,align:"right",key:"joinTimes",dataIndex:"joinTimesLabel"}],[t,e]),P=t("detail:最近30天字段使用明细"),M=h.getDbTableFromUri(e),k=o.useExportList(O,`表${M.dbName}.${M.tableName}的${P}.csv`);return f.default.createElement("div",{className:g.default.columnUsagePane},f.default.createElement("div",{className:g.default.hd},f.default.createElement("div",{className:g.default.left},f.default.createElement("div",{className:g.default.title},P)),f.default.createElement("div",{className:g.default.right},f.default.createElement(u.Input.Search,{className:g.default.inputSearch,placeholder:t("detail:搜索字段名"),onSearch:T}),f.default.createElement(u.Button,{disabled:!w,className:g.default.actionExport,type:"primary",onClick:()=>k(n)},t("common:导出")),f.default.createElement(u.Button,{disabled:!w,loading:b,className:g.default.actionExportAll,onClick:async()=>{v(!0);try{const t=await r.v1HiveUsageApi.columnUsageList({pageCurrent:1,pageSize:1e4,pageFilter:{tableUri:e}});k(t.records)}catch(e){u.message.error(e.message)}v(!1)}},t("common:导出全部")))),f.default.createElement(u.Table,{rowKey:"columnId",loading:a,columns:O,dataSource:n,scroll:{x:scrollX},pagination:{...c.PAGE_CONFIG,pageSize:C,current:N,total:w,showTotal:L,onShowSizeChange:(e,t)=>{x(t),S(1),i.updateQuery({pageSize:10===t?null:t,pageCurrent:null})},onChange:e=>{S(e),i.updateQuery({pageCurrent:1===e?null:e})}}}))}},function(e,t,a){"use strict";var l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=a(30),r=a(467),u=a(26),s=a(89),o=a(327),d=a(148),c=a(98),m=a(106),f=l(a(0)),p=a(19),_=a(117),h=a(103),g=n(a(410));t.Join=()=>{const{uri:e}=f.useContext(m.HiveDetailContext),{t:t}=p.useTranslation(),[a,l]=f.useState(!1),[n,E]=f.useState(!1),[b,v]=f.useState([]),[y,T]=f.useState(null),[N,S]=f.useState(i.getQuery("pageCurrent","number")||1),[C,x]=f.useState(i.getQuery("pageSize","number")||20),[w,I]=f.useState(null),L=s.useShowTotal();f.useEffect(()=>{let t=!1;return(async()=>{try{l(!0);const a=await r.v1HiveUsageApi.joinUsageList({pageCurrent:N,pageSize:C,pageFilter:{tableUri:e,tableName:y}});if(t)return;v(a.records),I(a.total)}catch(e){}t||l(!1)})(),()=>{t=!0}},[N,C,e,y]);const O=f.useMemo(()=>[{title:t("detail:关联表"),dataIndex:"dbTableLabel",render:(e,t)=>f.default.createElement(_.Link,{to:{pathname:"/detail",search:"?uri="+t.tableUri,state:{referer:d.RefererType.INNER}}},t.dbTableLabel)},{title:t("detail:关联条件"),dataIndex:"condition",ellipsis:!0},{title:t("detail:关联次数"),width:160,align:"right",key:"joinTimes",dataIndex:"joinTimesLabel",ellipsis:!0}],[t]),P=t("detail:近30天常用关联"),M=h.getDbTableFromUri(e),k=o.useExportList(O,`表${M.dbName}.${M.tableName}的${P}.csv`);return f.default.createElement("div",{className:g.default.joinPane},f.default.createElement("div",{className:g.default.hd},f.default.createElement("div",{className:g.default.title},P),f.default.createElement("div",{className:g.default.right},f.default.createElement(u.Input.Search,{className:g.default.inputSearch,placeholder:t("detail:搜索表"),onSearch:T}),f.default.createElement(u.Button,{disabled:!w,className:g.default.actionExport,type:"primary",onClick:()=>k(b)},t("导出")),f.default.createElement(u.Button,{disabled:!w,loading:n,className:g.default.actionExportAll,onClick:async()=>{try{E(!0);const t=await r.v1HiveUsageApi.joinUsageList({pageCurrent:1,pageSize:1e4,pageFilter:{tableUri:e}});k(t.records),E(!1)}catch(e){u.message.error(e.message)}}},t("导出全部")))),f.default.createElement(u.Table,{rowKey:"tableUri",loading:a,columns:O,dataSource:b,scroll:{x:scrollX},pagination:{...c.PAGE_CONFIG,pageSize:C,current:N,total:w,showTotal:L,onShowSizeChange:(e,t)=>{x(t),S(1),i.updateQuery({pageSize:10===t?null:t,pageCurrent:null})},onChange:e=>{S(e),i.updateQuery({pageCurrent:1===e?null:e})}}}))}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=a(30),r=l(a(371)),u=a(467),s=a(26),o=a(120),d=a(97),c=a(89),m=a(528),f=a(327),p=n(a(365)),_=a(98),h=a(106),g=n(a(0)),E=a(19),b=a(103),v=l(a(410));t.Template=()=>{const{uri:e}=g.useContext(h.HiveDetailContext),{t:t}=E.useTranslation(),[a,l]=g.useState(!1),[n,y]=g.useState(""),[T,N]=g.useState(!1),[S,C]=g.useState([]),[x,w]=g.useState(!1),[I,L]=g.useState(null),[O,P]=g.useState(i.getQuery("pageCurrent","number")||1),[M,k]=g.useState(i.getQuery("pageSize","number")||10),[D,A]=g.useState(null),j=c.useShowTotal();g.useEffect(()=>{let t=!1;return(async()=>{try{N(!0);const a=await u.v1HiveUsageApi.templateUsageList({pageCurrent:O,pageSize:M,pageFilter:{tableUri:e,templateName:I}});if(t)return;C(a.records),A(a.total)}catch(e){}t||N(!1)})(),()=>{t=!0}},[O,M,e,I]);const F=g.useMemo(()=>[{title:t("detail:模板名称"),dataIndex:"templateName",render:(e,t)=>g.default.createElement(d.ExternalLink,{href:`${i.dataMapOrigin}/ddc_fetch_tools/#/supermarket?templateId=${t.templateId}`},t.templateName)},{title:t("detail:模板ID"),width:130,dataIndex:"templateId"},{title:t("detail:负责人"),width:130,dataIndex:"ownerLabel",render:(e,{owner:t})=>g.default.createElement(o.DChat,{user:t})},{title:t("detail:近15天使用次数"),align:"right",key:"refTimes",dataIndex:"refTimesLabel"},{title:t("detail:模板SQL"),width:120,dataIndex:"action",render:(e,{sql:a})=>g.default.createElement(s.Tooltip,{placement:"left",title:g.default.createElement("div",null,t("detail:模板SQL含有变量，如需使用，请到"),g.default.createElement(d.ExternalLink,{href:i.dataMapOrigin+"/ddc_fetch_tools/sql.html#/sql"},t("detail:提取工具")),t("detail:查询，需申请表权限，并替换变量为真实值"))},g.default.createElement(s.Button,{style:{padding:0},type:"link",onClick:()=>{l(!0),y(a)}},t("common:查看")))}],[t]),R=t("detail:最近查询模板"),{dbName:H,tableName:U}=b.getDbTableFromUri(e),B=f.useExportList(F,`表${H}.${U}的${R}.csv`);return g.default.createElement("div",{className:v.default.templatePane},g.default.createElement("div",{className:v.default.hd},g.default.createElement("div",{className:v.default.title},R),g.default.createElement("div",{className:v.default.right},g.default.createElement(s.Input.Search,{className:v.default.inputSearch,placeholder:t("detail:搜索模板名称"),onSearch:L}),g.default.createElement(s.Button,{className:v.default.actionExport,disabled:!D,type:"primary",onClick:()=>B(S)},t("common:导出")),g.default.createElement(s.Button,{disabled:!D,loading:x,className:v.default.actionExportAll,onClick:async()=>{w(!0);try{const t=await u.v1HiveUsageApi.templateUsageList({pageCurrent:1,pageSize:1e4,pageFilter:{tableUri:e}});B(t.records)}catch(e){s.message.error(e.message)}w(!1)}},t("common:导出全部")))),g.default.createElement(s.Table,{rowKey:"templateId",loading:T,columns:F,dataSource:S,scroll:{x:scrollX},pagination:{..._.PAGE_CONFIG,pageSize:M,current:O,total:D,showTotal:j,onShowSizeChange:(e,t)=>{k(t),P(1),i.updateQuery({pageSize:10===t?null:t,pageCurrent:null})},onChange:e=>{P(e),i.updateQuery({pageCurrent:1===e?null:e})}}}),g.default.createElement(r.default,{title:t("detail:查看模板SQL"),width:600,className:v.default.sqlDrawer,visible:a,placement:"right",getContainer:"body",onClose:()=>l(!1),destroyOnClose:!0,afterVisibleChange:e=>{e&&p.editor.create(document.getElementById(v.default.sqlView),{value:n,language:"sql",readOnly:!0,automaticLayout:!0,minimap:{enabled:!1}})}},g.default.createElement(m.SqlView,{sql:n,id:v.default.sqlView,fullscreen:!0})))}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=a(30),r=l(a(371)),u=a(467),s=a(26),o=a(120),d=a(89),c=a(528),m=a(327),f=n(a(365)),p=a(98),_=a(106),h=n(a(0)),g=a(19),E=a(103),b=l(a(410));t.Usage=()=>{const{uri:e}=h.useContext(_.HiveDetailContext),{t:t}=g.useTranslation(),[a,l]=h.useState(!1),[n,v]=h.useState(""),[y,T]=h.useState(!1),[N,S]=h.useState([]),[C,x]=h.useState(!1),[w,I]=h.useState(null),[L,O]=h.useState(i.getQuery("pageCurrent","number")||1),[P,M]=h.useState(i.getQuery("pageSize","number")||10),[k,D]=h.useState(null),A=d.useShowTotal();h.useEffect(()=>{let t=!1;return(async()=>{try{T(!0);const a=await u.v1HiveUsageApi.commonUsageList({pageCurrent:L,pageSize:P,pageFilter:{tableUri:e,account:w}});if(t)return;S(a.records),D(a.total)}catch(e){}t||T(!1)})(),()=>{t=!0}},[L,P,e,w]);const j=h.useMemo(()=>[{title:t("detail:使用人"),width:"35%",dataIndex:"ownerLabel",render:(e,{owner:t})=>h.default.createElement(o.DChat,{user:t})},{title:t("detail:账号"),dataIndex:"account"},{title:t("detail:使用次数"),width:"15%",key:"count",align:"right",dataIndex:"countLabel"},{title:t("common:操作"),width:100,dataIndex:"action",render:(e,{sql:a})=>h.default.createElement(s.Button,{type:"link",style:{padding:0},onClick:()=>{l(!0),v(a)}},t("detail:SQL实例"))}],[t]),F=t("detail:最近30天使用详情"),{dbName:R,tableName:H}=E.getDbTableFromUri(e),U=m.useExportList(j,`表${R}.${H}的${F}.csv`);return h.default.createElement("div",{className:b.default.usagePane},h.default.createElement("div",{className:b.default.hd},h.default.createElement("div",{className:b.default.title},F),h.default.createElement("div",{className:b.default.right},h.default.createElement(s.Input.Search,{className:b.default.inputSearch,placeholder:t("detail:搜索使用人/账号"),onSearch:I}),h.default.createElement(s.Button,{disabled:!k,className:b.default.actionExport,type:"primary",onClick:()=>U(N)},t("common:导出")),h.default.createElement(s.Button,{disabled:!k,loading:C,className:b.default.actionExportAll,onClick:async()=>{x(!0);try{const t=await u.v1HiveUsageApi.commonUsageList({pageCurrent:1,pageSize:1e4,pageFilter:{tableUri:e,needSql:!1}});U(t.records)}catch(e){s.message.error(e.message)}x(!1)}},t("common:导出全部")))),h.default.createElement(s.Table,{rowKey:"account",loading:y,columns:j,dataSource:N,scroll:{x:scrollX},pagination:{...p.PAGE_CONFIG,pageSize:P,current:L,total:k,showTotal:A,onShowSizeChange:(e,t)=>{M(t),O(1),i.updateQuery({pageSize:10===t?null:t,pageCurrent:null})},onChange:e=>{O(e),i.updateQuery({pageCurrent:1===e?null:e})}}}),h.default.createElement(r.default,{title:t("detail:查看SQL实例"),width:"42%",className:b.default.sqlDrawer,visible:a,placement:"right",getContainer:"body",onClose:()=>l(!1),destroyOnClose:!0,afterVisibleChange:e=>{e&&f.editor.create(document.getElementById(b.default.sqlView),{value:n,language:"sql",readOnly:!0,automaticLayout:!0,minimap:{enabled:!1}})}},h.default.createElement(c.SqlView,{sql:n,id:b.default.sqlView,fullscreen:!0})))}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=l(a(284)),r=a(473),u=l(a(191)),s=l(a(118)),o=a(467),d=a(106),c=n(a(0)),m=a(19),f=l(a(410));t.UsageTimes=()=>{const{uri:e}=c.useContext(d.HiveDetailContext),{t:t}=m.useTranslation(),[a,l]=c.useState(!1),[n,p]=c.useState([]);return c.useEffect(()=>{let t=!1;return(async()=>{try{l(!0);const a=await o.v1HiveUsageApi.visibleUsageList(e);if(t)return;const n=[];for(const e of a)n.push({label:e.dateLabel,PV:e.pv,UV:e.uv});p(n)}catch(e){}t||l(!1)})(),()=>t=!0},[e]),c.useLayoutEffect(()=>{if(!n.length)return;const e=new r.Chart({container:f.default.usageTimesPane,autoFit:!0,height:400});e.data(n),e.tooltip({shared:!0,showCrosshairs:!0,itemTpl:'\n        <li class="g2-tooltip-list-item">\n          <span class="g2-tooltip-marker" style="background: {color}"></span>\n          <span class="g2-tooltip-name">{name}</span>\n          <span style="padding: 0 2px;">:</span>\n          <span class="g2-tooltip-value">{value}</span>\n        </li>\n      ',domStyles:{"g2-tooltip":{background:"rgba(0,0,0,0.75)","font-family":"PingFangSC-Regular","box-shadow":"0 2px 8px 0 rgba(0,0,0,0.15)"},"g2-tooltip-title":{color:"#bbb","font-size":"12px","line-height":"18px"},"g2-tooltip-list-item":{display:"flex",color:"#fff","align-items":"center"},"g2-tooltip-marker":{width:"8px",height:"8px",background:"{color}","margin-right":"4px","border-radius":"50%"},"g2-tooltip-value":{flex:"1","text-align":"right"}},crosshairs:{type:"x",line:{style:{stroke:"#E8E8E8"}}}}),e.scale({PV:{nice:!0,formatter:e=>Number.isInteger(e)?e:""},UV:{nice:!0,minLimit:0,formatter:e=>Number.isInteger(e)?e:""}}),e.axis("label",{label:{autoRotate:!1,autoHide:!0,formatter:e=>` ${e} `}}),e.line().position("label*PV").style({lineWidth:1}).color("#F27E49"),e.line().position("label*UV").style({lineWidth:1}).color("#7082A6"),e.render()},[n]),c.default.createElement("div",{className:f.default.usageTimesPane},c.default.createElement("div",{className:f.default.hd},c.default.createElement("div",{className:f.default.title},t("detail:最近30天使用次数")),c.default.createElement("div",{className:f.default.tip},c.default.createElement(i.default,null),c.default.createElement("span",{className:f.default.text},t("detail:UV为使用人去重")))),n.length?c.default.createElement(s.default,{spinning:a},c.default.createElement("div",{id:f.default.usageTimesPane})):a?null:c.default.createElement(u.default,{image:u.default.PRESENTED_IMAGE_SIMPLE}))}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=l(a(118)),r=l(a(4)),u=a(301),s=n(a(0)),o=a(19),d=a(464),c=l(a(182)),m=a(2176),f=a(2179),p=a(411),_=a(2181);t.DetailContent=()=>{const{detail:e,loading:t,errorMessage:a}=s.useContext(p.PublicLogDetailContext),{t:l}=o.useTranslation();return s.useEffect(()=>{e&&(document.title=e.publicLogKey)},[e]),s.useEffect(()=>()=>document.title=l("common:数据地图"),[l]),a?s.default.createElement("div",{className:"error",style:{padding:20}},a):s.default.createElement(s.default.Fragment,null,s.default.createElement("div",{className:c.default.tableDetailPage},s.default.createElement(i.default,{spinning:t},s.default.createElement("div",{className:r.default(c.default.top,c.default.minTop)},t||!e?null:s.default.createElement(f.TopInfo,null))),s.default.createElement("div",{className:c.default.content},s.default.createElement(d.DetailUnfold,{loading:t},s.default.createElement("div",{className:c.default.baseInfo},!t&&e&&s.default.createElement("div",{className:c.default.baseInfo},s.default.createElement(m.Base,null)))),s.default.createElement(_.PublicLogDetailPane,null))),s.default.createElement(u.Footer,null))},t.PublicLogDetailPage=e=>s.default.createElement(p.PublicLogDetailProvider,{prevLocation:e.prevLocation},s.default.createElement(t.DetailContent,null))},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=l(a(4)),r=a(120),u=n(a(0)),s=a(19),o=l(a(182)),d=a(411),c=new Map([[1,"active"],[0,"inactive"]]);t.BaseList=()=>{const{t:e}=s.useTranslation(),{detail:t}=u.useContext(d.PublicLogDetailContext),a=u.useMemo(()=>{var a;return[{label:u.default.createElement("span",null,e("detail:负责人")),value:u.default.createElement(r.DChat,{user:t.owner})},{label:e("detail:国家"),value:null===(a=t.country)||void 0===a?void 0:a.name},{label:e("detail:业务线"),value:t.businessLine},{label:e("detail:业务类型"),value:t.businessType},{label:e("detail:采集状态"),value:c.get(t.collectStatus)},{label:e("detail:创建时间"),value:t.createTimeLabel},{label:e("detail:日志说明"),value:t.logDescription||e("detail: 无")}]},[t,e]);return u.default.createElement("div",{className:o.default.list},a.map(({value:e,label:t,hide:a},l)=>{if(!a)return u.default.createElement("div",{key:l,className:o.default.item},u.default.createElement("div",{className:o.default.label},t),u.default.createElement("div",{className:o.default.value},e))}))},t.Base=()=>{const{t:e}=s.useTranslation(),{detail:a}=u.useContext(d.PublicLogDetailContext);return u.default.createElement("div",{className:i.default(o.default.infoItem,o.default.base)},u.default.createElement("div",{className:o.default.title},u.default.createElement("span",null,e("detail:基础信息"))),a&&u.default.createElement(t.BaseList,null))}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const l=a(160),n=a(166);t.v1PublicLogInfoApi={async detailInfo(e,t){const a=await l.get("publicLog/detail",{uri:e,referer:t});return a.createTimeLabel=n.humanDate(a.createTime),a}}},function(e,t,a){"use strict";var l;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.INIT="INIT",e.DETAIL="DETAIL"}(l=t.PUBLIC_LOG_DETAIL_ACTION_TYPES||(t.PUBLIC_LOG_DETAIL_ACTION_TYPES={})),t.PublicLogDetailReducer=(e,t)=>{switch(t.type){case l.INIT:return t.init;case l.DETAIL:return{...e,...t.detail};default:return e}}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=l(a(4)),r=a(26),u=n(a(0)),s=l(a(262)),o=a(19),d=a(411),c=l(a(2180));t.TopInfo=()=>{const{t:e}=o.useTranslation(),{detail:t}=u.useContext(d.PublicLogDetailContext);return u.default.createElement("div",{className:i.default(c.default.topInfo)},u.default.createElement("div",{className:c.default.header},u.default.createElement(r.Tooltip,{title:t.publicLogKey,placement:"bottom"},u.default.createElement("div",{className:c.default.title},t.publicLogKey)),u.default.createElement(s.default,{text:t.publicLogKey,onCopy:()=>r.message.success(e("message:复制成功"))},u.default.createElement(r.IconFont,{type:"icon-copy"})),u.default.createElement("div",{className:c.default.envTag},e("Public日志"))),u.default.createElement("div",{className:c.default.comment},u.default.createElement("span",null,t.publicLogKeyZH)))}},function(e,t,a){e.exports={"top-info":"top-info_top-info_Wfkqz",topInfo:"top-info_top-info_Wfkqz",offline:"top-info_offline_2sDKQ",header:"top-info_header_1AcCx","choicest-text":"top-info_choicest-text_11wC8",choicestText:"top-info_choicest-text_11wC8","env-tag":"top-info_env-tag_3lKEM",envTag:"top-info_env-tag_3lKEM","capriTag?":"top-info_capriTag?_2aJ00",length:"top-info_length_3P5qw",comment:"top-info_comment_3tiSI",actions:"top-info_actions_2w7WW","offline-status":"top-info_offline-status_2SzY7",offlineStatus:"top-info_offline-status_2SzY7",title:"top-info_title_1ftGV",care:"top-info_care_1OQiR",cared:"top-info_cared_3PFMU",permission:"top-info_permission_3Yjuu",album:"top-info_album_1JcsA",score:"top-info_score_37g9_",star:"top-info_star_8SQFY",text:"top-info_text_3FVwX",item:"top-info_item_1HF9S",fill:"top-info_fill_3QRv_"}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=a(30),r=l(a(4)),u=a(26),s=a(1207),o=n(a(0)),d=a(19),c=a(411),m=a(2182),f=a(2184),p=l(a(2186));t.PublicLogDetailPane=()=>{const{tab:e}=o.useContext(c.PublicLogDetailContext),{setTab:t}=o.useContext(c.PublicLogDetailContext),{t:a}=d.useTranslation();return o.default.createElement("div",{className:p.default.logDetailContent},o.default.createElement(u.Tabs,{animated:!1,className:r.default("tabs-custom-light"),onChange:e=>{i.updateQuery({tab:e===s.IPublicLogDetailTab.DETAIL?null:e,subTab:null,pageSize:null,pageCurrent:null}),t(e)},activeKey:e},o.default.createElement(u.Tabs.TabPane,{tab:o.default.createElement("span",{className:"nav-text"},a("detail:日志详情")),key:s.IPublicLogDetailTab.DETAIL},o.default.createElement(m.DetailTab,null)),o.default.createElement(u.Tabs.TabPane,{tab:o.default.createElement("span",{className:"nav-text"},a("detail:日志样例")),key:s.IPublicLogDetailTab.EXAMPLE},o.default.createElement(f.ExampleTab,null))))}},function(e,t,a){"use strict";var l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=a(472),r=a(26),u=a(97),s=l(a(0)),o=a(19),d=a(411),c=n(a(2183));t.DetailTab=()=>{const{t:e}=o.useTranslation(),{detail:t}=s.useContext(d.PublicLogDetailContext),a=s.useMemo(()=>[{title:e("序号"),dataIndex:"position",key:"position"},{title:e("字段名"),dataIndex:"columnName",key:"columnName"},{title:e("类型"),dataIndex:"type",key:"type"},{title:e("描述"),dataIndex:"comment",key:"comment"}],[e]);if(!t)return null;const{tables:l,columns:n}=t;return s.default.createElement("div",{className:c.default.detailTab},s.default.createElement("div",{className:c.default.title},s.default.createElement("span",{className:c.default.line}),s.default.createElement("div",{className:c.default.name},e("关联推荐")),s.default.createElement(i.ExclamationCircleFilled,{className:c.default.icon}),s.default.createElement("div",{className:c.default.label},e("基于数据上下游血缘得出"))),s.default.createElement("div",{className:c.default.boxContent},s.default.createElement("div",null,e("此表已被采集到Hive表，可在Hive表中查询数据：")),l&&s.default.createElement("div",{className:c.default.tables},l.map(({dbName:e,nameZh:t,tableName:a},l)=>s.default.createElement(u.ExternalLink,{key:l,href:`/detail?uri=hive://mycluster-tj:${e}:${a}&`,withReferrer:!0},`${e}.${a}`,t?`(${t})`:"")))),s.default.createElement("div",{className:c.default.title},s.default.createElement("span",{className:c.default.line}),s.default.createElement("div",{className:c.default.name},e("字段信息"))),s.default.createElement("div",{className:c.default.boxContent},s.default.createElement(r.Table,{dataSource:n,columns:a,rowKey:"position",pagination:!1})))}},function(e,t,a){e.exports={"detail-tab":"style_detail-tab_32jRK",detailTab:"style_detail-tab_32jRK",title:"style_title_9erHj",line:"style_line_2OE4f",name:"style_name_1WRZz",icon:"style_icon_2jcEI",label:"style_label_3g_5s","box-content":"style_box-content_fPKTv",boxContent:"style_box-content_fPKTv",tables:"style_tables_2W_Nd"}},function(e,t,a){"use strict";var l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=l(a(0)),r=a(411),u=n(a(2185));t.ExampleTab=()=>{const{detail:e}=i.useContext(r.PublicLogDetailContext);return i.default.createElement("div",{className:u.default.example},i.default.createElement("div",null,null==e?void 0:e.logExample))}},function(e,t,a){e.exports={example:"style_example_3fNm8"}},function(e,t,a){e.exports={"log-detail-content":"style_log-detail-content_2V_XQ",logDetailContent:"style_log-detail-content_2V_XQ"}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=l(a(118)),r=l(a(4)),u=a(301),s=a(525),o=n(a(0)),d=a(19),c=a(464),m=l(a(182)),f=a(2188),p=a(2190),_=a(468),h=a(2192);t.DetailContent=()=>{const{detail:e,loading:t,errorMessage:a}=o.useContext(_.MysqlDetailContext),{t:l}=d.useTranslation();return o.useEffect(()=>{e&&(document.title=`${e.dbName}.${e.tableName}`)},[e]),o.useEffect(()=>()=>document.title=l("common:数据地图"),[l]),a?o.default.createElement("div",{className:"error",style:{padding:20}},a):o.default.createElement(o.default.Fragment,null,o.default.createElement("div",{className:m.default.tableDetailPage},o.default.createElement(i.default,{spinning:t},o.default.createElement("div",{className:r.default(m.default.top,m.default.minTop)},t||!e?null:o.default.createElement(p.TopInfo,null))),o.default.createElement("div",{className:m.default.content},o.default.createElement(c.DetailUnfold,{loading:t},o.default.createElement("div",{className:m.default.baseInfo},!t&&e&&o.default.createElement("div",{className:m.default.baseInfo},o.default.createElement(f.Base,null)))),o.default.createElement(h.MysqlDetailPane,null))),o.default.createElement(u.Footer,null))},t.MysqlDetailPage=e=>o.default.createElement(_.MysqlDetailProvider,Object.assign({},e),o.default.createElement(t.DetailContent,null),o.default.createElement(s.GoTop,null))},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=l(a(129)),r=l(a(221)),u=a(30),s=a(181),o=l(a(4)),d=a(26),c=a(120),m=a(97),f=a(526),p=n(a(0)),_=a(19),h=l(a(182)),g=a(468);new Map([[1,"active"],[0,"inactive"]]);t.BaseList=()=>{const{t:e}=_.useTranslation(),{uri:t,detail:a}=p.useContext(g.MysqlDetailContext),[l,n]=p.useState(!1),[o,E]=p.useState(a.assetManager),[b,v]=p.useState(a.assetManager),[y,T]=p.useState(!1),{taskCode:N,capriVersion:S}=(null==a?void 0:a.assetOwnerInfo)||{},C=u.getScheduleTaskUrl(N,S),[x,w]=p.useState(!1),I=p.useMemo(()=>[{label:p.default.createElement("span",null,e("detail:负责人")),value:p.default.createElement(p.default.Fragment,null,a.isAssetOwner?p.default.createElement(d.Popover,{visible:l,placement:"topRight",trigger:"click",onVisibleChange:e=>n(e),content:a.assetOwnerInfo?p.default.createElement("div",{className:h.default.popoverUpdate},p.default.createElement("div",{className:h.default.breakWord},N?S?p.default.createElement(p.default.Fragment,null,p.default.createElement("span",null,e("deatil:您是写入任务owner, 点击查看任务")),p.default.createElement(m.ExternalLink,{href:C},p.default.createElement("div",null,N))):e("detail:您是写入任务owner",""+N):e("detail:您是写入任务owner")),p.default.createElement("div",{className:h.default.actions},p.default.createElement(d.Button,{size:"small",onClick:()=>n(!1)},e("common:关闭")))):p.default.createElement("div",{className:h.default.popoverUpdate},p.default.createElement(f.UserSelect,{user:b,setUser:v}),p.default.createElement("div",{className:h.default.actions},p.default.createElement(d.Button,{size:"small",onClick:()=>n(!1)},e("common:取消")),p.default.createElement(d.Button,{size:"small",type:"primary",loading:y,disabled:!(null==b?void 0:b.account)||(null==b?void 0:b.account)===(null==o?void 0:o.account),onClick:async()=>{T(!0);try{await s.v1TableDetailApi.updateAssetOwner({uri:t,owner:null==b?void 0:b.account}),E(b),n(!1)}catch(e){d.message.error(e.message)}T(!1)}},e("common:确定"))))},p.default.createElement("div",{className:h.default.actions},p.default.createElement(d.IconFont,{type:"icon-edit",onClick:()=>n(!0)}))):null,p.default.createElement("div",{style:{paddingRight:"10px"}},a.ownerList.length>3?p.default.createElement("div",{className:h.default.actionMore,onClick:()=>{w(!x)}},x?p.default.createElement(i.default,null):p.default.createElement(r.default,null)):null,a.ownerList.slice(0,x?a.ownerList.length:3).map(e=>p.default.createElement("div",{className:h.default.userItem,key:e.account},p.default.createElement(c.DChat,{user:e,key:e.account})))))},{label:e("detail:业务线"),value:a.bu},{label:e("detail:国家"),value:a.idc},{label:e("detail:库名"),value:a.dbName},{label:e("detail:主库用户名"),value:a.userName},{label:e("detail:从库用户名"),value:a.offlineUserName},{label:e("detail:分表策略"),value:a.subTableStrategy||e("detail: 无")},{label:e("search:采集状态"),value:p.default.createElement("div",null,p.default.createElement("span",{style:{marginRight:8}},1===a.collectStatus?e("category:已采集"):e("category:未采集")),1!==a.collectStatus&&p.default.createElement(m.ExternalLink,{href:`${u.syncCenterOrigin}/fast/create/binlog/${a.tableId}/null`},e("category:前往采集")))}].filter(e=>e),[a,x,e,o,b,l,y,N,C,S,t]);return p.default.createElement("div",{className:h.default.list},I.map(({value:e,label:t,hide:a},l)=>{if(!a)return p.default.createElement("div",{key:l,className:h.default.item},p.default.createElement("div",{className:h.default.label},t),p.default.createElement("div",{className:h.default.value},e))}))},t.Base=()=>{const{t:e}=_.useTranslation(),{detail:a}=p.useContext(g.MysqlDetailContext);return p.default.createElement("div",{className:o.default(h.default.infoItem,h.default.base)},p.default.createElement("div",{className:h.default.title},p.default.createElement("span",null,e("detail:基础信息"))),a&&p.default.createElement(t.BaseList,null))}},function(e,t,a){"use strict";var l;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.INIT="INIT",e.DETAIL="DETAIL"}(l=t.MYSQL_TABLE_ACTION_TYPES||(t.MYSQL_TABLE_ACTION_TYPES={})),t.MysqlDetailReducer=(e,t)=>{switch(t.type){case l.INIT:return t.init;case l.DETAIL:return{...e,...t.detail};default:return e}}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=a(181),r=l(a(4)),u=a(26),s=a(98),o=n(a(0)),d=l(a(262)),c=a(19),m=l(a(182)),f=a(468),p=l(a(2191));t.TopInfo=()=>{const{t:e}=c.useTranslation(),{uri:t,detail:a}=o.useContext(f.MysqlDetailContext),[l,n]=o.useState(!1),[_,h]=o.useState(!1),[g,E]=o.useState(a.aliasName),[b,v]=o.useState(a.aliasName);return o.default.createElement("div",{className:r.default(p.default.topInfo,{[p.default.offline]:a.isOffline})},o.default.createElement("div",{className:p.default.header},a.isOffline?o.default.createElement("div",{className:p.default.offlineStatus},e("detail:下线中")):null,a.isChoicest&&o.default.createElement("span",{className:p.default.choicestText},"精"),o.default.createElement(u.Tooltip,{title:`${a.dbName}.${a.tableName}`,placement:"bottom"},o.default.createElement("div",{className:p.default.title},a.dbName,".",a.tableName)),o.default.createElement(d.default,{text:`${a.dbName}.${a.tableName}`,onCopy:()=>u.message.success(e("message:复制成功"))},o.default.createElement(u.IconFont,{type:"icon-copy"})),o.default.createElement("div",{className:p.default.envTag},a.envType===s.ENV_TYPE.DEV?e("detail:MySQL表-测试表"):e("detail:MySQL表-生产表"))),o.default.createElement("div",{className:p.default.comment},o.default.createElement("span",null,g),a.isDataOwner&&!a.isOffline?o.default.createElement(u.Popover,{visible:l,placement:"bottomLeft",align:{offset:[-10,0]},content:o.default.createElement("div",{className:m.default.updateComment},o.default.createElement(u.Input.TextArea,{value:b,autoSize:{minRows:3,maxRows:6},onChange:e=>v(e.target.value)}),o.default.createElement("div",{className:m.default.actions},o.default.createElement(u.Button,{size:"small",onClick:()=>n(!1)},e("common:取消")),o.default.createElement(u.Button,{size:"small",type:"primary",loading:_,onClick:async()=>{h(!0);try{await i.v1TableDetailApi.updateNameZh({uri:t,name:b}),v(b),E(b),n(!1),h(!1)}catch(e){u.message.error(e.message)}}},e("确定"))))},o.default.createElement(u.IconFont,{onClick:()=>n(!0),type:"icon-edit"})):null))}},function(e,t,a){e.exports={"top-info":"top-info_top-info_2szoI",topInfo:"top-info_top-info_2szoI",offline:"top-info_offline_B55md",header:"top-info_header_2gfq9","choicest-text":"top-info_choicest-text_i26iw",choicestText:"top-info_choicest-text_i26iw","env-tag":"top-info_env-tag_3QQYa",envTag:"top-info_env-tag_3QQYa","capriTag?":"top-info_capriTag?_Twryh",length:"top-info_length_3gDx3",comment:"top-info_comment_g63jz",actions:"top-info_actions_2ciL2","offline-status":"top-info_offline-status_2A0Cv",offlineStatus:"top-info_offline-status_2A0Cv",title:"top-info_title_15GO8",care:"top-info_care_1SPlv",cared:"top-info_cared_AfXAs",permission:"top-info_permission_11qyO",album:"top-info_album_2sGJR",score:"top-info_score_2Ghgg",star:"top-info_star_1YnoX",text:"top-info_text_3HIR5",item:"top-info_item_3_Sm4",fill:"top-info_fill_R_AuX"}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=a(30),r=l(a(4)),u=a(26),s=a(1208),o=n(a(0)),d=a(19),c=a(468),m=a(2193),f=l(a(2196));t.MysqlDetailPane=()=>{const{t:e}=d.useTranslation(),{tab:t,setTab:a,detail:l}=o.useContext(c.MysqlDetailContext);return l?o.default.createElement("div",{className:f.default.detailInfo},o.default.createElement(u.Tabs,{animated:!1,className:r.default(f.default.detailTabs,"tabs-custom-light"),onChange:e=>{i.updateQuery({tab:"fieldinfo"===e?null:e,subTab:null,pageSize:null,pageCurrent:null}),a(e)},activeKey:t},o.default.createElement(u.Tabs.TabPane,{tab:o.default.createElement("span",{className:"nav-text"},e("detail:表详情")),key:s.IMysqlDetailTab.FIELD_INFO},t===s.IMysqlDetailTab.FIELD_INFO&&o.default.createElement(m.FieldInfo,null)))):null}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=l(a(408)),r=a(2194),u=a(26),s=a(97),o=a(1180),d=a(468),c=n(a(0)),m=a(19),f=l(a(2195));t.FieldInfo=()=>{const{uri:e}=c.useContext(d.MysqlDetailContext),{t:t}=m.useTranslation(),[a,l]=c.useState(!1),[n,p]=c.useState(!1),[_,h]=c.useState([]),[g,E]=c.useState(null),[b,v]=c.useState([]),[y,T]=c.useState(!1),[N,S]=c.useState(!1),[C,x]=c.useState("");return c.useEffect(()=>{if(!e)return;(async()=>{try{p(!0);const t=await r.v1MysqlInfoApi.mysqlRelation(e);h(t||[])}catch(e){}p(!1)})(),(async()=>{try{l(!0);const t=await r.v1MysqlInfoApi.mysqlColumn(e);E(t.map(e=>(e.key=e.position,e))||[])}catch(e){}l(!1)})();const a=[{title:t("common:序号"),dataIndex:"position",key:"position"},{title:t("detail:字段名"),dataIndex:"columnName",key:"columnName"},{title:t("common:描述"),dataIndex:"comment",key:"comment"},{title:t("common:类型"),dataIndex:"type",key:"type"},{title:t("detail:主键"),dataIndex:"isKey",key:"isKey",render:e=>c.default.createElement("span",null,t(e?"common:是":"common:否"))}];v(a)},[t,e]),c.default.createElement("div",{className:f.default.fieldInfo},n?c.default.createElement(u.Spin,null,c.default.createElement(u.Empty,{image:u.Empty.PRESENTED_IMAGE_SIMPLE})):_.length>0?c.default.createElement(c.default.Fragment,null,c.default.createElement("div",{className:f.default.hd},c.default.createElement("i",{className:f.default.spe}),c.default.createElement("div",{className:f.default.title},t("detail:关联推荐")),c.default.createElement("div",{className:f.default.tip},c.default.createElement(u.Tooltip,{title:t("message:基于数据上下游血缘得出")},c.default.createElement(i.default,{className:f.default.tipIcon})))),c.default.createElement("div",{className:f.default.desc},"此表已被采集到Hive表，可在Hive表中查询数据："),c.default.createElement("div",{className:f.default.ddl},_.map(e=>c.default.createElement("div",{className:f.default.item,key:e.uri},c.default.createElement("i",null),c.default.createElement(s.ExternalLink,{className:f.default.text,href:"/detail?uri="+e.uri,withReferrer:!0},`${e.dbName}.${e.tableName}（${e.nameZh})`))))):"",c.default.createElement("div",{className:f.default.hd},c.default.createElement("i",{className:f.default.spe}),c.default.createElement("div",{className:f.default.title},t("detail:字段信息"))),c.default.createElement(u.Button,{onClick:async()=>{T(!0),S(!0);try{x(await r.v1MysqlInfoApi.mysqlDDL(e))}catch(e){}S(!1)}},t("detail:建表语句")),a?c.default.createElement(u.Spin,null,c.default.createElement(u.Empty,{image:u.Empty.PRESENTED_IMAGE_SIMPLE})):(null==g?void 0:g.length)?c.default.createElement(c.default.Fragment,null,c.default.createElement(u.Table,{className:f.default.table,rowKey:"key",loading:a,columns:b,dataSource:g,pagination:!1})):null,c.default.createElement(o.SqlModal,{okText:t("common:确定"),onOk:()=>T(!1),title:t("detail:建表语句"),loading:N,visible:y,setVisible:T,sql:C}))}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const l=a(30),n=a(160);let i={};t.v1MysqlInfoApi={mysqlRelation:async e=>n.get("mysql/relation",{uri:e}),async mysqlColumn(e){if(i[e])i[e].length>20&&await l.sleep(80);else{const t=await n.get("mysql/column",{uri:e});i={[e]:t}}return i[e]},mysqlDDL:async e=>n.get("mysql/ddl",{uri:e})}},function(e,t,a){e.exports={"field-info":"index_field-info_1ittu",fieldInfo:"index_field-info_1ittu",hd:"index_hd_2qdHk",spe:"index_spe_Z16dU",title:"index_title_31eHR",tip:"index_tip_3SagR","tip-icon":"index_tip-icon_6szui",tipIcon:"index_tip-icon_6szui",text:"index_text_3b4h0",desc:"index_desc_1LW8B",ddl:"index_ddl_5xMp7",item:"index_item_2qSAv",table:"index_table_37AXS"}},function(e,t,a){e.exports={"detail-info":"index_detail-info_21XoL",detailInfo:"index_detail-info_21XoL","go-to-old-version":"index_go-to-old-version_3pTeX",goToOldVersion:"index_go-to-old-version_3pTeX","detail-tabs":"index_detail-tabs_3245f",detailTabs:"index_detail-tabs_3245f"}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=l(a(118)),r=a(301),u=a(525),s=n(a(0)),o=a(19),d=a(464),c=l(a(182)),m=a(2198),f=a(2199),p=a(2201),_=a(234),h=a(2204);t.DetailContent=()=>{const{detail:e,loading:t,errorMessage:a}=s.useContext(_.StreamDetailContext),{t:l}=o.useTranslation();return s.useEffect(()=>{e&&(document.title=`${e.dbName}.${e.tableName}`)},[e]),s.useEffect(()=>()=>document.title=l("common:数据地图"),[l]),a?s.default.createElement("div",{className:"error",style:{padding:20}},a):s.default.createElement(s.default.Fragment,null,s.default.createElement("div",{className:c.default.tableDetailPage},s.default.createElement(i.default,{spinning:t},s.default.createElement("div",{className:c.default.top},t||!e?null:s.default.createElement(p.TopInfo,null),s.default.createElement(f.Nps,null))),s.default.createElement("div",{className:c.default.content},s.default.createElement(d.DetailUnfold,{loading:t},s.default.createElement("div",{className:c.default.baseInfo},!t&&e&&s.default.createElement("div",{className:c.default.baseInfo},s.default.createElement(m.Base,null)))),s.default.createElement(h.StreamDetailPane,null))),s.default.createElement(r.Footer,null))},t.StreamDetailPage=e=>s.default.createElement(_.StreamDetailProvider,Object.assign({},e),s.default.createElement(t.DetailContent,null),s.default.createElement(u.GoTop,null))},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=l(a(129)),r=l(a(332)),u=l(a(408)),s=l(a(221)),o=a(30),d=a(181),c=l(a(4)),m=a(1169),f=a(26),p=a(120),_=a(97),h=a(526),g=a(199),E=n(a(0)),b=a(19),v=a(117),y=l(a(182)),T=a(234);t.BaseList=()=>{const{t:e}=b.useTranslation(),{uri:t,detail:a}=E.useContext(T.StreamDetailContext),[l,n]=E.useState(!1),[c,N]=E.useState(a.assetManager),[S,C]=E.useState(a.assetManager),[x,w]=E.useState(!1),[I,L]=E.useState(a.addedAlbums),[O,P]=E.useState(!1),[M,k]=E.useState(!1),{taskCode:D,capriVersion:A}=(null==a?void 0:a.assetOwnerInfo)||{},j=o.getScheduleTaskUrl(D,A),F=[{label:E.default.createElement(E.default.Fragment,null,E.default.createElement("span",null,e("detail:资产负责人")),E.default.createElement(f.Tooltip,{title:e("message:负责表数据内容的产出")},E.default.createElement(u.default,{className:y.default.tip}))),value:E.default.createElement(E.default.Fragment,null,a.isAssetOwner?E.default.createElement(f.Popover,{visible:l,placement:"topRight",trigger:"click",onVisibleChange:e=>n(e),content:a.assetOwnerInfo?E.default.createElement("div",{className:y.default.popoverUpdate},E.default.createElement("div",{className:y.default.breakWord},D?A?E.default.createElement(E.default.Fragment,null,E.default.createElement("span",null,e("deatil:您是写入任务owner, 点击查看任务")),E.default.createElement(_.ExternalLink,{href:j},E.default.createElement("div",null,D))):e("detail:您是写入任务owner",""+D):e("detail:您是写入任务owner")),E.default.createElement("div",{className:y.default.actions},E.default.createElement(f.Button,{size:"small",onClick:()=>n(!1)},e("common:关闭")))):E.default.createElement("div",{className:y.default.popoverUpdate},E.default.createElement(h.UserSelect,{user:S,setUser:C}),E.default.createElement("div",{className:y.default.actions},E.default.createElement(f.Button,{size:"small",onClick:()=>n(!1)},e("common:取消")),E.default.createElement(f.Button,{size:"small",type:"primary",loading:x,disabled:!(null==S?void 0:S.account)||(null==S?void 0:S.account)===(null==c?void 0:c.account),onClick:async()=>{w(!0);try{await d.v1TableDetailApi.updateAssetStreamOwner({uri:t,assetManager:null==S?void 0:S.account}),N(S),n(!1)}catch(e){f.message.error(e.message)}w(!1)}},e("common:确定"))))},E.default.createElement("div",{className:y.default.actions},E.default.createElement(f.IconFont,{type:"icon-edit",onClick:()=>n(!0)}))):null,E.default.createElement(p.DChat,{user:c}))},{label:e("detail:存储介质"),value:a.storeMedium},{label:e("detail:数据格式"),value:a.dataFormat||"-"},{label:e("detail:Topic名称"),value:a.topicName,hide:a.storeMedium!=g.TableType.KAFKA},{label:e("detail:所属项目"),value:E.default.createElement(E.default.Fragment,null,a.project?E.default.createElement(v.Link,{to:{pathname:"/project/detail",search:"?projectCode="+a.project.code}},a.project.name):"-")},{label:e("detail:引入时间"),value:a.createTimeLabel||"-"},{label:e("detail:更新时间"),value:a.updateTimeLabel||"-"},{label:e("detail:关联Topic"),value:E.default.createElement(_.ExternalLink,{href:o.goKafkaLink("/kafka-manager/topic/topic-detail",`clusterId=${a.kafkaClusterId}&topic=${a.topicName}&isPhysicalClusterId=true`)},a.topicName),hide:a.storeMedium!==g.TableType.REPORT},{label:e("detail:已加入的专辑"),value:E.default.createElement(E.default.Fragment,null,E.default.createElement("div",{className:y.default.addedAlbums},I.length>4?E.default.createElement("div",{className:y.default.albumMore,onClick:()=>P(!O)},O?E.default.createElement(s.default,null):E.default.createElement(i.default,null)):"",I.length>0?I.map((e,t)=>O||t<=3?E.default.createElement("a",{href:"/album/detail?albumId="+e.albumId,key:e.albumId,className:y.default.album},e.name):""):"",E.default.createElement(f.Tag,{onClick:()=>k(!0),className:y.default.tagAdd},E.default.createElement(r.default,null)),E.default.createElement(m.AddAlbumModal,{addedAlbums:I,tableName:`${a.dbName}.${a.tableName}`,uri:t,onOk:L,setVisible:()=>k(!1),title:e("detail:加入专辑"),okText:e("detail:加入专辑"),visible:M})))}].filter(e=>e);return E.default.createElement("div",{className:y.default.list},F.map(({value:e,label:t,hide:a},l)=>{if(!a)return E.default.createElement("div",{key:l,className:y.default.item},E.default.createElement("div",{className:y.default.label},t),E.default.createElement("div",{className:y.default.value},e))}))},t.Base=()=>{const{t:e}=b.useTranslation(),{detail:a}=E.useContext(T.StreamDetailContext);return E.default.createElement("div",{className:c.default(y.default.infoItem,y.default.base),style:{height:"700px"}},E.default.createElement("div",{className:y.default.title},E.default.createElement("span",null,e("detail:基础信息"))),a&&E.default.createElement(t.BaseList,null))}},function(e,t,a){"use strict";var l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=a(181),r=a(368),u=a(148),s=l(a(0)),o=a(19),d=a(117),c=a(234),m=n(a(2200));t.Nps=()=>{const{uri:e,detail:t}=s.useContext(c.StreamDetailContext),{t:a}=o.useTranslation(),l=d.useHistory(),[n,f]=s.useState(),p=r.useNpsLabel(),_=s.useRef(void 0),h=(null==t?void 0:t.starId)||null;return s.useEffect(()=>{if(!_.current&&h)return void(_.current=h);let t=!1;return(async()=>{const a=await i.v1TableDetailApi.tableNps(e);t||f(a)})(),_.current=h,()=>t=!0},[e,h]),n?s.default.createElement("div",{className:m.default.nps},s.default.createElement("div",{className:m.default.npsInfo},s.default.createElement("div",{className:m.default.score},n.score),s.default.createElement("div",{className:m.default.index},a("nps:用户NPS指数"),": ",n.nps,"%"),s.default.createElement("div",{className:m.default.commented,onClick:()=>{l.push({pathname:"/detail/stream",search:`?uri=${e}&tab=intro&subTab=comment`,state:{referer:u.RefererType.INNER}}),setTimeout(()=>{window.location.reload()},10)}},s.default.createElement(o.Trans,{i18nKey:"nps:已有人评价",count:n.appraisalNum||0},"已有",""+(n.appraisalNum||0),"人评价"))),s.default.createElement("div",{className:m.default.action},n.starResponse.map(e=>s.default.createElement("div",{className:m.default.item,key:e.tagId},s.default.createElement("div",{className:m.default.label},a("nps:"+p[e.tagId])),s.default.createElement("div",{className:m.default.value},s.default.createElement("div",{className:m.default.percent,style:{width:e.proportion+"%"}})),s.default.createElement("div",{className:m.default.percent},e.proportion,"%"))))):null}},function(e,t,a){e.exports={nps:"nps_nps_uIpH6","nps-info":"nps_nps-info_oXzp6",npsInfo:"nps_nps-info_oXzp6",score:"nps_score_3JelG",index:"nps_index_2LwAl",commented:"nps_commented_WurXP",action:"nps_action_1s-p9",item:"nps_item_1Iv27",label:"nps_label_25uG0",value:"nps_value_3bCGO",percent:"nps_percent_38hoN"}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=l(a(333)),r=l(a(527)),u=a(30),s=a(181),o=l(a(4)),d=a(26),c=a(2202),m=a(368),f=a(97),p=a(276),_=a(199),h=a(98),g=n(a(0)),E=l(a(262)),b=a(19),v=l(a(182)),y=a(771),T=a(234),N=l(a(2203));t.TopInfo=()=>{const{t:e}=b.useTranslation(),{uri:t,detail:a}=g.useContext(T.StreamDetailContext),l=g.useContext(T.StreamDetailDispatchContext),[n,S]=g.useState(a.isLike),[C,x]=g.useState(!1),[w,I]=g.useState(!1),[L,O]=g.useState(!1),[P,M]=g.useState(a.tableNameZh),[k,D]=g.useState(a.tableNameZh),A=m.useNpsLabel(),[j,F]=g.useState(a.starId),[R,H]=g.useState(null),[U]=d.Form.useForm();g.useEffect(()=>F(a.starId),[a.starId]);return g.default.createElement("div",{className:o.default(N.default.topInfo,{[N.default.offline]:a.isOffline})},g.default.createElement("div",{className:N.default.header},a.isOffline?g.default.createElement("div",{className:N.default.offlineStatus},e("detail:下线中")):null,a.isChoicest&&g.default.createElement("span",{className:N.default.choicestText},"精"),g.default.createElement(d.Tooltip,{title:`${a.dbName}.${a.tableName}`,placement:"bottom"},g.default.createElement("div",{className:N.default.title},a.dbName,".",a.tableName)),g.default.createElement(E.default,{text:`${a.dbName}.${a.tableName}`,onCopy:()=>d.message.success(e("message:复制成功"))},g.default.createElement(d.IconFont,{type:"icon-copy"})),g.default.createElement("div",{className:N.default.envTag},a.storeMedium===_.TableType.REPORT?e("detail:流式报表"):a.envType===h.ENV_TYPE.DEV?e("detail:实时-测试表"):e("detail:实时-生产表"))),g.default.createElement("div",{className:N.default.comment},g.default.createElement("span",null,P),a.isDataOwner&&!a.isOffline?g.default.createElement(d.Popover,{visible:w,placement:"bottomLeft",align:{offset:[-10,0]},content:g.default.createElement("div",{className:v.default.updateComment},g.default.createElement(d.Input.TextArea,{value:k,autoSize:{minRows:3,maxRows:6},onChange:e=>D(e.target.value)}),g.default.createElement("div",{className:v.default.actions},g.default.createElement(d.Button,{size:"small",onClick:()=>I(!1)},e("common:取消")),g.default.createElement(d.Button,{size:"small",type:"primary",loading:L,onClick:async()=>{O(!0);try{await s.v1TableDetailApi.updateAssetStreamOwner({uri:t,tableNameZh:k}),D(k),M(k),I(!1),O(!1)}catch(e){d.message.error(e.message)}}},e("确定"))))},g.default.createElement(d.IconFont,{onClick:()=>I(!0),type:"icon-edit"})):null),g.default.createElement("div",{className:N.default.actions},g.default.createElement(d.Spin,{size:"small",spinning:C},g.default.createElement("div",{className:o.default(N.default.care,{[N.default.cared]:n}),onClick:async()=>{var e;if(!a.isOffline){try{x(!0);let i=a.likeCount;n&&(i=await s.v1TableDetailApi.unLike(t),S(!1),l({type:y.STREAM_TABLE_ACTION_TYPES.DETAIL,detail:{likeCount:i,likeCountLabel:null!==(e=u.humanNum(i,{useGrouping:!0}))&&void 0!==e?e:"-"}}))}catch(e){d.message.error(e)}x(!1)}}},n?g.default.createElement(g.default.Fragment,null,g.default.createElement(d.IconFont,{type:"icon-liked"}),g.default.createElement("span",null,e("common:已关注"))):g.default.createElement(d.Popconfirm,{icon:null,overlayClassName:v.default.concernPopover,placement:"topLeft",title:g.default.createElement(d.Form,{form:U},g.default.createElement(d.Form.Item,{name:"comment",label:e("message:关注原因")},g.default.createElement(d.Input,{placeholder:e("message:非必填")}))),onConfirm:()=>{U.validateFields().then(e=>{x(!0),(async e=>{var n;try{let i=a.likeCount;i=await s.v1TableDetailApi.likeWithComment({uri:t,comment:e.comment}),S(!0),l({type:y.STREAM_TABLE_ACTION_TYPES.DETAIL,detail:{likeCount:i,likeCountLabel:null!==(n=u.humanNum(i,{useGrouping:!0}))&&void 0!==n?n:"-"}})}catch(e){d.message.error(e)}x(!1)})(e)})},okText:e("common:确定"),cancelText:e("common:取消")},g.default.createElement("div",{className:o.default(N.default.care)},g.default.createElement(d.IconFont,{type:n?"icon-liked":"icon-like"}),g.default.createElement("span",null,e("common:关注")))))),a.isAuth?null:g.default.createElement("div",null,g.default.createElement(d.IconFont,{type:"icon-permission"}),g.default.createElement(f.ExternalLink,{href:`${u.pamOrigin}/role/apply?type=personal&tblName=${a.dbName}.${a.tableName}&purposeFlag=1`},e("detail:申请权限"))),a.isAssetOwner&&!a.isOffline&&g.default.createElement(f.ExternalLink,{href:`${u.studioOrigin}/stream/create-table/${a.tableName}?projectId=${a.projectId}`},g.default.createElement(d.IconFont,{type:"icon-edit"}),g.default.createElement("span",null,e("detail:编辑表结构"))),g.default.createElement(c.Comment,{starId:j},g.default.createElement("div",{className:N.default.star},g.default.createElement("span",{className:N.default.text},e("detail:给个评价")),p.AppraisalValue.map(e=>g.default.createElement(d.Tooltip,{key:e,title:A[e]},g.default.createElement("div",{className:o.default(N.default.item,{[N.default.fill]:a.starId>=e}),onClick:()=>F(e),onMouseEnter:()=>H(e),onMouseLeave:()=>H(null)},(R||a.starId)>=e?g.default.createElement(i.default,{className:N.default.fill,key:e}):g.default.createElement(r.default,{key:e}))))))))}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=l(a(333)),r=l(a(527)),u=l(a(82)),s=l(a(222)),o=l(a(162)),d=l(a(226)),c=l(a(118)),m=a(278),f=l(a(4)),p=a(26),_=a(276),h=a(148),g=a(771),E=n(a(0)),b=a(19),v=a(143),y=a(234),T=l(a(1179)),N=a(368);t.Comment=e=>{const{t:t}=b.useTranslation(),{uri:a,detail:l}=E.useContext(y.StreamDetailContext),n=E.useContext(y.StreamDetailDispatchContext),[S,C]=E.useState(!1),[x,w]=E.useState(!1),[I,L]=E.useState(null),[O,P]=E.useState(void 0),[M,k]=E.useState(e.starId),[D,A]=E.useState(new Set),[j,F]=E.useState(!1),[R,H]=E.useState(!1),U=N.useNpsLabel();E.useEffect(()=>k(e.starId),[e.starId]);const B=v.useHistory();E.useEffect(()=>{(async()=>{C(!0);const e=m.appraisalApi.tags(),t=m.appraisalApi.mine(a),l=await e,n=await t;n&&(A(new Set(n.tagList.map(e=>e.tagId))),k(n.starId),P(n.content),H((null==n?void 0:n.isAnonymous)||!0)),L(l),C(!1)})()},[a]);return E.default.createElement(E.default.Fragment,null,E.default.createElement("div",{onClick:()=>F(!0)},e.children),E.default.createElement(d.default,{width:560,title:""+t("common:评价"),visible:j,onCancel:()=>F(!1),className:T.default.comment,footer:E.default.createElement(E.default.Fragment,null,E.default.createElement(s.default,{onChange:e=>H(e.target.checked),checked:R},t("common:匿名")),E.default.createElement("div",{className:T.default.actions},E.default.createElement(u.default,{onClick:()=>F(!1),disabled:x},t("common:取消")),E.default.createElement(u.default,{type:"primary",onClick:async()=>{if(!M)return p.message.error(t("message:请先选择星标"));if(M<103&&!O)return p.message.error(t("message:请输入内容"));try{w(!0),await m.appraisalApi.appraisal({uri:a,starId:M,tagIds:[...D],content:O,isAnonymous:R}),n({type:g.STREAM_TABLE_ACTION_TYPES.DETAIL,detail:{starId:M}}),F(!1),B.push({pathname:"/detail/stream",search:`?uri=${a}&tab=intro&subTab=comment`,state:{referer:h.RefererType.INNER}}),B.go(0)}catch(e){p.message.error(e.message)}w(!1)},loading:x},t("common:发表评论"))))},E.default.createElement(c.default,{spinning:S},E.default.createElement("div",{className:T.default.title},`${l.dbName}.${l.tableName}`),E.default.createElement("div",{className:T.default.desc},l.tableNameZh),E.default.createElement("div",{className:T.default.star},_.AppraisalValue.map(e=>E.default.createElement("div",{className:f.default(T.default.item,{[T.default.fill]:M>=e}),key:e,onClick:()=>k(e)},M>=e?E.default.createElement(i.default,{className:T.default.fill,key:e}):E.default.createElement(r.default,{key:e}),E.default.createElement("div",{className:T.default.text},U[e])))),E.default.createElement("div",{className:T.default.tags},((M<=_.AppraisalStarId.NotBad?null==I?void 0:I.notRecommendTagList:null==I?void 0:I.recommendTagList)||[]).map(({tagId:e,tagName:t})=>E.default.createElement("div",{key:e,className:f.default(T.default.tag,{[T.default.active]:D.has(e)}),onClick:()=>{D.has(e)?(D.delete(e),A(new Set(D))):A(new Set(D.add(e)))}},t))),E.default.createElement(o.default.TextArea,{placeholder:t("message:请输入"),className:T.default.content,value:O,rows:5,onChange:e=>P(e.target.value)}))))}},function(e,t,a){e.exports={"top-info":"top-info_top-info_1C6op",topInfo:"top-info_top-info_1C6op",offline:"top-info_offline_-yQUJ",header:"top-info_header_2tcjW","choicest-text":"top-info_choicest-text_302bS",choicestText:"top-info_choicest-text_302bS","env-tag":"top-info_env-tag_2cXlY",envTag:"top-info_env-tag_2cXlY","capriTag?":"top-info_capriTag?_SKSEC",length:"top-info_length_1Ntzf",comment:"top-info_comment_19S-9",actions:"top-info_actions_FQJoa","offline-status":"top-info_offline-status_2d7C-",offlineStatus:"top-info_offline-status_2d7C-",title:"top-info_title_Tgjbm",care:"top-info_care_135Sr",cared:"top-info_cared_NNMIG",permission:"top-info_permission_3ONRa",album:"top-info_album_nUdrK",score:"top-info_score_21sY-",star:"top-info_star_3hPiO",text:"top-info_text_3extP",item:"top-info_item_2Igpb",fill:"top-info_fill_3-Y_l"}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=a(30),r=l(a(4)),u=a(26),s=a(199),o=a(1209),d=n(a(0)),c=a(19),m=a(234),f=a(2205),p=a(2207),_=l(a(2209)),h=a(2210),g=a(2218);t.StreamDetailPane=()=>{const{t:e}=c.useTranslation(),{uri:t,tab:a,setTab:l,detail:n}=d.useContext(m.StreamDetailContext);return n?d.default.createElement("div",{className:_.default.detailInfo},d.default.createElement(u.Tabs,{animated:!1,className:r.default(_.default.detailTabs,"tabs-custom-light"),onChange:e=>{i.updateQuery({tab:e===o.IStreamDetailTab.FIELD_INFO?null:e,subTab:null,pageSize:null,pageCurrent:null}),l(e)},activeKey:a},d.default.createElement(u.Tabs.TabPane,{tab:d.default.createElement("span",{className:"nav-text"},e("detail:字段信息")),key:o.IStreamDetailTab.FIELD_INFO},a===o.IStreamDetailTab.FIELD_INFO&&d.default.createElement(p.FieldInfo,null)),n.storeMedium===s.TableType.PRUID&&d.default.createElement(u.Tabs.TabPane,{tab:d.default.createElement("span",{className:"nav-text"},e("detail:加入字段")),key:o.IStreamDetailTab.ADD_FIELD},a===o.IStreamDetailTab.ADD_FIELD&&d.default.createElement(f.AddField,null)),![s.TableType.PRUID,s.TableType.FUSION2,s.TableType.MYSQL].includes(n.storeMedium)&&d.default.createElement(u.Tabs.TabPane,{tab:d.default.createElement("span",{className:"nav-text"},e("detail:数据预览")),key:o.IStreamDetailTab.PREVIEW},a===o.IStreamDetailTab.PREVIEW&&d.default.createElement(g.TabPreview,null)),d.default.createElement(u.Tabs.TabPane,{tab:d.default.createElement("span",{className:"nav-text"},e("detail:使用说明")),key:o.IStreamDetailTab.INTRO},a===o.IStreamDetailTab.INTRO&&d.default.createElement(h.TabIntro,null)))):null}},function(e,t,a){"use strict";var l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=a(26),r=a(234),u=l(a(0)),s=a(19),o=n(a(2206));t.AddField=()=>{const{uri:e,detail:t}=u.useContext(r.StreamDetailContext),{t:a}=s.useTranslation(),[l,n]=u.useState(!1),[d,c]=u.useState(null),[m,f]=u.useState([]);return u.useEffect(()=>{if(!e)return;if(!e||!t)return;n(!0);const l=t.writeInColumnList.map((e,t)=>(e.key=t,e)),i=[{title:a("detail:字段名"),dataIndex:"columnName",key:"columnName"},{title:a("detail:字段类型"),dataIndex:"columnType",key:"columnType",width:120},{title:a("detail:字段描述"),dataIndex:"columnDesc",key:"columnDesc"},{title:a("detail:对应字段"),dataIndex:"targetColumn",key:"targetColumn"}];c(l),f(i),n(!1)},[e]),u.default.createElement("div",{className:o.default.addField},u.default.createElement(i.Table,{rowKey:"key",loading:l,columns:m,dataSource:d,pagination:!1}))}},function(e,t,a){e.exports={"add-field":"index_add-field_bsAfC",addField:"index_add-field_bsAfC"}},function(e,t,a){"use strict";var l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=a(26),r=a(199),u=a(234),s=l(a(0)),o=a(19),d=n(a(2208));t.FieldInfo=()=>{const{uri:e,detail:t}=s.useContext(u.StreamDetailContext),{t:a}=o.useTranslation(),[l,n]=s.useState(!1),[c,m]=s.useState(null),[f,p]=s.useState([]);return s.useEffect(()=>{if(!e||!t)return;n(!0);const l=t.columnList.map((e,t)=>(e.key=t,e)),i=[{title:a("detail:字段名"),dataIndex:"columnName",key:"columnName"},{title:a("detail:字段类型"),dataIndex:"columnType",key:"columnType",width:120},{title:a("detail:字段描述"),dataIndex:"columnDesc",key:"columnDesc"},{title:a("detail:计算方式"),dataIndex:"computeType",key:"computeType"}];if(t.storeMedium===r.TableType.REPORT){const e=[{title:a("detail:维度/指标"),dataIndex:"metricOrDimension",key:"metricOrDimension"},{title:a("detail:聚合方式"),dataIndex:"computeType",key:"computeType"},{title:a("detail:源字段"),dataIndex:"targetColumn",key:"targetColumn"}];i.splice(-1,1),Array.prototype.push.apply(i,e)}m(l),p(i),n(!1)},[e,t,a]),s.default.createElement("div",{className:d.default.fieldInfo},s.default.createElement(i.Table,{rowKey:"key",loading:l,columns:f,dataSource:c,pagination:!1}))}},function(e,t,a){e.exports={"field-info":"index_field-info_3Xiu9",fieldInfo:"index_field-info_3Xiu9"}},function(e,t,a){e.exports={"detail-info":"index_detail-info_2AsQ0",detailInfo:"index_detail-info_2AsQ0","go-to-old-version":"index_go-to-old-version_2Iei7",goToOldVersion:"index_go-to-old-version_2Iei7","detail-tabs":"index_detail-tabs_2vSXY",detailTabs:"index_detail-tabs_2vSXY"}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=a(30),i=a(26),r=l(a(0)),u=a(19),s=a(2211),o=l(a(2213)),d=a(2214),c=a(2216);t.TabIntro=()=>{const{t:e}=u.useTranslation();return r.default.createElement(i.Tabs,{animated:!1,className:o.default.tabIntro,onChange:e=>n.updateQuery({subTab:"partition"===e?null:e,pageSize:null,pageCurrent:null}),defaultActiveKey:n.getQuery("subTab")},r.default.createElement(i.Tabs.TabPane,{tab:r.default.createElement("span",{className:"tab-nav-text"},e("search:表说明")),key:"partition"},r.default.createElement(c.TableIntro,null)),r.default.createElement(i.Tabs.TabPane,{tab:r.default.createElement("span",{className:"tab-nav-text"},e("detail:知识问答")),key:"question"},r.default.createElement(d.QuestionAnswer,null)),r.default.createElement(i.Tabs.TabPane,{tab:r.default.createElement("span",{className:"tab-nav-text"},e("detail:评价记录")),key:"comment"},r.default.createElement(s.Comment,null)))}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=l(a(333)),r=l(a(191)),u=a(278),s=l(a(4)),o=a(368),d=a(276),c=a(234),m=n(a(0)),f=a(19),p=l(a(2212));t.Comment=()=>{const{uri:e}=m.useContext(c.StreamDetailContext),{t:t}=f.useTranslation(),[a,l]=m.useState([]),n=o.useNpsLabel();return m.useEffect(()=>{(async()=>{const{records:t}=await u.appraisalApi.appraisalList({pageCurrent:1,pageSize:100,pageFilter:{uri:e}});l(t)})()},[e]),m.default.createElement("div",{className:p.default.comment},m.default.createElement("div",{className:p.default.list},a.map((e,a)=>{var l;return m.default.createElement("div",{key:a,className:p.default.item},m.default.createElement("div",{className:p.default.left},m.default.createElement("div",{className:s.default(p.default.avatar,{[p.default.isAnonymous]:e.isAnonymous})},!e.isAnonymous&&m.default.createElement("img",{src:null===(l=e.creator)||void 0===l?void 0:l.avatar}))),m.default.createElement("div",{className:p.default.right},e.isAnonymous?m.default.createElement("div",{className:p.default.title},m.default.createElement("div",{className:p.default.isAnonymous},t("common:匿名")),m.default.createElement("div",{className:p.default.time},e.updateTimeLabel)):m.default.createElement("div",{className:p.default.title},m.default.createElement("div",{className:p.default.user},e.creator.name),m.default.createElement("div",{className:p.default.dept},"(",e.creator.deptName,")"),m.default.createElement("div",{className:p.default.time},e.createTimeLabel)),m.default.createElement("div",{className:p.default.star},m.default.createElement(i.default,{className:s.default({[p.default.fill]:e.starId>=d.AppraisalStarId.VeryBad})}),m.default.createElement(i.default,{className:s.default({[p.default.fill]:e.starId>=d.AppraisalStarId.Bad})}),m.default.createElement(i.default,{className:s.default({[p.default.fill]:e.starId>=d.AppraisalStarId.NotBad})}),m.default.createElement(i.default,{className:s.default({[p.default.fill]:e.starId>=d.AppraisalStarId.Recommend})}),m.default.createElement(i.default,{className:s.default({[p.default.fill]:e.starId>=d.AppraisalStarId.VeryGood})}),m.default.createElement("div",{className:p.default.label},n[e.starId]),e.tagList.map((e,t)=>m.default.createElement("div",{className:p.default.tag,key:t},e.tagName))),m.default.createElement("div",{className:p.default.content},e.content)))})),!a.length&&m.default.createElement(r.default,{image:r.default.PRESENTED_IMAGE_SIMPLE}))}},function(e,t,a){e.exports={comment:"comment_comment_YKO0Y",list:"comment_list_aITal",item:"comment_item_2EsW9",left:"comment_left_2usAx",avatar:"comment_avatar_3UVra","is-anonymous":"comment_is-anonymous_7xKSf",isAnonymous:"comment_is-anonymous_7xKSf",right:"comment_right_25Cmf",title:"comment_title_2w5yW",user:"comment_user_uPQJe",dept:"comment_dept_26aOY",time:"comment_time_2-vGY",star:"comment_star_3XYRH",fill:"comment_fill_2gouJ",label:"comment_label_2G9jI",tag:"comment_tag_3H1zs",content:"comment_content_3KkW9"}},function(e,t,a){e.exports={"tab-intro":"index_tab-intro_2lYEh",tabIntro:"index_tab-intro_2lYEh","field-pane":"index_field-pane_2unwY",fieldPane:"index_field-pane_2unwY","column-shared":"index_column-shared_30tvb",columnShared:"index_column-shared_30tvb","column-name":"index_column-name_2wKRG",columnName:"index_column-name_2wKRG","column-content":"index_column-content_1PWhy",columnContent:"index_column-content_1PWhy","column-hot":"index_column-hot_2zKhi",columnHot:"index_column-hot_2zKhi","icon-hot":"index_icon-hot_1w14u",iconHot:"index_icon-hot_1w14u","hot-current":"index_hot-current_3oqMg",hotCurrent:"index_hot-current_3oqMg","icon-hot-current":"index_icon-hot-current_1v5eD",iconHotCurrent:"index_icon-hot-current_1v5eD","column-enum":"index_column-enum_3a4UL",columnEnum:"index_column-enum_3a4UL","column-action":"index_column-action_2PZZU",columnAction:"index_column-action_2PZZU","action-stat":"index_action-stat_1kxM8",actionStat:"index_action-stat_1kxM8","action-share":"index_action-share_2GCJQ",actionShare:"index_action-share_2GCJQ",actions:"index_actions_RiGyv","column-title":"index_column-title_114tQ",columnTitle:"index_column-title_114tQ"}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=l(a(1195)),r=l(a(1196)),u=a(30),s=l(a(82)),o=l(a(162)),d=a(278),c=l(a(4)),m=a(535),f=a(26),p=a(234),_=n(a(0)),h=l(a(262)),g=a(19),E=a(143),b=a(103),v=l(a(2215));t.CommentItem=e=>{var t;const{detail:a,uri:l}=_.useContext(p.StreamDetailContext),{t:n}=g.useTranslation(),m=_.useRef(null),E=_.useRef(null),[y,T]=_.useState(!1),[N,S]=_.useState(!1),[C,x]=_.useState(!1),[w,I]=_.useState(!1),[L,O]=_.useState(!1),P=u.getUsername(),{data:M,fetchData:k,rootMsgId:D}=e,[A,j]=_.useState(M.content),{msgId:F}=M;_.useEffect(()=>{j(M.content)},[M.content]);const R=_.useCallback(async()=>{try{const e=E.current.state.value;O(!0),await d.appraisalApi.addComment({uri:l,content:e,parentMsgId:F,rootMsgId:D}),O(!1),I(!1),k()}catch(e){}},[F,l,D,k]),H=_.useCallback(async()=>{try{const e=m.current.state.value;S(!0),await d.appraisalApi.updateComment({msgId:F,content:e}),S(!1),j(e),x(!1)}catch(e){}},[F]);if(a&&l)return _.default.createElement("div",{className:v.default.commentContent,id:"msg-"+F},_.default.createElement("div",{className:v.default.left},_.default.createElement("div",{className:v.default.avatar},_.default.createElement("img",{src:null===(t=M.commentUser)||void 0===t?void 0:t.avatar}))),_.default.createElement("div",{className:v.default.right},_.default.createElement("div",{className:v.default.title},_.default.createElement("div",{className:v.default.user},M.commentUser.name||M.commentUser.account),_.default.createElement("div",{className:v.default.dept},M.commentUser.deptName&&`(${M.commentUser.deptName})`),_.default.createElement("div",{className:v.default.time},M.createTimeLabel)),_.default.createElement("div",{className:v.default.content},M.parentMsgId?_.default.createElement(_.default.Fragment,null,_.default.createElement("span",{className:v.default.repliedText},n("category:回复")),_.default.createElement("span",{className:v.default.repliedUser},M.repliedUser.name,":")):null,C?_.default.createElement("div",{className:v.default.commentInput},_.default.createElement(o.default,{ref:m,autoFocus:!0,defaultValue:A,className:v.default.input,onPressEnter:H}),_.default.createElement(s.default,{loading:N,type:"primary",className:v.default.submit,onClick:H},n("common:确定")),_.default.createElement(s.default,{disabled:N,className:v.default.cancel,onClick:()=>x(!1)},n("common:取消"))):_.default.createElement("span",null,A)),_.default.createElement("div",{className:v.default.actionBar},_.default.createElement("div",{className:v.default.action,onClick:()=>I(!0)},_.default.createElement(i.default,null),_.default.createElement("span",{className:v.default.text},M.childMsgList.length)),P===M.commentUser.account&&_.default.createElement(_.default.Fragment,null,_.default.createElement(f.Popconfirm,{title:n("message:确定删除这条评论吗？"),onConfirm:async()=>{try{T(!0),await d.appraisalApi.deleteComment(M.msgId),T(!1),k()}catch(e){f.message.error(e.message)}},okText:n("common:是"),cancelText:n("commonz;否")},_.default.createElement(f.Spin,{spinning:y,size:"small"},_.default.createElement("div",{className:v.default.action},_.default.createElement(f.IconFont,{type:"icon-delete"}),_.default.createElement("span",{className:v.default.text},n("common:删除"))))),_.default.createElement("div",{className:v.default.action,onClick:()=>x(!0)},_.default.createElement(f.IconFont,{type:"icon-edit"}),_.default.createElement("span",{className:v.default.text},n("detail:编辑")))),_.default.createElement("div",{className:v.default.action},_.default.createElement(f.Tooltip,{overlayStyle:{maxWidth:400},title:_.default.createElement("div",null,_.default.createElement("div",null,`${location.origin}/detail?uri=${b.generateUri(null==a?void 0:a.dbName,null==a?void 0:a.tableName)}&tab=intro&subTab=question#msg-${M.msgId}`),_.default.createElement("div",null,"点击分享复制链接"))},_.default.createElement(h.default,{text:`${location.origin}/detail?uri=${b.generateUri(null==a?void 0:a.dbName,null==a?void 0:a.tableName)}&tab=intro&subTab=question#msg-${M.msgId}`,onCopy:()=>f.message.success(n("message:分享链接复制成功"))},_.default.createElement("div",null,_.default.createElement(r.default,null),_.default.createElement("span",{className:v.default.text},n("category:分享"))))))),w&&_.default.createElement("div",{className:c.default(v.default.commentInput,v.default.commentReplyInput)},_.default.createElement(o.default,{ref:E,autoFocus:!0,className:v.default.input,onPressEnter:R}),_.default.createElement(s.default,{loading:L,type:"primary",className:v.default.submit,onClick:R},n("common:发表")),_.default.createElement(s.default,{disabled:N,className:v.default.cancel,onClick:()=>I(!1)},n("common:取消")))))},t.QuestionAnswer=()=>{const{uri:e}=_.useContext(p.StreamDetailContext),{t:a}=g.useTranslation(),[l,n]=_.useState(!1),[i,r]=_.useState(!1),[u,h]=_.useState([]),b=_.useRef(null),y=E.useLocation(),T=_.useCallback(async()=>{n(!0);try{const{records:t}=await d.appraisalApi.commentList({pageCurrent:1,pageSize:200,pageFilter:{uri:e}});h(t)}catch(e){}n(!1)},[e]);return _.useEffect(()=>{T()},[T]),_.useLayoutEffect(()=>{l&&setTimeout(()=>{m.scrollToAnchor(y.hash.slice(1))},1e3)},[y.hash,l]),_.default.createElement(f.Spin,{spinning:l},_.default.createElement("div",{className:v.default.questionAnswer},_.default.createElement("div",{className:v.default.add},_.default.createElement(o.default.TextArea,{ref:b,rows:4,placeholder:a("message:请输入")}),_.default.createElement("div",{className:v.default.actions},_.default.createElement(s.default,{className:v.default.publish,loading:i,type:"primary",onClick:async()=>{const t=b.current.state.value;try{r(!0),await d.appraisalApi.addComment({uri:e,content:t})&&(b.current.setValue(void 0),f.message.success("message:评论成功"),r(!1),await T())}catch(e){f.message.error(e.message),r(!1)}}},a("common:发布")))),!u.length&&_.default.createElement(f.Empty,{image:f.Empty.PRESENTED_IMAGE_SIMPLE}),_.default.createElement("div",{className:v.default.list},u.map(e=>_.default.createElement("div",{key:e.msgId,className:v.default.commentItem},_.default.createElement(t.CommentItem,{rootMsgId:e.msgId,data:e,fetchData:T}),_.default.createElement("div",{className:v.default.childrenItem},e.childMsgList.map(a=>_.default.createElement("div",{key:a.msgId,className:c.default(v.default.commentItem)},_.default.createElement(t.CommentItem,{rootMsgId:e.msgId,data:a,fetchData:T})))))))))}},function(e,t,a){e.exports={"question-answer":"question-answer_question-answer_39sy7",questionAnswer:"question-answer_question-answer_39sy7",add:"question-answer_add_18OBQ",actions:"question-answer_actions_1mfaz",publish:"question-answer_publish_3nivJ",list:"question-answer_list_2lUjI","comment-item":"question-answer_comment-item_L-Z6_",commentItem:"question-answer_comment-item_L-Z6_","children-item":"question-answer_children-item_16ZAF",childrenItem:"question-answer_children-item_16ZAF","comment-content":"question-answer_comment-content_1olSN",commentContent:"question-answer_comment-content_1olSN",left:"question-answer_left_3a2Ap",avatar:"question-answer_avatar_2PGjw",right:"question-answer_right_2DLfY",title:"question-answer_title_2ggk9",user:"question-answer_user_DjAF6",dept:"question-answer_dept_32kMp",time:"question-answer_time_3AzJp",content:"question-answer_content_1hmOt","replied-text":"question-answer_replied-text_2EsSa",repliedText:"question-answer_replied-text_2EsSa","replied-user":"question-answer_replied-user_2fhXd",repliedUser:"question-answer_replied-user_2fhXd","action-bar":"question-answer_action-bar_18B8x",actionBar:"question-answer_action-bar_18B8x",action:"question-answer_action_2otSk",text:"question-answer_text_1jPbO","comment-input":"question-answer_comment-input_SxUbM",commentInput:"question-answer_comment-input_SxUbM","comment-reply-input":"question-answer_comment-reply-input_3unOe",commentReplyInput:"question-answer_comment-reply-input_3unOe",input:"question-answer_input_22ZMa",submit:"question-answer_submit_3oypB",cancel:"question-answer_cancel_1Lpl-"}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=a(553),r=l(a(82)),u=a(278),s=a(26),o=a(276),d=n(a(365)),c=a(234),m=n(a(0)),f=a(19),p=l(a(734));a(740),a(741),a(742),a(743),a(744),a(745),a(746),a(747),a(748),a(749),a(750),a(751),a(752),a(753),a(754),a(755),a(756),a(757),a(758),a(759);const _=a(2217),h=l(a(1210));var g;!function(e){e.EDIT="edit",e.PREVIEW="preview"}(g||(g={})),t.TableIntro=()=>{const{uri:e}=m.useContext(c.StreamDetailContext),{t:t}=f.useTranslation(),[a,l]=m.useState(""),[n,E]=m.useState(""),[b,v]=m.useState(o.IntroContentType.HTML),[y,T]=m.useState(o.IntroContentType.HTML),[N,S]=m.useState(!1),[C,x]=m.useState(!1),w=m.useRef(null),[I,L]=m.useState(!1),[O,P]=m.useState(g.EDIT),[M,k]=m.useState([]);m.useEffect(()=>{l(n)},[n]),m.useEffect(()=>{(async()=>{S(!0);try{const t=await u.appraisalApi.streamIntroduceList(e);t[0];t.length>0&&(E(t[0].content),v(t[0].type),T(t[0].type))}catch(e){}S(!1)})()},[e]),m.useLayoutEffect(()=>{I&&O!==g.PREVIEW&&b!==o.IntroContentType.HTML&&(w.current=d.editor.create(document.getElementById(h.default.markdownEditor),{value:a,language:"markdown",automaticLayout:!0,minimap:{enabled:!1}}))},[a,b,I,O]);const D=m.useCallback(()=>{var e,t;return null!==(t=null===(e=w.current)||void 0===e?void 0:e.getValue())&&void 0!==t?t:""},[]);return m.default.createElement("div",{className:h.default.tableIntro},I?m.default.createElement("div",{className:h.default.editActions},m.default.createElement(s.Radio.Group,{value:b,onChange:e=>{const i=()=>{const t=e.target.value;l(y===t?n:""),v(t),P(g.EDIT)};a?s.Modal.confirm({title:t("提示"),content:t("message:切换编辑器会清空当前的内容，是否继续？"),onOk:i}):i()}},m.default.createElement(s.Radio.Button,{value:o.IntroContentType.HTML},t("富文本")),m.default.createElement(s.Radio.Button,{value:o.IntroContentType.MARKDOWN},t("Markdown"))),m.default.createElement(s.Radio.Group,{className:h.default.editPreview,value:O,onChange:e=>{const t=e.target.value;P(t),b===o.IntroContentType.MARKDOWN&&l(D())}},m.default.createElement(s.Radio.Button,{value:g.EDIT},t("编辑")),m.default.createElement(s.Radio.Button,{value:g.PREVIEW},t("预览")))):m.default.createElement("div",{className:h.default.actions},m.default.createElement(r.default,{type:"primary",disabled:N,onClick:()=>L(!0)},t("编辑")),m.default.createElement(_.IntroHistory,null,m.default.createElement(r.default,null,t("查看历史版本")))),I?m.default.createElement(m.default.Fragment,null,O===g.EDIT?b===o.IntroContentType.HTML?m.default.createElement(i.Editor,{value:a,inline:!1,init:{contentCss:{"font-size":"12px"},height:560,menubar:!1,statusbar:!1,plugins:["advlist autolink lists link image charmap print preview anchor searchreplace visualblocks code fullscreen insertdatetime media table paste code"],toolbar:"formatselect bold italic backcolor alignleft aligncenter alignright alignjustify link bullist numlist outdent indent removeformat table undo redo",content_style:"body {font-size: 12px; color: #666; font-family: PingFangSC-Regular, -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'Helvetica Neue', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';}"},onEditorChange:e=>l(e)}):m.default.createElement("div",{id:h.default.markdownEditor,className:h.default.markdownEditor}):b===o.IntroContentType.HTML?m.default.createElement("div",{className:h.default.content,dangerouslySetInnerHTML:{__html:O===g.PREVIEW?a:n}}):m.default.createElement(p.default,{source:a}),m.default.createElement("div",{className:h.default.editFooterActions},m.default.createElement(r.default,{type:"primary",loading:C,onClick:async()=>{try{const t=b===o.IntroContentType.MARKDOWN?D():a;x(!0),await u.appraisalApi.updateIntroStream({uri:e,content:t,type:b}),E(t),T(b)}catch(e){s.message.error(e.message)}L(!1),x(!1)}},t("common:提交")),m.default.createElement(r.default,{disabled:C,onClick:()=>{L(!1),l(n),v(y)}},t("common:取消")))):b===o.IntroContentType.HTML?m.default.createElement("div",{className:h.default.content,dangerouslySetInnerHTML:{__html:O===g.PREVIEW?a:n}}):m.default.createElement(p.default,{source:a}))}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=l(a(82)),r=l(a(371)),u=l(a(161)),s=a(278),o=a(120),d=a(234),c=n(a(0)),m=a(19),f=l(a(1210));t.IntroHistory=e=>{const{uri:t}=c.useContext(d.StreamDetailContext),{t:a}=m.useTranslation(),[l,n]=c.useState([]),[p,_]=c.useState(!1),[h,g]=c.useState([]);return c.useEffect(()=>{if(!p)return;(async()=>{const e=await s.appraisalApi.streamIntroduceList(t);n(e)})()},[t,p]),c.default.createElement("div",null,c.default.createElement("div",{onClick:()=>_(!0)},e.children),c.default.createElement(r.default,{className:f.default.historyIntro,title:a("历史版本"),width:600,visible:p,placement:"right",onClose:()=>_(!1)},c.default.createElement(u.default,{dataSource:l,rowKey:"version",pagination:!1,expandedRowKeys:h,expandable:{expandedRowRender:e=>c.default.createElement("div",{dangerouslySetInnerHTML:{__html:e.content}})},columns:[{title:a("版本"),width:100,dataIndex:"version"},{title:a("提交者"),dataIndex:"submitter",render:e=>c.default.createElement(o.DChat,{user:e})},{title:a("更新时间"),dataIndex:"createTimeLabel"},{title:a("common:操作"),dataIndex:"action",render:(e,t)=>c.default.createElement(i.default,{size:"small",type:"link",style:{padding:0},onClick:()=>g(h.length?[]:[t.version])},a("查看"))}]})))}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=l(a(264)),r=a(2219),u=a(26),s=a(234),o=n(a(0)),d=a(19),c=a(103),m=l(a(2220));t.TabPreview=()=>{const{uri:e}=o.useContext(s.StreamDetailContext),{t:t}=d.useTranslation(),[a,l]=o.useState(!1),[n,f]=o.useState(null),[p,_]=o.useState(null),[h,g]=o.useState([]);o.useEffect(()=>{if(!e)return;let t=!1;return(async()=>{try{l(!0);const{tableHeader:t,tableData:a}=await r.v1StreamPreviewApi.sampleDataList(e),n=(t||[]).map(e=>({title:e,dataIndex:e,key:e})),i=a.map(e=>{const a={};return t.forEach((t,l)=>{a[t]=e[l]}),a});_(i),g(n)}catch(e){}t||l(!1)})(),()=>t=!0},[e]);const E=o.useMemo(()=>({x:c.getTableWidth(h,0,160)}),[h]);return o.default.createElement("div",{className:m.default.tabPreview},o.default.createElement(i.default,{className:"alert-normal",showIcon:!0,type:"warning",message:t("message:根据安全要求，对没有权限的表，数据样例仅展示数仓层级为ODS、DWD、DIM、DWV的表中安全级别为C1/C2的数据列。可请求表的负责人合理设置hive表的数仓层级以及字段的安全级别，以便预览数据。预览数据会针对数字做千分位处理。")}),o.default.createElement(o.default.Fragment,null,o.default.createElement("div",{className:m.default.dataMeta},o.default.createElement("div",{className:m.default.time},t("detail:最近更新时间"),": ",n||"-")),o.default.createElement(u.Table,{rowKey:"key",loading:a,columns:h,dataSource:p,scroll:E,pagination:!1})))}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const l=a(30),n=a(160);let i={};t.v1StreamPreviewApi={async sampleDataList(e){if(i[e])i[e].tableData.length>20&&await l.sleep(80);else{const t=await n.get("meta/stream/preview",{uri:e});i={[e]:t}}return i[e]}}},function(e,t,a){e.exports={"tab-preview":"index_tab-preview_P8j42",tabPreview:"index_tab-preview_P8j42","data-meta":"index_data-meta_1qHTo",dataMeta:"index_data-meta_1qHTo",time:"index_time_31dVj"}},function(e,t,a){"use strict";var l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=a(166),r=a(26),u=l(a(0)),s=a(19),o=a(2222),d=a(2223),c=n(a(1211)),m=a(772);t.EditDagrePage=()=>{const e=u.useRef(document.createElement("div")),t=u.useRef(document.createElement("textarea")),a=o.useInitEditor(null==e?void 0:e.current),{t:l}=s.useTranslation(),[n]=r.Form.useForm(),[f,p]=u.useState(!1),[_,h]=u.useState(""),[g,E]=u.useState(),[b,v]=u.useState(),[y,T]=u.useState(!1),[N,S]=u.useState([]);u.useEffect(()=>{e&&a&&(e.current.ondrop=e=>{const t=e.offsetX,l=e.offsetY;v({x:t,y:l});const n=e.dataTransfer.getData("text");if(!n||!m.allTypes.includes(n))return;if(n===m.ItemType.TEXT)return h(""),void p(!0);if(n===m.ItemType.LINK)return T(!0);const r={x:t,y:l,id:"node-"+i.uuid(),type:n};a.addItem("node",r),a.pushStack("add",r,"redo")})},[a]),u.useEffect(()=>{if(!a)return;const e=e=>{const{item:t,canvasX:l,canvasY:n}=e;E(t);const i=t.getModel(),{x:r,y:u,label:s,id:o}=i;if(o.includes("edge"))v({x:l-100,y:n-20});else{const e=a.getCanvasByPoint(r,u);v({x:e.x-60,y:e.y-20})}p(!0),h(String(s))};a.on("node:dblclick",e),a.on("edge:dblclick",e)},[a]);u.useEffect(()=>{var e;f&&(null===(e=null==t?void 0:t.current)||void 0===e||e.focus())},[f]);return u.default.createElement("div",{className:c.default.editor},u.default.createElement(r.Modal,{visible:y,title:l("创建链接节点"),onOk:n.submit,afterClose:()=>n.resetFields(),onCancel:()=>T(!1)},u.default.createElement(r.Form,{form:n,onFinish:({label:e,href:t})=>{const{x:a,y:l}=b;N.push({x:a,y:l,href:t,label:e,id:"link-"+i.uuid()}),S([...N]),T(!1)}},u.default.createElement(r.Form.Item,{label:l("文案"),name:"label",required:!0},u.default.createElement(r.Input,null)),u.default.createElement(r.Form.Item,{label:l("链接"),name:"href",required:!0},u.default.createElement(r.Input,null)))),u.default.createElement(d.LeftMenu,null),u.default.createElement("div",{className:c.default.container,ref:e,id:"targetGraph"},N.map(({href:e,label:t,x:a,y:l,id:n})=>u.default.createElement("a",{key:n,href:e,style:{top:l+"px",left:a+"px"},draggable:!0,target:"_blank",rel:"noopener noreferrer",onDrag:e=>e.dataTransfer.setData("text/plain",""),onDragEnd:()=>{const{x:e,y:t}=b;S(N.map(a=>a.id===n?{...a,x:e,y:t}:a))}},t)),f&&u.default.createElement("textarea",{ref:t,onBlur:()=>{if(p(!1),g)a.updateItem(g,{label:_},!0),E(void 0);else{const{x:e,y:t}=b;a.addItem("node",{...m.TEXT_NODE,x:e,y:t,id:"node-"+i.uuid(),label:_},!0)}},value:_,style:{top:(null==b?void 0:b.y)+"px",left:(null==b?void 0:b.x)+"px"},onChange:e=>h(e.target.value)})))}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=l(a(537)),i=a(0),r=a(772);t.useInitEditor=e=>{const[t,a]=i.useState(void 0);return i.useEffect(()=>{if(!e)return;e.oncontextmenu=e=>e.preventDefault();const t=new n.default.Graph({container:e,height:e.offsetHeight,width:e.offsetWidth,defaultNode:r.DEFAULT_NODE,modes:{default:["drag-node",{type:"create-edge",trigger:"click",shouldEnd:e=>!e.item.hasState("selected")}]},defaultEdge:r.defaultEdge});a(t),window.onresize=()=>{t.changeSize(e.clientWidth,e.clientWidth),t.fitCenter()}},[e]),i.useEffect(()=>{if(!t)return;t.on("aftercreateedge",({edge:e})=>{if("loop"===e.getModel().type)return t.removeItem(e);t.pushStack("add",e,"redo")});const e=new n.default.Menu({offsetX:-100,offsetY:-10,itemTypes:["node","edge"],getContent(){const e=document.createElement("div");return e.style.width="50px",e.innerHTML='<div id="delete" style="cursor: pointer">Delete</div>',e},handleMenuClick(e,a){if("delete"===e.getAttribute("id"))return((e,t)=>{t.removeItem(e,!0)})(a,t)}}),a=new n.default.ToolBar;return t.addPlugin(e),t.addPlugin(a),t.render(),()=>t.destroy()},[t]),t}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=l(a(4)),r=n(a(0)),u=l(a(1211)),s=a(772),o=e=>{const{type:t}=e,a=r.useRef(document.createElement("div"));return r.useEffect(()=>{a&&(a.current.ondragstart=e=>{e.dataTransfer.setData("text/plain",t)})},[t]),r.default.createElement("div",{draggable:!0,ref:a,className:i.default(u.default.item,u.default[t])},e.children)};t.LeftMenu=()=>r.default.createElement("div",{className:u.default.sideMenu},r.default.createElement(o,{type:s.ItemType.DIAMOND}),r.default.createElement(o,{type:s.ItemType.CIRCLE}),r.default.createElement(o,{type:s.ItemType.ELLIPSE}),r.default.createElement(o,{type:s.ItemType.RECT}),r.default.createElement(o,{type:s.ItemType.TEXT}," TEXT "),r.default.createElement(o,{type:s.ItemType.LINK}," ","<a />"," "))},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=a(301),i=l(a(0)),r=a(1212),u=a(2226),s=a(2228),o=l(a(2230)),d=a(2231),c=a(2234);t.HomePage=()=>i.default.createElement("div",{className:o.default.homePage},i.default.createElement("div",{className:o.default.banner},i.default.createElement("div",{className:o.default.bannerContent},i.default.createElement(s.Categories,null),i.default.createElement(r.Search,{theme:"dark"}),i.default.createElement(d.MetaDataStatistics,null)),i.default.createElement(u.HomeAnnouncement,null)),i.default.createElement(c.TableList,null),i.default.createElement(n.Footer,null))},function(e,t,a){e.exports={"home-search":"index_home-search_3QeHF",homeSearch:"index_home-search_3QeHF",light:"index_light_Cu3hJ","home-keywords":"index_home-keywords_2BK2e",homeKeywords:"index_home-keywords_2BK2e",keyword:"index_keyword_1XfMv","home-input":"index_home-input_1g8B9",homeInput:"index_home-input_1g8B9","search-tip":"index_search-tip_1TV05",searchTip:"index_search-tip_1TV05","list-wrapper":"index_list-wrapper_7G2Vm",listWrapper:"index_list-wrapper_7G2Vm","search-all":"index_search-all_1hvKZ",searchAll:"index_search-all_1hvKZ",list:"index_list_1NWEA",item:"index_item_33mKj",label:"index_label_1aWnl",highlighter:"index_highlighter_2pdyq",value:"index_value_q9ya-",selected:"index_selected_1Bmwg"}},function(e,t,a){"use strict";var l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=a(469),r=a(97),u=l(a(0)),s=n(a(2227));t.HomeAnnouncement=()=>{const[e,t]=u.useState([]),[a,l]=u.useState(!1);return u.useEffect(()=>{let e=!1;return(async()=>{l(!0);const a=await i.v1HomeApi.announcement();e||(t(a),l(!1))})(),()=>e=!0},[]),e.length||a?u.default.createElement("div",{className:s.default.homeAnnouncement},u.default.createElement("div",{className:s.default.content},e.slice(0,3).map((e,t)=>u.default.createElement("div",{className:s.default.item,key:`${t}${e.timestamp}`},u.default.createElement(r.ExternalLink,{className:s.default.text,href:e.url},e.content),u.default.createElement("div",{className:s.default.time},e.timestampLabel))))):null}},function(e,t,a){e.exports={"home-announcement":"index_home-announcement_1EpaJ",homeAnnouncement:"index_home-announcement_1EpaJ",content:"index_content_P7BXq",item:"index_item_24MWh",text:"index_text_1Tdhl",time:"index_time_tx8NS"}},function(e,t,a){"use strict";var l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=a(469),r=a(26),u=a(319),s=a(500),o=l(a(0)),d=a(117),c=n(a(2229)),m=(e,t=[])=>{let a=null;if(e&&(a="?buId="+e,t.length)){const e=t.map(e=>e.join(",")).join(";");e&&(a+="&categoryMap="+e)}return{pathname:"/search",search:a}};t.Categories=()=>{const[e,t]=o.useState([]),[a,l]=o.useState(!1),n=o.useContext(u.LngStateContext),f=d.useHistory();return o.useEffect(()=>{let e=!1;return(async()=>{const a=await i.v1HomeApi.categories();e||t(a)})(),()=>e=!0},[]),(null==e?void 0:e.length)?o.default.createElement("div",{className:c.default.homeCategories,onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1)},o.default.createElement(r.Menu,{className:c.default.mainMenu,style:{width:150},mode:"vertical"},(a?e:e.slice(0,5)).map(e=>{var t;return o.default.createElement(r.Menu.SubMenu,{onTitleClick:()=>f.push(m(e.id)),popupClassName:c.default.homeCategoriesSubMenu,popupOffset:[0,-12],key:e.treeId,title:`${(n===s.Language.EN?e.nameEn:e.name)||e.name}(${e.count})`},null===(t=e.children)||void 0===t?void 0:t.map(t=>{var a;return(null===(a=t.children)||void 0===a?void 0:a.length)?o.default.createElement(r.Menu.SubMenu,{onTitleClick:()=>f.push(m(e.id,[[t.categoryId,t.id]])),popupClassName:c.default.homeCategoriesSubMenu,popupOffset:[0,-12],key:t.treeId,title:`${(n===s.Language.EN?t.nameEn:t.name)||t.name}(${t.count})`},t.children.map(a=>o.default.createElement(r.Menu.Item,{key:a.treeId},o.default.createElement(d.Link,{to:m(e.id,[[t.categoryId,t.id],[a.categoryId,a.id]])},(n===s.Language.EN?a.nameEn:a.name)||a.name,"(",a.count,")")))):o.default.createElement(r.Menu.Item,{key:t.treeId},o.default.createElement(d.Link,{to:m(e.id,[[t.categoryId,t.id]])},(n===s.Language.EN?t.nameEn:t.name)||t.name,"(",t.count,")"))}))}))):null}},function(e,t,a){e.exports={"home-categories":"index_home-categories_1Wbna",homeCategories:"index_home-categories_1Wbna","home-categories-sub-menu":"index_home-categories-sub-menu_1N50g",homeCategoriesSubMenu:"index_home-categories-sub-menu_1N50g","main-menu":"index_main-menu_3gc8W",mainMenu:"index_main-menu_3gc8W"}},function(e,t,a){e.exports={"home-page":"index_home-page_5F8Rd",homePage:"index_home-page_5F8Rd",banner:"index_banner_1Nk1l","banner-content":"index_banner-content_3-qim",bannerContent:"index_banner-content_3-qim"}},function(e,t,a){"use strict";var l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=a(469),r=a(2232),u=l(a(0)),s=a(19),o=n(a(2233));t.MetaDataStatistics=()=>{const{t:e}=s.useTranslation(),[t,a]=u.useState([]),l={[r.MetaStatisticsCode.HIVE]:e("common:离线表数"),[r.MetaStatisticsCode.STREAM]:e("common:实时表数"),[r.MetaStatisticsCode.INDICATOR]:e("common:指标数"),[r.MetaStatisticsCode.PROJECT]:e("common:项目数"),[r.MetaStatisticsCode.FEATURE]:e("common:特征数"),[r.MetaStatisticsCode.REPORT]:e("common:报表数")};return u.useEffect(()=>{let e=!1;return(async()=>{try{const t=await i.v1HomeApi.metaDataStatistics();if(e)return;a(t)}catch(e){}})(),()=>{e=!0}},[]),u.default.createElement("div",{className:o.default.homeMetaStatistics},t.map(e=>{var t;return u.default.createElement("div",{className:o.default.item,key:e.code},u.default.createElement("div",{className:o.default.label},null!==(t=l[e.code])&&void 0!==t?t:e.code),u.default.createElement("div",{className:o.default.value,key:e.code},e.numLabel))}))}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.HIVE="HIVE",e.STREAM="STREAM",e.INDICATOR="INDICATOR",e.PROJECT="PROJECT",e.FEATURE="FEATURE",e.REPORT="REPORT"}(t.MetaStatisticsCode||(t.MetaStatisticsCode={})),function(e){e.BUSINESS_UNIT="BUSINESS_UNIT",e.BUSINESS_ATTRIBUTE="BUSINESS_ATTRIBUTE",e.DATA_DOMAIN="DATA_DOMAIN"}(t.ICategoryType||(t.ICategoryType={}))},function(e,t,a){e.exports={"home-meta-statistics":"index_home-meta-statistics_3C1XE",homeMetaStatistics:"index_home-meta-statistics_3C1XE",item:"index_item_1fXy8",label:"index_label_13npT",value:"index_value_38MCU"}},function(e,t,a){"use strict";var l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=a(469),r=l(a(0)),u=a(19),s=a(2235),o=n(a(2237));t.TableList=()=>{const[e,t]=r.useState(!1),[a,l]=r.useState(""),[n,d]=r.useState([]),[c,m]=r.useState([]),[f,p]=r.useState([]),{t:_}=u.useTranslation();return r.useEffect(()=>{let e=!1;return(async()=>{try{l(""),t(!0);const a=await i.v1HomeApi.recommendList();if(e)return;d(a.recent),m(a.choicest),p(a.album)}catch(t){if(e)return;l(t.message)}t(!1)})(),()=>{e=!0}},[]),r.default.createElement("div",{className:o.default.homeTableList},r.default.createElement(s.HomeTableItem,{title:_("common:我最近浏览的表"),list:n,loading:e,errorMessage:a}),r.default.createElement(s.HomeTableItem,{title:_("home:热门精品表"),list:c,loading:e,errorMessage:a}),r.default.createElement(s.HomeAlbumItem,{title:r.default.createElement("div",null,r.default.createElement("span",null,_("home:热门专辑"))),list:f,loading:e,errorMessage:a}))}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=a(26),i=a(148),r=l(a(0)),u=a(117),s=a(103),o=l(a(2236));t.HomeTableItem=e=>r.default.createElement("div",{className:o.default.homeTableListItem},r.default.createElement("div",{className:o.default.title},e.title),e.loading?r.default.createElement(n.Spin,{size:"small"},r.default.createElement("div",{className:o.default.list})):e.errorMessage?r.default.createElement("div",{className:"error"},e.errorMessage):e.list.length?r.default.createElement("div",{className:o.default.list},e.list.map((e,t)=>r.default.createElement("div",{className:o.default.item,key:t},r.default.createElement(u.Link,{className:o.default.label,to:{pathname:s.getDetailUrlByType(e.type),search:"?uri="+encodeURIComponent(s.generateUriByType(e.dbName,e.tableName,e.type)),state:{referer:i.RefererType.INNER}}},`${e.dbName}.${e.tableName}`),r.default.createElement("div",{className:o.default.value},e.nameZh)))):r.default.createElement(n.Empty,{className:"empty-data-vertical-center",image:n.Empty.PRESENTED_IMAGE_SIMPLE})),t.HomeAlbumItem=e=>r.default.createElement("div",{className:o.default.homeTableListItem},r.default.createElement("div",{className:o.default.title},e.title),e.loading?r.default.createElement(n.Spin,{size:"small"},r.default.createElement("div",{className:o.default.list})):e.errorMessage?r.default.createElement("div",{className:"error"},e.errorMessage):e.list.length?r.default.createElement("div",{className:o.default.list},e.list.map((e,t)=>r.default.createElement("div",{className:o.default.item,key:t},r.default.createElement(u.Link,{to:{pathname:"/album/detail",search:"?albumId="+e.id},className:o.default.label},e.name),r.default.createElement("div",{className:o.default.value},e.description)))):r.default.createElement(n.Empty,{className:"empty-data-vertical-center",image:n.Empty.PRESENTED_IMAGE_SIMPLE}))},function(e,t,a){e.exports={"home-table-list-item":"index_home-table-list-item_3ju08",homeTableListItem:"index_home-table-list-item_3ju08",title:"index_title_1h8Um",list:"index_list_IyxNg",item:"index_item_29a9a",label:"index_label_1-vsy",value:"index_value_3F9YQ"}},function(e,t,a){e.exports={"home-table-list":"index_home-table-list_PpvBX",homeTableList:"index_home-table-list_PpvBX"}},function(e,t,a){"use strict";var l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=a(472),r=a(30),u=a(328),s=a(26),o=a(301),d=a(2239),c=a(2241),m=a(89),f=a(219),p=a(770),_=a(277),h=l(a(0)),g=a(19),E=a(2243),b=a(2244),v=n(a(2245)),y=n(a(2246)),T=a(2247),N=n(a(1214));t.LineageTool=()=>{const[e,t]=h.useState({sourceEntityType:r.getQuery("sourceType")||f.LineageEntityType.HIVE_TABLE,sourceEntityName:r.getQuery("sourceText")||void 0,targetEntityType:r.getQuery("targetType")||f.LineageEntityType.HIVE_TABLE,targetEntityName:r.getQuery("targetText")||void 0}),[a,l]=h.useState(void 0),[n,S]=h.useState(!1),[C,x]=h.useState(!1),[w,I]=h.useState(void 0),[L,O]=h.useState(void 0),{t:P}=g.useTranslation(),M=b.useInitLineageGraph(),k=_.useEntityTypeMap(),D=h.useMemo(()=>!e.sourceEntityName||!e.targetEntityName,[e]),A=h.useCallback((e,t)=>h.default.createElement("div",{className:N.default.searchState},h.default.createElement("div",{className:N.default.img},h.default.createElement("img",{src:e}),h.default.createElement("p",null,t))),[]),{loading:j,errMsg:F,data:R}=m.useRequest(u.hiveLineageApi.searchLineageRelation,e);return h.useEffect(()=>{if(!M||!R)return;const e=b.dealGraphData(R,k);M.changeData(e),M.fitCenter()},[R,M,k]),h.useEffect(()=>{M&&R&&(M.on("node:click",({item:e})=>{"center"===e.getID()&&S(!0)}),M.on("node:mouseenter",({item:e})=>{const t=e.getID(),a=R.find(({name:e})=>e===t);if(!a)return;const l=e.getModel(),{x:n,y:i}=l,r=M.getCanvasByPoint(n,i);O({clientX:r.x,clientY:r.y}),I(a),x(!0)}),M.on("node:mouseleave",()=>{x(!1)}))},[R,M]),h.useEffect(()=>{D&&M&&M.clear()},[M,D]),h.useLayoutEffect(()=>{l(document.querySelector("#container").clientWidth)},[]),h.default.createElement("div",{className:N.default.bloodTool},h.default.createElement(T.SearchForm,{searchParam:e,searchRelation:e=>{e.sourceEntityName&&e.targetEntityName||s.message.info(P("message:请输入表名、指标、报表、模板")),t(e)}}),h.default.createElement(E.DetailModal,{visible:n,setVisible:S,dataList:R}),h.default.createElement("div",{className:N.default.content},h.default.createElement(s.Spin,{spinning:j},F?h.default.createElement("div",{className:"error"},F):h.default.createElement("div",{className:N.default.container,id:"container"},h.default.createElement("div",{className:N.default.bar},h.default.createElement(c.GraphTypeIntro,null),!D&&h.default.createElement("div",{className:N.default.text},h.default.createElement(i.ExclamationCircleOutlined,null),P("message:检测结果系统默认显示最短血缘链路，详情可查看表血缘信息")),h.default.createElement(d.GraphControl,{width:a,height:578,graph:M,CONTAINER_ID:"container"})),D&&A(v.default,P("message:请先输入需要检测血缘的对象名称，如表名、指标、模板等")),0===(null==R?void 0:R.length)&&!D&&A(y.default,P("message:系统检测无血缘关系")),C&&w&&h.default.createElement(p.Tooltip,{data:w,options:L})))),h.default.createElement(o.Footer,null))}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=l(a(761)),i=l(a(1199)),r=l(a(1200)),u=l(a(554)),s=a(536),o=l(a(0)),d=l(a(2240));t.GraphControl=e=>{const{graph:t,width:a,height:l}=e;return o.default.createElement("div",{className:d.default.actions},o.default.createElement(u.default,{onClick:()=>{t.zoomTo(1,{x:a/2,y:l/2})}}),o.default.createElement(r.default,{onClick:()=>{const e=t.getZoom();t.zoomTo(e+.3,{x:a/2,y:l/2})}}),o.default.createElement(i.default,{onClick:()=>{const e=t.getZoom();e<=.2||t.zoomTo(e-.3,{x:a/2,y:l/2})}}),o.default.createElement(n.default,{onClick:()=>{document.fullscreenElement?(document.exitFullscreen(),t.changeSize(a,l)):(document.querySelector("#"+(e.CONTAINER_ID||s.CONTAINER_ID)).requestFullscreen(),t.changeSize(document.body.offsetWidth,document.body.offsetHeight))}}))}},function(e,t,a){e.exports={actions:"style_actions_2AVTA"}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=a(219),i=a(277),r=l(a(0)),u=a(19),s=l(a(2242));t.GraphTypeIntro=e=>{const t=i.useEntityTypeOptions(e.type),a=i.useEntityTypeMap(),{t:l}=u.useTranslation();return r.default.createElement("div",{className:s.default.typeIntro},r.default.createElement("div",null,l("detail:图例")," : "),r.default.createElement("div",{className:s.default.list},t.map(e=>[n.LineageEntityType.ALL,n.LineageEntityType.RDS_MYSQL,n.LineageEntityType.SELF_MYSQL].includes(e.value)?null:r.default.createElement("div",{className:s.default.item,key:e.value},r.default.createElement("span",{className:s.default.circle,style:{background:a[e.value].color}}),r.default.createElement("span",null,e.label)))))}},function(e,t,a){e.exports={"type-intro":"style_type-intro_2DGig",typeIntro:"style_type-intro_2DGig",list:"style_list_3vjui",item:"style_item_2Y3Ub",circle:"style_circle_2rvND",hive:"style_hive_jtpID"}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=a(176),r=l(a(161)),u=a(26),s=a(120),o=a(97),d=a(219),c=a(148),m=a(277),f=n(a(0)),p=a(19),_=a(117);t.DetailModal=e=>{const{dataList:t,visible:a,setVisible:l}=e,{t:n}=p.useTranslation(),h=m.useEntityTypeMap(),g=f.useMemo(()=>[{title:n("detail:节点名"),dataIndex:"name",ellipsis:!0,render:(e,{uri:t,type:a,entityLink:l})=>a===d.LineageEntityType.HIVE_TABLE_COLUMN||a===d.LineageEntityType.HIVE_TABLE?f.default.createElement(_.Link,{to:{pathname:"/detail",search:"?uri="+t,state:{referer:c.RefererType.INNER}}},e):f.default.createElement(o.ExternalLink,{href:l,withReferrer:!0},e)},{title:n("common:描述"),dataIndex:"description",ellipsis:!0,render:e=>f.default.createElement(u.Tooltip,{title:e,placement:"topLeft"},f.default.createElement("span",null,e))},{title:n("detail:负责人"),dataIndex:"owner",width:120,render:e=>f.default.createElement(s.DChat,{user:e})},{title:n("detail:节点类型"),dataIndex:"type",render:(e,t)=>h[t.type].label,width:120}],[h,n]);return f.default.createElement(i.Drawer,{width:773,title:n("detail:节点列表详情"),visible:a,onClose:()=>l(!1)},f.default.createElement(r.default,{pagination:!1,dataSource:t,columns:g,rowKey:"uuid"}))}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=l(a(537)),i=a(0);t.dealGraphData=function(e,t){const a=e.reduce((e,a,l,n)=>{e||(e=[]);const{name:i}=a,r=i.length>25?`${i.slice(0,13)}...${i.slice(i.length-15,i.length)}`:i,u=n.length-1;return n.length>4&&2===l&&e.push({id:"center",type:"modelRect",width:160,height:56,style:{fill:"#F7F8FA",radius:8,stroke:"#C3CAD9"},label:`中间已省略${n.length-4}个节点`,labelCfg:{style:{fill:"#A0A1A2"}},description:"点击查看详情",logoIcon:{show:!1},preRect:{show:!1},stateIcon:{show:!1},descriptionCfg:{style:{fill:"#5D78B0",cursor:"pointer",width:"100%"},position:"center"}}),n.length>4&&l>1&&l<u-1||e.push({label:r,id:i,style:{fill:t[a.type].color,stroke:""}}),e},[]),l=a.reduce((e,t,a,l)=>(a===l.length-1||e.push({source:t.id,target:l[a+1].id,style:{stroke:"#C3CAD9"},label:"▶",labelCfg:{style:{fill:"#C3CAD9",fontSize:14},refY:-1}}),e),[]);return{nodes:a,edges:l}},t.useInitLineageGraph=()=>{const[e,t]=i.useState(void 0);return i.useLayoutEffect(()=>{const e=new n.default.Graph({container:"container",height:578,width:document.querySelector("#container").clientWidth,fitCenter:!0,defaultNode:{type:"circle",labelCfg:{position:"bottom",style:{color:"#333333",lineHeight:"18px"},offset:8},width:12,height:12},modes:{default:["drag-canvas","drag-node"]},layout:{type:"dagre",rankdir:"LR"}});e.render(),t(e),window.onresize=()=>{const t=document.querySelector("#container");e.changeSize(t.clientWidth,t.clientHeight),e.fitCenter()}},[]),e}},function(e,t,a){"use strict";a.r(t),t.default=a.p+"20cc1b9789447ebc663da44c11166fb0.png"},function(e,t,a){"use strict";a.r(t),t.default=a.p+"8343d3cf3c523d43143d87f2ef43387a.png"},function(e,t,a){"use strict";var l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=a(233),r=a(30),u=a(328),s=a(26),o=a(219),d=a(277),c=l(a(0)),m=a(19),f=n(a(1214));t.SearchForm=e=>{const{searchParam:t,searchRelation:a}=e,{t:l}=m.useTranslation(),n=d.useEntityTypeOptions("TABLE").filter(e=>![o.LineageEntityType.ALL,o.LineageEntityType.OLD_MYSQL,o.LineageEntityType.SELF_MYSQL].includes(e.value)),[p]=s.useForm(),[_,h]=c.useState(""),[g,E]=c.useState(!1),[b,v]=c.useState(!1),[y,T]=c.useState(""),[N,S]=c.useState(r.getQuery("sourceText")),[C,x]=c.useState(r.getQuery("targetText")),[w,I,L]=i.useRequest(u.hiveLineageApi.filterMysqlEntity,_),[O,P,M]=i.useRequest(u.hiveLineageApi.filterMysqlEntity,y);return c.useEffect(()=>{r.getQuery("sourceType")===o.LineageEntityType.RDS_MYSQL&&E(!0),r.getQuery("targetType")===o.LineageEntityType.RDS_MYSQL&&v(!0)},[]),c.default.createElement("div",{className:f.default.header},c.default.createElement(s.Form,{className:f.default.headerForm,layout:"inline",form:p,initialValues:t,onFinish:a},c.default.createElement(s.Form.Item,{name:"sourceEntityType",style:{marginRight:"0px"}},c.default.createElement(s.Select,{onChange:e=>{if(e===o.LineageEntityType.RDS_MYSQL?E(!0):E(!1),p.setFieldsValue({sourceEntityName:""}),r.updateQuery({sourceText:""}),e===o.LineageEntityType.HIVE_TABLE)return r.updateQuery({sourceType:null});r.updateQuery({sourceType:e})}},n.map(({value:e,label:t})=>c.default.createElement(s.Select.Option,{key:e,value:e},t)))),c.default.createElement(s.Form.Item,{name:"sourceEntityName"},g?c.default.createElement(s.Select,{placeholder:l("message:请输入表名、指标、报表、模板"),allowClear:!0,showSearch:!0,className:f.default.select,loading:I,filterOption:!1,onSearch:e=>h(e),onChange:e=>{S(e),r.updateQuery({sourceText:e})},notFoundContent:I?c.default.createElement(s.Spin,null):L?c.default.createElement("div",{className:"error"},L):c.default.createElement(s.Empty,null)},null==w?void 0:w.map(({dbName:e,tableName:t,value:a,key:n,userName:i,offlineUserName:r})=>c.default.createElement(s.Select.Option,{key:n,value:a},c.default.createElement("div",null,`${e}.${t}`),c.default.createElement("div",{className:f.default.searchLabel,style:{color:"#999"}},"(",`${l("主库用户名")}: ${i} ${l("从库用户名")}: ${r}`,")")))):c.default.createElement(s.Input,{placeholder:l("message:请输入表名、指标、报表、模板"),onChange:e=>r.updateQuery({sourceText:e.target.value})})),c.default.createElement("div",{className:f.default.separate},"-"),c.default.createElement(s.Form.Item,{name:"targetEntityType",style:{marginRight:"0px"}},c.default.createElement(s.Select,{onChange:e=>{if(e===o.LineageEntityType.RDS_MYSQL?v(!0):v(!1),p.setFieldsValue({targetEntityName:""}),r.updateQuery({targetText:""}),e===o.LineageEntityType.HIVE_TABLE)return r.updateQuery({targetType:null});r.updateQuery({targetType:e})}},n.map(({value:e,label:t})=>c.default.createElement(s.Select.Option,{key:e,value:e},t)))),c.default.createElement(s.Form.Item,{name:"targetEntityName"},b?c.default.createElement(s.Select,{placeholder:l("message:请输入表名、指标、报表、模板"),allowClear:!0,showSearch:!0,className:f.default.select,loading:P,filterOption:!1,onChange:e=>{x(e),r.updateQuery({targetText:e})},onSearch:e=>T(e),notFoundContent:P?c.default.createElement(s.Spin,null):M?c.default.createElement("div",{className:"error"},M):c.default.createElement(s.Empty,null)},null==O?void 0:O.map(({dbName:e,tableName:t,value:a,key:n,userName:i,offlineUserName:r})=>c.default.createElement(s.Select.Option,{key:n,value:a},c.default.createElement("div",null,`${e}.${t}`),c.default.createElement("div",{className:f.default.searchLabel,style:{color:"#999"}},"(",`${l("主库用户名")}: ${i} ${l("从库用户名")}: ${r}`,")")))):c.default.createElement(s.Input,{placeholder:l("message:请输入表名、指标、报表、模板"),onChange:e=>r.updateQuery({targetText:e.target.value})})),c.default.createElement(s.Button,{type:"primary",htmlType:"submit"},l("message:检测血缘"))),c.default.createElement("div",{className:f.default.labelContainer},N&&g&&c.default.createElement("div",{className:f.default.sourceLabel},`\n            ${l("主库用户名")}:${N.split(".")[2]},\n            ${l("从库用户名")}:${N.split(".")[3]}\n          `),C&&b&&c.default.createElement("div",{className:f.default.targetLabel},`\n            ${l("主库用户名")}:${C.split(".")[2]},\n            ${l("从库用户名")}:${C.split(".")[3]}\n          `)))}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=a(30),r=l(a(118)),u=l(a(335)),s=a(538),o=l(a(4)),d=a(120),c=a(301),m=n(a(0)),f=a(19),p=a(2249),_=a(2250),h=a(2251),g=l(a(470));t.ProjectDetailPage=()=>{const{t:e}=f.useTranslation(),[t,a]=m.useState(!1),[l,n]=m.useState(!1),[E,b]=m.useState(null),[v,y]=m.useState(null),[T,N]=m.useState(""),[S,C]=m.useState(!1),[x,w]=m.useState(i.getQuery("tab")?i.getQuery("tab"):"prod"),I=i.getQuery("projectCode");m.useEffect(()=>{let e=!1;return(async()=>{C(!0),N("");try{const t=s.projectApi.detail(I),a=s.projectApi.statistics(I),l=await t,n=await a;if(e)return;b(l),y(n)}catch(t){if(e)return;N(t.message)}e||C(!1)})(),()=>e=!0},[I]);const L=e=>{"boutique"===e?(a(!0),w("prod"),i.updateQuery({tab:"prod",pageSize:null,pageCurrent:null}),setTimeout(()=>{a(!1)},1e3)):"prod"===e?(n(!0),w("prod"),i.updateQuery({tab:"prod",pageSize:null,pageCurrent:null}),setTimeout(()=>{n(!1)},1e3)):(w(e),i.updateQuery({tab:e,pageSize:null,pageCurrent:null}))};return T?m.default.createElement("div",{className:"error"},T):m.default.createElement(r.default,{spinning:S},m.default.createElement("div",{className:g.default.projectPage},m.default.createElement("div",{className:g.default.hd},m.default.createElement("div",{className:g.default.left},m.default.createElement("div",{className:g.default.title},null==E?void 0:E.projectCode),m.default.createElement("div",{className:g.default.desc},null==E?void 0:E.projectName)),m.default.createElement("div",{className:g.default.statistics},m.default.createElement("div",{className:g.default.item,onClick:()=>L("prod")},m.default.createElement("div",{className:g.default.label},(null==v?void 0:v.prodCountLabel)||"-"),m.default.createElement("div",{className:g.default.value},e("project:生产表数"))),m.default.createElement("div",{className:g.default.border}),m.default.createElement("div",{className:g.default.item,onClick:()=>L("boutique")},m.default.createElement("div",{className:g.default.label},(null==v?void 0:v.choicestCountLabel)||"-"),m.default.createElement("div",{className:g.default.value},e("project:精品表数"))),m.default.createElement("div",{className:g.default.border}),m.default.createElement("div",{className:g.default.item,onClick:()=>L("dev")},m.default.createElement("div",{className:g.default.label},(null==v?void 0:v.devCountLabel)||"-"),m.default.createElement("div",{className:g.default.value},e("project:开发表数"))),m.default.createElement("div",{className:g.default.border}),m.default.createElement("div",{className:g.default.item,onClick:()=>L("stream")},m.default.createElement("div",{className:g.default.label},(null==v?void 0:v.streamCountLabel)||"-"),m.default.createElement("div",{className:g.default.value},e("project:实时表数"))))),m.default.createElement("div",{className:g.default.content},m.default.createElement("div",{className:g.default.info},m.default.createElement("div",{className:g.default.title},"基本信息"),m.default.createElement("div",{className:o.default(g.default.item,g.default.user)},m.default.createElement("div",{className:g.default.label},e("common:管理员")),m.default.createElement("div",{className:o.default(g.default.value,g.default.user)},null==E?void 0:E.managerList.map(e=>m.default.createElement(d.DChat,{key:e.account,user:e})))),m.default.createElement("div",{className:g.default.item},m.default.createElement("div",{className:g.default.label},e("project:生产账号")),m.default.createElement("div",{className:g.default.value},null==E?void 0:E.prodAccount)),m.default.createElement("div",{className:g.default.item},m.default.createElement("div",{className:g.default.label},e("project:项目简介")),m.default.createElement("div",{className:g.default.value},null==E?void 0:E.comment)),m.default.createElement("div",{className:g.default.item},m.default.createElement("div",{className:g.default.label},e("project:开发库")),m.default.createElement("div",{className:g.default.value},null==E?void 0:E.devDb)),m.default.createElement("div",{className:g.default.item},m.default.createElement("div",{className:g.default.label},e("project:生产库")),m.default.createElement("div",{className:g.default.value},null==E?void 0:E.prodDb)),m.default.createElement("div",{className:g.default.item},m.default.createElement("div",{className:g.default.label},e("project:实时库")),m.default.createElement("div",{className:g.default.value},(null==E?void 0:E.streamDb)||e("common:未开通"))),m.default.createElement("div",{className:g.default.item},m.default.createElement("div",{className:g.default.label},e("project:所属租户")),m.default.createElement("div",{className:g.default.value},null==E?void 0:E.tenantName)),m.default.createElement("div",{className:g.default.item},m.default.createElement("div",{className:g.default.label},e("common:创建时间")),m.default.createElement("div",{className:g.default.value},null==E?void 0:E.createTime))),m.default.createElement(u.default,{animated:!1,className:"tabs-custom-light",activeKey:x,onChange:e=>{w(e),i.updateQuery({tab:"prod"===e?null:e,pageSize:null,pageCurrent:null})}},m.default.createElement(u.default.TabPane,{tab:m.default.createElement("span",{className:"nav-text"},e("user:生产表明细")),key:"prod"},m.default.createElement(_.Prod,{boutique:t,cancelBoutique:l})),m.default.createElement(u.default.TabPane,{tab:m.default.createElement("span",{className:"nav-text"},e("user:开发表明细")),key:"dev"},m.default.createElement(p.Dev,null)),m.default.createElement(u.default.TabPane,{tab:m.default.createElement("span",{className:"nav-text"},e("user:实时表明细")),key:"stream"},m.default.createElement(h.Stream,{isOpen:Boolean(null==E?void 0:E.streamDb)})))),m.default.createElement(c.Footer,null)))}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=a(30),r=l(a(161)),u=a(538),s=a(120),o=a(89),d=a(1215),c=a(148),m=a(98),f=n(a(0)),p=a(19),_=a(117),h=a(773),g=l(a(470));t.Dev=()=>{const{t:e}=p.useTranslation(),t=i.getQuery("projectCode"),[a,l]=f.useState(i.getQuery("pageCurrent","number")||1),[n,E]=f.useState(i.getQuery("pageSize","number")||10),[b,v]=f.useState(i.getQuery("tableName")||""),[y,T]=f.useState(null),[N,S]=f.useState([]),[C,x]=f.useState(""),[w,I]=f.useState(!1),L=o.useShowTotal(),O=f.useCallback(async()=>{let e=!1;I(!0),x("");try{const l=await u.projectApi.filterOfflineTable({pageCurrent:a,pageSize:n,pageFilter:{projectCode:t,type:d.ProjectType.DEV,tableName:b}});if(e)return;T(l.total),S(l.records)}catch(t){if(e)return;x(t.message)}if(!e)return I(!1),()=>e=!0},[a,n,t,b]);return f.useEffect(()=>{O()},[O]),!w&&C?f.default.createElement("div",{className:"error"},C):f.default.createElement("div",null,f.default.createElement(h.ProjectFilter,{submit:async({tableName:e})=>{v(e),l(1)}}),f.default.createElement(r.default,{loading:w,rowKey:"serialNumber",columns:[{title:e("common:序号"),dataIndex:"serialNumber",width:60},{title:e("category:表名"),ellipsis:!0,dataIndex:"dbTableLabel",render:(e,t)=>f.default.createElement("div",{className:g.default.tableName},t.isChoicest?f.default.createElement("span",{className:g.default.choicest},"精"):null,f.default.createElement(_.Link,{className:g.default.text,to:{pathname:"/detail",search:"?uri="+t.uri,state:{referer:c.RefererType.INNER}}},e))},{title:e("detail:技术负责人"),width:180,dataIndex:"techOwner",render:e=>f.default.createElement(s.DChat,{user:e})},{title:e("common:创建时间"),width:180,dataIndex:"createTimeLabel"},{title:e("hiveTable:最后数据变更时间"),width:180,dataIndex:"lastDataUpdateTimeLabel"}],dataSource:N,pagination:{...m.PAGE_CONFIG,pageSize:n,current:a,total:y,showTotal:L,onShowSizeChange:(e,t)=>{E(t),l(1),i.updateQuery({pageSize:10===t?null:t,pageCurrent:null})},onChange:e=>{l(e),i.updateQuery({pageCurrent:1===e?null:e})}}}))}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=a(30),r=l(a(161)),u=l(a(149)),s=a(538),o=a(120),d=a(89),c=a(1215),m=a(148),f=a(98),p=n(a(0)),_=a(19),h=a(117),g=a(773),E=l(a(470));t.Prod=e=>{const{boutique:t,cancelBoutique:a}=e,{t:l}=_.useTranslation(),n=i.getQuery("projectCode"),[b,v]=p.useState(i.getQuery("pageCurrent","number")||1),[y,T]=p.useState(i.getQuery("pageSize","number")||10),[N,S]=p.useState(i.getQuery("tableName")||""),[C,x]=p.useState(null),[w,I]=p.useState(!1),[L,O]=p.useState({dbTableLabel:[]}),[P,M]=p.useState([]),[k,D]=p.useState(""),[A,j]=p.useState(!1),F=d.useShowTotal(),R=p.useCallback(async()=>{let e=!1;j(!0),D("");try{const t=await s.projectApi.filterOfflineTable({pageCurrent:b,pageSize:y,pageFilter:{projectCode:n,tableName:N,type:c.ProjectType.PROD,isChoicest:w||null}});if(e)return;x(t.total),M(t.records)}catch(t){if(e)return;D(t.message)}if(!e)return j(!1),()=>e=!0},[b,y,n,N,w]);return p.useEffect(()=>{R()},[R]),p.useEffect(()=>{t&&(O({dbTableLabel:["isChoicest"]}),I(!0))},[t]),p.useEffect(()=>{a&&L&&L.dbTableLabel&&L.dbTableLabel.includes("isChoicest")&&(O({dbTableLabel:null}),I(!1))},[a,L]),!A&&k?p.default.createElement("div",{className:"error"},k):p.default.createElement("div",null,p.default.createElement(g.ProjectFilter,{submit:({tableName:e})=>{S(e),v(1)}}),p.default.createElement(r.default,{loading:A,rowKey:"serialNumber",columns:[{title:l("common:序号"),dataIndex:"serialNumber",width:60},{title:l("category:表名"),dataIndex:"dbTableLabel",ellipsis:!0,filters:[{text:"精品",value:"isChoicest"}],filteredValue:L.dbTableLabel||null,render:(e,t)=>p.default.createElement("div",{className:E.default.tableName},t.isChoicest?p.default.createElement("span",{className:E.default.choicest},"精"):null,p.default.createElement(u.default,{title:e},p.default.createElement(h.Link,{className:E.default.text,to:{pathname:"/detail",search:"?uri="+t.uri,state:{referer:m.RefererType.INNER}}},e)))},{title:l("detail:技术负责人"),width:110,dataIndex:"techOwner",render:e=>p.default.createElement(o.DChat,{user:e})},{title:l("common:描述"),dataIndex:"description"},{title:l("common:创建时间"),width:156,dataIndex:"createTimeLabel"},{title:l("hiveTable:最后数据变更时间"),width:156,dataIndex:"lastDataUpdateTimeLabel"}],dataSource:P,onChange:(e,t)=>{var a;O(t),I(null===(a=null==t?void 0:t.dbTableLabel)||void 0===a?void 0:a.includes("isChoicest"))},pagination:{...f.PAGE_CONFIG,pageSize:y,current:b,total:C,showTotal:F,onShowSizeChange:(e,t)=>{T(t),v(1),i.updateQuery({pageSize:10===t?null:t,pageCurrent:null})},onChange:e=>{v(e),i.updateQuery({pageCurrent:1===e?null:e})}}}))}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=a(30),r=l(a(191)),u=l(a(161)),s=a(538),o=a(26),d=a(120),c=a(89),m=a(148),f=a(98),p=n(a(0)),_=a(19),h=a(117),g=a(773),E=l(a(470));t.Stream=e=>{const{t:t}=_.useTranslation(),a=i.getQuery("projectCode"),[l,n]=p.useState(i.getQuery("pageCurrent","number")||1),[b,v]=p.useState(i.getQuery("pageSize","number")||10),[y,T]=p.useState(i.getQuery("tableName","string")||""),[N,S]=p.useState(null),[C,x]=p.useState([]),[w,I]=p.useState(""),[L,O]=p.useState(!1),P=c.useShowTotal(),M=p.useCallback(async()=>{if(!e.isOpen)return;let t=!1;O(!0),I("");try{const e=await s.projectApi.filterStreamTable({pageCurrent:l,pageSize:b,pageFilter:{projectCode:a,tableName:y}});if(t)return;S(e.total),x(e.records)}catch(e){if(t)return;I(e.message)}return t?void 0:(O(!1),()=>t=!0)},[e.isOpen,l,b,a,y]);return p.useEffect(()=>{M()},[M]),!L&&w?p.default.createElement("div",{className:"error"},w):e.isOpen?p.default.createElement("div",null,p.default.createElement(g.ProjectFilter,{tip:t("message:默认按创建时间排序"),submit:({tableName:e})=>{T(e),n(1)}}),p.default.createElement(u.default,{loading:L,rowKey:"serialNumber",columns:[{title:t("common:序号"),dataIndex:"serialNumber",width:60},{title:t("category:表名"),dataIndex:"dbTableLabel",ellipsis:!0,render:(e,t)=>p.default.createElement("div",{className:E.default.tableName},p.default.createElement(o.Tooltip,{title:e},p.default.createElement(h.Link,{className:E.default.text,to:{pathname:"/detail/stream",search:"?uri="+t.uri,state:{referer:m.RefererType.INNER}}},e)))},{title:t("detail:技术负责人"),dataIndex:"techOwner",render:e=>p.default.createElement(d.DChat,{user:e})},{title:t("detail:来源类型"),dataIndex:"stype"},{title:t("common:描述"),dataIndex:"comment"},{title:t("common:创建时间"),width:160,dataIndex:"createTimeLabel"}],dataSource:C,pagination:{...f.PAGE_CONFIG,pageSize:b,current:l,total:N,showTotal:P,onShowSizeChange:(e,t)=>{v(t),n(1),i.updateQuery({pageSize:10===t?null:t,pageCurrent:null})},onChange:e=>{n(e),i.updateQuery({pageCurrent:1===e?null:e})}}})):p.default.createElement(r.default,{image:r.default.PRESENTED_IMAGE_SIMPLE,description:t("message:此项目未开通实时能力")})}},function(e,t,a){"use strict";var l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=a(362),r=a(30),u=a(535),s=a(26),o=a(97),d=a(1213),c=a(1212),m=l(a(0)),f=a(19),p=a(103),_=a(199),h=a(329),g=a(175),E=a(2253),b=a(2256),v=a(540),y=a(539),T=a(2257),N=a(2260),S=a(774),C=a(541),x=a(2261),w=a(2273),I=a(775),L=a(542),O=a(2274),P=a(2277),M=a(2278),k=a(545),D=a(544),A=n(a(281)),j=a(2279),F=a(2283),R=a(778),H=a(1218),U=a(2284),B=a(471),q=a(546),z=a(2285),Q=a(2287),V=a(547),G=a(2288),Y=a(2291),W=a(549),$=a(548);t.DataSearchContent=()=>{var e;const{t:t}=f.useTranslation(),{isHive:a,searchType:l,setSearchType:n,setKeyword:R}=m.useContext(g.SearchContext),{sessionId:V,params:K}=m.useContext(D.HiveStateContext),{hiveTableData:Z,projectInfo:J}=M.useHiveSearch(K,V),X=-1!=window.location.href.indexOf("datamap-pre.didichuxing.com"),ee=-1!=window.location.href.indexOf("datamap.didichuxing.com"),{updateParams:te,setPageNum:ae,dispatchParams:le}=m.useContext(D.HiveDispatchContext),{updateParams:ne,setPageNum:ie,dispatchParams:re}=m.useContext($.StreamDispatchContext),{updateParams:ue,setPageCurrent:se,dispatchParams:oe}=m.useContext(q.MysqlDispatchContext),{hiveCount:de,rdsCount:ce,streamCount:me,metricCount:fe,publicLogCount:pe,eventTrackingCount:_e,featureCount:he,dataeCount:ge}=m.useContext(h.CountsStateContext),{setPageCurrent:Ee,setMd5:be,dispatchParams:ve}=m.useContext(y.DataeDispatchContext),{setMd5:ye,setPageNum:Te,dispatchParams:Ne}=m.useContext(C.TrackingDispatchContext),{setPageCurrent:Se,setMd5:Ce,dispatchParams:xe}=m.useContext(L.FeatureDispatchContext),{setHiveCount:we}=m.useContext(h.CountsDispatchContext),{hiveTableLoading:Ie,hiveTableTotal:Le}=Z;m.useEffect(()=>{Ie||null===Le||we(Le)},[Le,Ie,we]);const Oe=m.useMemo(()=>({[_.SearchType.HIVE]:m.default.createElement(P.HiveAggregation,null),[_.SearchType.MYSQL]:m.default.createElement(U.MysqlAggregation,null),[_.SearchType.STREAM]:m.default.createElement(Y.StreamAggregation,null),[_.SearchType.METRIC]:m.default.createElement(F.MetricAggregation,null),[_.SearchType.PUBLIC_LOG]:m.default.createElement(Q.PublicLogAggregation,null),[_.SearchType.EVENT_TRACKING]:m.default.createElement(N.TrackingAggregation,null),[_.SearchType.FEATURE]:m.default.createElement(w.FeatureAggregation,null),[_.SearchType.DATAE]:m.default.createElement(b.DataeAggregation,null)}),[]);return m.default.createElement("div",{className:A.default.homeSearch},m.default.createElement("div",{className:A.default.searchWrapper},m.default.createElement(c.Search,{classNames:A.default.pageSearch,theme:"light",searchType:l,updateKeyword:e=>{const t=d.isIncludeDevTable(e);R(e),le({type:k.HIVE_ACTION_TYPES.RESET}),ue(t?{keyword:e,isIncludeDevTable:!0}:{keyword:e}),se(1),oe({type:B.MYSQL_ACTION_TYPES.RESET}),ne(t?{keyword:e,isIncludeDevTable:!0}:{keyword:e}),ie(1),re({type:W.STREAM_ACTION_TYPES.RESET_WITHOUT_KEYWORD}),te(t?{keyword:e,isIncludeDevTable:!0}:{keyword:e}),ae(1),ye(p.uuid()),Ne({type:S.TRACKING_ACTION_TYPES.UPDATE}),Te(1),Ce(p.uuid()),xe({type:I.FEATURE_ACTION_TYPES.UPDATE}),Se(1),be(p.uuid()),ve({type:v.DATAE_ACTION_TYPES.RESET}),Ee(1),r.updateQuery({keyword:e,pageNum:null,pageCurrent:null})}})),m.default.createElement("div",{className:A.default.searchContent},J&&a&&m.default.createElement("div",{className:A.default.accurateResult},m.default.createElement("div",{className:A.default.content},m.default.createElement("div",null,m.default.createElement("span",null,t("search:找到一个项目：")," "),m.default.createElement(o.ExternalLink,{href:"/project/detail?projectCode="+J.projectCode},J.projectCode)),m.default.createElement("div",{className:A.default.details},m.default.createElement("div",null,t("common:中文名"),"：",m.default.createElement("span",{className:A.default.value},J.projectName)),m.default.createElement("div",null,t("search:最后更新时间"),"：",m.default.createElement("span",{className:A.default.value},J.lastUpdateTimeLabel)),m.default.createElement("div",null,t("common:管理员"),"：",J.admins.length>8?m.default.createElement(s.Tooltip,{title:null===(e=J.admins)||void 0===e?void 0:e.map(e=>e.name).join("、")},m.default.createElement("span",null,J.admins.slice(0,8).map(e=>m.default.createElement(i.DChat,{key:e.account,user:e,className:"dream-d-chat"})),"...")):J.admins.map(e=>m.default.createElement(i.DChat,{key:e.account,user:e})))))),Oe[l],m.default.createElement("div",{className:A.default.contentTabsWrapper},m.default.createElement(s.Tabs,{className:A.default.contentTabs,defaultActiveKey:l,onChange:e=>{n(e),r.updateQuery({searchType:e===_.SearchType.HIVE?null:e,pageNum:null,pageCurrent:null,keyword:null})}},m.default.createElement(s.Tabs.TabPane,{key:_.SearchType.HIVE,tab:m.default.createElement("span",{className:A.default.tabNavText},t("search:Hive表"),de||0===de?`(${u.toThousands(de)})`:"")},m.default.createElement(O.HiveTable,{data:Z})),m.default.createElement(s.Tabs.TabPane,{key:_.SearchType.STREAM,tab:m.default.createElement("span",{className:A.default.tabNavText},t("search:实时表"),me||0===me?`(${u.toThousands(me)})`:"")},m.default.createElement(G.StreamTable,null)),m.default.createElement(s.Tabs.TabPane,{key:_.SearchType.MYSQL,tab:m.default.createElement("span",{className:A.default.tabNavText},t("search:MySQL表"),ce||0===ce?`(${u.toThousands(ce)})`:"")},m.default.createElement(H.MysqlTable,null)),m.default.createElement(s.Tabs.TabPane,{key:_.SearchType.PUBLIC_LOG,tab:m.default.createElement("span",{className:A.default.tabNavText},t("search:Public日志"),pe||0===pe?`(${u.toThousands(pe)})`:"")},m.default.createElement(z.PublicLog,null)),m.default.createElement(s.Tabs.TabPane,{key:_.SearchType.METRIC,tab:m.default.createElement("span",{className:A.default.tabNavText},t("search:指标"),fe||0===fe?`(${u.toThousands(fe)})`:"")},m.default.createElement(j.MetricSearchList,null)),X||ee?m.default.createElement(s.Tabs.TabPane,{key:_.SearchType.FEATURE,tab:m.default.createElement("span",{className:A.default.tabNavText},t("search:特征"),he||0===he?`(${u.toThousands(he)})`:"")},m.default.createElement(x.Feature,null)):null,m.default.createElement(s.Tabs.TabPane,{key:_.SearchType.DATAE,tab:m.default.createElement("span",{className:A.default.tabNavText},t("search:报表"),ge||0===ge?`(${u.toThousands(ge)})`:"")},m.default.createElement(E.Datae,null)),m.default.createElement(s.Tabs.TabPane,{key:_.SearchType.EVENT_TRACKING,tab:m.default.createElement("span",{className:A.default.tabNavText},t("search:埋点"),_e>=1e4?`(${_e}+)`:_e||0===_e?`(${Number(u.toThousands(_e))>=1e4?u.toThousands(_e)+"+":u.toThousands(_e)})`:"")},m.default.createElement(T.EventTracking,null))))))},t.DataSearchPage=()=>m.default.createElement(g.SearchProvider,null,m.default.createElement(h.CountsConditionProvider,null,m.default.createElement(D.HiveConditionProvider,null,m.default.createElement($.StreamConditionProvider,null,m.default.createElement(q.MysqlConditionProvider,null,m.default.createElement(R.MetricConditionProvider,null,m.default.createElement(V.PublicLogConditionProvider,null,m.default.createElement(C.TrackingConditionProvider,null,m.default.createElement(L.FeatureConditionProvider,null,m.default.createElement(y.DataeConditionProvider,null,m.default.createElement(t.DataSearchContent,null)))))))))))},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=a(30),r=l(a(118)),u=l(a(4)),s=a(26),o=a(120),d=a(97),c=a(89),m=a(412),f=l(a(320)),p=l(a(413)),_=n(a(0)),h=l(a(260)),g=a(19),E=a(329),b=a(2254),v=a(539),y=a(2255),T=l(a(1216));t.Datae=()=>{const{setDataeCount:e}=_.useContext(E.CountsDispatchContext),{params:a}=_.useContext(v.DataeStateContext),{setPageCurrent:l,setPageSize:n}=_.useContext(v.DataeDispatchContext),{inputTokens:u,DataeData:o,DataeTableLoading:d,DataeErrorMessage:m,DataeTotal:f,setData:p}=b.UseDataeSearch(a),h=c.useShowTotal();return _.useEffect(()=>{d||null===f||e(f)},[e,f,d]),_.default.createElement("div",null,_.default.createElement(y.DataeFilter,{total:f}),_.default.createElement(r.default,{spinning:d},m?_.default.createElement("div",{className:T.default.error},m):(null==o?void 0:o.length)?_.default.createElement("div",{className:T.default.tableList},_.default.createElement("div",{className:T.default.tableList},null==o?void 0:o.map(e=>_.default.createElement(t.DataeItem,{key:`${e.uri} ${Math.random().toString(36).substr(2)}_${Date.now()}`,keywords:u,item:e,DataeData:o,setData:p}))),_.default.createElement("div",{className:T.default.pagination},_.default.createElement(s.Pagination,{showTotal:h,showSizeChanger:!0,showQuickJumper:!0,pageSize:a.pageSize,current:a.pageCurrent,onShowSizeChange:(e,t)=>{n(t),i.updateQuery({pageSize:10!==t?t:null})},onChange:e=>{l(e),i.updateQuery({pageCurrent:e>1?e:null})},total:f}))):_.default.createElement("div",{className:T.default.tableList},_.default.createElement("div",{className:T.default.tableList},_.default.createElement(s.Empty,{style:{padding:"50px 0"},image:s.Empty.PRESENTED_IMAGE_SIMPLE})))))},t.DataeItem=e=>{var t,a;const{keywords:l,item:n,DataeData:i,setData:r}=e,{t:c}=g.useTranslation();return _.default.createElement("div",{className:T.default.item,key:n.id},_.default.createElement("div",{className:T.default.mainContent},_.default.createElement("div",{className:T.default.name},_.default.createElement(d.ExternalLink,{className:T.default.text,href:"/detail/datae?uri="+n.uri,withReferrer:!0},_.default.createElement(h.default,{searchWords:l,highlightClassName:T.default.highlighter,autoEscape:!0,textToHighlight:""+n.name}))),_.default.createElement("div",{className:T.default.metaContent},_.default.createElement("div",{className:T.default.line},_.default.createElement("div",{className:u.default(T.default.item,T.default.description)},_.default.createElement("span",{className:T.default.value,style:{color:"#999999"}},_.default.createElement(h.default,{searchWords:l,highlightClassName:T.default.highlighter,autoEscape:!0,textToHighlight:""+(n.description||"")})))),_.default.createElement("div",{className:T.default.line},_.default.createElement("div",{className:u.default(T.default.item,T.default.id)},_.default.createElement("span",{className:T.default.label},c("detail:报表ID"),":"),_.default.createElement("span",{className:T.default.value},n.id||"-")),_.default.createElement("div",{className:u.default(T.default.item,T.default.project)},_.default.createElement("span",{className:T.default.label},c("detail:数易项目"),":"),_.default.createElement(s.Tooltip,{placement:"topLeft",title:(null===(t=n.project)||void 0===t?void 0:t.length)>20?n.project:""},_.default.createElement("span",{className:T.default.value},_.default.createElement(h.default,{searchWords:l,highlightClassName:T.default.highlighter,autoEscape:!0,textToHighlight:""+(n.project||"-")})))),_.default.createElement("div",{className:u.default(T.default.item,T.default.owner)},_.default.createElement(h.default,{className:T.default.label,searchWords:l,highlightClassName:T.default.highlighter,autoEscape:!0,textToHighlight:c("detail:负责人")+":"}),n.owner?_.default.createElement("div",{className:T.default.dataOwnerItem,key:n.owner.account},_.default.createElement(s.Tooltip,{title:n.owner.name},_.default.createElement(_.default.Fragment,null,_.default.createElement(o.DChat,{className:u.default(T.default.value),user:n.owner}))),(null===(a=n.communicateCount)||void 0===a?void 0:a.account)&&_.default.createElement(m.ZanActive,{owner:n.owner,count:n.communicateCount.count,active:n.communicateCount.isAdd,onClick:e=>{i.forEach(t=>{t.communicateCount.account==n.communicateCount.account&&(console.log("=====> datae"),t.communicateCount.count=e.count,t.communicateCount.isAdd=e.isAdd)}),r(p.default.cloneDeep(i))}})):""),_.default.createElement("div",{className:u.default(T.default.item,T.default.createTime)},_.default.createElement("span",{className:T.default.label},c("detail:创建时间"),":"),_.default.createElement("span",{className:T.default.value},f.default(n.createTime).format("YYYY-MM-DD HH:mm:ss")||"-"))),_.default.createElement("div",{className:T.default.line},_.default.createElement("div",{className:u.default(T.default.item,T.default.updateTime)},_.default.createElement("span",{className:T.default.label},c("detail:更新时间"),":"),_.default.createElement("span",{className:T.default.value},f.default(n.updateTime).format("YYYY-MM-DD HH:mm:ss")||"-")),_.default.createElement("div",{className:u.default(T.default.item,T.default.subRep)},_.default.createElement("span",{className:T.default.label},c("detail:子报表"),":"),_.default.createElement(s.Tooltip,{placement:"topLeft",title:""+n.subRep.join("，")},_.default.createElement("span",{className:u.default(T.default.value,T.default.hidden)},_.default.createElement(h.default,{searchWords:l,highlightClassName:T.default.highlighter,autoEscape:!0,textToHighlight:""+n.subRep.join("，")})||"-")))))),_.default.createElement("div",{className:T.default.extra}))}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const l=a(142),n=a(0),i=a(175);t.UseDataeSearch=(e=null)=>{const{keyword:t,isDatae:a}=n.useContext(i.SearchContext),[r,u]=n.useState(!0),[s,o]=n.useState(""),[d,c]=n.useState([]),[m,f]=n.useState([]),[p,_]=n.useState(null);return n.useEffect(()=>{if(!a)return;let n=!1;return(async()=>{try{o("");const{inputTokens:a,records:i,total:r}=await l.v1SearchApi.searchDatae({...e,pageFilter:{...e.pageFilter,keyword:t}});if(n)return;f(a||[]),c(i),_(r)}catch(e){if(n)return;o(e.message)}u(!1)})(),()=>n=!0},[e,t,a,e.md5]),{inputTokens:m,DataeData:d,DataeTotal:p,DataeTableLoading:r,DataeErrorMessage:s,setData:c}}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=l(a(189)),r=l(a(154)),u=a(30),s=l(a(4)),o=a(26),d=a(199),c=n(a(0)),m=a(19),f=a(540),p=a(539),_=l(a(1216));t.DataeFilter=e=>{const{params:t}=c.useContext(p.DataeStateContext),{updateParams:a,setPageCurrent:l}=c.useContext(p.DataeDispatchContext),{t:n}=m.useTranslation(),h=[{label:n("search:我浏览过的"),value:"isRecent"},{label:n("search:我收藏的"),value:"isFav"},{label:n("search:我有权限的"),value:"isAuth"},{label:n("search:我负责的"),value:"isOwner"}],g=c.useMemo(()=>{const e=[];for(const a of f.OPTION_KEYS)t.pageFilter[a]&&e.push(a);return e},[t]);return c.default.createElement("div",{className:_.default.filterOptions},c.default.createElement("div",{className:_.default.sort},c.default.createElement("div",{className:_.default.list},c.default.createElement("span",{"auto-track-click":JSON.stringify({e:"stream-detail",attrs:{composite:"综合排序"}}),className:s.default({[_.default.active]:!0}),onClick:()=>{l(1),u.updateQuery({sort:null,pageNum:null})}},n("search:综合排序"))),c.default.createElement("div",{className:_.default.pageWrapper},c.default.createElement(i.default,{className:s.default({[_.default.disabled]:t.pageCurrent<=1}),onClick:()=>{if(t.pageCurrent>1){const e=t.pageCurrent-1;u.updateQuery({pageCurrent:e}),l(e)}}}),c.default.createElement("div",{className:_.default.page},c.default.createElement("span",{className:_.default.current},t.pageCurrent),c.default.createElement("span",null,"/"),c.default.createElement("span",null,e.total&&t.pageSize?u.humanNum(Math.ceil(e.total/t.pageSize),{useGrouping:!0}):"-")),c.default.createElement(r.default,{className:s.default({[_.default.disabled]:t.pageCurrent>=Math.ceil(e.total/t.pageSize)}),onClick:()=>{if(t.pageCurrent<Math.ceil(e.total/t.pageSize)){const e=t.pageCurrent+1;u.updateQuery({pageCurrent:e}),l(e)}}}))),c.default.createElement(o.Checkbox.Group,{options:h,value:g,onChange:e=>{const n={},i={pageCurrent:null};for(const t of f.OPTION_KEYS)n[t]=e.includes(t),i[`${t}_${d.SearchType.DATAE}`]=e.includes(t)?"true":null;a({pageFilter:{...t.pageFilter,...n}}),u.updateQuery(i),l(1)}}))}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=l(a(121)),r=l(a(129)),u=l(a(221)),s=a(30),o=l(a(4)),d=a(26),c=n(a(0)),m=a(19),f=l(a(281)),p=a(540),_=a(539);t.Tag=e=>{const{count:t,selected:a=!1}=e;let l=e.name;return t&&(l=`${l}(${t})`),c.default.createElement("span",{onClick:e.onClick,className:o.default(f.default.tag,{[e.classNames]:e.classNames,[f.default.selected]:a})},l)},t.DataeAggregation=()=>{const{t:e}=m.useTranslation(),{params:{pageFilter:a,pageFilter:{project:l,owner:n,labelIdList:r}}}=c.useContext(_.DataeStateContext),{updateParams:u,dispatchParams:o}=c.useContext(_.DataeDispatchContext),{aggregation:h,loading:g}=c.useContext(_.DataeAggregationContext);return c.default.createElement("div",{className:f.default.conditionWrapper},c.default.createElement("div",{className:f.default.condition},c.default.createElement("div",{className:f.default.filter},c.default.createElement("div",{className:f.default.title},c.default.createElement("span",{className:f.default.text},e("search:筛选条件")),c.default.createElement(d.Button,{className:f.default.actionReset,type:"link",icon:c.default.createElement(d.IconFont,{type:"icon-delete"}),size:"small",onClick:()=>{const e={keyword:null,sort:null,pageSize:null};for(const t of p.OPTION_KEYS)e[t]=null;s.updateQuery(e),o({type:p.DATAE_ACTION_TYPES.RESET})}},e("重置"))),c.default.createElement("div",{className:f.default.filterContent},l&&h.projectList.map(e=>{if(e.projectName==l)return c.default.createElement("div",{key:e.projectName,className:f.default.filterTag},c.default.createElement("span",{className:f.default.text},e.projectName),c.default.createElement(i.default,{onClick:()=>{u({pageFilter:{...a,project:null,labelIdList:[]}})}}))}),r&&h.labelList.map(e=>{if(r.includes(e.id))return c.default.createElement("div",{key:e.id,className:f.default.filterTag},c.default.createElement("span",{className:f.default.text},e.value),c.default.createElement(i.default,{onClick:()=>{u({pageFilter:{...a,labelIdList:r.filter(t=>t!=e.id)}})}}))}),n&&h.ownerList.map(e=>{if(e.userAccount==n)return c.default.createElement("div",{key:e.userAccount,className:f.default.filterTag},c.default.createElement("span",{className:f.default.text},e.userName),c.default.createElement(i.default,{onClick:()=>{u({pageFilter:{...a,owner:null}})}}))}))),c.default.createElement(d.Spin,{spinning:g},c.default.createElement(t.ProjectList,null),c.default.createElement(t.LabelList,null),c.default.createElement(t.Owner,null))))},t.ProjectList=()=>{var e;const{t:a}=m.useTranslation(),{aggregation:l}=c.useContext(_.DataeAggregationContext),{updateParams:n,setPageCurrent:i}=c.useContext(_.DataeDispatchContext),[d,p]=c.useState(!1),[h,g]=c.useState(12),{params:E}=c.useContext(_.DataeStateContext),b=l.projectList,v=c.useMemo(()=>b.slice(0,h),[b,h]),y=b.reduce((e,t)=>e+t.count,0),T=null!==(e=null==b?void 0:b.length)&&void 0!==e?e:0;return T?c.default.createElement("div",{className:o.default(f.default.searchBlock,{[f.default.fold]:d})},c.default.createElement("div",{className:f.default.blockTitle,onClick:()=>p(!d)},c.default.createElement(t.Tag,{classNames:f.default.text,name:a("detail:所属项目"),count:y}),d?c.default.createElement(u.default,null):c.default.createElement(r.default,null)),d?null:c.default.createElement(c.default.Fragment,null,c.default.createElement("div",{className:f.default.blockContent},v.map(e=>{const a=E.pageFilter.project==e.projectName;return c.default.createElement(t.Tag,{name:e.projectName,count:e.count,key:e.projectName,selected:a,onClick:async()=>{n(a?{pageFilter:{...E.pageFilter,project:null,labelIdList:[]}}:{pageFilter:{...E.pageFilter,project:e.projectName}}),i(1),s.updateQuery({pageCurrent:null})}})})),h<T?c.default.createElement("div",{className:f.default.showMore,onClick:()=>g(h+20)},c.default.createElement("div",{className:f.default.action},c.default.createElement("span",{className:f.default.text},a("查看更多")),c.default.createElement(r.default,null))):null)):null},t.LabelList=()=>{var e,a;const{t:l}=m.useTranslation(),{aggregation:n}=c.useContext(_.DataeAggregationContext),{updateParams:i,setPageCurrent:d}=c.useContext(_.DataeDispatchContext),[p,h]=c.useState(!1),[g,E]=c.useState(20),{params:b}=c.useContext(_.DataeStateContext),v=n.labelList,y=c.useMemo(()=>v.slice(0,g),[v,g]),T=v.reduce((e,t)=>e+t.count,0),N=null!==(e=null==v?void 0:v.length)&&void 0!==e?e:0;return N&&(null===(a=null==b?void 0:b.pageFilter)||void 0===a?void 0:a.project)?c.default.createElement("div",{className:o.default(f.default.searchBlock,{[f.default.fold]:p})},c.default.createElement("div",{className:f.default.blockTitle,onClick:()=>h(!p)},c.default.createElement(t.Tag,{classNames:f.default.text,name:l("common:标签"),count:T}),p?c.default.createElement(u.default,null):c.default.createElement(r.default,null)),p?null:c.default.createElement(c.default.Fragment,null,c.default.createElement("div",{className:f.default.blockContent},y.map(e=>{var a,l;const n=null===(l=null===(a=b.pageFilter)||void 0===a?void 0:a.labelIdList)||void 0===l?void 0:l.includes(e.id);return c.default.createElement(t.Tag,{name:e.value,count:e.count,key:e.id,selected:n,onClick:async()=>{var t,a,l,r;i(n?{pageFilter:{...b.pageFilter,labelIdList:null===(t=b.pageFilter)||void 0===t?void 0:t.labelIdList.filter(t=>t!==e.id),labelList:null===(a=b.pageFilter)||void 0===a?void 0:a.labelList.filter(t=>t!==e.value)}}:{pageFilter:{...b.pageFilter,labelIdList:[...null===(l=b.pageFilter)||void 0===l?void 0:l.labelIdList,e.id],labelList:[...null===(r=b.pageFilter)||void 0===r?void 0:r.labelList,e.value]}}),d(1),s.updateQuery({pageNum:null})}})})),g<N?c.default.createElement("div",{className:f.default.showMore,onClick:()=>E(g+20)},c.default.createElement("div",{className:f.default.action},c.default.createElement("span",{className:f.default.text},l("查看更多")),c.default.createElement(r.default,null))):null)):null},t.Owner=()=>{var e;const{t:a}=m.useTranslation(),{aggregation:l}=c.useContext(_.DataeAggregationContext),{updateParams:n,setPageCurrent:i}=c.useContext(_.DataeDispatchContext),[d,p]=c.useState(!1),[h,g]=c.useState(20),{params:E}=c.useContext(_.DataeStateContext),b=l.ownerList,v=c.useMemo(()=>b.slice(0,h),[b,h]),y=b.reduce((e,t)=>e+t.count,0),T=null!==(e=null==b?void 0:b.length)&&void 0!==e?e:0;return T?c.default.createElement("div",{className:o.default(f.default.searchBlock,{[f.default.fold]:d})},c.default.createElement("div",{className:f.default.blockTitle,onClick:()=>p(!d)},c.default.createElement(t.Tag,{classNames:f.default.text,name:a("detail:责任人"),count:y}),d?c.default.createElement(u.default,null):c.default.createElement(r.default,null)),d?null:c.default.createElement(c.default.Fragment,null,c.default.createElement("div",{className:f.default.blockContent},v.map(e=>{const a=E.pageFilter.owner==e.userAccount;return c.default.createElement(t.Tag,{name:e.userName,count:e.count,key:e.userAccount,selected:a,onClick:async()=>{n(a?{pageFilter:{...E.pageFilter,owner:null}}:{pageFilter:{...E.pageFilter,owner:e.userAccount}}),i(1),s.updateQuery({pageCurrent:null})}})})),h<T?c.default.createElement("div",{className:f.default.showMore,onClick:()=>g(h+20)},c.default.createElement("div",{className:f.default.action},c.default.createElement("span",{className:f.default.text},a("查看更多")),c.default.createElement(r.default,null))):null)):null}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=a(30),r=l(a(118)),u=l(a(4)),s=a(26),o=a(120),d=a(97),c=a(89),m=a(412),f=l(a(413)),p=n(a(0)),_=l(a(260)),h=a(19),g=a(329),E=a(2258),b=a(541),v=a(2259),y=l(a(1217));t.EventTracking=()=>{const{setEventTrackingCount:e}=p.useContext(g.CountsDispatchContext),a=p.useContext(b.TrackingStateContext),{setPageNum:l,setPageSize:n}=p.useContext(b.TrackingDispatchContext),{inputTokens:u,TrackingTables:o,TrackingTableLoading:d,TrackingTableErrorMessage:m,TrackingTableTotal:f,setData:_}=E.UseTrackingSearch(a),h=c.useShowTotal();return p.useEffect(()=>{d||null===f||e(f)},[e,f,d]),p.default.createElement("div",null,p.default.createElement(v.TrackingTableFilter,{total:f}),p.default.createElement(r.default,{spinning:d},m?p.default.createElement("div",{className:y.default.error},m):(null==o?void 0:o.length)?p.default.createElement("div",{className:y.default.tableList},p.default.createElement("div",{className:y.default.tableList},null==o?void 0:o.map((e,a)=>p.default.createElement(t.TrackingTableItem,{key:""+e.pointId,keywords:u,index:a,item:e,TrackingTables:o,setData:_}))),p.default.createElement("div",{className:y.default.pagination},p.default.createElement(s.Pagination,{showTotal:h,showSizeChanger:!0,showQuickJumper:!0,pageSize:a.pageSize,current:a.pageCurrent,onShowSizeChange:(e,t)=>{n(t),i.updateQuery({pageSize:10!==t?t:null})},onChange:e=>{l(e),i.updateQuery({pageNum:e>1?e:null})},total:f}))):p.default.createElement("div",{className:y.default.tableList},p.default.createElement("div",{className:y.default.tableList},p.default.createElement(s.Empty,{style:{padding:"50px 0"},image:s.Empty.PRESENTED_IMAGE_SIMPLE})))))},t.ToOmegaUrl=e=>{let t="omega.xiaojukeji.com";return i.isPre&&(t="omega-test.intra.xiaojukeji.com"),i.isEast&&(t="omega.intra.didiglobal.com"),i.isRussia&&(t="omega-ru.intra.didiglobal.com"),`http://${t}/ba/point/detail?pointId=${e}`},t.TrackingTableItem=e=>{var a,l;const{keywords:n,item:i,TrackingTables:r,setData:c}=e,{t:g}=h.useTranslation();return p.default.createElement("div",{className:y.default.item,key:""+i.pointId},p.default.createElement("div",{className:y.default.mainContent},p.default.createElement("div",{className:y.default.name},p.default.createElement(d.ExternalLink,{className:y.default.text,href:t.ToOmegaUrl(i.pointId),withReferrer:!0},p.default.createElement(_.default,{searchWords:n,highlightClassName:y.default.highlighter,autoEscape:!0,textToHighlight:""+i.omegaKey}),i.isCertification&&p.default.createElement(s.Tooltip,{title:g("detail:业务负责人或分析师已认证，推荐使用该埋点。")},p.default.createElement(s.IconFont,{type:"icon-yirenzheng2x",style:{fontSize:"22px"}})))),p.default.createElement("div",{className:y.default.metaContent},p.default.createElement("div",{className:y.default.line},p.default.createElement("div",{className:u.default(y.default.item),style:{width:"500px"}},p.default.createElement("span",{className:y.default.value,style:{color:"#999999"}},p.default.createElement(_.default,{searchWords:n,highlightClassName:y.default.highlighter,autoEscape:!0,textToHighlight:""+(i.omegaNameCN?i.omegaNameCN:"")})))),p.default.createElement("div",{className:y.default.line},p.default.createElement("div",{className:u.default(y.default.item,y.default.apps)},p.default.createElement("span",{className:y.default.label},g("detail:应用")," ",p.default.createElement(s.Tooltip,{title:g("detail:目前共Android、IOS、H5、微信小程序、支付宝小程序和快应用6种")},p.default.createElement(s.IconFont,{className:"action",type:"icon-question",style:{color:"#D9D9D9"}})),":"),p.default.createElement("span",{className:u.default(y.default.value)},p.default.createElement(e=>{var t,a,l,n,i;return p.default.createElement(p.default.Fragment,null,(null===(t=e.apps)||void 0===t?void 0:t.includes("wechat"))?p.default.createElement(s.Tooltip,{title:g("detail:wechat")},p.default.createElement(s.IconFont,{type:"icon-xiaochengxu"})):null,(null===(a=e.apps)||void 0===a?void 0:a.includes("web"))?p.default.createElement(s.Tooltip,{title:g("detail:web")},p.default.createElement(s.IconFont,{style:{transform:"scale(1.7) translateX(3px)"},type:"icon-HTML"})):null,(null===(l=e.apps)||void 0===l?void 0:l.includes("ios"))?p.default.createElement(s.Tooltip,{title:g("detail:ios")},p.default.createElement(s.IconFont,{type:"icon-ios"})):null,(null===(n=e.apps)||void 0===n?void 0:n.includes("android"))?p.default.createElement(s.Tooltip,{title:g("detail:android")},p.default.createElement(s.IconFont,{type:"icon-android"})):null,(null===(i=e.apps)||void 0===i?void 0:i.includes("alipay"))?p.default.createElement(s.Tooltip,{title:g("detail:alipay")},p.default.createElement(s.IconFont,{type:"icon-zhifubaoxiaochengxu",style:{fontSize:"15px",transform:"scale(1.3) translate3d(3px, 1px, 10px)"}})):null)},{apps:i.apps}))),p.default.createElement("div",{className:u.default(y.default.item,y.default.businessLine)},p.default.createElement("span",{className:y.default.label},g("detail:业务线"),":"),p.default.createElement("span",{className:y.default.value},i.businessLine||"-")),p.default.createElement("div",{className:u.default(y.default.item,y.default.dataOwner)},p.default.createElement(_.default,{className:y.default.label,searchWords:n,highlightClassName:y.default.highlighter,autoEscape:!0,textToHighlight:g("detail:业务负责人")+":"}),i.owner?p.default.createElement("div",{className:y.default.dataOwnerItem,key:i.owner.account},p.default.createElement(o.DChat,{className:y.default.value,user:i.owner}),(null===(a=i.communicateCount)||void 0===a?void 0:a.account)&&p.default.createElement(m.ZanActive,{owner:i.owner,count:i.communicateCount.count,active:i.communicateCount.isAdd,onClick:e=>{r.forEach(t=>{t.communicateCount.account==i.communicateCount.account&&(t.communicateCount.count=e.count,t.communicateCount.isAdd=e.isAdd)}),c(f.default.cloneDeep(r))}})):"-"),p.default.createElement("div",{className:u.default(y.default.item,y.default.omegaStatus)},p.default.createElement("span",{className:y.default.label},g("detail:埋点状态"),":"),p.default.createElement("span",{className:y.default.value},p.default.createElement(_.default,{searchWords:n,highlightClassName:y.default.highlighter,autoEscape:!0,textToHighlight:""+(["","未发布","已发布","已废弃"][i.omegaStatus]||"-")})))),p.default.createElement("div",{className:y.default.line},p.default.createElement("div",{className:u.default(y.default.item,y.default.omegaLevel)},p.default.createElement("span",{className:y.default.label},g("detail:埋点等级"),":"),p.default.createElement("span",{className:y.default.value},["","T1-核心","T2-认证","T3-普通"][i.omegaLevel])),p.default.createElement("div",{className:u.default(y.default.item,y.default.omegaDesc)},p.default.createElement("span",{className:y.default.label},g("detail:描述"),":"),p.default.createElement("span",{className:y.default.value},p.default.createElement(s.Tooltip,{placement:"topLeft",title:(null===(l=i.omegaDesc)||void 0===l?void 0:l.length)>56?i.omegaDesc:""},p.default.createElement(_.default,{searchWords:n,highlightClassName:u.default(y.default.highlighter),autoEscape:!0,textToHighlight:""+(i.omegaDesc||"-")}))))))),p.default.createElement("div",{className:y.default.extra}))}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const l=a(142),n=a(0),i=a(175);t.UseTrackingSearch=e=>{const{keyword:t,isTracking:a}=n.useContext(i.SearchContext),[r,u]=n.useState(!0),[s,o]=n.useState(""),[d,c]=n.useState([]),[m,f]=n.useState([]),[p,_]=n.useState(null);return n.useEffect(()=>{if(!a)return;let n=!1;return(async()=>{e.pageCurrent=e.pageNum,delete e.pageNum,u(!0);try{o("");const{records:a,total:i,inputTokens:r}=await l.v1SearchApi.searchTracking({...e,pageFilter:{...null==e?void 0:e.pageFilter,keyword:t}});if(n)return;f(r||[]),c(a),_(i)}catch(e){if(n)return;o(e.message)}u(!1)})(),()=>n=!0},[e,t,a,e.md5]),{inputTokens:m,TrackingTables:d,TrackingTableTotal:p,TrackingTableLoading:r,TrackingTableErrorMessage:s,setData:c}}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=l(a(189)),r=l(a(154)),u=a(30),s=l(a(4)),o=n(a(0)),d=a(19),c=a(541),m=l(a(1217));t.TrackingTableFilter=e=>{const{pageSize:t,pageCurrent:a}=o.useContext(c.TrackingStateContext),{setPageNum:l}=o.useContext(c.TrackingDispatchContext),{t:n}=d.useTranslation();return o.default.createElement("div",{className:m.default.filterOptions},o.default.createElement("div",{className:m.default.sort},o.default.createElement("div",{className:m.default.list},o.default.createElement("span",{"auto-track-click":JSON.stringify({e:"stream-detail",attrs:{composite:"综合排序"}}),className:s.default({[m.default.active]:!0})},n("search:综合排序"))),o.default.createElement("div",{className:m.default.pageWrapper},o.default.createElement(i.default,{className:s.default({[m.default.disabled]:a<=1}),onClick:()=>{if(a>1){const e=a-1;u.updateQuery({pageNum:e}),l(e)}}}),o.default.createElement("div",{className:m.default.page},o.default.createElement("span",{className:m.default.current},a||"-"),o.default.createElement("span",null,"/"),o.default.createElement("span",null,e.total&&t?u.humanNum(Math.ceil(e.total/t),{useGrouping:!0}):"-")),o.default.createElement(r.default,{className:s.default({[m.default.disabled]:a>=Math.ceil(e.total/t)}),onClick:()=>{if(a<Math.ceil(e.total/t)){const e=a+1;u.updateQuery({pageNum:e}),l(e)}}}))))}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=l(a(121)),r=l(a(129)),u=l(a(221)),s=a(30),o=l(a(4)),d=a(26),c=n(a(0)),m=a(19),f=l(a(281)),p=a(774),_=a(541);t.Tag=e=>{const{count:t,selected:a=!1}=e;let l=e.name;return t&&(l=`${l}(${t})`),c.default.createElement("span",{onClick:e.onClick,className:o.default(f.default.tag,{[e.classNames]:e.classNames,[f.default.selected]:a})},l)},t.TrackingAggregation=()=>{const{t:e}=m.useTranslation(),{pageFilter:a,pageFilter:{businessLine:l,appGroupId:n,omegaStatus:r}}=c.useContext(_.TrackingStateContext),{updateParams:u,dispatchParams:o}=c.useContext(_.TrackingDispatchContext),{aggregation:h,loading:g}=c.useContext(_.TrackingAggregationContext);return c.default.createElement("div",{className:f.default.conditionWrapper},c.default.createElement("div",{className:f.default.condition},c.default.createElement("div",{className:f.default.filter},c.default.createElement("div",{className:f.default.title},c.default.createElement("span",{className:f.default.text},e("search:筛选条件")),c.default.createElement(d.Button,{className:f.default.actionReset,type:"link",icon:c.default.createElement(d.IconFont,{type:"icon-delete"}),size:"small",onClick:()=>{s.updateQuery({keyword:null,pageCurrent:null,pageSize:null}),o({type:p.TRACKING_ACTION_TYPES.RESET})}},e("重置"))),c.default.createElement("div",{className:f.default.filterContent},l&&h.businessLineAggResult.map(e=>{if(e.id==l)return c.default.createElement("div",{key:e.id,className:f.default.filterTag},c.default.createElement("span",{className:f.default.text},e.name),c.default.createElement(i.default,{onClick:()=>{u({pageFilter:{...a,businessLine:null}})}}))}),n&&h.appGroupAggResult.map(e=>{if(e.id==n)return c.default.createElement("div",{key:e.id,className:f.default.filterTag},c.default.createElement("span",{className:f.default.text},e.name),c.default.createElement(i.default,{onClick:()=>{u({pageFilter:{...a,appGroupId:null}})}}))}),r&&h.omegaStatusAggResult.map(e=>{if(e.id==r)return c.default.createElement("div",{key:e.id,className:f.default.filterTag},c.default.createElement("span",{className:f.default.text},e.name),c.default.createElement(i.default,{onClick:()=>{u({pageFilter:{...a,omegaStatus:null}})}}))}))),c.default.createElement(d.Spin,{spinning:g},c.default.createElement(t.BusinessLine,null),c.default.createElement(t.AppGroupId,null),c.default.createElement(t.OmegaStatus,null))))},t.BusinessLine=()=>{var e;const{t:a}=m.useTranslation(),{aggregation:l}=c.useContext(_.TrackingAggregationContext),{updateParams:n,setPageNum:i}=c.useContext(_.TrackingDispatchContext),[d,p]=c.useState(!1),[h,g]=c.useState(20),{pageFilter:E,pageFilter:{businessLine:b}}=c.useContext(_.TrackingStateContext),v=l.businessLineAggResult,y=c.useMemo(()=>v.slice(0,h),[v,h]),T=v.reduce((e,t)=>e+t.count,0),N=null!==(e=null==v?void 0:v.length)&&void 0!==e?e:0;return N?c.default.createElement("div",{className:o.default(f.default.searchBlock,{[f.default.fold]:d})},c.default.createElement("div",{className:f.default.blockTitle,onClick:()=>p(!d)},c.default.createElement(t.Tag,{classNames:f.default.text,name:a("detail:业务线"),count:T}),d?c.default.createElement(u.default,null):c.default.createElement(r.default,null)),d?null:c.default.createElement(c.default.Fragment,null,c.default.createElement("div",{className:f.default.blockContent},y.map(e=>{const a=e.id==b;return c.default.createElement(t.Tag,{name:e.name,count:e.count,key:e.id,selected:a,onClick:()=>{n(a?{...E,businessLine:null}:{pageFilter:{...E,businessLine:String(e.id)}}),i(1),s.updateQuery({pageNum:null})}})})),h<N?c.default.createElement("div",{className:f.default.showMore,onClick:()=>g(h+20)},c.default.createElement("div",{className:f.default.action},c.default.createElement("span",{className:f.default.text},a("查看更多")),c.default.createElement(r.default,null))):null)):null},t.AppGroupId=()=>{var e;const{t:a}=m.useTranslation(),{aggregation:l}=c.useContext(_.TrackingAggregationContext),{updateParams:n,setPageNum:i}=c.useContext(_.TrackingDispatchContext),[d,p]=c.useState(!1),[h,g]=c.useState(20),{pageFilter:E,pageFilter:{appGroupId:b}}=c.useContext(_.TrackingStateContext),v=l.appGroupAggResult,y=c.useMemo(()=>v.slice(0,h),[v,h]),T=v.reduce((e,t)=>e+t.count,0),N=null!==(e=null==v?void 0:v.length)&&void 0!==e?e:0;return N?c.default.createElement("div",{className:o.default(f.default.searchBlock,{[f.default.fold]:d})},c.default.createElement("div",{className:f.default.blockTitle,onClick:()=>p(!d)},c.default.createElement(t.Tag,{classNames:f.default.text,name:a("detail:应用组"),count:T}),d?c.default.createElement(u.default,null):c.default.createElement(r.default,null)),d?null:c.default.createElement(c.default.Fragment,null,c.default.createElement("div",{className:f.default.blockContent},y.map(e=>{const a=e.id==b;return c.default.createElement(t.Tag,{name:e.name,count:e.count,key:e.id,selected:a,onClick:()=>{n(a?{...E,appGroupId:null}:{pageFilter:{...E,appGroupId:String(e.id)}}),i(1),s.updateQuery({pageNum:null})}})})),h<N?c.default.createElement("div",{className:f.default.showMore,onClick:()=>g(h+20)},c.default.createElement("div",{className:f.default.action},c.default.createElement("span",{className:f.default.text},a("查看更多")),c.default.createElement(r.default,null))):null)):null},t.OmegaStatus=()=>{var e;const{t:a}=m.useTranslation(),{aggregation:l}=c.useContext(_.TrackingAggregationContext),{updateParams:n,setPageNum:i}=c.useContext(_.TrackingDispatchContext),[d,p]=c.useState(!1),[h,g]=c.useState(20),{pageFilter:E,pageFilter:{omegaStatus:b}}=c.useContext(_.TrackingStateContext),v=l.omegaStatusAggResult,y=c.useMemo(()=>v.slice(0,h),[v,h]),T=v.reduce((e,t)=>e+t.count,0),N=null!==(e=null==v?void 0:v.length)&&void 0!==e?e:0;return N?c.default.createElement("div",{className:o.default(f.default.searchBlock,{[f.default.fold]:d})},c.default.createElement("div",{className:f.default.blockTitle,onClick:()=>p(!d)},c.default.createElement(t.Tag,{classNames:f.default.text,name:a("detail:埋点状态"),count:T}),d?c.default.createElement(u.default,null):c.default.createElement(r.default,null)),d?null:c.default.createElement(c.default.Fragment,null,c.default.createElement("div",{className:f.default.blockContent},y.map(e=>{const a=e.id==b;return c.default.createElement(t.Tag,{name:e.name,count:e.count,key:e.id,selected:a,onClick:()=>{n(a?{...E,omegaStatus:null}:{pageFilter:{...E,omegaStatus:String(e.id)}}),i(1),s.updateQuery({pageNum:null})}})})),h<N?c.default.createElement("div",{className:f.default.showMore,onClick:()=>g(h+20)},c.default.createElement("div",{className:f.default.action},c.default.createElement("span",{className:f.default.text},a("查看更多")),c.default.createElement(r.default,null))):null)):null}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=a(30),r=l(a(118)),u=l(a(4)),s=a(26),o=a(120),d=a(97),c=a(89),m=l(a(412)),f=l(a(413)),p=n(a(0)),_=l(a(260)),h=a(19),g=a(329),E=a(175),b=a(2262),v=a(542),y=a(2263),T=l(a(2264)),N=l(a(2265)),S=l(a(2266)),C=l(a(2267)),x=l(a(2268)),w=l(a(2269)),I=l(a(543)),L=a(2270);t.Feature=()=>{const{setFeatureCount:e}=p.useContext(g.CountsDispatchContext),a=p.useContext(v.FeatureStateContext),{setPageCurrent:l,setPageSize:n}=p.useContext(v.FeatureDispatchContext),{inputTokens:u,FeatureTables:o,FeatureTableLoading:d,FeatureTableErrorMessage:m,FeatureTableTotal:f,setData:_}=b.UseTrackingSearch(a),h=c.useShowTotal();return p.useEffect(()=>{d||null===f||e(f)},[e,f,d]),p.default.createElement("div",null,p.default.createElement(y.FeatureTableFilter,{total:f}),p.default.createElement(r.default,{spinning:d},m?p.default.createElement("div",{className:I.default.error},m):(null==o?void 0:o.length)?p.default.createElement("div",{className:I.default.tableList},p.default.createElement("div",{className:I.default.tableList},null==o?void 0:o.map((e,a)=>p.default.createElement(t.FeatureTableItem,{key:""+e.featureId,keywords:u,index:a,item:e,FeatureTables:o,setData:_}))),p.default.createElement("div",{className:I.default.pagination},p.default.createElement(s.Pagination,{showTotal:h,showSizeChanger:!0,showQuickJumper:!0,pageSize:a.pageSize,current:a.pageCurrent,onShowSizeChange:(e,t)=>{n(t),i.updateQuery({pageSize:10!==t?t:null})},onChange:e=>{l(e),i.updateQuery({pageCurrent:e>1?e:null})},total:f}))):p.default.createElement("div",{className:I.default.tableList},p.default.createElement("div",{className:I.default.tableList},p.default.createElement(s.Empty,{style:{padding:"50px 0"},image:s.Empty.PRESENTED_IMAGE_SIMPLE})))))},t.ToFeatureExtraction=(e,t)=>{let a="fe.xiaojukeji.com";return i.isPre&&(a="fe-pre.xiaojukeji.com"),`https://${a}/#/featureExtract/featureExtraction?entityId=${e}&featureId=${t}`},t.ToFeatureService=(e,t)=>{let a="fe.xiaojukeji.com";return i.isPre&&(a="fe-pre.xiaojukeji.com"),`https://${a}/#/featureService/apply?entityId=${e}&featureId=${t}`},t.ToFeatureDetail=(e,t,a)=>{let l="fe.xiaojukeji.com";return i.isPre&&(l="fe-pre.xiaojukeji.com"),`https://${l}/#/featureView/featureStore?topicId=${e}&content=${a||t}`},t.QUALITY_LEVEL=[T.default,N.default,S.default,C.default,x.default,w.default],t.FeatureTableItem=e=>{var a,l;const{keyword:n}=p.useContext(E.SearchContext),{keywords:i,item:r,FeatureTables:c,setData:g}=e,{t:b}=h.useTranslation();return p.default.createElement("div",{className:I.default.item,key:""+r.featureName},p.default.createElement("div",{className:I.default.mainContent},p.default.createElement("div",{className:I.default.name},p.default.createElement("div",{className:u.default(I.default.icon,"REALTIME"==r.statusList[0]?I.default.on:I.default.off)},"REALTIME"==r.statusList[0]?b("实时"):b("离线")),p.default.createElement(d.ExternalLink,{className:I.default.text,href:t.ToFeatureDetail(r.featureId,n,r.featureName),withReferrer:!0},p.default.createElement(_.default,{searchWords:i,highlightClassName:I.default.highlighter,autoEscape:!0,textToHighlight:""+r.featureName})),p.default.createElement("div",{className:u.default(I.default.titleSub)},p.default.createElement("span",{className:I.default.label},b("detail:特征字段"),":"),p.default.createElement("span",{className:I.default.value},r.featureField||"-"))),p.default.createElement("div",{className:I.default.metaContent},p.default.createElement("div",{className:I.default.line},p.default.createElement("div",{className:u.default(I.default.item,I.default.featureComment)},p.default.createElement("span",{className:I.default.label},b("detail:备注"),":"),p.default.createElement(s.Tooltip,{placement:"topLeft",title:(null===(a=r.featureComment)||void 0===a?void 0:a.length)>65?r.featureComment:""},p.default.createElement("span",{className:I.default.value},r.featureComment||"-")))),p.default.createElement("div",{className:I.default.line},p.default.createElement("div",{className:u.default(I.default.item,I.default.businessLine)},p.default.createElement("span",{className:I.default.label},b("detail:业务线"),":"),p.default.createElement("span",{className:I.default.value},r.businessLines.map(e=>e)||"-")),p.default.createElement("div",{className:u.default(I.default.item,I.default.dataOwner)},p.default.createElement(_.default,{className:I.default.label,searchWords:i,highlightClassName:I.default.highlighter,autoEscape:!0,textToHighlight:b("detail:业务负责人")+":"}),r.owner?p.default.createElement("div",{className:I.default.dataOwnerItem,key:r.owner.account},p.default.createElement(o.DChat,{className:I.default.value,user:r.owner}),(null===(l=r.communicateCount)||void 0===l?void 0:l.account)&&p.default.createElement(m.default,{owner:r.owner,count:r.communicateCount.count,active:r.communicateCount.isAdd,onClick:e=>{c.forEach(t=>{t.communicateCount.account==r.communicateCount.account&&(t.communicateCount.count=e.count,t.communicateCount.isAdd=e.isAdd)}),g(f.default.cloneDeep(c))}})):"-"),p.default.createElement("div",{className:u.default(I.default.item,I.default.qualityLevel)},p.default.createElement("span",{className:I.default.label},b("common:质量等级"),p.default.createElement(s.Tooltip,{title:b("detail:综合特征产出周期、特征产出时间等方面对特征质量进行评估")},p.default.createElement(s.IconFont,{className:"action",type:"icon-question",style:{color:"#D9D9D9",fontSize:"14px",padding:" 0 4px"}})),":",p.default.createElement("span",{className:I.default.value}," ","LV",r.qualityLevel," ",p.default.createElement("img",{src:t.QUALITY_LEVEL[r.qualityLevel]}))))),p.default.createElement("div",{className:I.default.line},p.default.createElement("div",{className:u.default(I.default.item,I.default.dataType)},p.default.createElement("span",{className:I.default.label},b("detail:数据类型"),":"),p.default.createElement("span",{className:I.default.value},r.dataType||"-")),p.default.createElement("div",{className:u.default(I.default.item,I.default.defaultValue)},p.default.createElement("span",{className:I.default.label},b("detail:默认值"),":"),p.default.createElement("span",{className:I.default.value},r.defaultValue||"-")),p.default.createElement("div",{className:u.default(I.default.item,I.default.partitionUpdateCycle)},p.default.createElement("span",{className:I.default.label},b("detail:分区更新周期"),":"),p.default.createElement("span",{className:I.default.value},r.partitionUpdateCycle||"-",b("detail:天"))),p.default.createElement("div",{className:u.default(I.default.item,I.default.omegaDesc)},p.default.createElement("span",{className:I.default.label},b("detail:最新分区"),":"),p.default.createElement("span",{className:I.default.value},r.newestPartition||"-"))))),p.default.createElement("div",{className:I.default.extra}),p.default.createElement("div",{className:I.default.statistics},r.featureId&&""+r.entityId&&null!=r.entityId&&p.default.createElement("div",{className:u.default(I.default.item)},p.default.createElement("a",{href:t.ToFeatureExtraction(r.entityId,r.featureId),target:"_blank",rel:"noopener noreferrer"},b("detail:特征提取"))),r.featureId&&""+r.entityId&&null!=r.entityId&&p.default.createElement("div",{className:u.default(I.default.item)},p.default.createElement("a",{href:t.ToFeatureService(r.entityId,r.featureId),target:"_blank",rel:"noopener noreferrer"},b("detail:特征服务"))),p.default.createElement("div",{className:u.default(I.default.item)}," ",p.default.createElement(L.Distribution,{id:r.featureId})," ")))}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const l=a(142),n=a(0),i=a(175);t.UseTrackingSearch=e=>{const{keyword:t,isFeature:a}=n.useContext(i.SearchContext),[r,u]=n.useState(!0),[s,o]=n.useState(""),[d,c]=n.useState([]),[m,f]=n.useState([]),[p,_]=n.useState(null);return n.useEffect(()=>{if(!a)return;let n=!1;return(async()=>{u(!0);try{o("");const{records:a,total:i,inputTokens:r}=await l.v1SearchApi.searchFeature({...e,pageFilter:{...e.pageFilter,keyword:t}});if(n)return;f(r||[]),c(a),_(i)}catch(e){if(n)return;o(e.message)}u(!1)})(),()=>n=!0},[e,t,a,e.md5]),{inputTokens:m,FeatureTables:d,FeatureTableTotal:p,FeatureTableLoading:r,FeatureTableErrorMessage:s,setData:c}}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=l(a(189)),r=l(a(154)),u=a(30),s=l(a(4)),o=n(a(0)),d=a(19),c=a(542),m=l(a(543));t.FeatureTableFilter=e=>{const{pageSize:t,pageCurrent:a}=o.useContext(c.FeatureStateContext),{setPageCurrent:l}=o.useContext(c.FeatureDispatchContext),{t:n}=d.useTranslation();return o.default.createElement("div",{className:m.default.filterOptions},o.default.createElement("div",{className:m.default.sort},o.default.createElement("div",{className:m.default.list},o.default.createElement("span",{"auto-track-click":JSON.stringify({e:"stream-detail",attrs:{composite:"综合排序"}}),className:s.default({[m.default.active]:!0})},n("search:综合排序"))),o.default.createElement("div",{className:m.default.pageWrapper},o.default.createElement(i.default,{className:s.default({[m.default.disabled]:a<=1}),onClick:()=>{if(a>1){const e=a-1;u.updateQuery({pageCurrent:e}),l(e)}}}),o.default.createElement("div",{className:m.default.page},o.default.createElement("span",{className:m.default.current},a||"-"),o.default.createElement("span",null,"/"),o.default.createElement("span",null,e.total&&t?u.humanNum(Math.ceil(e.total/t),{useGrouping:!0}):"-")),o.default.createElement(r.default,{className:s.default({[m.default.disabled]:a>=Math.ceil(e.total/t)}),onClick:()=>{if(a<Math.ceil(e.total/t)){const e=a+1;u.updateQuery({pageCurrent:e}),l(e)}}}))))}},function(e,t,a){"use strict";a.r(t),t.default=a.p+"563273cd6b1d523b1013c707c34d70d1.png"},function(e,t,a){"use strict";a.r(t),t.default=a.p+"68da6f094e3782ad288e5ed24c8c11e2.png"},function(e,t,a){"use strict";a.r(t),t.default=a.p+"04069a590edd405b80cc96b2c3263be5.png"},function(e,t,a){"use strict";a.r(t),t.default=a.p+"fb9170975ccff1be2e9eb7fae349e6ab.png"},function(e,t,a){"use strict";a.r(t),t.default=a.p+"35cb5d25bfeb3240773356a225fc7034.png"},function(e,t,a){"use strict";a.r(t),t.default=a.p+"b3819d89d75648d1f8b644364bf8b402.png"},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=l(a(118)),r=a(142),u=l(a(4)),s=a(26),o=a(120),d=n(a(0)),c=a(19),m=a(2271),f=l(a(2272)),p=l(a(543));t.Distribution=e=>{const{t:t}=c.useTranslation(),[a,l]=d.useState(!1),[n,_]=d.useState({owner:{account:"",name:"",deptName:null,avatar:null},dataType:"",defaultValue:"",maxValue:"",minValue:"",enumValue:"",nullValueRatio:"",newestPartition:"",newestPartitionAmount:"",newestPartitionTime:"",partitionUpdateCycle:"",expectNextTimePartition:"",distribution:""}),h=d.useCallback(async()=>{try{l(!0);const t=await r.v1SearchApi.FeatureDistribute(e.id);_(t)}catch(e){}l(!1)},[]);return d.default.createElement(s.Popover,{title:"数据类型",placement:"bottomRight",overlayStyle:{width:600},trigger:"hover",onVisibleChange:async e=>{e&&await h()},destroyTooltipOnHide:!0,content:d.default.createElement(i.default,{spinning:a,size:"small"},d.default.createElement("div",null,d.default.createElement("div",{style:{height:"250px"}},n.distribution?d.default.createElement(m.ChartView,{value:n.distribution}):d.default.createElement("div",null,"空")),d.default.createElement("hr",{color:"#F0F0F0"}),d.default.createElement("div",{className:p.default.popoverText},d.default.createElement("div",{className:u.default(p.default.item,p.default.left)},d.default.createElement("span",{className:p.default.label},t("detail:负责人"),":"),d.default.createElement("span",{className:p.default.value},n.owner?d.default.createElement(o.DChat,{className:p.default.value,user:n.owner}):null)),d.default.createElement("div",{className:u.default(p.default.item,p.default.right)},d.default.createElement("span",{className:p.default.label},t("detail:空值比例"),":"),d.default.createElement("span",{className:p.default.value},n.nullValueRatio)),d.default.createElement("div",{className:u.default(p.default.item,p.default.left)},d.default.createElement("span",{className:p.default.label},t("detail:数据类型"),":"),d.default.createElement("span",{className:p.default.value},n.dataType)),d.default.createElement("div",{className:u.default(p.default.item,p.default.right)},d.default.createElement("span",{className:p.default.label},t("detail:最新分区"),":"),d.default.createElement("span",{className:p.default.value},n.newestPartition)),d.default.createElement("div",{className:u.default(p.default.item,p.default.left)},d.default.createElement("span",{className:p.default.label},t("detail:默认值"),":"),d.default.createElement("span",{className:p.default.value},n.defaultValue)),d.default.createElement("div",{className:u.default(p.default.item,p.default.right)},d.default.createElement("span",{className:p.default.label},t("detail:最新分区条数"),":"),d.default.createElement("span",{className:p.default.value},n.newestPartitionAmount)),d.default.createElement("div",{className:u.default(p.default.item,p.default.left)},d.default.createElement("span",{className:p.default.label},t("detail:最大值"),":"),d.default.createElement("span",{className:p.default.value},n.maxValue)),d.default.createElement("div",{className:u.default(p.default.item,p.default.right)},d.default.createElement("span",{className:p.default.label},t("detail:分区更新周期"),":"),d.default.createElement("span",{className:p.default.value},n.partitionUpdateCycle)),d.default.createElement("div",{className:u.default(p.default.item,p.default.left)},d.default.createElement("span",{className:p.default.label},t("detail:最小值"),":"),d.default.createElement("span",{className:p.default.value},n.minValue)),d.default.createElement("div",{className:u.default(p.default.item,p.default.right)},d.default.createElement("span",{className:p.default.label},t("detail:预计下次分区"),":"),d.default.createElement("span",{className:p.default.value},n.expectNextTimePartition)),d.default.createElement("div",{className:u.default(p.default.item,p.default.left)},d.default.createElement("span",{className:p.default.label},t("detail:枚举值"),":"),d.default.createElement("span",{className:p.default.value},n.enumValue)))))},d.default.createElement("div",{className:u.default(p.default.item),style:{position:"relative"}},d.default.createElement("span",{className:p.default.text,style:{color:"#4161A3"}},d.default.createElement("span",{style:{position:"absolute",left:"-18px"}},d.default.createElement("img",{src:f.default,style:{width:"15px"}})),t("detail:特征分布")),d.default.createElement(s.IconFont,{type:"icon-down",style:{color:"#4161A3",marginLeft:"4px"}})))}},function(e,t,a){"use strict";var l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=a(473),r=l(a(0)),u=n(a(543));t.ChartView=e=>{let t=null;i.registerShape("interval","slice-shape",{draw(e,t){const a=e.points;console.log("points-[",a[0].y);let l=[];return l.push(["M",a[0],a[0].y]),l.push(["L",a[1].x,a[1].y-.03]),l.push(["L",a[2].x,a[2].y-.03]),l.push(["L",a[3].x,a[3].y]),l=this.parsePath(l),t.addShape("path",{attrs:{fill:"#fff",path:l}})}});const a=()=>{const a=JSON.parse(e.value);null==t&&(t=new i.Chart({container:u.default.chartFeature,padding:[0,280,0,0],height:250,width:600})),t.coordinate("theta",{radius:.6,innerRadius:.5});const l=[];return Object.keys(a).forEach(e=>{const t={};t.item=e,t.value=a[e],l.push(t)}),t.data(l),t.tooltip(!0),t.legend("item",{offsetX:280,position:"left",custom:!0,items:l.map((e,a)=>({name:e.item,value:e.value,marker:{symbol:"square",style:{r:5,fill:t.getTheme().colors10[a]}}})),itemValue:{style:{fill:"#999"},formatter:e=>""+e}}),t.interval().adjust("stack").position("value").label("item",{layout:{type:"pie-outer"},labelHeight:20,content:e=>""+e.item,labelLine:{style:{lineWidth:1}},position:"left"}).color("item").style({fillOpacity:1}).state({active:{style:e=>{const t=e.shape;return{lineWidth:26,stroke:t.attr("fill"),strokeOpacity:t.attr("fillOpacity")}}}}),t.interaction("element-active"),t.render(),()=>{t.destroy()}};return r.useEffect(()=>(a(),()=>{a()()}),[]),r.default.createElement("div",{id:u.default.chartFeature,style:{height:"250px",width:"500px"}})}},function(e,t,a){"use strict";a.r(t),t.default=a.p+"5fabf4decd03e6aed2f691052d911e76.png"},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=l(a(121)),r=l(a(129)),u=l(a(221)),s=a(30),o=l(a(4)),d=a(26),c=n(a(0)),m=a(19),f=l(a(281)),p=a(775),_=a(542);t.Tag=e=>{const{count:t,selected:a=!1}=e;let l=e.name;return t&&(l=`${l}(${t})`),c.default.createElement("span",{onClick:e.onClick,className:o.default(f.default.tag,{[e.classNames]:e.classNames,[f.default.selected]:a})},l)},t.FeatureAggregation=()=>{const{t:e}=m.useTranslation(),{pageFilter:a,pageFilter:{entity:l,businessLine:n,dataType:r,source:u}}=c.useContext(_.FeatureStateContext),{updateParams:o,dispatchParams:h}=c.useContext(_.FeatureDispatchContext),{aggregation:g,loading:E}=c.useContext(_.FeatureAggregationContext);return c.default.createElement("div",{className:f.default.conditionWrapper},c.default.createElement("div",{className:f.default.condition},c.default.createElement("div",{className:f.default.filter},c.default.createElement("div",{className:f.default.title},c.default.createElement("span",{className:f.default.text},e("search:筛选条件")),c.default.createElement(d.Button,{className:f.default.actionReset,type:"link",icon:c.default.createElement(d.IconFont,{type:"icon-delete"}),size:"small",onClick:()=>{s.updateQuery({keyword:null,pageCurrent:null,pageSize:null}),h({type:p.FEATURE_ACTION_TYPES.RESET})}},e("重置"))),c.default.createElement("div",{className:f.default.filterContent},l&&g.entityAggResult.map(e=>{if(String(e.id)==l)return c.default.createElement("div",{key:e.id,className:f.default.filterTag},c.default.createElement("span",{className:f.default.text},e.name),c.default.createElement(i.default,{onClick:()=>{o({pageFilter:{...a,entity:null}})}}))}),n&&g.businessLineAggResult.map(e=>{if(String(e.id)==n)return c.default.createElement("div",{key:e.id,className:f.default.filterTag},c.default.createElement("span",{className:f.default.text},e.name),c.default.createElement(i.default,{onClick:()=>{o({pageFilter:{...a,businessLine:null}})}}))}),r&&g.dataTypeAggResult.map(e=>{if(String(e.id)==r)return c.default.createElement("div",{key:e.id,className:f.default.filterTag},c.default.createElement("span",{className:f.default.text},e.name),c.default.createElement(i.default,{onClick:()=>{o({pageFilter:{...a,dataType:null}})}}))}),u&&g.sourceAggResult.map(e=>{if(String(e.id)==u)return c.default.createElement("div",{key:e.id,className:f.default.filterTag},c.default.createElement("span",{className:f.default.text},e.name),c.default.createElement(i.default,{onClick:()=>{o({pageFilter:{...a,source:null}})}}))}))),c.default.createElement(d.Spin,{spinning:E},c.default.createElement(t.EntityAggResult,null),c.default.createElement(t.BusinessLine,null),c.default.createElement(t.DataTypeAggResult,null),c.default.createElement(t.SourceAggResult,null))))},t.EntityAggResult=()=>{var e;const{t:a}=m.useTranslation(),{aggregation:l}=c.useContext(_.FeatureAggregationContext),{updateParams:n,setPageCurrent:i}=c.useContext(_.FeatureDispatchContext),[d,p]=c.useState(!1),[h,g]=c.useState(20),{pageFilter:E,pageFilter:{entity:b}}=c.useContext(_.FeatureStateContext),v=l.entityAggResult,y=c.useMemo(()=>v.slice(0,h),[v,h]),T=v.reduce((e,t)=>e+t.count,0),N=null!==(e=null==v?void 0:v.length)&&void 0!==e?e:0;return N?c.default.createElement("div",{className:o.default(f.default.searchBlock,{[f.default.fold]:d})},c.default.createElement("div",{className:f.default.blockTitle,onClick:()=>p(!d)},c.default.createElement(t.Tag,{classNames:f.default.text,name:a("detail:实体"),count:T}),d?c.default.createElement(u.default,null):c.default.createElement(r.default,null)),d?null:c.default.createElement(c.default.Fragment,null,c.default.createElement("div",{className:f.default.blockContent},y.map(e=>{const a=e.id==b;return c.default.createElement(t.Tag,{name:e.name,count:e.count,key:e.id,selected:a,onClick:()=>{n(a?{pageFilter:{...E,entity:null}}:{pageFilter:{...E,entity:String(e.id)}}),i(1),s.updateQuery({pageCurrent:null})}})})),h<N?c.default.createElement("div",{className:f.default.showMore,onClick:()=>g(h+20)},c.default.createElement("div",{className:f.default.action},c.default.createElement("span",{className:f.default.text},a("查看更多")),c.default.createElement(r.default,null))):null)):null},t.BusinessLine=()=>{var e;const{t:a}=m.useTranslation(),{aggregation:l}=c.useContext(_.FeatureAggregationContext),{updateParams:n,setPageCurrent:i}=c.useContext(_.FeatureDispatchContext),[d,p]=c.useState(!1),[h,g]=c.useState(20),{pageFilter:E,pageFilter:{businessLine:b}}=c.useContext(_.FeatureStateContext),v=l.businessLineAggResult,y=c.useMemo(()=>v.slice(0,h),[v,h]),T=v.reduce((e,t)=>e+t.count,0),N=null!==(e=null==v?void 0:v.length)&&void 0!==e?e:0;return N?c.default.createElement("div",{className:o.default(f.default.searchBlock,{[f.default.fold]:d})},c.default.createElement("div",{className:f.default.blockTitle,onClick:()=>p(!d)},c.default.createElement(t.Tag,{classNames:f.default.text,name:a("detail:业务线"),count:T}),d?c.default.createElement(u.default,null):c.default.createElement(r.default,null)),d?null:c.default.createElement(c.default.Fragment,null,c.default.createElement("div",{className:f.default.blockContent},y.map(e=>{const a=e.id==b;return c.default.createElement(t.Tag,{name:e.name,count:e.count,key:e.id,selected:a,onClick:()=>{n(a?{pageFilter:{...E,businessLine:null}}:{pageFilter:{...E,businessLine:String(e.id)}}),i(1),s.updateQuery({pageCurrent:null})}})})),h<N?c.default.createElement("div",{className:f.default.showMore,onClick:()=>g(h+20)},c.default.createElement("div",{className:f.default.action},c.default.createElement("span",{className:f.default.text},a("查看更多")),c.default.createElement(r.default,null))):null)):null},t.DataTypeAggResult=()=>{var e;const{t:a}=m.useTranslation(),{aggregation:l}=c.useContext(_.FeatureAggregationContext),{updateParams:n,setPageCurrent:i}=c.useContext(_.FeatureDispatchContext),[d,p]=c.useState(!1),[h,g]=c.useState(20),{pageFilter:E,pageFilter:{dataType:b}}=c.useContext(_.FeatureStateContext),v=l.dataTypeAggResult,y=c.useMemo(()=>v.slice(0,h),[v,h]),T=v.reduce((e,t)=>e+t.count,0),N=null!==(e=null==v?void 0:v.length)&&void 0!==e?e:0;return N?c.default.createElement("div",{className:o.default(f.default.searchBlock,{[f.default.fold]:d})},c.default.createElement("div",{className:f.default.blockTitle,onClick:()=>p(!d)},c.default.createElement(t.Tag,{classNames:f.default.text,name:a("detail:数据类型"),count:T}),d?c.default.createElement(u.default,null):c.default.createElement(r.default,null)),d?null:c.default.createElement(c.default.Fragment,null,c.default.createElement("div",{className:f.default.blockContent},y.map(e=>{const a=e.id==b;return c.default.createElement(t.Tag,{name:e.name,count:e.count,key:e.id,selected:a,onClick:()=>{n(a?{pageFilter:{...E,dataType:null}}:{pageFilter:{...E,dataType:String(e.id)}}),i(1),s.updateQuery({pageCurrent:null})}})})),h<N?c.default.createElement("div",{className:f.default.showMore,onClick:()=>g(h+20)},c.default.createElement("div",{className:f.default.action},c.default.createElement("span",{className:f.default.text},a("查看更多")),c.default.createElement(r.default,null))):null)):null},t.SourceAggResult=()=>{var e;const{t:a}=m.useTranslation(),{aggregation:l}=c.useContext(_.FeatureAggregationContext),{updateParams:n,setPageCurrent:i}=c.useContext(_.FeatureDispatchContext),[d,p]=c.useState(!1),[h,g]=c.useState(20),{pageFilter:E,pageFilter:{source:b}}=c.useContext(_.FeatureStateContext),v=l.sourceAggResult,y=c.useMemo(()=>v.slice(0,h),[v,h]),T=v.reduce((e,t)=>e+t.count,0),N=null!==(e=null==v?void 0:v.length)&&void 0!==e?e:0;return N?c.default.createElement("div",{className:o.default(f.default.searchBlock,{[f.default.fold]:d})},c.default.createElement("div",{className:f.default.blockTitle,onClick:()=>p(!d)},c.default.createElement(t.Tag,{classNames:f.default.text,name:a("detail:来源"),count:T}),d?c.default.createElement(u.default,null):c.default.createElement(r.default,null)),d?null:c.default.createElement(c.default.Fragment,null,c.default.createElement("div",{className:f.default.blockContent},y.map(e=>{const a=e.id==b;return c.default.createElement(t.Tag,{name:e.name,count:e.count,key:e.id,selected:a,onClick:()=>{n(a?{pageFilter:{...E,source:null}}:{pageFilter:{...E,source:String(e.id)}}),i(1),s.updateQuery({pageCurrent:null})}})})),h<N?c.default.createElement("div",{className:f.default.showMore,onClick:()=>g(h+20)},c.default.createElement("div",{className:f.default.action},c.default.createElement("span",{className:f.default.text},a("查看更多")),c.default.createElement(r.default,null))):null)):null}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=a(30),r=l(a(118)),u=a(142),s=l(a(4)),o=a(26),d=a(120),c=a(97),m=a(89),f=a(412),p=l(a(413)),_=n(a(0)),h=l(a(260)),g=a(19),E=a(117),b=a(103),v=a(544),y=a(2275),T=l(a(776)),N=a(2276);t.HiveTable=e=>{const{sessionId:a,params:l}=_.useContext(v.HiveStateContext),{setPageNum:n,setPageSize:u}=_.useContext(v.HiveDispatchContext),{inputTokens:s,hiveTables:d,hiveTableLoading:c,hiveTableErrorMessage:f,hiveTableTotal:p,setData:h}=e.data,g=m.useShowTotal();return _.default.createElement("div",null,_.default.createElement(y.HiveTableFilter,{total:p}),_.default.createElement(r.default,{spinning:c},f?_.default.createElement("div",{className:T.default.error},f):(null==d?void 0:d.length)?_.default.createElement("div",{className:T.default.tableList},_.default.createElement("div",{className:T.default.tableList},null==d?void 0:d.map((e,l)=>_.default.createElement(t.HiveTableItem,{key:`${e.dbName}.${e.tableName}`,keywords:s,index:l,sessionId:a,item:e,hiveTables:d,setData:h}))),_.default.createElement("div",{className:T.default.pagination},_.default.createElement(o.Pagination,{showTotal:g,showSizeChanger:!0,showQuickJumper:!0,pageSize:l.pageSize,current:l.pageNum,onShowSizeChange:(e,t)=>{u(t),i.updateQuery({pageSize:10!==t?t:null})},onChange:e=>{n(e),i.updateQuery({pageNum:e>1?e:null})},total:p}))):_.default.createElement("div",{className:T.default.tableList},_.default.createElement("div",{className:T.default.tableList},_.default.createElement(o.Empty,{style:{padding:"50px 0"},image:o.Empty.PRESENTED_IMAGE_SIMPLE})))))},t.HiveTableItem=e=>{var t,a,l,n,i,r;const{keywords:m,item:y,index:S,sessionId:C,hiveTables:x,setData:w}=e,{t:I}=g.useTranslation(),{params:L}=_.useContext(v.HiveStateContext),O=b.generateUri(y.dbName,y.tableName),P=_.useMemo(()=>{if(y.recommendINFO)return`hive://mycluster-tj:${y.recommendINFO.recommendDb}:${y.recommendINFO.recommendTable}`},[y]);return _.default.createElement("div",{className:T.default.item,key:`${y.dbName}.${y.tableName}`},_.default.createElement("div",{className:T.default.mainContent},_.default.createElement("div",{className:T.default.name},y.isChoicest?_.default.createElement("span",{className:T.default.choicest},"精"):null,!1===y.isOpen&&_.default.createElement(o.Tooltip,{title:_.default.createElement("div",{className:T.default.openTooltip},I("message:该表未开放申请权限，如需使用可点击"),_.default.createElement(E.Link,{to:{pathname:"/detail",search:`?uri=${O}&keyword=${m.join()}&requestOpen=true`}},I("message:请求开放")),I("message:告知表负责人"),"。")},_.default.createElement("span",{className:T.default.openTag},I("message:未开放"))),_.default.createElement(c.ExternalLink,{className:T.default.text,href:`/detail?uri=${O}&keyword=${m.join()}`,withReferrer:!0,onClick:()=>{const e={keyword:L.keyword,uri:O,page:L.pageNum,rank:S,searchSessionId:C};u.v1SearchApi.searchLog(e)}},_.default.createElement(h.default,{searchWords:m,highlightClassName:T.default.highlighter,autoEscape:!0,textToHighlight:`${y.dbName}.${y.tableName}`})),y.recommendINFO&&_.default.createElement("div",{className:T.default.recommend},"(",_.default.createElement("span",{className:"value"},I("推荐使用表"),"： "),_.default.createElement(c.ExternalLink,{href:`/detail?uri=${P}&keyword=${m.join()}`,withReferrer:!0},_.default.createElement(h.default,{searchWords:m,highlightClassName:T.default.highlighter,autoEscape:!0,textToHighlight:`${y.recommendINFO.recommendDb}.${y.recommendINFO.recommendTable}`}),")"))),y.tableNameZh&&_.default.createElement(h.default,{className:T.default.title,searchWords:m,highlightClassName:T.default.highlighter,autoEscape:!0,textToHighlight:y.tableNameZh}),_.default.createElement("div",{className:T.default.metaContent},_.default.createElement("div",{className:T.default.line},_.default.createElement("div",{className:s.default(T.default.item,T.default.projectCode)},_.default.createElement("span",{className:T.default.label},I("common:项目"),":"),y.projectCode?_.default.createElement(E.Link,{to:{pathname:"/project/detail",search:"?projectCode="+y.projectCode}},y.projectCode):"-"),_.default.createElement("div",{className:s.default(T.default.item,T.default.dataOwner)},_.default.createElement(h.default,{className:T.default.label,searchWords:m,highlightClassName:T.default.highlighter,autoEscape:!0,textToHighlight:I("search:业务负责人")+":"}),_.default.createElement("div",{className:T.default.dataOwnerItem,key:y.dataOwner[0].account},_.default.createElement(d.DChat,{className:T.default.value,user:y.dataOwner[0]}),(null===(t=y.communicateCount)||void 0===t?void 0:t.account)&&_.default.createElement(f.ZanActive,{owner:y.dataOwner[0],count:y.communicateCount.count,active:y.communicateCount.isAdd,onClick:e=>{x.forEach(t=>{t.communicateCount.account==y.dataOwner[0].account&&(t.communicateCount.count=e.count,t.communicateCount.isAdd=e.isAdd)}),w(p.default.cloneDeep(x))}})))),_.default.createElement("div",{className:T.default.line},_.default.createElement("div",{className:s.default(T.default.item,T.default.projectCode)},_.default.createElement("span",{className:T.default.label},I("search:最后更新时间"),":"),_.default.createElement("span",{className:T.default.value},y.lastUpdateTimeLabel||"-")),_.default.createElement("div",{className:s.default(T.default.item,T.default.latestPartition)},_.default.createElement("span",{className:T.default.label},I("search:最晚分区"),":"),_.default.createElement("span",{className:T.default.value},y.latestPartition||"-")))),_.default.createElement("div",{className:T.default.description},_.default.createElement("span",{className:T.default.label},I("search:表说明"),":"),(null===(a=y.simpleDescription)||void 0===a?void 0:a.length)<45?y.simpleDescription&&_.default.createElement(h.default,{className:T.default.value,searchWords:m,highlightClassName:T.default.highlighter,autoEscape:!0,textToHighlight:y.simpleDescription}):_.default.createElement(o.Tooltip,{title:y.simpleDescription,overlayStyle:{maxWidth:600}},y.simpleDescription&&_.default.createElement(h.default,{className:T.default.value,searchWords:m,highlightClassName:T.default.highlighter,autoEscape:!0,textToHighlight:y.simpleDescription}))),y.columnInfo&&_.default.createElement("div",{className:s.default(T.default.description,T.default.columnInfo)},_.default.createElement("span",{className:T.default.label},I("search:字段信息"),":"),(null===(l=y.columnInfo)||void 0===l?void 0:l.length)<45?y.columnInfo&&_.default.createElement(h.default,{className:T.default.value,searchWords:m,highlightClassName:T.default.highlighter,autoEscape:!0,textToHighlight:y.columnInfo}):_.default.createElement(o.Tooltip,{title:y.columnInfo,overlayStyle:{maxWidth:600}},y.columnInfo&&_.default.createElement(h.default,{className:T.default.value,searchWords:m,highlightClassName:T.default.highlighter,autoEscape:!0,textToHighlight:y.columnInfo})))),_.default.createElement("div",{className:T.default.extra}),_.default.createElement("div",{className:T.default.statistics},_.default.createElement("div",{className:s.default(T.default.item,T.default.nps)},I("search:用户NPS"),_.default.createElement("span",{className:T.default.value},null!==(n=y.nps)&&void 0!==n?n:"-","%")),_.default.createElement("div",{className:s.default(T.default.item)},`${null!==(i=y.usedTimesLabel)&&void 0!==i?i:"-"}${I("search:次使用")}`),_.default.createElement("div",{className:s.default(T.default.item)},`${null!==(r=y.likeCount)&&void 0!==r?r:"-"}${I("search:人已关注")}`),_.default.createElement(N.TableColumns,{uri:y.uri,columnNum:y.columnNum})))}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=l(a(189)),r=l(a(154)),u=a(30),s=l(a(4)),o=a(26),d=a(199),c=n(a(0)),m=a(19),f=a(545),p=a(544),_=l(a(776));t.HiveTableFilter=e=>{const{params:t}=c.useContext(p.HiveStateContext),{updateParams:a,setPageNum:l,setSort:n}=c.useContext(p.HiveDispatchContext),{t:h}=m.useTranslation(),g=[{label:h("search:精品表"),value:"isChoicest","auto-track-click":JSON.stringify({e:"hive-detail",attrs:{is_choicest:h("search:精品表")}})},{label:h("search:我浏览过的"),value:"isRecent"},{label:h("search:我有权限的"),value:"isAuth"},{label:h("search:我近期常用的"),value:"isNormal"},{label:h("search:元数据描述完整"),value:"isMetaCompletion"},{label:h("search:最近一个月有更新"),value:"isLastMonthUpdated"},{label:h("search:含开发表"),value:"isIncludeDevTable"},{label:h("search:含DQC配置"),value:"isIncludeDqcConfig"}],E=c.useMemo(()=>{const e=[];for(const a of f.OPTION_KEYS)t[a]&&e.push(a);return e},[t]);return c.default.createElement("div",{className:_.default.filterOptions},c.default.createElement("div",{className:_.default.sort},c.default.createElement("div",{className:_.default.list},c.default.createElement("span",{"auto-track-click":JSON.stringify({e:"hive-detail",attrs:{composite:h("search:综合排序")}}),className:s.default({[_.default.active]:t.sort===d.SearchSort.COMPOSITE}),onClick:()=>{n(d.SearchSort.COMPOSITE),l(1),u.updateQuery({sort:null,pageNum:null})}},h("search:综合排序")),c.default.createElement("span",{"auto-track-click":JSON.stringify({e:"hive-detail",attrs:{update_time:h("search:更新时间")}}),className:s.default({[_.default.active]:t.sort===d.SearchSort.UPDATE_TIME}),onClick:()=>{n(d.SearchSort.UPDATE_TIME),l(1),u.updateQuery({sort:d.SearchSort.UPDATE_TIME,pageNum:null})}},h("search:更新时间")),c.default.createElement("span",{"auto-track-click":JSON.stringify({e:"hive-detail",attrs:{visits:h("search:访问次数")}}),className:s.default({[_.default.active]:t.sort===d.SearchSort.VISITS}),onClick:()=>{n(d.SearchSort.VISITS),l(1),u.updateQuery({sort:d.SearchSort.VISITS,pageNum:null})}},h("search:访问次数")),c.default.createElement("span",{"auto-track-click":JSON.stringify({e:"hive-detail",attrs:{value_rank:h("search:价值排名")}}),className:s.default({[_.default.active]:t.sort===d.SearchSort.VALUE_RANK}),onClick:()=>{n(d.SearchSort.VALUE_RANK),l(1),u.updateQuery({sort:d.SearchSort.VALUE_RANK,pageNum:null})}},h("search:价值排名"))),c.default.createElement("div",{className:_.default.pageWrapper},c.default.createElement(i.default,{className:s.default({[_.default.disabled]:t.pageNum<=1}),onClick:()=>{if(t.pageNum>1){const e=t.pageNum-1;u.updateQuery({pageNum:e}),l(e)}}}),c.default.createElement("div",{className:_.default.page},c.default.createElement("span",{className:_.default.current},t.pageNum),c.default.createElement("span",null,"/"),c.default.createElement("span",null,e.total&&t.pageSize?u.humanNum(Math.ceil(e.total/t.pageSize),{useGrouping:!0}):"-")),c.default.createElement(r.default,{className:s.default({[_.default.disabled]:t.pageNum>=Math.ceil(e.total/t.pageSize)}),onClick:()=>{if(t.pageNum<Math.ceil(e.total/t.pageSize)){const e=t.pageNum+1;u.updateQuery({pageNum:e}),l(e)}}}))),c.default.createElement(o.Checkbox.Group,{options:g,value:E,onChange:e=>{const t={pageNum:null},n={};for(const a of f.OPTION_KEYS)n[a]=e.includes(a),t[a]=e.includes(a)?"true":null;a(n),u.updateQuery(t),l(1)}}))}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=l(a(129)),r=l(a(118)),u=a(181),s=l(a(4)),o=a(26),d=n(a(0)),c=a(19),m=l(a(776));t.TableColumns=e=>{var t,a;const{uri:l,columnNum:n}=e,{t:f}=c.useTranslation(),[p,_]=d.useState(!1),[h,g]=d.useState(""),[E,b]=d.useState([]),v=d.useMemo(()=>n,[n]),y=d.useCallback(async()=>{try{_(!0),g("");const e=await u.v1TableDetailApi.tableColumns(l);b(e)}catch(e){g(e.message)}_(!1)},[l]);return v?d.default.createElement(o.Popover,{placement:"bottomRight",overlayStyle:{width:520},trigger:"click",onVisibleChange:async e=>{e&&!(null==E?void 0:E.length)&&await y()},content:d.default.createElement(r.default,{spinning:p,size:"small"},h?d.default.createElement("div",{className:"error"},h):d.default.createElement(o.Table,{rowKey:"tableId",size:"small",columns:[{title:f("detail:字段名"),width:"40%",dataIndex:"columnName",ellipsis:!0},{title:f("common:描述"),width:"60%",dataIndex:"comment",ellipsis:!0}],dataSource:E,pagination:!1,scroll:{y:350}}))},d.default.createElement("div",{className:s.default(m.default.item,m.default.column,m.default.showColumnDetail)},d.default.createElement("span",{className:m.default.text},null!==(a=e.columnNum)&&void 0!==a?a:"-"," ",f("common:个字段")),d.default.createElement(i.default,null))):d.default.createElement("div",{className:s.default(m.default.item,m.default.column)},d.default.createElement("span",{className:m.default.text},null!==(t=e.columnNum)&&void 0!==t?t:"-"," ",f("common:个字段")))}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=l(a(121)),r=l(a(129)),u=l(a(221)),s=a(30),o=l(a(4)),d=a(26),c=a(319),m=a(500),f=n(a(0)),p=a(19),_=l(a(281)),h=a(545),g=a(544);t.Tag=e=>{const{count:t,selected:a=!1}=e;let l=e.name;return t&&(l=`${l}(${t})`),f.default.createElement("span",{onClick:e.onClick,className:o.default(_.default.tag,{[e.classNames]:e.classNames,[_.default.selected]:a})},l)},t.HiveAggregation=()=>{const e=f.useContext(c.LngStateContext),{t:a}=p.useTranslation(),{params:{buId:l,categoryList:n,dataOwnerList:r,userTagList:u,withProjectList:o}}=f.useContext(g.HiveStateContext),{updateParams:E,setPageNum:b,dispatchParams:v}=f.useContext(g.HiveDispatchContext),{aggregation:y,loading:T}=f.useContext(g.HiveAggregationContext),N=f.useMemo(()=>y.buList.find(e=>e.buId===l),[y.buList,l]);return f.default.createElement("div",{className:_.default.conditionWrapper},f.default.createElement("div",{className:_.default.condition},f.default.createElement("div",{className:_.default.filter},f.default.createElement("div",{className:_.default.title},f.default.createElement("span",{className:_.default.text},a("search:筛选条件")),f.default.createElement(d.Button,{className:_.default.actionReset,type:"link",icon:f.default.createElement(d.IconFont,{type:"icon-delete"}),size:"small",onClick:()=>{const e={keyword:null,buId:null,categoryId:null,subCategoryId:null,sort:null,pageNum:null,pageSize:null};for(const t of h.OPTION_KEYS)e[t]=null;s.updateQuery(e),v({type:h.HIVE_ACTION_TYPES.RESET})}},a("common:重置"))),f.default.createElement("div",{className:_.default.filterContent},N&&f.default.createElement("div",{className:_.default.filterTag},f.default.createElement("span",{className:_.default.text},N.buName),f.default.createElement(i.default,{onClick:()=>{v({type:h.HIVE_ACTION_TYPES.UPDATE_BU,params:{buId:void 0}}),b(1)}})),n.reduce((t,a)=>{const l=y.categoryList.find(e=>e.categoryId===a.categoryId);return a.itemIdList.map(a=>{const r=null==l?void 0:l.itemList.find(e=>e.itemId===a);if(!r)return t;t.push(f.default.createElement("div",{key:a,className:_.default.filterTag},f.default.createElement("span",{className:_.default.text},e===m.Language.ZH?r.nameZh:r.nameEn),f.default.createElement(i.default,{onClick:async()=>{const e=n.map(e=>({...e,itemIdList:e.itemIdList.filter(e=>e!==a)})).filter(e=>e.itemIdList.length);E({categoryList:e}),b(1),s.updateQuery({pageNum:null})}})))}),t},[]),u.map(e=>f.default.createElement("div",{key:e,className:_.default.filterTag},f.default.createElement("span",{className:_.default.text},e),f.default.createElement(i.default,{onClick:async()=>{E({pageNum:1}),s.updateQuery({pageNum:null}),E({userTagList:u.filter(t=>e!==t)})}}))),o.map(e=>f.default.createElement("div",{key:e,className:_.default.filterTag},f.default.createElement("span",{className:_.default.text},e),f.default.createElement(i.default,{onClick:async()=>{E({pageNum:1}),s.updateQuery({pageNum:null}),E({withProjectList:o.filter(t=>e!==t)})}}))),r.map(e=>{var t;const a=y.dataOwnerList.find(t=>t.account===e);return f.default.createElement("div",{key:e,className:_.default.filterTag},f.default.createElement("span",{className:_.default.text},null!==(t=null==a?void 0:a.name)&&void 0!==t?t:e),f.default.createElement(i.default,{onClick:async()=>{E({pageNum:1}),s.updateQuery({pageNum:null}),E({dataOwnerList:r.filter(t=>e!==t)})}}))}))),f.default.createElement(d.Spin,{spinning:T},f.default.createElement(t.Bu,null),y.categoryList.map(e=>f.default.createElement(t.Category,{category:e,key:e.categoryId})),f.default.createElement(t.WithProject,null),f.default.createElement(t.UserTag,null),f.default.createElement(t.DataOwner,null))))},t.Category=({category:e})=>{var a,l,n;const[i,d]=f.useState(!1),p=f.useContext(c.LngStateContext),{params:h}=f.useContext(g.HiveStateContext),{updateParams:E,setPageNum:b}=f.useContext(g.HiveDispatchContext),v=null!==(l=null===(a=e.itemList)||void 0===a?void 0:a.reduce((e,t)=>e+t.count,0))&&void 0!==l?l:0;return(null===(n=null==e?void 0:e.itemList)||void 0===n?void 0:n.length)?f.default.createElement("div",{className:o.default(_.default.searchBlock,{[_.default.fold]:i})},f.default.createElement("div",{className:_.default.blockTitle,onClick:()=>d(!i)},f.default.createElement(t.Tag,{classNames:_.default.text,name:e.categoryName,count:v}),i?f.default.createElement(u.default,null):f.default.createElement(r.default,null)),i?null:f.default.createElement("div",{className:_.default.blockContent},e.itemList.map(a=>{var l;const n=(null===(l=h.categoryList.find(t=>t.categoryId===e.categoryId))||void 0===l?void 0:l.itemIdList)||[],i=null==n?void 0:n.includes(a.itemId);return f.default.createElement(t.Tag,{name:p===m.Language.ZH?a.nameZh:a.nameEn,count:a.count,key:a.itemId,selected:i,onClick:async()=>{let t=JSON.parse(JSON.stringify(h.categoryList));const l=t.find(t=>t.categoryId===e.categoryId);i?(l.itemIdList=l.itemIdList.filter(e=>e!==a.itemId),t=t.filter(e=>e.itemIdList.length),E({categoryList:t})):(t=t.filter(e=>e.itemIdList.length),l?(l.itemIdList.push(a.itemId),E({categoryList:t})):E({categoryList:[...t,{categoryId:e.categoryId,itemIdList:[a.itemId]}]})),b(1),s.updateQuery({pageNum:null})}})}))):null},t.Bu=()=>{var e,a;const{t:l}=p.useTranslation(),{aggregation:n}=f.useContext(g.HiveAggregationContext),{setPageNum:i,dispatchParams:s}=f.useContext(g.HiveDispatchContext),[c,m]=f.useState(!1),{params:E}=f.useContext(g.HiveStateContext),b=n.buList.reduce((e,t)=>e+t.count,0);return(null!==(a=null===(e=null==n?void 0:n.buList)||void 0===e?void 0:e.length)&&void 0!==a?a:0)?f.default.createElement("div",{className:o.default(_.default.searchBlock,{[_.default.fold]:c})},f.default.createElement("div",{className:_.default.blockTitle,onClick:()=>m(!c)},f.default.createElement(t.Tag,{classNames:_.default.text,name:l("detail:业务版块"),count:b}),c?f.default.createElement(u.default,null):f.default.createElement(r.default,null)),c?null:f.default.createElement(f.default.Fragment,null,f.default.createElement("div",{className:_.default.blockContent},f.default.createElement(d.Radio.Group,{onChange:e=>{s({type:h.HIVE_ACTION_TYPES.UPDATE_BU,params:{buId:e.target.value}}),i(1)},value:E.buId},n.buList.map(e=>f.default.createElement(d.Radio,{value:e.buId,key:e.buId},e.count?`${e.buName}(${e.count})`:e.buName)))))):null},t.DataOwner=()=>{var e,a;const{t:l}=p.useTranslation(),{aggregation:n}=f.useContext(g.HiveAggregationContext),{updateParams:i,setPageNum:d}=f.useContext(g.HiveDispatchContext),[c,m]=f.useState(!1),[h,E]=f.useState(20),{params:b}=f.useContext(g.HiveStateContext),v=f.useMemo(()=>n.dataOwnerList.slice(0,h),[n.dataOwnerList,h]),y=n.dataOwnerList.reduce((e,t)=>e+t.count,0),T=null!==(a=null===(e=null==n?void 0:n.dataOwnerList)||void 0===e?void 0:e.length)&&void 0!==a?a:0;return T?f.default.createElement("div",{className:o.default(_.default.searchBlock,{[_.default.fold]:c})},f.default.createElement("div",{className:_.default.blockTitle,onClick:()=>m(!c)},f.default.createElement(t.Tag,{classNames:_.default.text,name:l("detail:责任人"),count:y}),c?f.default.createElement(u.default,null):f.default.createElement(r.default,null)),c?null:f.default.createElement(f.default.Fragment,null,f.default.createElement("div",{className:_.default.blockContent},v.map(e=>{const a=b.dataOwnerList.includes(e.account);return f.default.createElement(t.Tag,{name:e.name,count:e.count,key:e.account||e.name,selected:a,onClick:async()=>{i(a?{dataOwnerList:b.dataOwnerList.filter(t=>t!==e.account)}:{dataOwnerList:[...b.dataOwnerList,e.account]}),d(1),s.updateQuery({pageNum:null})}})})),h<T?f.default.createElement("div",{className:_.default.showMore,onClick:()=>E(h+20)},f.default.createElement("div",{className:_.default.action},f.default.createElement("span",{className:_.default.text},l("common:查看更多")),f.default.createElement(r.default,null))):null)):null},t.WithProject=()=>{var e,a;const{t:l}=p.useTranslation(),{aggregation:n}=f.useContext(g.HiveAggregationContext),{updateParams:i,setPageNum:d}=f.useContext(g.HiveDispatchContext),[c,m]=f.useState(!1),[h,E]=f.useState(20),{params:b}=f.useContext(g.HiveStateContext),v=f.useMemo(()=>n.withProjectList.slice(0,h),[n.withProjectList,h]),y=n.dataOwnerList.reduce((e,t)=>e+t.count,0),T=null!==(a=null===(e=null==n?void 0:n.withProjectList)||void 0===e?void 0:e.length)&&void 0!==a?a:0;return T?f.default.createElement("div",{className:o.default(_.default.searchBlock,{[_.default.fold]:c})},f.default.createElement("div",{className:_.default.blockTitle,onClick:()=>m(!c)},f.default.createElement(t.Tag,{classNames:_.default.text,name:l("detail:所属项目"),count:y}),c?f.default.createElement(u.default,null):f.default.createElement(r.default,null)),c?null:f.default.createElement(f.default.Fragment,null,f.default.createElement("div",{className:_.default.blockContent},v.map(e=>{const a=b.withProjectList.includes(e.projectCode);return f.default.createElement(t.Tag,{name:e.projectCode,count:e.count,selected:a,key:e.projectCode,onClick:async()=>{i(a?{withProjectList:b.withProjectList.filter(t=>t!==e.projectCode)}:{withProjectList:[...b.withProjectList,e.projectCode]}),d(1),s.updateQuery({pageNum:null})}})})),h<T?f.default.createElement("div",{className:_.default.showMore,onClick:()=>E(h+20)},f.default.createElement("div",{className:_.default.action},f.default.createElement("span",{className:_.default.text},l("common:查看更多")),f.default.createElement(r.default,null))):null)):null},t.UserTag=()=>{var e,a;const{t:l}=p.useTranslation(),{aggregation:n}=f.useContext(g.HiveAggregationContext),{updateParams:i,setPageNum:d}=f.useContext(g.HiveDispatchContext),[c,m]=f.useState(!1),[h,E]=f.useState(20),{params:b}=f.useContext(g.HiveStateContext),v=f.useMemo(()=>n.userTagList.slice(0,h),[n.userTagList,h]),y=n.userTagList.reduce((e,t)=>e+t.count,0),T=null!==(a=null===(e=null==n?void 0:n.userTagList)||void 0===e?void 0:e.length)&&void 0!==a?a:0;return T?f.default.createElement("div",{className:o.default(_.default.searchBlock,{[_.default.fold]:c})},f.default.createElement("div",{className:_.default.blockTitle,onClick:()=>m(!c)},f.default.createElement(t.Tag,{classNames:_.default.text,name:l("common:标签"),count:y}),c?f.default.createElement(u.default,null):f.default.createElement(r.default,null)),c?null:f.default.createElement(f.default.Fragment,null,f.default.createElement("div",{className:_.default.blockContent},v.map(e=>{const a=b.userTagList.includes(e.tagName);return f.default.createElement(t.Tag,{name:e.tagName,count:e.count,key:e.tagName,selected:a,onClick:async()=>{i(a?{userTagList:b.userTagList.filter(t=>t!==e.tagName)}:{userTagList:[...b.userTagList,e.tagName]}),d(1),s.updateQuery({pageNum:null})}})})),h<T?f.default.createElement("div",{className:_.default.showMore,onClick:()=>E(h+20)},f.default.createElement("div",{className:_.default.action},f.default.createElement("span",{className:_.default.text},l("common:查看更多")),f.default.createElement(r.default,null))):null)):null}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const l=a(142),n=a(0),i=a(175);t.useHiveSearch=(e=null,t)=>{const{isHive:a,keyword:r}=n.useContext(i.SearchContext),[u,s]=n.useState(!0),[o,d]=n.useState(""),[c,m]=n.useState([]),[f,p]=n.useState([]),[_,h]=n.useState(null),[g,E]=n.useState();return n.useEffect(()=>{if(!a)return;let n=!1;return(async()=>{try{d("");const{inputTokens:a,records:i,total:u,projectInfo:s}=await l.v1SearchApi.searchHive({...e,keyword:r},t);if(n)return;p(a||[]),m(i),h(u),E(s)}catch(e){if(n)return;d(e.message)}s(!1)})(),()=>n=!0},[e,r,t,a]),{hiveTableData:{inputTokens:f,hiveTables:c,hiveTableTotal:_,hiveTableLoading:u,hiveTableErrorMessage:o,setData:m},projectInfo:g}}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=a(362),r=a(233),u=a(30),s=a(142),o=l(a(4)),d=a(26),c=a(97),m=a(89),f=n(a(0)),p=l(a(260)),_=a(19),h=a(329),g=a(175),E=a(1218),b=a(777),v=a(778),y=l(a(2282)),T=e=>{var t,a;const{data:l,keywords:n}=e,{t:r}=_.useTranslation(),s=l.exeStatusId===b.METRIC_ON,m=f.useMemo(()=>l.name&&l.nameCn?`${l.nameCn}(${l.name})`:!l.name&&l.nameCn?l.nameCn:l.name&&!l.nameCn?l.name:void 0,[l]);return f.default.createElement("div",{className:y.default.tableItem},f.default.createElement("div",{className:y.default.title},f.default.createElement("div",{className:o.default(y.default.icon,s?y.default.on:y.default.off)},r(s?"在线":"离线")),f.default.createElement("div",{className:y.default.name},f.default.createElement(c.ExternalLink,{className:y.default.title,href:`${u.bigDataOrigin}/indicators_manage/manage.html#/detail/${l.metricId}`},f.default.createElement(p.default,{searchWords:n,highlightClassName:"highlighter",autoEscape:!0,textToHighlight:m}))),f.default.createElement("div",{className:y.default.label},r("指标字段"),"：",l.metricKey)),f.default.createElement("div",null,f.default.createElement("span",{className:y.default.label},r("业务口径"),"："),f.default.createElement("span",{className:y.default.value},l.metricDescCn)),f.default.createElement("div",{className:y.default.shortItems},f.default.createElement("div",null,f.default.createElement("span",{className:y.default.label},r("指标ID"),"："),f.default.createElement("span",{className:y.default.value},l.metricId)),f.default.createElement("div",null,f.default.createElement("span",{className:y.default.label},r("业务类别"),"："),f.default.createElement("span",{className:y.default.value},`${null===(t=l.bizLineNames)||void 0===t?void 0:t.join(",")}/${l.bizTypeName}`)),f.default.createElement("div",null,f.default.createElement("span",{className:y.default.label},r("负责人"),"："),f.default.createElement("span",{className:y.default.value},f.default.createElement(d.Tooltip,{title:f.default.createElement(E.OwnerTooltip,{ownerList:l.ownerList})},f.default.createElement("div",{className:y.default.dataOwnerItem},l.ownerList.map((e,t)=>{if(t<3)return f.default.createElement(i.DChat,{className:y.default.value,user:e,key:t})}),l.ownerList.length>3?"...":"")))),f.default.createElement("div",null,f.default.createElement("span",{className:y.default.label},r("指标等级"),"："),f.default.createElement("span",{className:y.default.value},l.levelName))),f.default.createElement("div",null,f.default.createElement("span",{className:y.default.label},r("业务场景"),"："),f.default.createElement("span",{className:y.default.value},null===(a=l.scenceNames)||void 0===a?void 0:a.join(","))))};t.MetricSearchList=()=>{var e;const{setMetricCount:t}=f.useContext(h.CountsDispatchContext),{isMetric:a}=f.useContext(g.SearchContext),l=f.useContext(v.MetricStateContext),{setPageSize:n,setPageCurrent:i}=f.useContext(v.MetricDispatchContext),o=m.useShowTotal(),c=f.useCallback(async e=>{if(a)return s.v1SearchApi.searchMetric(e)},[a]),[p,_,E]=r.useRequest(c,l);return f.useEffect(()=>{!_&&a&&((null==p?void 0:p.total)||0===(null==p?void 0:p.total))&&t(p.total)},[p,a,_,t]),E?f.default.createElement("div",{className:"error"},E):!p&&_?f.default.createElement(d.Spin,{spinning:_,className:"loading"}):0===(null==p?void 0:p.total)?f.default.createElement(d.Empty,{style:{padding:"50px 0"},image:d.Empty.PRESENTED_IMAGE_SIMPLE}):f.default.createElement("div",{className:y.default.metric},null===(e=null==p?void 0:p.records)||void 0===e?void 0:e.map((e,t)=>f.default.createElement(T,{key:t,data:e,keywords:null==p?void 0:p.inputTokens})),!_&&f.default.createElement("div",{className:y.default.pagination},f.default.createElement(d.Pagination,{showTotal:o,showSizeChanger:!0,showQuickJumper:!0,pageSize:l.pageSize,current:l.pageCurrent,onShowSizeChange:(e,t)=>{n(t),u.updateQuery({pageSize:10!==t?t:null})},onChange:e=>{i(e),u.updateQuery({pageNum:e>1?e:null})},total:null==p?void 0:p.total})))}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const l=a(142),n=a(0),i=a(175);t.UseMysqlSearch=(e=null,t)=>{const{isMysql:a,keyword:r}=n.useContext(i.SearchContext),[u,s]=n.useState(!0),[o,d]=n.useState(""),[c,m]=n.useState([]),[f,p]=n.useState([]),[_,h]=n.useState(null);return n.useEffect(()=>{if(!a)return;let n=!1;return(async()=>{try{d("");const{inputTokens:a,records:i,total:u}=await l.v1SearchApi.searchMysql({sort:e.sort,pageCurrent:e.pageCurrent,pageSize:e.pageSize,pageFilter:{...e,keyword:r}},t);if(n)return;p(a||[]),m(i),h(u)}catch(e){if(n)return;d(e.message)}s(!1)})(),()=>n=!0},[e,r,t,a]),{inputTokens:f,MysqlTables:c,MysqlTableTotal:_,MysqlTableLoading:u,MysqlTableErrorMessage:o}}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=l(a(189)),r=l(a(154)),u=a(30),s=l(a(4)),o=a(26),d=a(199),c=n(a(0)),m=a(19),f=a(471),p=a(546),_=l(a(1219));t.MysqlTableFilter=e=>{const{params:t}=c.useContext(p.MysqlStateContext),{pageFilter:a}=t,{updateParams:l,setPageCurrent:n,setSort:h}=c.useContext(p.MysqlDispatchContext),{t:g}=m.useTranslation(),E=[{label:g("search:我浏览过的"),value:"isRecent"}],b=c.useMemo(()=>{const e=[];for(const a of f.OPTION_KEYS)t[a]&&e.push(a);return e},[t]);return c.default.createElement("div",{className:_.default.filterOptions},c.default.createElement("div",{className:_.default.sort},c.default.createElement("div",{className:_.default.list},c.default.createElement("span",{"auto-track-click":JSON.stringify({e:"mysql-detail",attrs:{composite:g("search:综合排序")}}),className:s.default({[_.default.active]:t.sort===d.SearchSort.COMPOSITE}),onClick:()=>{h(d.SearchSort.COMPOSITE),n(1),u.updateQuery({sort:null,pageCurrent:null})}},g("search:综合排序"))),c.default.createElement("div",{className:_.default.pageWrapper},c.default.createElement(i.default,{className:s.default({[_.default.disabled]:t.pageCurrent<=1}),onClick:()=>{if(t.pageCurrent>1){const e=t.pageCurrent-1;u.updateQuery({pageCurrent:e}),n(e)}}}),c.default.createElement("div",{className:_.default.page},c.default.createElement("span",{className:_.default.current},t.pageCurrent),c.default.createElement("span",null,"/"),c.default.createElement("span",null,e.total&&t.pageSize?u.humanNum(Math.ceil(e.total/t.pageSize),{useGrouping:!0}):"-")),c.default.createElement(r.default,{className:s.default({[_.default.disabled]:t.pageCurrent>=Math.ceil(e.total/t.pageSize)}),onClick:()=>{if(t.pageCurrent<Math.ceil(e.total/t.pageSize)){const e=t.pageCurrent+1;u.updateQuery({pageCurrent:e}),n(e)}}}))),c.default.createElement(o.Checkbox.Group,{options:E,value:b,onChange:e=>{const t={pageCurrent:null},i={};for(const a of f.OPTION_KEYS)i[a]=e.includes(a),t[`${a}_${d.SearchType.HIVE}`]=e.includes(a)?"true":null;l({...a,...i}),u.updateQuery(t),n(1)}}))}},function(e,t,a){e.exports={metric:"style_metric_32r2I",pagination:"style_pagination_ogGFK","data-owner-item":"style_data-owner-item_1Nu81",dataOwnerItem:"style_data-owner-item_1Nu81",loading:"style_loading_27ubA","table-item":"style_table-item_26i2w",tableItem:"style_table-item_26i2w",label:"style_label_33fGT",value:"style_value_3_RMK","short-items":"style_short-items_18bvT",shortItems:"style_short-items_18bvT",title:"style_title_3LdyV",name:"style_name_3k3hS",icon:"style_icon_1znGe",on:"style_on_2_BOM",off:"style_off_1dB8M"}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=l(a(121)),r=l(a(129)),u=l(a(221)),s=a(30),o=l(a(4)),d=a(26),c=n(a(0)),m=a(19),f=a(1220),p=a(1221),_=l(a(281)),h=a(777),g=a(778);t.MetricAggregation=()=>{const{t:e}=m.useTranslation(),{loading:a,aggregation:l}=c.useContext(g.MetricAggregationContext),{dispatchPageFilter:n,setPageCurrent:r}=c.useContext(g.MetricDispatchContext),{pageFilter:u}=c.useContext(g.MetricStateContext),s=c.useMemo(()=>{var e,t,a,n,i,r,s;const o=[];if(!u||!l)return o;const d=null===(e=l.bizLines)||void 0===e?void 0:e.find(({value:e})=>e===u.bizLines),c=null===(t=l.bizProcesses)||void 0===t?void 0:t.find(({value:e})=>e===u.bizProcesses),m=null===(a=l.bizScenes)||void 0===a?void 0:a.find(({value:e})=>e===u.bizScenes),f=null===(n=l.bizTypes)||void 0===n?void 0:n.find(({value:e})=>e===u.bizTypes),p=null===(i=l.domains)||void 0===i?void 0:i.find(({value:e})=>e===u.domains),_=null===(r=l.exeStatus)||void 0===r?void 0:r.find(({value:e})=>e===u.exeStatus),h=null===(s=l.levels)||void 0===s?void 0:s.find(({value:e})=>e===u.levels);return d&&o.push({...d,type:"bizLines"}),c&&o.push({...c,type:"bizProcesses"}),m&&o.push({...m,type:"bizScenes"}),f&&o.push({...f,type:"bizTypes"}),p&&o.push({...p,type:"domains"}),_&&o.push({..._,type:"exeStatus"}),h&&o.push({...h,type:"levels"}),o},[u,l]);return c.default.createElement("div",{className:_.default.conditionWrapper},c.default.createElement("div",{className:_.default.condition},c.default.createElement("div",{className:_.default.filter},c.default.createElement("div",{className:_.default.title},c.default.createElement("span",{className:_.default.text},e("search:筛选条件")),c.default.createElement(d.Button,{className:_.default.actionReset,type:"link",icon:c.default.createElement(d.IconFont,{type:"icon-delete"}),size:"small",onClick:()=>n({type:h.METRIC_ACTION_TYPES.RESET})},e("common:重置"))),c.default.createElement("div",{className:_.default.filterContent},s.map(({value:e,label:t,type:a})=>c.default.createElement("div",{className:_.default.filterTag,key:`${e}-${t}-${a}`},c.default.createElement("span",{className:_.default.text},t),c.default.createElement(i.default,{onClick:()=>{n({type:h.METRIC_ACTION_TYPES.PARAMS,params:{[a]:void 0}}),r(1)}})))),c.default.createElement(d.Spin,{spinning:a,className:"loading"},c.default.createElement(t.Block,{data:l.bizTypes,type:"bizTypes"}),c.default.createElement(t.Block,{data:l.domains,type:"domains"}),c.default.createElement(t.Block,{data:l.bizLines,type:"bizLines"}),c.default.createElement(t.Block,{data:l.bizScenes,type:"bizScenes"}),c.default.createElement(t.Block,{data:l.levels,type:"levels"}),c.default.createElement(t.Block,{data:l.exeStatus,type:"exeStatus"}),c.default.createElement(t.Block,{data:l.bizProcesses,type:"bizProcesses"})))))},t.Block=e=>{const{data:t,type:a}=e,[l,n]=c.useState(!1),{pageFilter:i}=c.useContext(g.MetricStateContext),{dispatchPageFilter:d,setPageCurrent:E}=c.useContext(g.MetricDispatchContext),{t:b}=m.useTranslation(),[v,y]=c.useState(p.SHOW_NUMBER),T=c.useMemo(()=>null==t?void 0:t.slice(0,v),[t,v]),N=c.useMemo(()=>({bizTypes:b("业务板块"),bizLines:b("业务线"),bizScenes:b("业务场景"),levels:b("指标等级"),exeStatus:b("指标状态"),domains:b("数据域"),bizProcesses:b("业务过程")}),[b]);return(null==t?void 0:t.length)?c.default.createElement("div",{className:o.default(_.default.searchBlock,{[_.default.fold]:l})},c.default.createElement("div",{className:_.default.blockTitle,onClick:()=>n(!l)},c.default.createElement(f.Tag,{classNames:_.default.text,name:N[a],count:t.length}),l?c.default.createElement(u.default,null):c.default.createElement(r.default,null)),l?null:c.default.createElement(c.default.Fragment,null,c.default.createElement("div",{className:_.default.blockContent},T.map(e=>{const t=i[a]===e.value;return c.default.createElement(f.Tag,{name:e.label,count:e.metricCount,key:`${e.value}-${e.label}`,selected:t,onClick:async()=>{t||d({type:h.METRIC_ACTION_TYPES.PARAMS,params:{...i,[a]:e.value}}),E(1),s.updateQuery({pageCurrent:null})}})})),v<t.length?c.default.createElement("div",{className:_.default.showMore,onClick:()=>y(v+p.SHOW_NUMBER)},c.default.createElement("div",{className:_.default.action},c.default.createElement("span",{className:_.default.text},b("common:查看更多")),c.default.createElement(r.default,null))):null)):null}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=l(a(121)),r=l(a(129)),u=l(a(221)),s=a(30),o=l(a(4)),d=a(26),c=n(a(0)),m=a(19),f=l(a(281)),p=a(471),_=a(546);t.Tag=e=>{const{count:t,selected:a=!1}=e;let l=e.name;return t&&(l=`${l}(${t})`),c.default.createElement("span",{onClick:e.onClick,className:o.default(f.default.tag,{[e.classNames]:e.classNames,[f.default.selected]:a})},l)},t.MysqlAggregation=()=>{const{t:e}=m.useTranslation(),{params:a}=c.useContext(_.MysqlStateContext),{bu:l,collectStatus:n,ownerList:r}=a,{updateParams:u,setPageCurrent:o,dispatchParams:h}=c.useContext(_.MysqlDispatchContext),{aggregation:g,loading:E}=c.useContext(_.MysqlAggregationContext),b=c.useMemo(()=>g.buList.find(e=>e.buName===l),[l,g.buList]),v=c.useMemo(()=>g.collectStatusList.find(e=>e.value===n),[n,g.collectStatusList]);return c.default.createElement("div",{className:f.default.conditionWrapper},c.default.createElement("div",{className:f.default.condition},c.default.createElement("div",{className:f.default.filter},c.default.createElement("div",{className:f.default.title},c.default.createElement("span",{className:f.default.text},e("search:筛选条件")),c.default.createElement(d.Button,{className:f.default.actionReset,type:"link",icon:c.default.createElement(d.IconFont,{type:"icon-delete"}),size:"small",onClick:()=>{const e={keyword:null,sort:null,pageCurrent:null,pageSize:null};for(const t of p.OPTION_KEYS)e[t]=null;s.updateQuery(e),h({type:p.MYSQL_ACTION_TYPES.RESET})}},e("common:重置"))),c.default.createElement("div",{className:f.default.filterContent},b&&b.buName&&c.default.createElement("div",{className:f.default.filterTag},c.default.createElement("span",{className:f.default.text},b.buName),c.default.createElement(i.default,{onClick:()=>{h({type:p.MYSQL_ACTION_TYPES.UPDATE_BU,params:{...a,bu:void 0}}),o(1)}})),v&&c.default.createElement("div",{className:f.default.filterTag},c.default.createElement("span",{className:f.default.text},p.COLLECT_STATUS[v.value]),c.default.createElement(i.default,{onClick:()=>{h({type:p.MYSQL_ACTION_TYPES.PARAMS,params:{...a,collectStatus:void 0}}),o(1)}})),r&&r.map(e=>{var t;const l=g.ownerList.find(t=>t.userAccount===e);return c.default.createElement("div",{key:e,className:f.default.filterTag},c.default.createElement("span",{className:f.default.text},null!==(t=null==l?void 0:l.userName)&&void 0!==t?t:e),c.default.createElement(i.default,{onClick:async()=>{u({...a,pageCurrent:1}),s.updateQuery({pageCurrent:null}),u({...a,ownerList:r.filter(t=>e!==t)})}}))}))),c.default.createElement(d.Spin,{spinning:E},c.default.createElement(t.Bu,null),c.default.createElement(t.CollectStatus,null),c.default.createElement(t.Owner,null))))},t.Bu=()=>{var e,a;const{t:l}=m.useTranslation(),{aggregation:n}=c.useContext(_.MysqlAggregationContext),{setPageCurrent:i,dispatchParams:s}=c.useContext(_.MysqlDispatchContext),[h,g]=c.useState(20),[E,b]=c.useState(!1),{params:v}=c.useContext(_.MysqlStateContext),y={...v.pageFilter,...v},T=c.useMemo(()=>{var e;return null===(e=n.buList)||void 0===e?void 0:e.slice(0,h)},[n.ownerList,h]),N=n.buTotalCount,S=null!==(a=null===(e=null==n?void 0:n.buList)||void 0===e?void 0:e.length)&&void 0!==a?a:0;return S?c.default.createElement("div",{className:o.default(f.default.searchBlock,{[f.default.fold]:E})},c.default.createElement("div",{className:f.default.blockTitle,onClick:()=>b(!E)},c.default.createElement(t.Tag,{classNames:f.default.text,name:l("detail:业务线"),count:N}),E?c.default.createElement(u.default,null):c.default.createElement(r.default,null)),E?null:c.default.createElement(c.default.Fragment,null,c.default.createElement("div",{className:f.default.blockContent},c.default.createElement(d.Radio.Group,{onChange:e=>{s({type:p.MYSQL_ACTION_TYPES.UPDATE_BU,params:{...y,bu:e.target.value}}),i(1)},value:y.bu},T&&T.map((e,t)=>c.default.createElement(d.Radio,{value:e.buName,key:t},e.buName?`${e.buName}(${e.count})`:e.buName)))),h<S?c.default.createElement("div",{className:f.default.showMore,onClick:()=>g(h+20)},c.default.createElement("div",{className:f.default.action},c.default.createElement("span",{className:f.default.text},l("common:查看更多")),c.default.createElement(r.default,null))):null)):null},t.CollectStatus=()=>{var e,a;const{t:l}=m.useTranslation(),{aggregation:n}=c.useContext(_.MysqlAggregationContext),{setPageCurrent:i,updateParams:d}=c.useContext(_.MysqlDispatchContext),[h,g]=c.useState(!1),{params:E}=c.useContext(_.MysqlStateContext),b={...E.pageFilter,...E},v=n.collectStatusTotalCount;return(null!==(a=null===(e=null==n?void 0:n.collectStatusList)||void 0===e?void 0:e.length)&&void 0!==a?a:0)?c.default.createElement("div",{className:o.default(f.default.searchBlock,{[f.default.fold]:h})},c.default.createElement("div",{className:f.default.blockTitle,onClick:()=>g(!h)},c.default.createElement(t.Tag,{classNames:f.default.text,name:l("search:采集状态"),count:v}),h?c.default.createElement(u.default,null):c.default.createElement(r.default,null)),h?null:c.default.createElement(c.default.Fragment,null,c.default.createElement("div",{className:f.default.blockContent},n.collectStatusList.map(e=>{const a=b.collectStatus==e.value;return c.default.createElement(t.Tag,{name:p.COLLECT_STATUS[e.value],count:e.count,key:e.value,selected:a,onClick:async()=>{d(a?{...b,collectStatus:void 0}:{...b,collectStatus:e.value}),i(1),s.updateQuery({pageCurrent:null})}})})))):null},t.Owner=()=>{var e;const{t:a}=m.useTranslation(),{aggregation:l}=c.useContext(_.MysqlAggregationContext),{updateParams:n,setPageCurrent:i}=c.useContext(_.MysqlDispatchContext),[d,p]=c.useState(!1),[h,g]=c.useState(20),{params:E}=c.useContext(_.MysqlStateContext),b={...E.pageFilter,...E},v=c.useMemo(()=>{var e;return null===(e=l.ownerList)||void 0===e?void 0:e.slice(0,h)},[l.ownerList,h]),y=l.ownerTotalCount,T=null!==(e=l.ownerList.length)&&void 0!==e?e:0;return T?c.default.createElement("div",{className:o.default(f.default.searchBlock,{[f.default.fold]:d})},c.default.createElement("div",{className:f.default.blockTitle,onClick:()=>p(!d)},c.default.createElement(t.Tag,{classNames:f.default.text,name:a("detail:责任人"),count:y}),d?c.default.createElement(u.default,null):c.default.createElement(r.default,null)),d?null:c.default.createElement(c.default.Fragment,null,c.default.createElement("div",{className:f.default.blockContent},v.map(e=>{const a=b.ownerList.includes(e.userAccount);return c.default.createElement(t.Tag,{name:e.userName,count:e.count,key:e.userAccount,selected:a,onClick:async()=>{n(a?{...b,ownerList:b.ownerList.filter(t=>t!==e.userAccount)}:{...b,ownerList:[...b.ownerList,e.userAccount]}),i(1),s.updateQuery({pageCurrent:null})}})})),h<T?c.default.createElement("div",{className:f.default.showMore,onClick:()=>g(h+20)},c.default.createElement("div",{className:f.default.action},c.default.createElement("span",{className:f.default.text},a("common:查看更多")),c.default.createElement(r.default,null))):null)):null}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=a(30),r=a(142),u=a(26),s=a(120),o=a(97),d=a(89),c=a(412),m=l(a(413)),f=n(a(0)),p=l(a(260)),_=a(19),h=a(329),g=a(175),E=a(547),b=a(2286),v=l(a(1222)),y=e=>{var t,a,l;const{item:n,keywords:i,setData:r,data:u}=e,{t:d}=_.useTranslation();return f.default.createElement("div",{className:v.default.tableItem},f.default.createElement("div",{className:v.default.title},f.default.createElement(o.ExternalLink,{className:v.default.title,href:`/detail/log?uri=${n.uri}&keywords=${i}`,withReferrer:!0},f.default.createElement(p.default,{searchWords:i,highlightClassName:"highlighter",autoEscape:!0,textToHighlight:n.publicLogKey}))),f.default.createElement("div",{className:v.default.label},n.publicLogKeyZH),f.default.createElement("div",{className:v.default.shortItems},f.default.createElement("div",{className:v.default.widthBox},f.default.createElement("span",{className:v.default.label},d("国家"),"： "),f.default.createElement("span",{className:v.default.value},n.country)),f.default.createElement("div",{className:v.default.widthBox},f.default.createElement("span",{className:v.default.label},d("业务线"),"： "),f.default.createElement("span",{className:v.default.value},n.businessType)),f.default.createElement("div",{className:v.default.lastBox},f.default.createElement("span",{className:v.default.label},d("资产负责人"),"： "),f.default.createElement("span",{className:v.default.value},n.owner?f.default.createElement("div",{className:v.default.dataOwnerItem,key:n.owner.account},f.default.createElement(s.DChat,{className:v.default.value,user:n.owner}),(null===(t=n.communicateCount)||void 0===t?void 0:t.account)&&f.default.createElement(c.ZanActive,{owner:n.owner,count:(null===(a=n.communicateCount)||void 0===a?void 0:a.count)||0,active:(null===(l=n.communicateCount)||void 0===l?void 0:l.isAdd)||!1,onClick:e=>{u.forEach(t=>{var a,l;(null===(a=t.communicateCount)||void 0===a?void 0:a.account)==(null===(l=n.communicateCount)||void 0===l?void 0:l.account)&&(t.communicateCount.count=e.count,t.communicateCount.isAdd=e.isAdd)}),r(m.default.cloneDeep(u))}})):""))),f.default.createElement("div",{className:v.default.shortItems},f.default.createElement("div",{className:v.default.widthBox},f.default.createElement("span",{className:v.default.label},d("采集状态"),"： "),f.default.createElement("span",{className:v.default.value},1===n.collectStatus?d("已采集"):d("未采集"))),f.default.createElement("div",{className:v.default.widthBox},f.default.createElement("span",{className:v.default.label},d("创建时间"),"： "),f.default.createElement("span",{className:v.default.value},n.createTimeLabel)),f.default.createElement("div",{className:v.default.lastBox},f.default.createElement("span",{className:v.default.label},d("日志说明"),"： "),f.default.createElement("span",{className:v.default.value},n.logDescription))))};t.PublicLog=()=>{var e,t;const a=f.useContext(E.PublicLogStateContext),{isPublicLog:l}=f.useContext(g.SearchContext),{setPublicLogCount:n}=f.useContext(h.CountsDispatchContext),{setPageSize:s,setPageCurrent:o}=f.useContext(E.PublicLogDispatchContext),c=d.useShowTotal(),[m,p]=f.useState(!1),[_,T]=f.useState(""),[N,S]=f.useState({total:0,records:[],inputTokens:[]});return f.useEffect(()=>{p(!0),T("");(async e=>{if(l){try{const t=await r.v1SearchApi.searchPublicLog(e);S(t)}catch(e){T(e)}p(!1)}})(a)},[l,a]),f.useEffect(()=>{l&&!m&&((null==N?void 0:N.total)||0===(null==N?void 0:N.total))&&n(N.total)},[N,l,m,n]),_?f.default.createElement("div",{className:"error"},_):N?f.default.createElement("div",{className:v.default.publicLog},f.default.createElement(b.PublicLogTableFilter,{total:(null==N?void 0:N.total)||0}),0===(null===(e=N.records)||void 0===e?void 0:e.length)?f.default.createElement(u.Empty,{style:{padding:"50px 0"},image:u.Empty.PRESENTED_IMAGE_SIMPLE}):null===(t=N.records)||void 0===t?void 0:t.map((e,t)=>f.default.createElement(y,{item:e,key:t,keywords:N.inputTokens,data:N.records,setData:e=>{S(()=>({...N,records:e}))}})),!m&&f.default.createElement("div",{className:v.default.pagination},f.default.createElement(u.Pagination,{showTotal:c,showSizeChanger:!0,showQuickJumper:!0,pageSize:null==a?void 0:a.pageSize,current:null==a?void 0:a.pageCurrent,onShowSizeChange:(e,t)=>{s(t),i.updateQuery({pageSize:10!==t?t:null})},onChange:e=>{o(e),i.updateQuery({pageNum:e>1?e:null})},total:null==N?void 0:N.total}))):f.default.createElement(u.Spin,{spinning:m,className:"loading"})}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=l(a(189)),r=l(a(154)),u=a(30),s=l(a(4)),o=a(26),d=n(a(0)),c=a(19),m=a(779),f=a(547),p=l(a(1222));t.PublicLogTableFilter=e=>{const{pageFilter:t,pageCurrent:a,pageSize:l}=d.useContext(f.PublicLogStateContext),{setPageCurrent:n,dispatchPageFilter:_}=d.useContext(f.PublicLogDispatchContext),{t:h}=c.useTranslation(),g=[{label:h("search:我浏览过的"),value:"isRecent"}],E=d.useMemo(()=>{const e=[];for(const a of m.OPTION_KEYS)t[a]&&e.push(a);return e},[t]);return d.default.createElement("div",{className:p.default.filterOptions},d.default.createElement("div",{className:p.default.sort},d.default.createElement("div",{className:p.default.list},d.default.createElement("span",{"auto-track-click":JSON.stringify({e:"stream-detail",attrs:{composite:"综合排序"}}),className:s.default({[p.default.active]:!0}),onClick:()=>{n(1),u.updateQuery({pageCurrent:null})}},h("search:综合排序"))),d.default.createElement("div",{className:p.default.pageWrapper},d.default.createElement(i.default,{className:s.default({[p.default.disabled]:a<=1}),onClick:()=>{if(a>1){const e=a-1;u.updateQuery({pageNum:e}),n(e)}}}),d.default.createElement("div",{className:p.default.page},d.default.createElement("span",{className:p.default.current},a),d.default.createElement("span",null,"/"),d.default.createElement("span",null,e.total&&l?u.humanNum(Math.ceil(e.total/l),{useGrouping:!0}):"-")),d.default.createElement(r.default,{className:s.default({[p.default.disabled]:a>=Math.ceil(e.total/l)}),onClick:()=>{if(a<Math.ceil(e.total/l)){const e=a+1;u.updateQuery({pageCurrent:e}),n(e)}}}))),d.default.createElement(o.Checkbox.Group,{options:g,value:E,onChange:e=>{const t={};for(const a of m.OPTION_KEYS)e.includes(a)?t[a]=!0:t[a]=void 0;_({type:m.PUBLIC_LOG_ACTION_TYPES.PARAMS,params:t}),n(1)}}))}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=l(a(121)),r=l(a(129)),u=l(a(221)),s=a(30),o=l(a(4)),d=a(26),c=n(a(0)),m=a(19),f=a(1220),p=a(1221),_=l(a(281)),h=a(779),g=a(547),E=e=>{const{data:t}=e,[a,l]=c.useState(!1),{pageFilter:n}=c.useContext(g.PublicLogStateContext),{dispatchPageFilter:i,setPageCurrent:d}=c.useContext(g.PublicLogDispatchContext),{t:p}=m.useTranslation();return(null==t?void 0:t.length)?c.default.createElement("div",{className:o.default(_.default.searchBlock,{[_.default.fold]:a})},c.default.createElement("div",{className:_.default.blockTitle,onClick:()=>l(!a)},c.default.createElement(f.Tag,{classNames:_.default.text,name:p("采集状态"),count:t.length}),a?c.default.createElement(u.default,null):c.default.createElement(r.default,null)),a?null:c.default.createElement("div",{className:_.default.blockContent},t.map(({name:e,count:t})=>{const a="1"===e,l=n.collectStatus===Number(e);return c.default.createElement(f.Tag,{name:p(a?"已采集":"未采集"),count:t,key:e,selected:l,onClick:async()=>{l||(i({type:h.PUBLIC_LOG_ACTION_TYPES.PARAMS,params:{...n,collectStatus:a?1:0}}),d(1),s.updateQuery({pageCurrent:null}))}})}))):null},b=e=>{const{data:t}=e,[a,l]=c.useState(!1),{pageFilter:n}=c.useContext(g.PublicLogStateContext),{dispatchPageFilter:i,setPageCurrent:d}=c.useContext(g.PublicLogDispatchContext),{t:E}=m.useTranslation(),[b,v]=c.useState(p.SHOW_NUMBER),y=c.useMemo(()=>null==t?void 0:t.slice(0,b),[t,b]);return(null==t?void 0:t.length)?c.default.createElement("div",{className:o.default(_.default.searchBlock,{[_.default.fold]:a})},c.default.createElement("div",{className:_.default.blockTitle,onClick:()=>l(!a)},c.default.createElement(f.Tag,{classNames:_.default.text,name:E("业务线"),count:t.length}),a?c.default.createElement(u.default,null):c.default.createElement(r.default,null)),a?null:c.default.createElement(c.default.Fragment,null,c.default.createElement("div",{className:_.default.blockContent},y.map(({name:e,count:t})=>{var a;const l=null===(a=n.businessLines)||void 0===a?void 0:a.includes(e);return c.default.createElement(f.Tag,{name:e,count:t,key:e,selected:l,onClick:async()=>{if(l)return;const t=n.businessLines||[];t.push(e),i({type:h.PUBLIC_LOG_ACTION_TYPES.PARAMS,params:{...n,businessLines:t}}),d(1),s.updateQuery({pageCurrent:null})}})})),b<t.length?c.default.createElement("div",{className:_.default.showMore,onClick:()=>v(b+p.SHOW_NUMBER)},c.default.createElement("div",{className:_.default.action},c.default.createElement("span",{className:_.default.text},E("common:查看更多")),c.default.createElement(r.default,null))):null)):null},v=e=>{const{data:t}=e,[a,l]=c.useState(!1),{pageFilter:n}=c.useContext(g.PublicLogStateContext),{dispatchPageFilter:i,setPageCurrent:d}=c.useContext(g.PublicLogDispatchContext),{t:E}=m.useTranslation(),[b,v]=c.useState(p.SHOW_NUMBER),y=c.useMemo(()=>null==t?void 0:t.slice(0,b),[t,b]);return(null==t?void 0:t.length)?c.default.createElement("div",{className:o.default(_.default.searchBlock,{[_.default.fold]:a})},c.default.createElement("div",{className:_.default.blockTitle,onClick:()=>l(!a)},c.default.createElement(f.Tag,{classNames:_.default.text,name:E("责任人"),count:t.length}),a?c.default.createElement(u.default,null):c.default.createElement(r.default,null)),a?null:c.default.createElement(c.default.Fragment,null,c.default.createElement("div",{className:_.default.blockContent},y.map(({userName:e,count:t,account:a})=>{var l;const r=null===(l=n.owner)||void 0===l?void 0:l.includes(a);return c.default.createElement(f.Tag,{name:e,count:t,key:a,selected:r,onClick:async()=>{if(r)return;const e=n.owner||[];e.push(a),i({type:h.PUBLIC_LOG_ACTION_TYPES.PARAMS,params:{...n,owner:e}}),d(1),s.updateQuery({pageCurrent:null})}})})),b<t.length?c.default.createElement("div",{className:_.default.showMore,onClick:()=>v(b+p.SHOW_NUMBER)},c.default.createElement("div",{className:_.default.action},c.default.createElement("span",{className:_.default.text},E("common:查看更多")),c.default.createElement(r.default,null))):null)):null};t.PublicLogAggregation=()=>{const{t:e}=m.useTranslation(),{loading:t,aggregation:a}=c.useContext(g.PublicLogAggregationContext),{pageFilter:l}=c.useContext(g.PublicLogStateContext),{dispatchPageFilter:n,setPageCurrent:r}=c.useContext(g.PublicLogDispatchContext),u=c.useMemo(()=>(null==l?void 0:l.businessLines)?a.businessLineAggResult.filter(({name:e})=>l.businessLines.includes(e)):[],[a,l]),s=c.useMemo(()=>(null==l?void 0:l.owner)?a.ownerAggResult.filter(({account:e})=>l.owner.includes(e)):[],[a,l]),o=c.useMemo(()=>{if(!(null==l?void 0:l.collectStatus)&&0!==(null==l?void 0:l.collectStatus))return null;const t=Boolean(l.collectStatus===Number("1"));return c.default.createElement("div",{className:_.default.filterTag},c.default.createElement("span",{className:_.default.text},e(t?"已采集":"未采集")),c.default.createElement(i.default,{onClick:()=>{n({type:h.PUBLIC_LOG_ACTION_TYPES.PARAMS,params:{collectStatus:void 0}}),r(1)}}))},[n,l,r,e]);return c.default.createElement("div",{className:_.default.conditionWrapper},c.default.createElement("div",{className:_.default.condition},c.default.createElement("div",{className:_.default.filter},c.default.createElement("div",{className:_.default.title},c.default.createElement("span",{className:_.default.text},e("search:筛选条件")),c.default.createElement(d.Button,{className:_.default.actionReset,type:"link",icon:c.default.createElement(d.IconFont,{type:"icon-delete"}),size:"small",onClick:()=>n({type:h.PUBLIC_LOG_ACTION_TYPES.RESET})},e("common:重置"))),c.default.createElement("div",{className:_.default.filterContent},s.map(({account:e,userName:t})=>c.default.createElement("div",{className:_.default.filterTag,key:e},c.default.createElement("span",{className:_.default.text},t),c.default.createElement(i.default,{onClick:()=>{const t=l.owner.filter(t=>t!==e);n({type:h.PUBLIC_LOG_ACTION_TYPES.PARAMS,params:{owner:t}}),r(1)}}))),u.map(({name:e})=>c.default.createElement("div",{className:_.default.filterTag,key:e},c.default.createElement("span",{className:_.default.text},e),c.default.createElement(i.default,{onClick:()=>{const t=l.businessLines.filter(t=>t!==e);n({type:h.PUBLIC_LOG_ACTION_TYPES.PARAMS,params:{businessLines:t}}),r(1)}}))),o),c.default.createElement(d.Spin,{spinning:t},c.default.createElement(b,{data:a.businessLineAggResult}),c.default.createElement(E,{data:a.collectStatusAggResult}),c.default.createElement(v,{data:a.ownerAggResult})))))}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=a(30),r=l(a(118)),u=a(142),s=l(a(4)),o=a(26),d=a(120),c=a(97),m=a(89),f=a(412),p=l(a(413)),_=n(a(0)),h=l(a(260)),g=a(19),E=a(117),b=a(329),v=a(2289),y=a(548),T=a(2290),N=l(a(1223));t.StreamTable=()=>{const{setStreamCount:e}=_.useContext(b.CountsDispatchContext),{sessionId:a,params:l}=_.useContext(y.StreamStateContext),{setPageNum:n,setPageSize:u}=_.useContext(y.StreamDispatchContext),{inputTokens:s,StreamTables:d,StreamTableLoading:c,StreamTableErrorMessage:f,StreamTableTotal:p,setData:h}=v.UseStreamSearch(l,a),g=m.useShowTotal();return _.useEffect(()=>{c||null===p||e(p)},[e,p,c]),_.default.createElement("div",null,_.default.createElement(T.StreamTableFilter,{total:p}),_.default.createElement(r.default,{spinning:c},f?_.default.createElement("div",{className:N.default.error},f):(null==d?void 0:d.length)?_.default.createElement("div",{className:N.default.tableList},_.default.createElement("div",{className:N.default.tableList},null==d?void 0:d.map((e,l)=>_.default.createElement(t.StreamTableItem,{key:`${e.dbName}.${e.tableName}`,keywords:s,index:l,sessionId:a,item:e,StreamTables:d,setData:h}))),_.default.createElement("div",{className:N.default.pagination},_.default.createElement(o.Pagination,{showTotal:g,showSizeChanger:!0,showQuickJumper:!0,pageSize:l.pageSize,current:l.pageNum,onShowSizeChange:(e,t)=>{u(t),i.updateQuery({pageSize:10!==t?t:null})},onChange:e=>{n(e),i.updateQuery({pageNum:e>1?e:null})},total:p}))):_.default.createElement("div",{className:N.default.tableList},_.default.createElement("div",{className:N.default.tableList},_.default.createElement(o.Empty,{style:{padding:"50px 0"},image:o.Empty.PRESENTED_IMAGE_SIMPLE})))))},t.StreamTableItem=e=>{var t,a,l;const{keywords:n,item:i,index:r,sessionId:o,StreamTables:m,setData:b}=e,{t:v}=g.useTranslation(),{params:T}=_.useContext(y.StreamStateContext),S=i.uri;return _.default.createElement("div",{className:N.default.item,key:`${i.dbName}.${i.tableName}`},_.default.createElement("div",{className:N.default.mainContent},_.default.createElement("div",{className:N.default.name},i.isChoicest?_.default.createElement("span",{className:N.default.choicest},"精"):null,_.default.createElement(c.ExternalLink,{className:N.default.text,href:`/detail/stream?uri=${S}&keyword=${n.join()}`,withReferrer:!0,onClick:()=>{const e={keyword:T.keyword,uri:S,page:T.pageNum,rank:r,searchSessionId:o};u.v1SearchApi.searchLogStream(e)}},_.default.createElement(h.default,{searchWords:n,highlightClassName:N.default.highlighter,autoEscape:!0,textToHighlight:`${i.dbName}.${i.tableName}`}))),i.tableNameZh&&_.default.createElement(h.default,{className:N.default.title,searchWords:n,highlightClassName:N.default.highlighter,autoEscape:!0,textToHighlight:i.tableNameZh}),_.default.createElement("div",{className:N.default.metaContent},_.default.createElement("div",{className:N.default.line},_.default.createElement("div",{className:s.default(N.default.item,N.default.projectCode)},_.default.createElement("span",{className:N.default.label},v("common:项目"),":"),i.projectDTO?_.default.createElement(E.Link,{to:{pathname:"/project/detail",search:`?projectCode=${i.projectDTO.code}&tab=stream`}},i.projectDTO.name):"-"),_.default.createElement("div",{className:s.default(N.default.item,N.default.dataOwner)},_.default.createElement(h.default,{className:N.default.label,searchWords:n,highlightClassName:N.default.highlighter,autoEscape:!0,textToHighlight:v("detail:资产负责人")+":"}),i.dataOwner?_.default.createElement("div",{className:N.default.dataOwnerItem,key:i.dataOwner.account},_.default.createElement(d.DChat,{className:N.default.value,user:i.dataOwner}),(null===(t=i.communicateCount)||void 0===t?void 0:t.account)&&_.default.createElement(f.ZanActive,{owner:i.dataOwner,count:i.communicateCount.count,active:i.communicateCount.isAdd,onClick:e=>{m.forEach(t=>{t.communicateCount.account==i.communicateCount.account&&(t.communicateCount.count=e.count,t.communicateCount.isAdd=e.isAdd)}),b(p.default.cloneDeep(m))}})):""),_.default.createElement("div",{className:s.default(N.default.item)},_.default.createElement("span",{className:N.default.label},v("detail:引入时间"),":"),_.default.createElement("span",{className:N.default.value},i.createTimeLabel||"-"))),_.default.createElement("div",{className:N.default.line},_.default.createElement("div",{className:s.default(N.default.item,N.default.storageMedium)},_.default.createElement("span",{className:N.default.label},v("detail:存储介质"),":"),_.default.createElement("span",{className:N.default.value},i.storageMedium&&_.default.createElement(h.default,{searchWords:n,highlightClassName:N.default.highlighter,autoEscape:!0,textToHighlight:i.storageMedium})||"-")),_.default.createElement("div",{className:s.default(N.default.item)},_.default.createElement("span",{className:N.default.label},v("detail:数据格式"),":"),_.default.createElement("span",{className:N.default.value},i.dataFormat&&_.default.createElement(h.default,{searchWords:n,highlightClassName:N.default.highlighter,autoEscape:!0,textToHighlight:i.dataFormat})||"-")),_.default.createElement("div",{className:s.default(N.default.item,N.default.topicName)},_.default.createElement("span",{className:N.default.label},v("detail:topic名称"),":"),_.default.createElement(h.default,{searchWords:n,highlightClassName:N.default.highlighter,autoEscape:!0,textToHighlight:i.topicName}))))),_.default.createElement("div",{className:N.default.extra}),_.default.createElement("div",{className:N.default.statistics},_.default.createElement("div",{className:s.default(N.default.item,N.default.nps)},v("search:用户NPS"),_.default.createElement("span",{className:N.default.value},null!==(a=i.nps)&&void 0!==a?a:"-","%")),_.default.createElement("div",{className:s.default(N.default.item)},`${null!==(l=i.likeCount)&&void 0!==l?l:"-"}${v("search:人已关注")}`)))}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const l=a(142),n=a(0),i=a(175);t.UseStreamSearch=(e=null,t)=>{const{keyword:a,isStream:r}=n.useContext(i.SearchContext),[u,s]=n.useState(!0),[o,d]=n.useState(""),[c,m]=n.useState([]),[f,p]=n.useState([]),[_,h]=n.useState(null);return n.useEffect(()=>{if(!r)return;let n=!1;return(async()=>{try{d("");const{inputTokens:i,records:r,total:u}=await l.v1SearchApi.searchStream({...e,keyword:a},t);if(n)return;p(i||[]),m(r),h(u)}catch(e){if(n)return;d(e.message)}s(!1)})(),()=>n=!0},[e,a,t,r]),{inputTokens:f,StreamTables:c,StreamTableTotal:_,StreamTableLoading:u,StreamTableErrorMessage:o,setData:m}}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=l(a(189)),r=l(a(154)),u=a(30),s=l(a(4)),o=a(26),d=a(199),c=n(a(0)),m=a(19),f=a(549),p=a(548),_=l(a(1223));t.StreamTableFilter=e=>{const{params:t}=c.useContext(p.StreamStateContext),{updateParams:a,setPageNum:l,setSort:n}=c.useContext(p.StreamDispatchContext),{t:h}=m.useTranslation(),g=[{label:h("search:精品表"),value:"isChoicest","auto-track-click":JSON.stringify({e:"stream-detail",attrs:{is_choicest:"精品表"}})},{label:h("search:我浏览过的"),value:"isRecent"},{label:h("search:我有权限的"),value:"isAuth"}],E=c.useMemo(()=>{const e=[];for(const a of f.OPTION_KEYS)t[a]&&e.push(a);return e},[t]);return c.default.createElement("div",{className:_.default.filterOptions},c.default.createElement("div",{className:_.default.sort},c.default.createElement("div",{className:_.default.list},c.default.createElement("span",{"auto-track-click":JSON.stringify({e:"stream-detail",attrs:{composite:"综合排序"}}),className:s.default({[_.default.active]:t.sort===d.SearchSort.COMPOSITE}),onClick:()=>{n(d.SearchSort.COMPOSITE),l(1),u.updateQuery({sort:null,pageNum:null})}},h("search:综合排序")),c.default.createElement("span",{"auto-track-click":JSON.stringify({e:"stream-detail",attrs:{update_time:h("search:更新时间")}}),className:s.default({[_.default.active]:t.sort===d.SearchSort.UPDATE_TIME}),onClick:()=>{n(d.SearchSort.UPDATE_TIME),l(1),u.updateQuery({sort:d.SearchSort.UPDATE_TIME,pageNum:null})}},h("search:更新时间"))),c.default.createElement("div",{className:_.default.pageWrapper},c.default.createElement(i.default,{className:s.default({[_.default.disabled]:t.pageNum<=1}),onClick:()=>{if(t.pageNum>1){const e=t.pageNum-1;u.updateQuery({pageNum:e}),l(e)}}}),c.default.createElement("div",{className:_.default.page},c.default.createElement("span",{className:_.default.current},t.pageNum),c.default.createElement("span",null,"/"),c.default.createElement("span",null,e.total&&t.pageSize?u.humanNum(Math.ceil(e.total/t.pageSize),{useGrouping:!0}):"-")),c.default.createElement(r.default,{className:s.default({[_.default.disabled]:t.pageNum>=Math.ceil(e.total/t.pageSize)}),onClick:()=>{if(t.pageNum<Math.ceil(e.total/t.pageSize)){const e=t.pageNum+1;u.updateQuery({pageNum:e}),l(e)}}}))),c.default.createElement(o.Checkbox.Group,{options:g,value:E,onChange:e=>{const t={pageNum:null},n={};for(const a of f.OPTION_KEYS)n[a]=e.includes(a),t[`${a}_${d.SearchType.STREAM}`]=e.includes(a)?"true":null;a(n),u.updateQuery(t),l(1)}}))}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=l(a(121)),r=l(a(129)),u=l(a(221)),s=a(30),o=l(a(4)),d=a(26),c=n(a(0)),m=a(19),f=l(a(281)),p=a(549),_=a(548);t.Tag=e=>{const{count:t,selected:a=!1}=e;let l=e.name;return t&&(l=`${l}(${t})`),c.default.createElement("span",{onClick:e.onClick,className:o.default(f.default.tag,{[e.classNames]:e.classNames,[f.default.selected]:a})},l)},t.StreamAggregation=()=>{const{t:e}=m.useTranslation(),{params:{storageMediumList:a,dataFormatList:l,withProjectList:n,dataOwnerList:r}}=c.useContext(_.StreamStateContext),{updateParams:u,dispatchParams:o}=c.useContext(_.StreamDispatchContext),{aggregation:h,loading:g}=c.useContext(_.StreamAggregationContext),E=h.storageMediumList.aggResultList,b=h.dataFormatList.aggResultList,v=h.withProjectList.aggResultList,y=h.dataOwnerList.aggResultList;return c.default.createElement("div",{className:f.default.conditionWrapper},c.default.createElement("div",{className:f.default.condition},c.default.createElement("div",{className:f.default.filter},c.default.createElement("div",{className:f.default.title},c.default.createElement("span",{className:f.default.text},e("search:筛选条件")),c.default.createElement(d.Button,{className:f.default.actionReset,type:"link",icon:c.default.createElement(d.IconFont,{type:"icon-delete"}),size:"small",onClick:()=>{const e={keyword:null,sort:null,pageNum:null,pageSize:null};for(const t of p.OPTION_KEYS)e[t]=null;s.updateQuery(e),o({type:p.STREAM_ACTION_TYPES.RESET})}},e("重置"))),c.default.createElement("div",{className:f.default.filterContent},a.map(e=>{var t;const l=E.find(t=>t.name===e);return c.default.createElement("div",{key:e,className:f.default.filterTag},c.default.createElement("span",{className:f.default.text},null!==(t=null==l?void 0:l.name)&&void 0!==t?t:e),c.default.createElement(i.default,{onClick:async()=>{u({pageNum:1}),s.updateQuery({pageNum:null}),u({storageMediumList:a.filter(t=>e!==t)})}}))}),l.map(e=>{var t;const a=b.find(t=>t.name===e);return c.default.createElement("div",{key:e,className:f.default.filterTag},c.default.createElement("span",{className:f.default.text},null!==(t=null==a?void 0:a.name)&&void 0!==t?t:e),c.default.createElement(i.default,{onClick:async()=>{u({pageNum:1}),s.updateQuery({pageNum:null}),u({dataFormatList:l.filter(t=>e!==t)})}}))}),n.map(e=>{var t;const a=v.find(t=>t.name===e);return c.default.createElement("div",{key:e,className:f.default.filterTag},c.default.createElement("span",{className:f.default.text},null!==(t=null==a?void 0:a.name)&&void 0!==t?t:e),c.default.createElement(i.default,{onClick:async()=>{u({pageNum:1}),s.updateQuery({pageNum:null}),u({withProjectList:n.filter(t=>e!==t)})}}))}),r.map(e=>{var t;const a=y.find(t=>t.account===e);return c.default.createElement("div",{key:e,className:f.default.filterTag},c.default.createElement("span",{className:f.default.text},null!==(t=null==a?void 0:a.name)&&void 0!==t?t:e),c.default.createElement(i.default,{onClick:async()=>{u({pageNum:1}),s.updateQuery({pageNum:null}),u({dataOwnerList:r.filter(t=>e!==t)})}}))}))),c.default.createElement(d.Spin,{spinning:g},c.default.createElement(t.StorageMedium,null),c.default.createElement(t.DataFormat,null),c.default.createElement(t.WithProject,null),c.default.createElement(t.DataOwner,null))))},t.StorageMedium=()=>{var e;const{t:a}=m.useTranslation(),{aggregation:l}=c.useContext(_.StreamAggregationContext),{updateParams:n,setPageNum:i}=c.useContext(_.StreamDispatchContext),[d,p]=c.useState(!1),[h,g]=c.useState(20),{params:E}=c.useContext(_.StreamStateContext),b=l.storageMediumList.aggResultList,v=c.useMemo(()=>b.slice(0,h),[b,h]),y=b.reduce((e,t)=>e+t.count,0),T=null!==(e=null==b?void 0:b.length)&&void 0!==e?e:0;return T?c.default.createElement("div",{className:o.default(f.default.searchBlock,{[f.default.fold]:d})},c.default.createElement("div",{className:f.default.blockTitle,onClick:()=>p(!d)},c.default.createElement(t.Tag,{classNames:f.default.text,name:a("detail:存储介质"),count:y}),d?c.default.createElement(u.default,null):c.default.createElement(r.default,null)),d?null:c.default.createElement(c.default.Fragment,null,c.default.createElement("div",{className:f.default.blockContent},v.map(e=>{const a=E.storageMediumList.includes(e.name);return c.default.createElement(t.Tag,{name:e.name,count:e.count,key:e.name,selected:a,onClick:async()=>{n(a?{storageMediumList:E.storageMediumList.filter(t=>t!==e.name)}:{storageMediumList:[...E.storageMediumList,e.name]}),i(1),s.updateQuery({pageNum:null})}})})),h<T?c.default.createElement("div",{className:f.default.showMore,onClick:()=>g(h+20)},c.default.createElement("div",{className:f.default.action},c.default.createElement("span",{className:f.default.text},a("查看更多")),c.default.createElement(r.default,null))):null)):null},t.DataFormat=()=>{var e,a,l;const{t:n}=m.useTranslation(),{aggregation:i}=c.useContext(_.StreamAggregationContext),{updateParams:d,setPageNum:p}=c.useContext(_.StreamDispatchContext),[h,g]=c.useState(!1),[E,b]=c.useState(20),{params:v}=c.useContext(_.StreamStateContext),y=c.useMemo(()=>{var e;return null===(e=i.dataFormatList)||void 0===e?void 0:e.aggResultList.slice(0,E)},[i.dataFormatList,E]),T=null===(e=i.dataFormatList)||void 0===e?void 0:e.aggResultList.reduce((e,t)=>e+t.count,0),N=null!==(l=null===(a=null==i?void 0:i.dataFormatList)||void 0===a?void 0:a.aggResultList.length)&&void 0!==l?l:0;return N?c.default.createElement("div",{className:o.default(f.default.searchBlock,{[f.default.fold]:h})},c.default.createElement("div",{className:f.default.blockTitle,onClick:()=>g(!h)},c.default.createElement(t.Tag,{classNames:f.default.text,name:n("detail:数据格式"),count:T}),h?c.default.createElement(u.default,null):c.default.createElement(r.default,null)),h?null:c.default.createElement(c.default.Fragment,null,c.default.createElement("div",{className:f.default.blockContent},y.map(e=>{const a=v.dataFormatList.includes(e.name);return c.default.createElement(t.Tag,{name:e.name,count:e.count,key:e.name,selected:a,onClick:async()=>{d(a?{dataFormatList:v.dataFormatList.filter(t=>t!==e.name)}:{dataFormatList:[...v.dataFormatList,e.name]}),p(1),s.updateQuery({pageNum:null})}})})),E<N?c.default.createElement("div",{className:f.default.showMore,onClick:()=>b(E+20)},c.default.createElement("div",{className:f.default.action},c.default.createElement("span",{className:f.default.text},n("查看更多")),c.default.createElement(r.default,null))):null)):null},t.DataOwner=()=>{var e,a,l;const{t:n}=m.useTranslation(),{aggregation:i}=c.useContext(_.StreamAggregationContext),{updateParams:d,setPageNum:p}=c.useContext(_.StreamDispatchContext),[h,g]=c.useState(!1),[E,b]=c.useState(20),{params:v}=c.useContext(_.StreamStateContext),y=c.useMemo(()=>{var e;return null===(e=i.dataOwnerList)||void 0===e?void 0:e.aggResultList.slice(0,E)},[i.dataOwnerList,E]),T=null===(e=i.dataOwnerList)||void 0===e?void 0:e.aggResultList.reduce((e,t)=>e+t.count,0),N=null!==(l=null===(a=null==i?void 0:i.dataOwnerList)||void 0===a?void 0:a.aggResultList.length)&&void 0!==l?l:0;return N?c.default.createElement("div",{className:o.default(f.default.searchBlock,{[f.default.fold]:h})},c.default.createElement("div",{className:f.default.blockTitle,onClick:()=>g(!h)},c.default.createElement(t.Tag,{classNames:f.default.text,name:n("责任人"),count:T}),h?c.default.createElement(u.default,null):c.default.createElement(r.default,null)),h?null:c.default.createElement(c.default.Fragment,null,c.default.createElement("div",{className:f.default.blockContent},y.map(e=>{const a=v.dataOwnerList.includes(e.account);return c.default.createElement(t.Tag,{name:e.name,count:e.count,key:e.account,selected:a,onClick:async()=>{d(a?{dataOwnerList:v.dataOwnerList.filter(t=>t!==e.account)}:{dataOwnerList:[...v.dataOwnerList,e.account]}),p(1),s.updateQuery({pageNum:null})}})})),E<N?c.default.createElement("div",{className:f.default.showMore,onClick:()=>b(E+20)},c.default.createElement("div",{className:f.default.action},c.default.createElement("span",{className:f.default.text},n("查看更多")),c.default.createElement(r.default,null))):null)):null},t.WithProject=()=>{var e,a,l;const{t:n}=m.useTranslation(),{aggregation:i}=c.useContext(_.StreamAggregationContext),{updateParams:d,setPageNum:p}=c.useContext(_.StreamDispatchContext),[h,g]=c.useState(!1),[E,b]=c.useState(20),{params:v}=c.useContext(_.StreamStateContext),y=c.useMemo(()=>{var e;return null===(e=i.withProjectList)||void 0===e?void 0:e.aggResultList.slice(0,E)},[i.withProjectList,E]),T=null===(e=i.dataOwnerList)||void 0===e?void 0:e.aggResultList.reduce((e,t)=>e+t.count,0),N=null!==(l=null===(a=null==i?void 0:i.withProjectList)||void 0===a?void 0:a.aggResultList.length)&&void 0!==l?l:0;return N?c.default.createElement("div",{className:o.default(f.default.searchBlock,{[f.default.fold]:h})},c.default.createElement("div",{className:f.default.blockTitle,onClick:()=>g(!h)},c.default.createElement(t.Tag,{classNames:f.default.text,name:n("所属项目"),count:T}),h?c.default.createElement(u.default,null):c.default.createElement(r.default,null)),h?null:c.default.createElement(c.default.Fragment,null,c.default.createElement("div",{className:f.default.blockContent},y.map(e=>{const a=v.withProjectList.includes(e.name);return c.default.createElement(t.Tag,{name:e.name,count:e.count,selected:a,key:e.name,onClick:async()=>{d(a?{withProjectList:v.withProjectList.filter(t=>t!==e.name)}:{withProjectList:[...v.withProjectList,e.name]}),p(1),s.updateQuery({pageNum:null})}})})),E<N?c.default.createElement("div",{className:f.default.showMore,onClick:()=>b(E+20)},c.default.createElement("div",{className:f.default.action},c.default.createElement("span",{className:f.default.text},n("查看更多")),c.default.createElement(r.default,null))):null)):null}},function(e,t,a){"use strict";var l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=a(362),r=a(233),u=a(30),s=a(550),o=a(26),d=a(89),c=a(2293),m=l(a(0)),f=a(19),p=a(780),_=a(2295),h=n(a(2296));t.ChangeHistory=()=>{const[e,t]=m.useState(u.getQuery("pageCurrent","number")||1),[a,l]=m.useState(u.getQuery("pageSize","number")||20),{t:n}=f.useTranslation(),g=d.useShowTotal(),E=m.useMemo(()=>({pageCurrent:e,pageSize:a}),[e,a]),[b,v]=m.useState(Boolean(u.getQuery("changeId"))),[y,T,N]=r.useRequest(s.toolHiveApi.getChangeHistoryList,E),S=m.useMemo(()=>({[c.ModifyType.MODIFY_TABLE_RECOMMEND]:n("修改库表关联推荐"),[c.ModifyType.BATCH_ONLINE]:n("批量上线"),[c.ModifyType.BATCH_OFFLINE]:n("批量下线"),[c.ModifyType.ONEKEY_CHANGE_OWNER]:n("一键变更负责人"),[c.ModifyType.BATCH_MODIFY_OWNER]:n("批量修改负责人")}),[n]),C=m.useMemo(()=>[{title:n("修改人"),dataIndex:"modifyUser",key:"modifyUser",render:e=>m.default.createElement(i.DChat,{user:e,label:null==e?void 0:e.name})},{title:n("修改类型"),dataIndex:"modifyType",key:"modifyType",render:e=>S[e]},{title:n("修改时间"),dataIndex:"modifyTimeLabel",key:"modifyTimeLabel"},{title:n("common:操作"),render:(e,{changeId:t})=>m.default.createElement("a",{onClick:()=>{u.updateQuery({changeId:t}),v(!0)}},n("查看变更明细"))}],[S,n]);return N?m.default.createElement("div",{className:"error"},N):m.default.createElement("div",{className:h.default.changeHistory},m.default.createElement(p.ToolHeader,{title:n("toolHive:操作记录")}),m.default.createElement(_.ChangeHistoryDetail,{visible:b,setVisible:v}),m.default.createElement("div",{className:h.default.content},m.default.createElement(o.Table,{columns:C,loading:T,dataSource:null==y?void 0:y.records,pagination:{pageSize:a,current:e,total:null==y?void 0:y.total,showTotal:g,onShowSizeChange:(e,t)=>{20!==t?u.updateQuery({pageSize:t}):u.updateQuery({pageSize:null}),l(t)},onChange:e=>{1!==e?u.updateQuery({pageCurrent:e}):u.updateQuery({pageCurrent:null}),t(e)}}})))}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.MODIFY_TABLE_RECOMMEND="MODIFY_TABLE_RECOMMEND",e.BATCH_ONLINE="BATCH_ONLINE",e.BATCH_OFFLINE="BATCH_OFFLINE",e.ONEKEY_CHANGE_OWNER="ONEKEY_CHANGE_OWNER",e.BATCH_MODIFY_OWNER="BATCH_MODIFY_OWNER"}(t.ModifyType||(t.ModifyType={}))},function(e,t,a){e.exports={"tool-header":"style_tool-header_3B7aR",toolHeader:"style_tool-header_3B7aR"}},function(e,t,a){"use strict";var l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=a(362),i=a(233),r=a(30),u=a(550),s=a(26),o=l(a(0)),d=a(19);t.ChangeHistoryDetail=e=>{const{visible:t,setVisible:a}=e,{t:l}=d.useTranslation(),[c,m]=o.useState(1),f=r.getQuery("changeId","number"),[p,_,h]=i.useRequest(u.toolHiveApi.getChangeDetail,f),g=o.useMemo(()=>{if(!p)return[];const e=p[0],t=[{title:l("序号"),dataIndex:"position"},{title:l("库表名"),dataIndex:"tableName",render:e=>o.default.createElement("a",{href:"/detail?uri=hive://mycluster-tj:"+e.replace(".",":")},e)}];return void 0!==(null==e?void 0:e.recommendTableName)&&t.push({title:l("关联Hive库表名"),dataIndex:"recommendTableName",render:e=>o.default.createElement("a",{href:"/detail?uri=hive://mycluster-tj:"+e.replace(".",":")},e)}),void 0!==(null==e?void 0:e.afterOwner)&&t.push({title:l("修改后业务负责人"),dataIndex:"afterOwner",render:e=>o.default.createElement(n.DChat,{user:e})}),void 0!==(null==e?void 0:e.beforeOwner)&&t.push({title:l("修改前业务负责人"),dataIndex:"beforeOwner",render:e=>o.default.createElement(n.DChat,{user:e})}),t},[p,l]);return h?o.default.createElement("div",{className:"error"},h):o.default.createElement(s.Drawer,{visible:t,onClose:()=>a(!1),title:l("查看变更明细"),width:690},o.default.createElement(s.Table,{dataSource:p,columns:g,loading:_,rowKey:"position",pagination:!((null==p?void 0:p.length)<20)&&{current:c,pageSize:20,onChange:e=>m(e)}}))}},function(e,t,a){e.exports={"change-history":"style_change-history_1IxKM",changeHistory:"style_change-history_1IxKM",content:"style_content_3dpV8"}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=a(30),r=a(176),u=l(a(264)),s=a(550),o=a(26),d=a(89),c=n(a(0)),m=a(19),f=a(780),p=l(a(2298));t.ToolHiveChangeReminder=()=>{const{t:e}=m.useTranslation(),[t,a]=c.useState(1),[l,n]=c.useState(10),_=d.useShowTotal(),[h,g]=c.useState([]),[E,b]=c.useState(!1),[v,y]=c.useState(""),[T,N]=c.useState(""+e("toolHive:上传csv格式文件")),[S,C]=c.useState([]),[x,w]=o.Modal.useModal(),[I,L]=c.useState({fileName:"",invalidCount:0,totalCount:0,validCount:0});c.useEffect(()=>{N(""+e("toolHive:上传csv格式文件"))},[e]);const O={title:e("toolHive:确认批量修改表的关联推荐吗？"),content:c.default.createElement(c.default.Fragment,null,e("toolHive:确认批量修改选中")+S.length+e("toolHive:张表的关联推荐吗？")),onOk:()=>((async()=>{try{const e=await s.toolHiveApi.manageToolSubmit(S);if(e){r.message.success("修改成功");const e=h.filter(e=>{if(-1==S.findIndex(t=>t.position==e.position))return!0});g(e),C([])}e||r.message.error("修改失败")}catch(e){return void y(e)}})(),Promise.resolve()),onCancel:()=>Promise.resolve()},P={name:"file",action:"/dataMap/api/web/v1/manageTool/recommend/check",showUploadList:!1,accept:".csv",headers:{authorization:"authorization-text","HEADER-CSRF":i.getCookie("datadream_ticket")},onChange(t){var a,l;if(y(""),"uploading"!==t.file.status)return"done"===t.file.status?(b(!1),"0"!==(null===(a=t.file.response)||void 0===a?void 0:a.resultCode)?y(e(""+(null===(l=t.file.response)||void 0===l?void 0:l.returnMsg))):t.file.response.data.wholeExcelCheckResult.errorMsg&&"success"!=t.file.response.data.wholeExcelCheckResult.errorMsg?r.message.error(t.file.response.data.wholeExcelCheckResult.errorMsg):(N(t.file.name),g(t.file.response.data.rowCheckResults),void L(t.file.response.data.countResult))):void("error"===t.file.status&&(b(!1),y(e("接口500"))));b(!0)}};if(!E&&v)return c.default.createElement("div",{className:"error"},v);if(null==h)return c.default.createElement(c.default.Fragment,null);const M=[{title:e("toolHive:序号"),dataIndex:"position",width:60},{title:e("toolHive:库名"),width:180,dataIndex:"dbName",render:e=>e},{title:e("toolHive:表名"),width:180,dataIndex:"tableName",render:e=>e},{title:e("toolHive:关联Hive库名"),width:110,dataIndex:"relationDbName",render:e=>e},{title:e("toolHive:关联Hive表名"),dataIndex:"relationTableName",render:e=>e},{title:e("toolHive:推荐原因"),dataIndex:"recommendReason",render:e=>e},{title:e("toolHive:是否有效"),dataIndex:"valid",render:(e,t)=>e?"是":t.errorMsg}];return c.default.createElement("div",{className:p.default.toolHiveWrap},c.default.createElement(f.ToolHeader,{title:e("toolHive:修改表的关联推荐"),right:c.default.createElement(o.Button,{type:"primary"},c.default.createElement("a",{href:"https://s3-gzpu-inter.didistatic.com/fe-datamap-prod/static/templetRefer.csv"}," ",e("toolHive:模板下载")))}),c.default.createElement("div",{className:p.default.main},c.default.createElement("div",{className:p.default.hiveMainHeader},c.default.createElement(u.default,{className:"alert-normal",message:e("message:数据地图设置表关联推荐后，会在表详情页有关联推荐的置顶通知。"),showIcon:!0}),c.default.createElement("div",{className:p.default.hiveUpload},c.default.createElement("span",null,e("toolHive:选择文件"),": "),c.default.createElement(o.Upload,Object.assign({},P),c.default.createElement(o.Button,null,T))),c.default.createElement("div",{className:p.default.hiveTips},c.default.createElement("p",null,e("toolHive:请点击"),c.default.createElement("a",{href:"https://s3-gzpu-inter.didistatic.com/fe-datamap-prod/static/templetRefer.csv"},e("toolHive:下载模版")),"，",e("toolHive:按照模板格式填写库名和表名，模板的首行不要删除。注：仅表的资产负责人和表所在项目的管理员有关联推荐的操作权限。上传文件最多不超过1000行，且文件大小不超过5MB"))),c.default.createElement("div",{className:p.default.editHiveBtn},c.default.createElement(o.Button,{onClick:()=>{if(!S.length)return r.message.info("请先选择表！");x.confirm(O)}},e("toolHive:修改库表关联推荐")),c.default.createElement("div",{className:p.default.allcount,style:{display:I.totalCount?"block":"none"}},c.default.createElement("span",null,c.default.createElement(m.Trans,{i18nKey:"toolHive:共上传",count:I.totalCount||0},"共上传",c.default.createElement("span",{className:p.default.count},""+(I.totalCount||0)),"项")),",",c.default.createElement("span",null,c.default.createElement(m.Trans,{i18nKey:"toolHive:有效项",count:I.validCount||0},"有效",c.default.createElement("span",{className:p.default.count},""+(I.validCount||0)),"项")),",",c.default.createElement("span",null,c.default.createElement(m.Trans,{i18nKey:"toolHive:无效项",count:I.invalidCount||0},"无效",c.default.createElement("span",{className:p.default.count,style:{color:"#E6505A"}},""+(I.invalidCount||0)),"项"))),w)),c.default.createElement(o.Table,{loading:E,rowKey:"position",columns:M,dataSource:h,rowSelection:{type:"checkbox",onChange:(e,t)=>{const a=t.map(e=>({...e,uri:e.uri,recommendUri:e.relationUri,recommendReason:e.recommendReason,relationUri:e.relationUri,valid:!1}));C(a)},getCheckboxProps:e=>({disabled:!1===e.valid}),selectedRowKeys:S.map(({position:e})=>e)},pagination:{showSizeChanger:!0,showQuickJumper:!0,pageSizeOptions:["10","20","50","100"],pageSize:l,current:t,total:0,showTotal:_,onShowSizeChange:(e,l)=>{n(l),a(t)},onChange:e=>{a(e)}}})))}},function(e,t,a){e.exports={"tool-hive-wrap":"style_tool-hive-wrap_2_kf0",toolHiveWrap:"style_tool-hive-wrap_2_kf0",main:"style_main_xHW0v","hive-main-header":"style_hive-main-header_3QF0w",hiveMainHeader:"style_hive-main-header_3QF0w","hive-upload":"style_hive-upload_bV3J0",hiveUpload:"style_hive-upload_bV3J0","hive-tips":"style_hive-tips_ZHeH3",hiveTips:"style_hive-tips_ZHeH3","edit-hive-btn":"style_edit-hive-btn_3qFuB",editHiveBtn:"style_edit-hive-btn_3qFuB",allcount:"style_allcount_3GGFx",count:"style_count_3gox2"}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=a(30),r=a(176),u=l(a(264)),s=a(550),o=a(26),d=a(97),c=a(89),m=a(98),f=n(a(0)),p=a(19),_=a(780),h=l(a(2300));t.ToolHiveOnOrOff=()=>{const{t:e}=p.useTranslation(),[t,a]=f.useState(1),[l,n]=f.useState(10),g=c.useShowTotal(),[E,b]=f.useState(null),[v,y]=f.useState(!1),[T,N]=f.useState(""),[S,C]=f.useState(""+e("toolHive:上传csv格式文件")),[x,w]=f.useState([]),[I,L]=o.Modal.useModal();f.useEffect(()=>{C(""+e("toolHive:上传csv格式文件"))},[e]);const O={name:"file",action:"/dataMap/api/web/v1/manageTool/tableONOFF/check",showUploadList:!1,accept:".csv",headers:{authorization:"authorization-text","HEADER-CSRF":i.getCookie("datadream_ticket")},onChange(t){var a,l;if(N(""),"uploading"!==t.file.status){if("done"===t.file.status){if(y(!1),"0"!==(null===(a=t.file.response)||void 0===a?void 0:a.resultCode))return N(e(""+(null===(l=t.file.response)||void 0===l?void 0:l.returnMsg)));const{data:n}=t.file.response;return n.wholeExcelCheckResult.valid?(C(t.file.name),void b(n)):r.message.error(n.wholeExcelCheckResult.errorMsg)}"error"===t.file.status&&(y(!1),N(e("接口500")))}else y(!0)}},P=f.useMemo(()=>[{title:e("toolHive:序号"),dataIndex:"position",width:60},{title:e("toolHive:库名"),width:180,dataIndex:"dbName"},{title:e("toolHive:表名"),dataIndex:"tableName"},{title:e("toolHive:是否有效"),dataIndex:"valid",render:(e,t)=>e?"是":f.default.createElement("div",{className:"error"},t.errorMsg)}],[e]);return!v&&T?f.default.createElement("div",{className:"error"},T):f.default.createElement("div",{className:h.default.toolHiveWrap},f.default.createElement(_.ToolHeader,{title:e("toolHive:表上线/下线"),right:f.default.createElement(o.Button,{type:"primary"},f.default.createElement("a",{href:"https://s3-gzpu-inter.didistatic.com/fe-datamap-prod/static/batch_templet.csv"},e("模版下载")))}),f.default.createElement("div",{className:h.default.main},f.default.createElement("div",{className:h.default.hiveMainHeader},f.default.createElement(u.default,{className:"alert-normal",message:f.default.createElement(p.Trans,{i18nKey:"toolHive:数据地图设置表下线后，会在表详情页有“下线中”的标识，但不会对表进行任何下线删除操作，如需对表进行下线删除请前往资产平台进行操作。"},"数据地图设置表下线后，会在表详情页有“下线中”的标识，但不会对表进行任何下线删除操作，如需对表进行下线删除请前往",f.default.createElement(d.ExternalLink,{style:{color:"#f38031"},href:"http://meta.didichuxing.com"},"资产平台"),"进行操作。"),showIcon:!0}),f.default.createElement("div",{className:h.default.hiveUpload},f.default.createElement("span",null,e("toolHive:选择文件"),": "),f.default.createElement(o.Upload,Object.assign({},O),f.default.createElement(o.Button,null,S))),f.default.createElement("div",{className:h.default.hiveTips},f.default.createElement("p",null,"请点击",f.default.createElement(d.ExternalLink,{href:"https://s3-gzpu-inter.didistatic.com/fe-datamap-prod/static/batch_templet.csv"},"下载模板"),"，按照模板格式填写库名和表名，模板的首行不要删除。注：仅表的资产负责人和表所在项目的管理员有上线、下线操作权限。上传文件最多不超过1000行，且文件大小不超过5MB")),f.default.createElement("div",{className:h.default.tableHeader},f.default.createElement("div",{className:h.default.editHiveBtn},f.default.createElement(o.Button,{disabled:0===x.length,onClick:()=>{I.confirm({title:"确认批量上线吗？",content:`确认将选中的${x.length}张表批量上线吗？`,onOk:async()=>{try{await s.toolHiveApi.tableOnOrOff({status:m.ONLINE_TABLE,uris:x}),b({...E,rowCheckResults:E.rowCheckResults.filter(({uri:e})=>!x.includes(e))}),w([]),0!=(null==E?void 0:E.rowCheckResults.length)&&null!=(null==E?void 0:E.rowCheckResults.length)||C(""+e("toolHive:上传csv格式文件"))}catch(e){r.message.error(e.message)}}})}},e("toolHive:批量上线"),0!==x.length&&`(${x.length})`),f.default.createElement(o.Button,{disabled:0===x.length,onClick:()=>{I.confirm({title:"确认批量下线吗？",content:`确认将选中的${x.length}张表批量下线吗？`,onOk:async()=>{try{await s.toolHiveApi.tableOnOrOff({status:m.OFFLINE_TABLE,uris:x}),b({...E,rowCheckResults:E.rowCheckResults.filter(({uri:e})=>!x.includes(e))}),w([])}catch(e){r.message.error(e.message)}}})}},e("toolHive:批量下线"),0!==x.length&&`(${x.length})`),L),(null==E?void 0:E.countResult)&&f.default.createElement("div",{className:h.default.result},f.default.createElement("span",null,f.default.createElement(p.Trans,{i18nKey:"toolHive:共上传",count:E.countResult.totalCount||0},"共上传",f.default.createElement("span",{className:h.default.count},""+(E.countResult.totalCount||0)),"项")),",",f.default.createElement("span",null,f.default.createElement(p.Trans,{i18nKey:"toolHive:有效项",count:E.countResult.validCount||0},"有效",f.default.createElement("span",{className:h.default.count},""+(E.countResult.validCount||0)),"项")),",",f.default.createElement("span",null,f.default.createElement(p.Trans,{i18nKey:"toolHive:无效项",count:E.countResult.invalidCount||0},"无效",f.default.createElement("span",{className:h.default.count,style:{color:"#E6505A"}},""+(E.countResult.invalidCount||0)),"项"))))),f.default.createElement(o.Table,{loading:v,rowKey:"uri",columns:P,dataSource:null==E?void 0:E.rowCheckResults,rowSelection:{type:"checkbox",onChange:e=>{w(e)},getCheckboxProps:e=>({disabled:!1===e.valid}),selectedRowKeys:x},pagination:{showSizeChanger:!0,showQuickJumper:!0,pageSizeOptions:["10","20","50","100"],pageSize:l,current:t,total:0,showTotal:g,onShowSizeChange:(e,l)=>{n(l),a(t)},onChange:e=>{a(e)}}})))}},function(e,t,a){e.exports={"tool-hive-wrap":"style_tool-hive-wrap_2ciPU",toolHiveWrap:"style_tool-hive-wrap_2ciPU",main:"style_main_1pqDY","hive-main-header":"style_hive-main-header_23z7j",hiveMainHeader:"style_hive-main-header_23z7j","hive-upload":"style_hive-upload_3-9rS",hiveUpload:"style_hive-upload_3-9rS","hive-tips":"style_hive-tips_21y7r",hiveTips:"style_hive-tips_21y7r","table-header":"style_table-header_3iLii",tableHeader:"style_table-header_3iLii","edit-hive-btn":"style_edit-hive-btn_1u7xr",editHiveBtn:"style_edit-hive-btn_1u7xr",result:"style_result_26RV6",count:"style_count_iR59Q"}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=l(a(817)),i=l(a(4)),r=a(26),u=l(a(0)),s=a(19),o=a(117),d=l(a(2302));t.ToolSidebar=e=>{const{pathname:t}=e,{t:a}=s.useTranslation();return u.default.createElement("div",{className:i.default(d.default.sidebar)},u.default.createElement("div",{className:d.default.sidebarContent},u.default.createElement("div",{className:d.default.nav},u.default.createElement(r.Menu,{selectedKeys:[t],defaultOpenKeys:["/tool/hive"],mode:"inline"},u.default.createElement(r.Menu.Item,{key:"/tool/lineage",icon:u.default.createElement(r.IconFont,{type:"icon-blood"})},u.default.createElement(o.Link,{to:{pathname:"/tool/lineage"}},a("toolHive:血缘检测工具"))),u.default.createElement(r.SubMenu,{key:"/tool/hive",title:a("toolHive:Hive表管理工具"),icon:u.default.createElement(n.default,null)},u.default.createElement(r.Menu.Item,{key:"/tool/hive/off-or-on"},u.default.createElement(o.Link,{to:{pathname:"/tool/hive/off-or-on"}},a("toolHive:表上线/下线"))),u.default.createElement(r.Menu.Item,{key:"/tool/hive/changereminder"},u.default.createElement(o.Link,{to:{pathname:"/tool/hive/changereminder"}},a("toolHive:修改表关联推荐"))),u.default.createElement(r.Menu.Item,{key:"/tool/hive/change-history"},u.default.createElement(o.Link,{to:{pathname:"/tool/hive/change-history"}},a("toolHive:操作记录"))))))))}},function(e,t,a){e.exports={sidebar:"style_sidebar_geDBp","sidebar-content":"style_sidebar-content_3tqOd",sidebarContent:"style_sidebar-content_3tqOd",nav:"style_nav_3drf-"}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=a(30),r=l(a(264)),u=l(a(82)),s=l(a(220)),o=l(a(162)),d=l(a(163)),c=l(a(118)),m=l(a(161)),f=a(218),p=a(259),_=a(181),h=a(330),g=l(a(4)),E=a(26),b=a(97),v=a(301),y=a(2304),T=a(148),N=n(a(0)),S=a(19),C=a(143),x=a(103),w=l(a(2306));t.UpdateMetaPage=()=>{var e,t;const{t:a}=S.useTranslation(),l=i.getQuery("uri"),{dbName:n,tableName:I}=x.getDbTableFromUri(l),[L]=E.useForm(),O=C.useHistory(),[P,M]=N.useState(!1),[k,D]=N.useState(!1),[A,j]=N.useState([]),[F,R]=N.useState(!1),[H,U]=N.useState([]),[B,q]=N.useState(!1),[z,Q]=N.useState([]),[V,G]=N.useState(""),[Y,W]=N.useState(null);return N.useEffect(()=>{let e=!1;return(async()=>{M(!0),G("");try{const t=await h.tableMetaApi.getMeta(l);if(e)return;W(t)}catch(e){G(e.message)}M(!1)})(),()=>e=!0},[l]),N.useEffect(()=>{let e=!1;return(async()=>{D(!0);try{const t=await f.v1CategoriesApi.getDbCategories(n);if(e)return;j(t)}catch(e){}D(!1)})(),()=>e=!0},[n]),N.useEffect(()=>{let e=!1;return(async()=>{q(!0);try{const t=await p.v1CommonApi.levelOption();if(e)return;Q(t)}catch(e){}e||q(!1)})(),()=>e=!0},[]),N.useEffect(()=>{let e=!1;return(async()=>{R(!0);try{const t=await p.v1CommonApi.etlTypeOption();if(e)return;U(t)}catch(e){}e||R(!1)})(),()=>e=!0},[]),N.default.createElement("div",{className:w.default.updateMetaPage},N.default.createElement("div",{className:w.default.hd},a("message:编辑表元数据信息")," - ",n,".",I),!Y||P?N.default.createElement(c.default,{style:{height:100}},N.default.createElement("div",{className:w.default.content})):V?N.default.createElement("div",{className:w.default.content},N.default.createElement("div",{className:"error"},V)):N.default.createElement(s.default,{form:L,size:"small",layout:"inline",initialValues:Y,className:w.default.content,onFinish:async e=>{e.tableUri=l;try{await h.tableMetaApi.updateMeta(e),_.v1TableDetailApi.clearTableColumnsCache(l),O.push({pathname:"/detail",search:"?uri="+l,state:{referer:T.RefererType.INNER}}),E.message.success(a("category:修改成功"))}catch(e){E.message.error(e.message)}}},N.default.createElement("div",{className:w.default.top},N.default.createElement(r.default,{className:"alert-normal",showIcon:!0,message:N.default.createElement("div",null,a("message:业务负责人负责编辑表的元数据信息，对业务属性、数据域、业务场景有新增需求，"),N.default.createElement(b.ExternalLink,{wikiPageId:379085586},a("detail:查看联系人")))}),N.default.createElement("div",{className:w.default.form},Y.buId&&N.default.createElement(s.default.Item,{label:a("detail:业务版块")},Y.buName),N.default.createElement(s.default.Item,{label:a("deatil:技术负责人")},null===(e=Y.assetOwner)||void 0===e?void 0:e.name),N.default.createElement(s.default.Item,{label:a("hiveTble:业务负责人")},null===(t=Y.dataOwner)||void 0===t?void 0:t.name)),N.default.createElement("div",{className:g.default(w.default.form,w.default.form1)},N.default.createElement(s.default.Item,{name:"tableNameZh",label:a("common:中文名")},N.default.createElement(o.default,{size:"middle",placeholder:a("message:请输入")})),A.map(e=>N.default.createElement(s.default.Item,{key:e.id,name:["categoryMap",String(e.id)],label:e.name},N.default.createElement(d.default,{size:"middle",mode:"multiple",loading:k,placeholder:a("common:请选择")},e.itemList.map(e=>N.default.createElement(d.default.Option,{key:e.id,value:e.id},e.name))))),N.default.createElement(s.default.Item,{name:"etlTypeId",label:a("detail:拉取周期"),rules:[{required:!0,message:a("common:不能为空")}]},N.default.createElement(d.default,{size:"middle",loading:F,placeholder:a("common:请选择")},H.map(e=>N.default.createElement(d.default.Option,{key:e.id,value:e.id},e.name)))),N.default.createElement(s.default.Item,{name:"layerId",label:a("detail:数据层级"),rules:[{required:!0,message:a("common:不能为空")}]},N.default.createElement(d.default,{size:"middle",loading:B,placeholder:a("common:请选择")},z.map(e=>N.default.createElement(d.default.Option,{key:e.id,value:e.id},e.name)))))),N.default.createElement("div",{className:w.default.table},N.default.createElement(r.default,{className:"alert-normal",showIcon:!0,message:N.default.createElement("div",null,a("message:字段安全等级修改T+1生效，其他内容修改立即修改"))}),N.default.createElement(m.default,{dataSource:Y.columnList,rowKey:"position",columns:[{title:a("common:序号"),dataIndex:"position",width:100},{title:a("detail:字段名"),dataIndex:"columnName",render:(e,t,a)=>N.default.createElement(s.default.Item,{name:["columnList",a,"columnName"]},N.default.createElement("div",null,e))},{title:a("common:中文名"),dataIndex:"columnNameZh",render:(e,t,a)=>N.default.createElement(s.default.Item,{name:["columnList",a,"columnNameZh"]},N.default.createElement(o.default,null))},{title:a("common:类型"),dataIndex:"type"},{title:a("detail:安全等级"),dataIndex:"securityLevel",render:(e,t,a)=>N.default.createElement(s.default.Item,{name:["columnList",a,"securityLevel"]},N.default.createElement(d.default,null,y.SecurityLevelList.map(e=>N.default.createElement(d.default.Option,{key:e,value:e},e))))},{title:a("common:描述"),dataIndex:"comment",render:(e,t,a)=>N.default.createElement(s.default.Item,{name:["columnList",a,"comment"]},N.default.createElement(o.default,null))}],pagination:!1})),N.default.createElement("div",{className:w.default.table},N.default.createElement(r.default,{className:"alert-normal",showIcon:!0,message:N.default.createElement("div",null,a("hiveTable:以下是分区字段信息"))}),N.default.createElement(m.default,{dataSource:Y.partColumnList,rowKey:"position",columns:[{title:a("common:序号"),dataIndex:"position",width:100},{title:a("detail:字段名"),dataIndex:"columnName",render:(e,t,a)=>N.default.createElement(s.default.Item,{name:["partColumnList",a,"columnName"]},N.default.createElement("div",null,e))},{title:a("common:中文名"),dataIndex:"columnNameZh",render:(e,t,a)=>N.default.createElement(s.default.Item,{name:["partColumnList",a,"columnNameZh"]},N.default.createElement(o.default,null))},{title:a("common:类型"),dataIndex:"type"},{title:a("detail:安全等级"),dataIndex:"securityLevel",render:(e,t,a)=>N.default.createElement(s.default.Item,{name:["partColumnList",a,"securityLevel"]},N.default.createElement(d.default,null,y.SecurityLevelList.map(e=>N.default.createElement(d.default.Option,{key:e,value:e},e))))},{title:a("common:描述"),dataIndex:"comment"}],pagination:!1}))),!P&&Y&&N.default.createElement(N.default.Fragment,null,N.default.createElement(v.Footer,null),N.default.createElement("div",{className:w.default.footer},N.default.createElement(u.default,null,a("common:取消")),N.default.createElement(u.default,{type:"primary",onClick:L.submit},a("common:提交")))))}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const l=a(2305);t.SecurityLevelList=[l.SecurityLevel.C1,l.SecurityLevel.C2,l.SecurityLevel.C3,l.SecurityLevel.C4]},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.C1="C1",e.C2="C2",e.C3="C3",e.C4="C4"}(t.SecurityLevel||(t.SecurityLevel={}))},function(e,t,a){e.exports={"update-meta-page":"style_update-meta-page_2I1m3",updateMetaPage:"style_update-meta-page_2I1m3",hd:"style_hd_2D4WQ",content:"style_content_DlNpx",top:"style_top_3qtwx",form:"style_form_kyjFi","form-1":"style_form-1_3YRpS",form1:"style_form-1_3YRpS",table:"style_table_o0PnH",footer:"style_footer_3pknb"}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=a(30),i=a(26),r=l(a(0)),u=a(19),s=a(781),o=a(2309),d=a(2310),c=l(a(552));t.UserCarePage=()=>{const{t:e}=u.useTranslation();return r.default.createElement("div",{className:c.default.carePage},r.default.createElement(s.UserHeader,{title:e("common:我关注的表")}),r.default.createElement(i.Tabs,{animated:!1,onChange:e=>n.updateQuery({tab:"hive"===e?null:e}),defaultActiveKey:"hive"==n.getQuery("tab")?null:n.getQuery("tab")},r.default.createElement(i.Tabs.TabPane,{tab:r.default.createElement("span",{className:"tab-nav-text"},e("user:Hive表")),key:"hive"},r.default.createElement(o.UserCareHivePage,null)),r.default.createElement(i.Tabs.TabPane,{tab:r.default.createElement("span",{className:"tab-nav-text"},e("user:实时表")),key:"stream"},r.default.createElement(d.UserCareStreamPage,null))))}},function(e,t,a){e.exports={"user-header":"style_user-header_3gKmZ",userHeader:"style_user-header_3gKmZ"}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=a(30),r=l(a(82)),u=l(a(361)),s=l(a(161)),o=a(330),d=a(331),c=a(26),m=a(89),f=a(98),p=n(a(0)),_=a(19),h=a(370),g=a(551),E=a(1224),b=l(a(552));t.UserCareHivePage=()=>{const{t:e}=_.useTranslation(),t=h.useTableName(),a=g.useDataOwner(),[l,n]=p.useState(i.getQuery("pageCurrent","number")||1),[v,y]=p.useState(i.getQuery("pageSize","number")||10),[T,N]=p.useState(null),[S,C]=p.useState([]),[x,w]=p.useState([]),[I,L]=p.useState(""),[O,P]=p.useState(!1),[M,k]=p.useState(!1),D=m.useShowTotal(),A=p.useCallback(()=>(P(!0),L(""),d.userApi.tableListByCare({pageCurrent:l,pageSize:v}).then(e=>{N(e.total),C(e.records),P(!1)}).catch(e=>{L(e.message),P(!1)})),[l,v]);return p.useEffect(()=>{let e=!1;return P(!0),L(""),d.userApi.tableListByCare({pageCurrent:l,pageSize:v}).then(t=>{e||(N(t.total),C(t.records),P(!1))}).catch(t=>{e||(L(t.message),P(!1))}),()=>e=!0},[l,v]),p.default.createElement(p.default.Fragment,null,!O&&I?p.default.createElement("div",{className:"error"},I):p.default.createElement("div",{className:b.default.content},p.default.createElement("div",{className:b.default.actions},x.length?p.default.createElement(u.default,{title:e("message:确认取消关注选中的表？"),onConfirm:async()=>{try{k(!0),await o.tableMetaApi.cancelCare(x),w([]),k(!1),await A()}catch(e){k(!1),c.message.error(e.message)}},okText:e("是"),cancelText:e("否")},p.default.createElement(r.default,{loading:M},e("category:批量取消关注"),"(",x.length,")")):p.default.createElement(r.default,{disabled:!0},e("category:批量取消关注"))),p.default.createElement(s.default,{loading:O,rowKey:"tableUri",rowSelection:{columnWidth:36,type:"checkbox",selectedRowKeys:x,onChange:e=>{w(e)}},columns:[t,{title:e("detail:中文名"),width:120,dataIndex:"tableNameZh"},a,{title:e("detail:表描述"),width:120,dataIndex:"description"},{title:e("message:关注原因"),width:120,dataIndex:"comment",render:e=>p.default.createElement("span",null,null!=e?e:"-")},{title:e("detail:关注时间"),width:160,dataIndex:"likeTimeLabel"},{title:e("detail:最近修改时间"),width:160,dataIndex:"modifyTimeLabel"},{title:e("common:操作"),width:100,dataIndex:"action",render:(e,t)=>p.default.createElement(E.ColumnAction,{data:t,fetchList:async()=>{w(x.filter(e=>e!==t.tableUri)),await A()}})}],dataSource:S,pagination:{...f.PAGE_CONFIG,pageSize:v,current:l,total:T,showTotal:D,onShowSizeChange:(e,t)=>{y(t),n(1),i.updateQuery({pageSize:10===t?null:t,pageCurrent:null})},onChange:e=>{n(e),i.updateQuery({pageCurrent:1===e?null:e})}}})))}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=a(30),r=l(a(82)),u=l(a(361)),s=l(a(161)),o=a(330),d=a(331),c=a(26),m=a(89),f=a(98),p=n(a(0)),_=a(19),h=a(370),g=a(551),E=a(1224),b=l(a(552));t.UserCareStreamPage=()=>{const{t:e}=_.useTranslation(),t=h.useTableName(),a=g.useDataOwner(),[l,n]=p.useState(i.getQuery("pageNum","number")||1),[v,y]=p.useState(i.getQuery("pageSize","number")||10),[T,N]=p.useState(null),[S,C]=p.useState([]),[x,w]=p.useState([]),[I,L]=p.useState(""),[O,P]=p.useState(!1),[M,k]=p.useState(!1),D=m.useShowTotal(),A=p.useCallback(()=>(P(!0),L(""),d.userApi.tableListByCareStream({pageNum:l,pageSize:v}).then(e=>{N(e.total),C(e.records),P(!1)}).catch(e=>{L(e.message),P(!1)})),[l,v]);return p.useEffect(()=>{let e=!1;return P(!0),L(""),d.userApi.tableListByCareStream({pageNum:l,pageSize:v}).then(t=>{e||(N(t.total),C(t.records),P(!1))}).catch(t=>{e||(L(t.message),P(!1))}),()=>e=!0},[l,v]),p.default.createElement(p.default.Fragment,null,!O&&I?p.default.createElement("div",{className:"error"},I):p.default.createElement("div",{className:b.default.content},p.default.createElement("div",{className:b.default.actions},x.length?p.default.createElement(u.default,{title:e("message:确认取消关注选中的表？"),onConfirm:async()=>{try{k(!0),await o.tableMetaApi.cancelCare(x),w([]),k(!1),await A()}catch(e){k(!1),c.message.error(e.message)}},okText:e("是"),cancelText:e("否")},p.default.createElement(r.default,{loading:M},e("category:批量取消关注"),"(",x.length,")")):p.default.createElement(r.default,{disabled:!0},e("category:批量取消关注"))),p.default.createElement(s.default,{loading:O,rowKey:"tableUri",rowSelection:{columnWidth:36,type:"checkbox",selectedRowKeys:x,onChange:e=>{w(e)}},columns:[t,{title:e("detail:中文名"),width:120,dataIndex:"tableNameZh"},a,{title:e("detail:表描述"),width:120,dataIndex:"description"},{title:e("message:关注原因"),width:120,dataIndex:"comment",render:e=>p.default.createElement("span",null,null!=e?e:"-")},{title:e("detail:关注时间"),width:160,dataIndex:"likeTimeLabel"},{title:e("detail:最近修改时间"),width:160,dataIndex:"modifyTimeLabel"},{title:e("common:操作"),width:100,dataIndex:"action",render:(e,t)=>p.default.createElement(E.ColumnAction,{data:t,fetchList:async()=>{w(x.filter(e=>e!==t.tableUri)),await A()}})}],dataSource:S,pagination:{...f.PAGE_CONFIG,pageSize:v,current:l,total:T,showTotal:D,onShowSizeChange:(e,t)=>{y(t),n(1),i.updateQuery({pageSize:10===t?null:t,pageNum:null})},onChange:e=>{n(e),i.updateQuery({pageNum:1===e?null:e})}}})))}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=a(30),i=l(a(335)),r=l(a(0)),u=a(19),s=a(781),o=a(2312),d=l(a(282)),c=a(2317);t.UserOwnerPage=()=>{const{t:e}=u.useTranslation();return r.default.createElement("div",{className:d.default.tableOwnerPage},r.default.createElement(s.UserHeader,{title:e("common:我拥有的表")}),r.default.createElement(i.default,{animated:!1,className:"tabs-custom-light",defaultActiveKey:n.getQuery("tab")||"tech-owner",onChange:e=>n.updateQuery({tab:"tech-owner"===e?null:e})},r.default.createElement(i.default.TabPane,{tab:r.default.createElement("span",{className:"nav-text"},e("user:我是资产负责人")),key:"tech-owner"},r.default.createElement(c.UserTechOwnerPage,null)),r.default.createElement(i.default.TabPane,{tab:r.default.createElement("span",{className:"nav-text"},e("user:我是业务负责人")),key:"data-owner"},r.default.createElement(o.UserDataOwnerPage,null))))}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=a(30),r=l(a(264)),u=l(a(220)),s=l(a(161)),o=a(331),d=a(89),c=a(98),m=n(a(0)),f=a(19),p=a(370),_=a(1225),h=a(1226),g=a(1227),E=a(2316),b=l(a(282));t.UserDataOwnerPage=()=>{const{t:e}=f.useTranslation(),t=p.useTableName(),[a,l]=m.useState([]),[n,v]=m.useState(new Set),[y,T]=m.useState(new Set),[N,S]=m.useState(new Set),[C,x]=m.useState(!1),[w,I]=m.useState(new Set),[L,O]=m.useState(new Set),[P]=u.default.useForm(),{getFieldsValue:M}=P,[k,D]=m.useState(i.getQuery("pageCurrent","number")||1),[A,j]=m.useState(i.getQuery("pageSize","number")||10),[F,R]=m.useState(null),[H,U]=m.useState([]),[B,q]=m.useState(""),[z,Q]=m.useState(!1),V=d.useShowTotal(),G=m.useCallback(async()=>{const{dbName:e,tableName:t}=M();return Q(!0),q(""),l([]),v(new Set),T(new Set),I(new Set),O(new Set),S(new Set),o.userApi.tableListByDataOwner({pageCurrent:k,pageSize:A,pageFilter:{dbName:e,tableName:t}}).then(e=>{R(e.total),U(e.records),Q(!1)}).catch(e=>{q(e.message),Q(!1)})},[k,A,M]);m.useEffect(()=>{let e=!1;return Q(!0),q(""),o.userApi.tableListByDataOwner({pageCurrent:k,pageSize:A}).then(t=>{e||(R(t.total),U(t.records),Q(!1))}).catch(t=>{e||(q(t.message),Q(!1))}),()=>e=!0},[k,A]);const Y=m.useCallback(e=>{S(new Set([e])),x(!0)},[]);return!z&&B?m.default.createElement("div",{className:"error"},B):m.default.createElement("div",{className:b.default.tableOwnerPage,style:{padding:"16px"}},m.default.createElement(r.default,{className:"alert-normal",message:e("message:业务负责人拥有数据表口径的解释、表描述、字段描述等业务元数据信息的维护权限"),showIcon:!0}),m.default.createElement(g.OwnerFilter,{form:P,onFinish:G}),m.default.createElement(_.BatchActions,{choicestIds:n,notChoicestIds:y,hiddenIds:w,showIds:L,successCallback:()=>G(),setTransformVisible:x,transformIds:N}),m.default.createElement(E.TransformTable,{visible:C,setVisible:x,transformIds:N,successCallback:G}),m.default.createElement(s.default,{loading:z,rowKey:"tableId",rowSelection:{columnWidth:36,type:"checkbox",selectedRowKeys:a,onChange:(e,t)=>{const a=new Set(e),i=new Set([...n].filter(e=>a.has(e))),r=new Set([...y].filter(e=>a.has(e))),u=new Set([...w].filter(e=>a.has(e))),s=new Set([...L].filter(e=>a.has(e))),o=new Set([...N,...a]);for(const e of t){if(!e)continue;const{tableId:t}=e;e.isChoicest?i.add(t):r.add(t),e.isHidden?u.add(t):s.add(t)}v(i),T(r),I(u),O(s),l(e),S(0===a.size?new Set:o)}},columns:[t,{title:e("detail:中文名"),dataIndex:"tableNameZh"},{title:e("common:创建时间"),width:160,dataIndex:"createTimeLabel"},{title:e("detail:最近修改时间"),width:160,dataIndex:"modifyTimeLabel"},{title:e("detail:关注用户数"),width:120,dataIndex:"likeCountLabel"},{title:e("detail:30天访问天数"),width:160,dataIndex:"last30DayVisitCountLabel"},{title:e("common:操作"),width:180,dataIndex:"action",render:(e,t)=>m.default.createElement(h.ColumnAction,{from:"data-owner",data:t,fetchList:G,transformSingleId:Y})}],dataSource:H,pagination:{...c.PAGE_CONFIG,pageSize:A,current:k,total:F,showTotal:V,onShowSizeChange:(e,t)=>{j(t),D(1),i.updateQuery({pageSize:10===t?null:t,pageCurrent:null})},onChange:e=>{D(e),i.updateQuery({pageCurrent:1===e?null:e})}}}))}},,,,function(e,t,a){"use strict";var l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=a(30),i=a(1170),r=a(259),u=a(331),s=a(26),o=l(a(0)),d=a(19);t.FormItemLayout={labelCol:{span:6},wrapperCol:{span:20}},t.TransformTable=e=>{const{visible:a,setVisible:l,transformIds:c,successCallback:m}=e,[f]=i.useForm(),[p,_]=o.useState([]),[h,g]=o.useState(!1),[E,b]=o.useState(!1),{t:v}=d.useTranslation();return o.default.createElement(s.Modal,{title:v("user:批量转交"),visible:a,onCancel:()=>{l(!1)},confirmLoading:E,afterClose:()=>{f.resetFields()},onOk:f.submit},o.default.createElement(s.Form,Object.assign({form:f},t.FormItemLayout,{onFinish:async({newOwner:e,reason:t})=>{try{b(!0),await u.userApi.transformDataOwner({dataIdList:[...c],newOwner:e,reason:t}),m(),s.message.success(v("user:转交成功")),l(!1)}catch(e){s.message.error(e.message)}b(!1)}}),o.default.createElement(s.Form.Item,{label:v("user:新业务负责人"),name:"newOwner",rules:[{required:!0,message:v("common:不能为空")}]},o.default.createElement(s.Select,{style:{width:"100%"},placeholder:v("message:请输入"),loading:h,filterOption:!1,showSearch:!0,allowClear:!0,onSearch:async e=>{if(!e)return void _([]);g(!0);const t=await r.v1CommonApi.searchStaff(e);_(t),g(!1)},onChange:e=>{const t=p.find(t=>e===t.account);_(t?[t]:[])}},p.map(({name:e,account:t})=>o.default.createElement(s.Select.Option,{key:t,value:t,label:e,disabled:t===n.getUsername()},e,"(",t,")")))),o.default.createElement(s.Form.Item,{name:"reason",label:v("common:转交原因")},o.default.createElement(s.Input,null))))}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=a(30),i=a(26),r=l(a(0)),u=a(19),s=a(2318),o=a(2319);t.UserTechOwnerPage=()=>{const{t:e}=u.useTranslation();return r.default.createElement(r.default.Fragment,null,r.default.createElement(i.Tabs,{animated:!1,onChange:e=>n.updateQuery({subTab:"hive"===e?null:e}),defaultActiveKey:n.getQuery("subTab")?null:n.getQuery("subTab")},r.default.createElement(i.Tabs.TabPane,{tab:r.default.createElement("span",{className:"tab-nav-text"},e("user:Hive表")),key:"hive"},r.default.createElement(s.UserTechOwnerHivePage,null)),r.default.createElement(i.Tabs.TabPane,{tab:r.default.createElement("span",{className:"tab-nav-text"},e("user:实时表")),key:"stream"},r.default.createElement(o.UserTechOwnerStreamPage,null))))}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=a(30),r=l(a(264)),u=l(a(220)),s=l(a(161)),o=a(331),d=a(89),c=a(98),m=n(a(0)),f=a(19),p=a(370),_=a(1225),h=a(1226),g=a(1227),E=l(a(282));t.UserTechOwnerHivePage=()=>{const{t:e}=f.useTranslation(),t=p.useTableName(),[a,l]=m.useState([]),[n,b]=m.useState(new Set),[v,y]=m.useState(new Set),[T,N]=m.useState(new Set),[S,C]=m.useState(new Set),[x]=u.default.useForm(),{getFieldsValue:w}=x,[I,L]=m.useState(i.getQuery("pageCurrent","number")||1),[O,P]=m.useState(i.getQuery("pageSize","number")||10),[M,k]=m.useState(null),[D,A]=m.useState([]),[j,F]=m.useState(""),[R,H]=m.useState(!1),U=d.useShowTotal(),B=m.useCallback(async()=>{const{dbName:e,tableName:t}=w();return H(!0),F(""),l([]),b(new Set),y(new Set),N(new Set),C(new Set),o.userApi.tableListByTechOwner({pageCurrent:I,pageSize:O,pageFilter:{dbName:e,tableName:t}}).then(e=>{k(e.total),A(e.records),H(!1)}).catch(e=>{F(e.message),H(!1)})},[I,O,w]);return m.useEffect(()=>{let e=!1;return H(!0),F(""),o.userApi.tableListByTechOwner({pageCurrent:I,pageSize:O}).then(t=>{e||(k(t.total),A(t.records),H(!1))}).catch(t=>{e||(F(t.message),H(!1))}),()=>e=!0},[I,O]),!R&&j?m.default.createElement("div",{className:"error"},j):m.default.createElement("div",{className:E.default.tableOwnerPage},m.default.createElement(r.default,{className:"alert-normal",message:e("message:资产负责人拥有数据表生命周期修改、数据表DDL维护以及数据资产管理等权限"),showIcon:!0}),m.default.createElement(g.OwnerFilter,{form:x,onFinish:B}),m.default.createElement(_.BatchActions,{choicestIds:n,notChoicestIds:v,hiddenIds:T,showIds:S,successCallback:()=>B()}),m.default.createElement(s.default,{loading:R,rowKey:"tableId",rowSelection:{columnWidth:35,type:"checkbox",selectedRowKeys:a,onChange:(e,t)=>{const a=new Set(e),i=new Set([...n].filter(e=>a.has(e))),r=new Set([...v].filter(e=>a.has(e))),u=new Set([...T].filter(e=>a.has(e))),s=new Set([...S].filter(e=>a.has(e)));for(const e of t){if(!e)continue;const{tableId:t}=e;e.isChoicest?i.add(t):r.add(t),e.isHidden?u.add(t):s.add(t)}b(i),y(r),N(u),C(s),l(e)}},columns:[t,{title:e("detail:中文名"),dataIndex:"tableNameZh"},{title:e("detail:创建时间"),width:160,dataIndex:"createTimeLabel"},{title:e("detail:最后修改时间"),width:160,dataIndex:"modifyTimeLabel"},{title:e("detail:93天访问天数"),width:160,dataIndex:"accessDays93dLabel"},{title:e("detail:直接下游表数"),width:140,dataIndex:"directDownstreamCountLabel"},{title:e("common:操作"),width:180,dataIndex:"action",render:(e,t)=>m.default.createElement(h.ColumnAction,{from:"tech-owner",data:t,fetchList:B})}],dataSource:D,pagination:{...c.PAGE_CONFIG,pageSize:O,current:I,total:M,showTotal:U,onShowSizeChange:(e,t)=>{P(t),L(1),i.updateQuery({pageSize:10===t?null:t,pageCurrent:null})},onChange:e=>{L(e),i.updateQuery({pageCurrent:1===e?null:e})}}}))}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=a(30),r=l(a(264)),u=l(a(220)),s=l(a(161)),o=a(331),d=a(89),c=a(98),m=n(a(0)),f=a(19),p=a(370),_=a(2320),h=a(2321),g=a(2322),E=l(a(282));t.UserTechOwnerStreamPage=()=>{const{t:e}=f.useTranslation(),t=p.useTableName(),[a,l]=m.useState([]),[n,b]=m.useState(new Set),[v,y]=m.useState(new Set),[T]=u.default.useForm(),{getFieldsValue:N}=T,[S,C]=m.useState(i.getQuery("pageCurrent","number")||1),[x,w]=m.useState(i.getQuery("pageSize","number")||10),[I,L]=m.useState(null),[O,P]=m.useState([]),[M,k]=m.useState(""),[D,A]=m.useState(!1),j=d.useShowTotal(),F=m.useCallback(async()=>{const{dbId:e,tableName:t}=N();return A(!0),k(""),l([]),b(new Set),y(new Set),o.userApi.tableListByTechOwnerStream({pageCurrent:S,pageSize:x,pageFilter:{dbId:e,tableName:t}}).then(e=>{L(e.total),P(e.records),A(!1)}).catch(e=>{k(e.message),A(!1)})},[S,x,N]);return m.useEffect(()=>{let e=!1;return A(!0),k(""),o.userApi.tableListByTechOwnerStream({pageCurrent:S,pageSize:x,pageFilter:{}}).then(t=>{e||(L(t.total),P(t.records),A(!1))}).catch(t=>{e||(k(t.message),A(!1))}),()=>e=!0},[S,x]),!D&&M?m.default.createElement("div",{className:"error"},M):m.default.createElement("div",{className:E.default.tableOwnerPage},m.default.createElement(r.default,{className:"alert-normal",message:e("message:资产负责人默认为表创建人，有编辑、删除等权限"),showIcon:!0}),m.default.createElement(g.OwnerFilter,{form:T,onFinish:F}),m.default.createElement(_.BatchActions,{choicestIds:n,notChoicestIds:v,successCallback:()=>F()}),m.default.createElement(s.default,{loading:D,rowKey:"tableId",rowSelection:{columnWidth:35,type:"checkbox",selectedRowKeys:a,onChange:(e,t)=>{const a=new Set(e),i=new Set([...n].filter(e=>a.has(e))),r=new Set([...v].filter(e=>a.has(e)));for(const e of t){if(!e)continue;const{tableId:t}=e;e.isChoicest?i.add(t):r.add(t)}b(i),y(r),l(e)}},columns:[t,{title:e("detail:中文名"),dataIndex:"tableNameZh"},{title:e("detail:创建时间"),width:160,dataIndex:"createTimeLabel"},{title:e("detail:最后修改时间"),width:160,dataIndex:"modifyTimeLabel"},{title:e("common:操作"),width:160,dataIndex:"action",render:(e,t)=>m.default.createElement(h.ColumnAction,{from:"tech-owner",data:t,fetchList:F})}],dataSource:O,pagination:{...c.PAGE_CONFIG,pageSize:x,current:S,total:I,showTotal:j,onShowSizeChange:(e,t)=>{w(t),C(1),i.updateQuery({pageSize:10===t?null:t,pageCurrent:null})},onChange:e=>{C(e),i.updateQuery({pageCurrent:1===e?null:e})}}}))}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=l(a(82)),r=l(a(361)),u=a(330),s=a(406),o=a(26),d=n(a(0)),c=a(19),m=l(a(282));t.BatchActions=e=>{const{successCallback:t,choicestIds:a,notChoicestIds:l}=e,{t:n}=c.useTranslation(),[f,p]=d.useState(!1),[_,h]=d.useState(!1),g=s.useAddChoicestResponse();return d.default.createElement("div",{className:m.default.actions},l.size?d.default.createElement(r.default,{title:n("message:确认将选中的表添加到精品表？"),onConfirm:async()=>{try{p(!0);const e=await u.tableMetaApi.addStreamChoicest([...l]);g(e),e&&(o.message.success(n("common:已加精")),t())}catch(e){o.message.error(e.message)}p(!1)},okText:n("是"),cancelText:n("否")},d.default.createElement(i.default,{loading:f},n("category:批量加精"),"(",l.size,")")):d.default.createElement(i.default,{disabled:!0},n("category:批量加精")),a.size?d.default.createElement(r.default,{title:n("message:确认将选中的表从精品表中移除？"),onConfirm:async()=>{try{h(!0),await u.tableMetaApi.removeStreamChoicest([...a]),o.message.success(n("common:已取消加精")),t()}catch(e){o.message.error(e.message)}h(!1)},okText:n("是"),cancelText:n("否")},d.default.createElement(i.default,{loading:_},n("category:批量移除加精"),"(",a.size,")")):d.default.createElement(i.default,{disabled:!0},n("category:批量移除加精")))}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=l(a(82)),r=a(330),u=a(406),s=a(26),o=a(120),d=n(a(0)),c=a(19),m=l(a(282));t.ColumnAction=e=>{const{t:t}=c.useTranslation(),{from:a,data:l,fetchList:n}=e,{tableId:f}=l,{dbName:p,tableName:_}=l,[h,g]=d.useState(!1),[E,b]=d.useState(!1),v=u.useAddChoicestResponse();return d.default.createElement("div",{className:m.default.columnActions},l.isChoicest?d.default.createElement(i.default,{type:"link",loading:h,onClick:async()=>{g(!0);try{await r.tableMetaApi.removeStreamChoicest([f]),g(!1),s.message.success(t("common:已取消加精")),await n()}catch(e){g(!1),s.message.error(e.message)}}},t("category:取消加精")):d.default.createElement(i.default,{type:"link",loading:h,onClick:async()=>{g(!0);try{const e=await r.tableMetaApi.addStreamChoicest([f]);g(!1),1===e.failCount?v(e):(s.message.success(t("common:已加精")),await n())}catch(e){g(!1),s.message.error(e.message)}}},t("category:加精")),l.isHidden?d.default.createElement(i.default,{type:"link",loading:E,onClick:async()=>{b(!0);try{await r.tableMetaApi.show([f]),b(!1),await n(),s.message.success("message:显示成功, 该表将对用户开放搜索查看")}catch(e){b(!1),s.message.error(e.message)}}},t("common:显示")):d.default.createElement(s.Tooltip,{title:d.default.createElement("div",null,"由于鼓励数据共享，不建议隐藏库表，如有特殊情况请联系"," ",d.default.createElement(o.DChat,{user:{account:"sophialixiaofei",name:"李晓菲"}}))},d.default.createElement(i.default,{type:"link",loading:E,disabled:!0,onClick:async()=>{b(!0);try{await r.tableMetaApi.hidden([f]),b(!1),await n(),s.message.success("隐藏成功, 用户将无法搜索查看该表信息")}catch(e){b(!1),s.message.error(e.message)}}},t("common:隐藏"))))}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=l(a(220)),r=l(a(162)),u=l(a(163)),s=a(647),o=n(a(0)),d=a(19),c=l(a(282));t.OwnerFilter=e=>{const{t:t}=d.useTranslation(),{form:a}=e,[l,n]=o.useState(void 0),{dbList:m}=s.useDbStreamOptions(l);return o.default.createElement(i.default,{className:c.default.filter,layout:"inline",form:a,onFinish:e.onFinish},o.default.createElement(i.default.Item,{label:t("detail:库名"),name:"dbId"},o.default.createElement(u.default,{autoFocus:!0,showSearch:!0,onSearch:e=>n(e),placeholder:t("common:请选择"),allowClear:!0,onChange:a.submit},m.map(e=>o.default.createElement(u.default.Option,{key:e.id,value:e.id},e.name)))),o.default.createElement(i.default.Item,{label:t("category:表名"),name:"tableName"},o.default.createElement(r.default,{placeholder:t("message:请输入"),allowClear:!0,onPressEnter:a.submit,onChange:e=>{e.target.value||a.submit()}})))}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=a(30),i=a(26),r=l(a(0)),u=a(19),s=a(781),o=a(2324),d=a(2325),c=l(a(782));t.UserRecentPage=()=>{const{t:e}=u.useTranslation();return r.default.createElement("div",{className:c.default.recentPage},r.default.createElement(s.UserHeader,{title:e("common:我最近浏览的表")}),r.default.createElement(i.Tabs,{animated:!1,onChange:e=>n.updateQuery({tab:"hive"===e?null:e}),defaultActiveKey:"hive"==n.getQuery("tab")?null:n.getQuery("tab")},r.default.createElement(i.Tabs.TabPane,{tab:r.default.createElement("span",{className:"tab-nav-text"},e("user:Hive表")),key:"hive"},r.default.createElement(o.UserRecentHivePage,null)),r.default.createElement(i.Tabs.TabPane,{tab:r.default.createElement("span",{className:"tab-nav-text"},e("user:实时表")),key:"stream"},r.default.createElement(d.UserRecentStreamPage,null))))}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=a(30),r=l(a(161)),u=a(331),s=a(89),o=a(98),d=n(a(0)),c=a(19),m=a(370),f=a(551),p=l(a(782));t.UserRecentHivePage=()=>{const{t:e}=c.useTranslation(),t=m.useTableName(),a=f.useDataOwner(),[l,n]=d.useState(i.getQuery("pageCurrent","number")||1),[_,h]=d.useState(i.getQuery("pageSize","number")||10),[g,E]=d.useState(null),[b,v]=d.useState([]),[y,T]=d.useState(""),[N,S]=d.useState(!1),C=s.useShowTotal();return d.useEffect(()=>{let e=!1;return S(!0),T(""),u.userApi.tableListByRecentVisit({pageCurrent:l,pageSize:_}).then(t=>{e||(E(t.total),v(t.records),S(!1))}).catch(t=>{e||(T(t.message),S(!1))}),()=>e=!0},[l,_]),d.default.createElement(d.default.Fragment,null,!N&&y?d.default.createElement("div",{className:"error"},y):d.default.createElement("div",{className:p.default.content},d.default.createElement(r.default,{loading:N,rowKey:"tableId",columns:[t,{title:e("detail:中文名"),width:180,dataIndex:"tableNameZh"},a,{title:e("detail:浏览时间"),width:160,dataIndex:"recentViewTimeLabel"},{title:e("detail:创建时间"),width:160,dataIndex:"createTimeLabel"},{title:e("detail:最近修改时间"),width:160,dataIndex:"modifyTimeLabel"},{title:e("detail:表描述"),dataIndex:"description"}],dataSource:b,pagination:{...o.PAGE_CONFIG,pageSize:_,current:l,total:g,showTotal:C,onShowSizeChange:(e,t)=>{h(t),n(1),i.updateQuery({pageSize:10===t?null:t,pageCurrent:null})},onChange:e=>{n(e),i.updateQuery({pageCurrent:1===e?null:e})}}})))}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=a(30),r=l(a(161)),u=a(331),s=a(89),o=a(98),d=n(a(0)),c=a(19),m=a(370),f=a(551),p=l(a(782));t.UserRecentStreamPage=()=>{const{t:e}=c.useTranslation(),t=m.useTableName(),a=f.useDataOwner(),[l,n]=d.useState(i.getQuery("pageCurrent","number")||1),[_,h]=d.useState(i.getQuery("pageSize","number")||10),[g,E]=d.useState(null),[b,v]=d.useState([]),[y,T]=d.useState(""),[N,S]=d.useState(!1),C=s.useShowTotal();return d.useEffect(()=>{let e=!1;return S(!0),T(""),u.userApi.tableListByRecentStreamVisit({pageCurrent:l,pageSize:_}).then(t=>{e||(E(t.total),v(t.records),S(!1))}).catch(t=>{e||(T(t.message),S(!1))}),()=>e=!0},[l,_]),d.default.createElement(d.default.Fragment,null,!N&&y?d.default.createElement("div",{className:"error"},y):d.default.createElement("div",{className:p.default.content},d.default.createElement(r.default,{loading:N,rowKey:"tableId",columns:[t,{title:e("detail:中文名"),width:180,dataIndex:"tableNameZh"},a,{title:e("detail:浏览时间"),width:160,dataIndex:"recentViewTimeLabel"},{title:e("detail:创建时间"),width:160,dataIndex:"createTimeLabel"},{title:e("detail:最近修改时间"),width:160,dataIndex:"modifyTimeLabel"}],dataSource:b,pagination:{...o.PAGE_CONFIG,pageSize:_,current:l,total:g,showTotal:C,onShowSizeChange:(e,t)=>{h(t),n(1),i.updateQuery({pageSize:10===t?null:t,pageCurrent:null})},onChange:e=>{n(e),i.updateQuery({pageCurrent:1===e?null:e})}}})))}},function(e,t,a){"use strict";var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=l(a(4)),i=a(26),r=l(a(0)),u=a(19),s=a(117),o=l(a(2327));t.UserSidebar=e=>{const{pathname:t}=e,{t:a}=u.useTranslation();return r.default.createElement("div",{className:n.default(o.default.sidebar)},r.default.createElement("div",{className:o.default.sidebarContent},r.default.createElement("div",{className:o.default.nav},r.default.createElement(i.Menu,{selectedKeys:[t],defaultOpenKeys:["owner","care"],mode:"inline"},r.default.createElement(i.Menu.SubMenu,{key:"owner",title:r.default.createElement(r.default.Fragment,null,r.default.createElement(i.IconFont,{type:"icon-person"}),r.default.createElement("span",null,a("common:我拥有的数据")))},r.default.createElement(i.Menu.Item,{key:"/user/table/owner"},r.default.createElement(s.Link,{to:{pathname:"/user/table/owner"}},a("common:我拥有的表"))),r.default.createElement(i.Menu.Item,{key:"/user/album/owner"},r.default.createElement(s.Link,{to:{pathname:"/user/album/owner"}},a("common:我拥有的专辑")))),r.default.createElement(i.Menu.SubMenu,{key:"care",title:r.default.createElement(r.default.Fragment,null,r.default.createElement(i.IconFont,{type:"icon-project"}),r.default.createElement("span",null,a("common:我关注的数据")))},r.default.createElement(i.Menu.Item,{key:"/user/table/care"},r.default.createElement(s.Link,{to:{pathname:"/user/table/care"}},a("common:我关注的表"))),r.default.createElement(i.Menu.Item,{key:"/user/album/care"},r.default.createElement(s.Link,{to:{pathname:"/user/album/care"}},a("common:我关注的专辑"))),r.default.createElement(i.Menu.Item,{key:"/user/table/recent"},r.default.createElement(s.Link,{to:{pathname:"/user/table/recent"}},a("common:我最近浏览的表"))))))))}},function(e,t,a){e.exports={sidebar:"style_sidebar_iq2lv","sidebar-content":"style_sidebar-content_18YR6",sidebarContent:"style_sidebar-content_18YR6",nav:"style_nav_2Y1P4"}},function(e,t,a){e.exports={router:"style_router_3wgFI","router-content":"style_router-content_13Poe",routerContent:"style_router-content_13Poe","router-group":"style_router-group_3INSs",routerGroup:"style_router-group_3INSs","router-page":"style_router-page_3ANUA",routerPage:"style_router-page_3ANUA"}},function(e,t,a){}]));